function OO(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function RR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var NR={exports:{}},hv={},IR={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf=Symbol.for("react.element"),FO=Symbol.for("react.portal"),BO=Symbol.for("react.fragment"),zO=Symbol.for("react.strict_mode"),VO=Symbol.for("react.profiler"),HO=Symbol.for("react.provider"),jO=Symbol.for("react.context"),GO=Symbol.for("react.forward_ref"),WO=Symbol.for("react.suspense"),XO=Symbol.for("react.memo"),YO=Symbol.for("react.lazy"),RT=Symbol.iterator;function qO(n){return n===null||typeof n!="object"?null:(n=RT&&n[RT]||n["@@iterator"],typeof n=="function"?n:null)}var LR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},DR=Object.assign,kR={};function Qu(n,e,t){this.props=n,this.context=e,this.refs=kR,this.updater=t||LR}Qu.prototype.isReactComponent={};Qu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Qu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function UR(){}UR.prototype=Qu.prototype;function hw(n,e,t){this.props=n,this.context=e,this.refs=kR,this.updater=t||LR}var dw=hw.prototype=new UR;dw.constructor=hw;DR(dw,Qu.prototype);dw.isPureReactComponent=!0;var NT=Array.isArray,OR=Object.prototype.hasOwnProperty,fw={current:null},FR={key:!0,ref:!0,__self:!0,__source:!0};function BR(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)OR.call(e,i)&&!FR.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Lf,type:n,key:s,ref:o,props:r,_owner:fw.current}}function KO(n,e){return{$$typeof:Lf,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function pw(n){return typeof n=="object"&&n!==null&&n.$$typeof===Lf}function ZO(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var IT=/\/+/g;function Ex(n,e){return typeof n=="object"&&n!==null&&n.key!=null?ZO(""+n.key):e.toString(36)}function yg(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Lf:case FO:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+Ex(o,0):i,NT(r)?(t="",n!=null&&(t=n.replace(IT,"$&/")+"/"),yg(r,e,t,"",function(c){return c})):r!=null&&(pw(r)&&(r=KO(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(IT,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",NT(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+Ex(s,a);o+=yg(s,e,t,l,r)}else if(l=qO(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+Ex(s,a++),o+=yg(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function im(n,e,t){if(n==null)return n;var i=[],r=0;return yg(n,i,"","",function(s){return e.call(t,s,r++)}),i}function $O(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Oi={current:null},xg={transition:null},QO={ReactCurrentDispatcher:Oi,ReactCurrentBatchConfig:xg,ReactCurrentOwner:fw};function zR(){throw Error("act(...) is not supported in production builds of React.")}Pt.Children={map:im,forEach:function(n,e,t){im(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return im(n,function(){e++}),e},toArray:function(n){return im(n,function(e){return e})||[]},only:function(n){if(!pw(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Pt.Component=Qu;Pt.Fragment=BO;Pt.Profiler=VO;Pt.PureComponent=hw;Pt.StrictMode=zO;Pt.Suspense=WO;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QO;Pt.act=zR;Pt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=DR({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=fw.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)OR.call(e,l)&&!FR.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Lf,type:n.type,key:r,ref:s,props:i,_owner:o}};Pt.createContext=function(n){return n={$$typeof:jO,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:HO,_context:n},n.Consumer=n};Pt.createElement=BR;Pt.createFactory=function(n){var e=BR.bind(null,n);return e.type=n,e};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(n){return{$$typeof:GO,render:n}};Pt.isValidElement=pw;Pt.lazy=function(n){return{$$typeof:YO,_payload:{_status:-1,_result:n},_init:$O}};Pt.memo=function(n,e){return{$$typeof:XO,type:n,compare:e===void 0?null:e}};Pt.startTransition=function(n){var e=xg.transition;xg.transition={};try{n()}finally{xg.transition=e}};Pt.unstable_act=zR;Pt.useCallback=function(n,e){return Oi.current.useCallback(n,e)};Pt.useContext=function(n){return Oi.current.useContext(n)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(n){return Oi.current.useDeferredValue(n)};Pt.useEffect=function(n,e){return Oi.current.useEffect(n,e)};Pt.useId=function(){return Oi.current.useId()};Pt.useImperativeHandle=function(n,e,t){return Oi.current.useImperativeHandle(n,e,t)};Pt.useInsertionEffect=function(n,e){return Oi.current.useInsertionEffect(n,e)};Pt.useLayoutEffect=function(n,e){return Oi.current.useLayoutEffect(n,e)};Pt.useMemo=function(n,e){return Oi.current.useMemo(n,e)};Pt.useReducer=function(n,e,t){return Oi.current.useReducer(n,e,t)};Pt.useRef=function(n){return Oi.current.useRef(n)};Pt.useState=function(n){return Oi.current.useState(n)};Pt.useSyncExternalStore=function(n,e,t){return Oi.current.useSyncExternalStore(n,e,t)};Pt.useTransition=function(){return Oi.current.useTransition()};Pt.version="18.3.1";IR.exports=Pt;var F=IR.exports;const VR=RR(F),JO=OO({__proto__:null,default:VR},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eF=F,tF=Symbol.for("react.element"),nF=Symbol.for("react.fragment"),iF=Object.prototype.hasOwnProperty,rF=eF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sF={key:!0,ref:!0,__self:!0,__source:!0};function HR(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)iF.call(e,i)&&!sF.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:tF,type:n,key:s,ref:o,props:r,_owner:rF.current}}hv.Fragment=nF;hv.jsx=HR;hv.jsxs=HR;NR.exports=hv;var E=NR.exports,y1={},jR={exports:{}},Pr={},GR={exports:{}},WR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,G){var W=D.length;D.push(G);e:for(;0<W;){var ee=W-1>>>1,de=D[ee];if(0<r(de,G))D[ee]=G,D[W]=de,W=ee;else break e}}function t(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var G=D[0],W=D.pop();if(W!==G){D[0]=W;e:for(var ee=0,de=D.length,Le=de>>>1;ee<Le;){var ie=2*(ee+1)-1,pe=D[ie],be=ie+1,_e=D[be];if(0>r(pe,W))be<de&&0>r(_e,pe)?(D[ee]=_e,D[be]=W,ee=be):(D[ee]=pe,D[ie]=W,ee=ie);else if(be<de&&0>r(_e,W))D[ee]=_e,D[be]=W,ee=be;else break e}}return G}function r(D,G){var W=D.sortIndex-G.sortIndex;return W!==0?W:D.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,m=!1,v=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var G=t(c);G!==null;){if(G.callback===null)i(c);else if(G.startTime<=D)i(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(c)}}function b(D){if(x=!1,w(D),!v)if(t(l)!==null)v=!0,Q(A);else{var G=t(c);G!==null&&te(b,G.startTime-D)}}function A(D,G){v=!1,x&&(x=!1,g(L),L=-1),m=!0;var W=p;try{for(w(G),f=t(l);f!==null&&(!(f.expirationTime>G)||D&&!U());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,p=f.priorityLevel;var de=ee(f.expirationTime<=G);G=n.unstable_now(),typeof de=="function"?f.callback=de:f===t(l)&&i(l),w(G)}else i(l);f=t(l)}if(f!==null)var Le=!0;else{var ie=t(c);ie!==null&&te(b,ie.startTime-G),Le=!1}return Le}finally{f=null,p=W,m=!1}}var P=!1,I=null,L=-1,R=5,C=-1;function U(){return!(n.unstable_now()-C<R)}function j(){if(I!==null){var D=n.unstable_now();C=D;var G=!0;try{G=I(!0,D)}finally{G?X():(P=!1,I=null)}}else P=!1}var X;if(typeof S=="function")X=function(){S(j)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,se=J.port2;J.port1.onmessage=j,X=function(){se.postMessage(null)}}else X=function(){_(j,0)};function Q(D){I=D,P||(P=!0,X())}function te(D,G){L=_(function(){D(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,Q(A))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var W=p;p=G;try{return D()}finally{p=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,G){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var W=p;p=D;try{return G()}finally{p=W}},n.unstable_scheduleCallback=function(D,G,W){var ee=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ee+W:ee):W=ee,D){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=W+de,D={id:h++,callback:G,priorityLevel:D,startTime:W,expirationTime:de,sortIndex:-1},W>ee?(D.sortIndex=W,e(c,D),t(l)===null&&D===t(c)&&(x?(g(L),L=-1):x=!0,te(b,W-ee))):(D.sortIndex=de,e(l,D),v||m||(v=!0,Q(A))),D},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(D){var G=p;return function(){var W=p;p=G;try{return D.apply(this,arguments)}finally{p=W}}}})(WR);GR.exports=WR;var oF=GR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aF=F,Er=oF;function we(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XR=new Set,Od={};function nc(n,e){Nu(n,e),Nu(n+"Capture",e)}function Nu(n,e){for(Od[n]=e,n=0;n<e.length;n++)XR.add(e[n])}var Mo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x1=Object.prototype.hasOwnProperty,lF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LT={},DT={};function cF(n){return x1.call(DT,n)?!0:x1.call(LT,n)?!1:lF.test(n)?DT[n]=!0:(LT[n]=!0,!1)}function uF(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function hF(n,e,t,i){if(e===null||typeof e>"u"||uF(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fi(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ai={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ai[n]=new Fi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ai[e]=new Fi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ai[n]=new Fi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ai[n]=new Fi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ai[n]=new Fi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ai[n]=new Fi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ai[n]=new Fi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ai[n]=new Fi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ai[n]=new Fi(n,5,!1,n.toLowerCase(),null,!1,!1)});var mw=/[\-:]([a-z])/g;function gw(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(mw,gw);ai[e]=new Fi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(mw,gw);ai[e]=new Fi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(mw,gw);ai[e]=new Fi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ai[n]=new Fi(n,1,!1,n.toLowerCase(),null,!1,!1)});ai.xlinkHref=new Fi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ai[n]=new Fi(n,1,!1,n.toLowerCase(),null,!0,!0)});function vw(n,e,t,i){var r=ai.hasOwnProperty(e)?ai[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hF(e,t,r,i)&&(t=null),i||r===null?cF(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Do=aF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rm=Symbol.for("react.element"),Zc=Symbol.for("react.portal"),$c=Symbol.for("react.fragment"),yw=Symbol.for("react.strict_mode"),_1=Symbol.for("react.profiler"),YR=Symbol.for("react.provider"),qR=Symbol.for("react.context"),xw=Symbol.for("react.forward_ref"),S1=Symbol.for("react.suspense"),w1=Symbol.for("react.suspense_list"),_w=Symbol.for("react.memo"),ta=Symbol.for("react.lazy"),KR=Symbol.for("react.offscreen"),kT=Symbol.iterator;function Ph(n){return n===null||typeof n!="object"?null:(n=kT&&n[kT]||n["@@iterator"],typeof n=="function"?n:null)}var vn=Object.assign,bx;function Jh(n){if(bx===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);bx=e&&e[1]||""}return`
`+bx+n}var Tx=!1;function Ax(n,e){if(!n||Tx)return"";Tx=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Tx=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Jh(n):""}function dF(n){switch(n.tag){case 5:return Jh(n.type);case 16:return Jh("Lazy");case 13:return Jh("Suspense");case 19:return Jh("SuspenseList");case 0:case 2:case 15:return n=Ax(n.type,!1),n;case 11:return n=Ax(n.type.render,!1),n;case 1:return n=Ax(n.type,!0),n;default:return""}}function M1(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $c:return"Fragment";case Zc:return"Portal";case _1:return"Profiler";case yw:return"StrictMode";case S1:return"Suspense";case w1:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case qR:return(n.displayName||"Context")+".Consumer";case YR:return(n._context.displayName||"Context")+".Provider";case xw:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case _w:return e=n.displayName||null,e!==null?e:M1(n.type)||"Memo";case ta:e=n._payload,n=n._init;try{return M1(n(e))}catch{}}return null}function fF(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M1(e);case 8:return e===yw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ba(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ZR(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pF(n){var e=ZR(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function sm(n){n._valueTracker||(n._valueTracker=pF(n))}function $R(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=ZR(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Bg(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function E1(n,e){var t=e.checked;return vn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function UT(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=ba(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function QR(n,e){e=e.checked,e!=null&&vw(n,"checked",e,!1)}function b1(n,e){QR(n,e);var t=ba(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?T1(n,e.type,t):e.hasOwnProperty("defaultValue")&&T1(n,e.type,ba(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function OT(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function T1(n,e,t){(e!=="number"||Bg(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var ed=Array.isArray;function Su(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+ba(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function A1(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(we(91));return vn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function FT(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(we(92));if(ed(t)){if(1<t.length)throw Error(we(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ba(t)}}function JR(n,e){var t=ba(e.value),i=ba(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function BT(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function eN(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function C1(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?eN(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var om,tN=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(om=om||document.createElement("div"),om.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=om.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Fd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var hd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mF=["Webkit","ms","Moz","O"];Object.keys(hd).forEach(function(n){mF.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),hd[e]=hd[n]})});function nN(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||hd.hasOwnProperty(n)&&hd[n]?(""+e).trim():e+"px"}function iN(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=nN(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var gF=vn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function P1(n,e){if(e){if(gF[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(we(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(we(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(we(61))}if(e.style!=null&&typeof e.style!="object")throw Error(we(62))}}function R1(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var N1=null;function Sw(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var I1=null,wu=null,Mu=null;function zT(n){if(n=Uf(n)){if(typeof I1!="function")throw Error(we(280));var e=n.stateNode;e&&(e=gv(e),I1(n.stateNode,n.type,e))}}function rN(n){wu?Mu?Mu.push(n):Mu=[n]:wu=n}function sN(){if(wu){var n=wu,e=Mu;if(Mu=wu=null,zT(n),e)for(n=0;n<e.length;n++)zT(e[n])}}function oN(n,e){return n(e)}function aN(){}var Cx=!1;function lN(n,e,t){if(Cx)return n(e,t);Cx=!0;try{return oN(n,e,t)}finally{Cx=!1,(wu!==null||Mu!==null)&&(aN(),sN())}}function Bd(n,e){var t=n.stateNode;if(t===null)return null;var i=gv(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(we(231,e,typeof t));return t}var L1=!1;if(Mo)try{var Rh={};Object.defineProperty(Rh,"passive",{get:function(){L1=!0}}),window.addEventListener("test",Rh,Rh),window.removeEventListener("test",Rh,Rh)}catch{L1=!1}function vF(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(h){this.onError(h)}}var dd=!1,zg=null,Vg=!1,D1=null,yF={onError:function(n){dd=!0,zg=n}};function xF(n,e,t,i,r,s,o,a,l){dd=!1,zg=null,vF.apply(yF,arguments)}function _F(n,e,t,i,r,s,o,a,l){if(xF.apply(this,arguments),dd){if(dd){var c=zg;dd=!1,zg=null}else throw Error(we(198));Vg||(Vg=!0,D1=c)}}function ic(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function cN(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function VT(n){if(ic(n)!==n)throw Error(we(188))}function SF(n){var e=n.alternate;if(!e){if(e=ic(n),e===null)throw Error(we(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return VT(r),n;if(s===i)return VT(r),e;s=s.sibling}throw Error(we(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(we(189))}}if(t.alternate!==i)throw Error(we(190))}if(t.tag!==3)throw Error(we(188));return t.stateNode.current===t?n:e}function uN(n){return n=SF(n),n!==null?hN(n):null}function hN(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=hN(n);if(e!==null)return e;n=n.sibling}return null}var dN=Er.unstable_scheduleCallback,HT=Er.unstable_cancelCallback,wF=Er.unstable_shouldYield,MF=Er.unstable_requestPaint,Rn=Er.unstable_now,EF=Er.unstable_getCurrentPriorityLevel,ww=Er.unstable_ImmediatePriority,fN=Er.unstable_UserBlockingPriority,Hg=Er.unstable_NormalPriority,bF=Er.unstable_LowPriority,pN=Er.unstable_IdlePriority,dv=null,Bs=null;function TF(n){if(Bs&&typeof Bs.onCommitFiberRoot=="function")try{Bs.onCommitFiberRoot(dv,n,void 0,(n.current.flags&128)===128)}catch{}}var hs=Math.clz32?Math.clz32:PF,AF=Math.log,CF=Math.LN2;function PF(n){return n>>>=0,n===0?32:31-(AF(n)/CF|0)|0}var am=64,lm=4194304;function td(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function jg(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=td(a):(s&=o,s!==0&&(i=td(s)))}else o=t&~r,o!==0?i=td(o):s!==0&&(i=td(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-hs(e),r=1<<t,i|=n[t],e&=~r;return i}function RF(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NF(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-hs(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=RF(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function k1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function mN(){var n=am;return am<<=1,!(am&4194240)&&(am=64),n}function Px(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Df(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-hs(e),n[e]=t}function IF(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-hs(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function Mw(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-hs(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Gt=0;function gN(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var vN,Ew,yN,xN,_N,U1=!1,cm=[],fa=null,pa=null,ma=null,zd=new Map,Vd=new Map,ra=[],LF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jT(n,e){switch(n){case"focusin":case"focusout":fa=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":ma=null;break;case"pointerover":case"pointerout":zd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vd.delete(e.pointerId)}}function Nh(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Uf(e),e!==null&&Ew(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function DF(n,e,t,i,r){switch(e){case"focusin":return fa=Nh(fa,n,e,t,i,r),!0;case"dragenter":return pa=Nh(pa,n,e,t,i,r),!0;case"mouseover":return ma=Nh(ma,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return zd.set(s,Nh(zd.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Vd.set(s,Nh(Vd.get(s)||null,n,e,t,i,r)),!0}return!1}function SN(n){var e=bl(n.target);if(e!==null){var t=ic(e);if(t!==null){if(e=t.tag,e===13){if(e=cN(t),e!==null){n.blockedOn=e,_N(n.priority,function(){yN(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function _g(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=O1(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);N1=i,t.target.dispatchEvent(i),N1=null}else return e=Uf(t),e!==null&&Ew(e),n.blockedOn=t,!1;e.shift()}return!0}function GT(n,e,t){_g(n)&&t.delete(e)}function kF(){U1=!1,fa!==null&&_g(fa)&&(fa=null),pa!==null&&_g(pa)&&(pa=null),ma!==null&&_g(ma)&&(ma=null),zd.forEach(GT),Vd.forEach(GT)}function Ih(n,e){n.blockedOn===e&&(n.blockedOn=null,U1||(U1=!0,Er.unstable_scheduleCallback(Er.unstable_NormalPriority,kF)))}function Hd(n){function e(r){return Ih(r,n)}if(0<cm.length){Ih(cm[0],n);for(var t=1;t<cm.length;t++){var i=cm[t];i.blockedOn===n&&(i.blockedOn=null)}}for(fa!==null&&Ih(fa,n),pa!==null&&Ih(pa,n),ma!==null&&Ih(ma,n),zd.forEach(e),Vd.forEach(e),t=0;t<ra.length;t++)i=ra[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<ra.length&&(t=ra[0],t.blockedOn===null);)SN(t),t.blockedOn===null&&ra.shift()}var Eu=Do.ReactCurrentBatchConfig,Gg=!0;function UF(n,e,t,i){var r=Gt,s=Eu.transition;Eu.transition=null;try{Gt=1,bw(n,e,t,i)}finally{Gt=r,Eu.transition=s}}function OF(n,e,t,i){var r=Gt,s=Eu.transition;Eu.transition=null;try{Gt=4,bw(n,e,t,i)}finally{Gt=r,Eu.transition=s}}function bw(n,e,t,i){if(Gg){var r=O1(n,e,t,i);if(r===null)Bx(n,e,i,Wg,t),jT(n,i);else if(DF(r,n,e,t,i))i.stopPropagation();else if(jT(n,i),e&4&&-1<LF.indexOf(n)){for(;r!==null;){var s=Uf(r);if(s!==null&&vN(s),s=O1(n,e,t,i),s===null&&Bx(n,e,i,Wg,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Bx(n,e,i,null,t)}}var Wg=null;function O1(n,e,t,i){if(Wg=null,n=Sw(i),n=bl(n),n!==null)if(e=ic(n),e===null)n=null;else if(t=e.tag,t===13){if(n=cN(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Wg=n,null}function wN(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EF()){case ww:return 1;case fN:return 4;case Hg:case bF:return 16;case pN:return 536870912;default:return 16}default:return 16}}var aa=null,Tw=null,Sg=null;function MN(){if(Sg)return Sg;var n,e=Tw,t=e.length,i,r="value"in aa?aa.value:aa.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return Sg=r.slice(n,1<i?1-i:void 0)}function wg(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function um(){return!0}function WT(){return!1}function Rr(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?um:WT,this.isPropagationStopped=WT,this}return vn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=um)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=um)},persist:function(){},isPersistent:um}),e}var Ju={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Aw=Rr(Ju),kf=vn({},Ju,{view:0,detail:0}),FF=Rr(kf),Rx,Nx,Lh,fv=vn({},kf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cw,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Lh&&(Lh&&n.type==="mousemove"?(Rx=n.screenX-Lh.screenX,Nx=n.screenY-Lh.screenY):Nx=Rx=0,Lh=n),Rx)},movementY:function(n){return"movementY"in n?n.movementY:Nx}}),XT=Rr(fv),BF=vn({},fv,{dataTransfer:0}),zF=Rr(BF),VF=vn({},kf,{relatedTarget:0}),Ix=Rr(VF),HF=vn({},Ju,{animationName:0,elapsedTime:0,pseudoElement:0}),jF=Rr(HF),GF=vn({},Ju,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),WF=Rr(GF),XF=vn({},Ju,{data:0}),YT=Rr(XF),YF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZF(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=KF[n])?!!e[n]:!1}function Cw(){return ZF}var $F=vn({},kf,{key:function(n){if(n.key){var e=YF[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=wg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?qF[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cw,charCode:function(n){return n.type==="keypress"?wg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?wg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),QF=Rr($F),JF=vn({},fv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qT=Rr(JF),eB=vn({},kf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cw}),tB=Rr(eB),nB=vn({},Ju,{propertyName:0,elapsedTime:0,pseudoElement:0}),iB=Rr(nB),rB=vn({},fv,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),sB=Rr(rB),oB=[9,13,27,32],Pw=Mo&&"CompositionEvent"in window,fd=null;Mo&&"documentMode"in document&&(fd=document.documentMode);var aB=Mo&&"TextEvent"in window&&!fd,EN=Mo&&(!Pw||fd&&8<fd&&11>=fd),KT=" ",ZT=!1;function bN(n,e){switch(n){case"keyup":return oB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TN(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qc=!1;function lB(n,e){switch(n){case"compositionend":return TN(e);case"keypress":return e.which!==32?null:(ZT=!0,KT);case"textInput":return n=e.data,n===KT&&ZT?null:n;default:return null}}function cB(n,e){if(Qc)return n==="compositionend"||!Pw&&bN(n,e)?(n=MN(),Sg=Tw=aa=null,Qc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return EN&&e.locale!=="ko"?null:e.data;default:return null}}var uB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $T(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!uB[n.type]:e==="textarea"}function AN(n,e,t,i){rN(i),e=Xg(e,"onChange"),0<e.length&&(t=new Aw("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var pd=null,jd=null;function hB(n){FN(n,0)}function pv(n){var e=tu(n);if($R(e))return n}function dB(n,e){if(n==="change")return e}var CN=!1;if(Mo){var Lx;if(Mo){var Dx="oninput"in document;if(!Dx){var QT=document.createElement("div");QT.setAttribute("oninput","return;"),Dx=typeof QT.oninput=="function"}Lx=Dx}else Lx=!1;CN=Lx&&(!document.documentMode||9<document.documentMode)}function JT(){pd&&(pd.detachEvent("onpropertychange",PN),jd=pd=null)}function PN(n){if(n.propertyName==="value"&&pv(jd)){var e=[];AN(e,jd,n,Sw(n)),lN(hB,e)}}function fB(n,e,t){n==="focusin"?(JT(),pd=e,jd=t,pd.attachEvent("onpropertychange",PN)):n==="focusout"&&JT()}function pB(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return pv(jd)}function mB(n,e){if(n==="click")return pv(e)}function gB(n,e){if(n==="input"||n==="change")return pv(e)}function vB(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var fs=typeof Object.is=="function"?Object.is:vB;function Gd(n,e){if(fs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!x1.call(e,r)||!fs(n[r],e[r]))return!1}return!0}function eA(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function tA(n,e){var t=eA(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=eA(t)}}function RN(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?RN(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function NN(){for(var n=window,e=Bg();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Bg(n.document)}return e}function Rw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function yB(n){var e=NN(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&RN(t.ownerDocument.documentElement,t)){if(i!==null&&Rw(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=tA(t,s);var o=tA(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var xB=Mo&&"documentMode"in document&&11>=document.documentMode,Jc=null,F1=null,md=null,B1=!1;function nA(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;B1||Jc==null||Jc!==Bg(i)||(i=Jc,"selectionStart"in i&&Rw(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),md&&Gd(md,i)||(md=i,i=Xg(F1,"onSelect"),0<i.length&&(e=new Aw("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Jc)))}function hm(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var eu={animationend:hm("Animation","AnimationEnd"),animationiteration:hm("Animation","AnimationIteration"),animationstart:hm("Animation","AnimationStart"),transitionend:hm("Transition","TransitionEnd")},kx={},IN={};Mo&&(IN=document.createElement("div").style,"AnimationEvent"in window||(delete eu.animationend.animation,delete eu.animationiteration.animation,delete eu.animationstart.animation),"TransitionEvent"in window||delete eu.transitionend.transition);function mv(n){if(kx[n])return kx[n];if(!eu[n])return n;var e=eu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in IN)return kx[n]=e[t];return n}var LN=mv("animationend"),DN=mv("animationiteration"),kN=mv("animationstart"),UN=mv("transitionend"),ON=new Map,iA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Da(n,e){ON.set(n,e),nc(e,[n])}for(var Ux=0;Ux<iA.length;Ux++){var Ox=iA[Ux],_B=Ox.toLowerCase(),SB=Ox[0].toUpperCase()+Ox.slice(1);Da(_B,"on"+SB)}Da(LN,"onAnimationEnd");Da(DN,"onAnimationIteration");Da(kN,"onAnimationStart");Da("dblclick","onDoubleClick");Da("focusin","onFocus");Da("focusout","onBlur");Da(UN,"onTransitionEnd");Nu("onMouseEnter",["mouseout","mouseover"]);Nu("onMouseLeave",["mouseout","mouseover"]);Nu("onPointerEnter",["pointerout","pointerover"]);Nu("onPointerLeave",["pointerout","pointerover"]);nc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nc("onBeforeInput",["compositionend","keypress","textInput","paste"]);nc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wB=new Set("cancel close invalid load scroll toggle".split(" ").concat(nd));function rA(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,_F(i,e,void 0,n),n.currentTarget=null}function FN(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;rA(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;rA(r,a,c),s=l}}}if(Vg)throw n=D1,Vg=!1,D1=null,n}function Qt(n,e){var t=e[G1];t===void 0&&(t=e[G1]=new Set);var i=n+"__bubble";t.has(i)||(BN(e,n,2,!1),t.add(i))}function Fx(n,e,t){var i=0;e&&(i|=4),BN(t,n,i,e)}var dm="_reactListening"+Math.random().toString(36).slice(2);function Wd(n){if(!n[dm]){n[dm]=!0,XR.forEach(function(t){t!=="selectionchange"&&(wB.has(t)||Fx(t,!1,n),Fx(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[dm]||(e[dm]=!0,Fx("selectionchange",!1,e))}}function BN(n,e,t,i){switch(wN(e)){case 1:var r=UF;break;case 4:r=OF;break;default:r=bw}t=r.bind(null,e,t,n),r=void 0,!L1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Bx(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=bl(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}lN(function(){var c=s,h=Sw(t),f=[];e:{var p=ON.get(n);if(p!==void 0){var m=Aw,v=n;switch(n){case"keypress":if(wg(t)===0)break e;case"keydown":case"keyup":m=QF;break;case"focusin":v="focus",m=Ix;break;case"focusout":v="blur",m=Ix;break;case"beforeblur":case"afterblur":m=Ix;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=XT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=zF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=tB;break;case LN:case DN:case kN:m=jF;break;case UN:m=iB;break;case"scroll":m=FF;break;case"wheel":m=sB;break;case"copy":case"cut":case"paste":m=WF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=qT}var x=(e&4)!==0,_=!x&&n==="scroll",g=x?p!==null?p+"Capture":null:p;x=[];for(var S=c,w;S!==null;){w=S;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,g!==null&&(b=Bd(S,g),b!=null&&x.push(Xd(S,b,w)))),_)break;S=S.return}0<x.length&&(p=new m(p,v,null,t,h),f.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==N1&&(v=t.relatedTarget||t.fromElement)&&(bl(v)||v[Eo]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=c,v=v?bl(v):null,v!==null&&(_=ic(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(x=XT,b="onMouseLeave",g="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(x=qT,b="onPointerLeave",g="onPointerEnter",S="pointer"),_=m==null?p:tu(m),w=v==null?p:tu(v),p=new x(b,S+"leave",m,t,h),p.target=_,p.relatedTarget=w,b=null,bl(h)===c&&(x=new x(g,S+"enter",v,t,h),x.target=w,x.relatedTarget=_,b=x),_=b,m&&v)t:{for(x=m,g=v,S=0,w=x;w;w=Tc(w))S++;for(w=0,b=g;b;b=Tc(b))w++;for(;0<S-w;)x=Tc(x),S--;for(;0<w-S;)g=Tc(g),w--;for(;S--;){if(x===g||g!==null&&x===g.alternate)break t;x=Tc(x),g=Tc(g)}x=null}else x=null;m!==null&&sA(f,p,m,x,!1),v!==null&&_!==null&&sA(f,_,v,x,!0)}}e:{if(p=c?tu(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var A=dB;else if($T(p))if(CN)A=gB;else{A=pB;var P=fB}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=mB);if(A&&(A=A(n,c))){AN(f,A,t,h);break e}P&&P(n,p,c),n==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&T1(p,"number",p.value)}switch(P=c?tu(c):window,n){case"focusin":($T(P)||P.contentEditable==="true")&&(Jc=P,F1=c,md=null);break;case"focusout":md=F1=Jc=null;break;case"mousedown":B1=!0;break;case"contextmenu":case"mouseup":case"dragend":B1=!1,nA(f,t,h);break;case"selectionchange":if(xB)break;case"keydown":case"keyup":nA(f,t,h)}var I;if(Pw)e:{switch(n){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Qc?bN(n,t)&&(L="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(EN&&t.locale!=="ko"&&(Qc||L!=="onCompositionStart"?L==="onCompositionEnd"&&Qc&&(I=MN()):(aa=h,Tw="value"in aa?aa.value:aa.textContent,Qc=!0)),P=Xg(c,L),0<P.length&&(L=new YT(L,n,null,t,h),f.push({event:L,listeners:P}),I?L.data=I:(I=TN(t),I!==null&&(L.data=I)))),(I=aB?lB(n,t):cB(n,t))&&(c=Xg(c,"onBeforeInput"),0<c.length&&(h=new YT("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:c}),h.data=I))}FN(f,e)})}function Xd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Xg(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Bd(n,t),s!=null&&i.unshift(Xd(n,s,r)),s=Bd(n,e),s!=null&&i.push(Xd(n,s,r))),n=n.return}return i}function Tc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function sA(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Bd(t,s),l!=null&&o.unshift(Xd(t,l,a))):r||(l=Bd(t,s),l!=null&&o.push(Xd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var MB=/\r\n?/g,EB=/\u0000|\uFFFD/g;function oA(n){return(typeof n=="string"?n:""+n).replace(MB,`
`).replace(EB,"")}function fm(n,e,t){if(e=oA(e),oA(n)!==e&&t)throw Error(we(425))}function Yg(){}var z1=null,V1=null;function H1(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var j1=typeof setTimeout=="function"?setTimeout:void 0,bB=typeof clearTimeout=="function"?clearTimeout:void 0,aA=typeof Promise=="function"?Promise:void 0,TB=typeof queueMicrotask=="function"?queueMicrotask:typeof aA<"u"?function(n){return aA.resolve(null).then(n).catch(AB)}:j1;function AB(n){setTimeout(function(){throw n})}function zx(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Hd(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Hd(e)}function ga(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function lA(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var eh=Math.random().toString(36).slice(2),Ls="__reactFiber$"+eh,Yd="__reactProps$"+eh,Eo="__reactContainer$"+eh,G1="__reactEvents$"+eh,CB="__reactListeners$"+eh,PB="__reactHandles$"+eh;function bl(n){var e=n[Ls];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Eo]||t[Ls]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=lA(n);n!==null;){if(t=n[Ls])return t;n=lA(n)}return e}n=t,t=n.parentNode}return null}function Uf(n){return n=n[Ls]||n[Eo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function tu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(we(33))}function gv(n){return n[Yd]||null}var W1=[],nu=-1;function ka(n){return{current:n}}function en(n){0>nu||(n.current=W1[nu],W1[nu]=null,nu--)}function $t(n,e){nu++,W1[nu]=n.current,n.current=e}var Ta={},Ei=ka(Ta),Qi=ka(!1),Xl=Ta;function Iu(n,e){var t=n.type.contextTypes;if(!t)return Ta;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Ji(n){return n=n.childContextTypes,n!=null}function qg(){en(Qi),en(Ei)}function cA(n,e,t){if(Ei.current!==Ta)throw Error(we(168));$t(Ei,e),$t(Qi,t)}function zN(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(we(108,fF(n)||"Unknown",r));return vn({},t,i)}function Kg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ta,Xl=Ei.current,$t(Ei,n),$t(Qi,Qi.current),!0}function uA(n,e,t){var i=n.stateNode;if(!i)throw Error(we(169));t?(n=zN(n,e,Xl),i.__reactInternalMemoizedMergedChildContext=n,en(Qi),en(Ei),$t(Ei,n)):en(Qi),$t(Qi,t)}var uo=null,vv=!1,Vx=!1;function VN(n){uo===null?uo=[n]:uo.push(n)}function RB(n){vv=!0,VN(n)}function Ua(){if(!Vx&&uo!==null){Vx=!0;var n=0,e=Gt;try{var t=uo;for(Gt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}uo=null,vv=!1}catch(r){throw uo!==null&&(uo=uo.slice(n+1)),dN(ww,Ua),r}finally{Gt=e,Vx=!1}}return null}var iu=[],ru=0,Zg=null,$g=0,jr=[],Gr=0,Yl=null,mo=1,go="";function vl(n,e){iu[ru++]=$g,iu[ru++]=Zg,Zg=n,$g=e}function HN(n,e,t){jr[Gr++]=mo,jr[Gr++]=go,jr[Gr++]=Yl,Yl=n;var i=mo;n=go;var r=32-hs(i)-1;i&=~(1<<r),t+=1;var s=32-hs(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,mo=1<<32-hs(e)+r|t<<r|i,go=s+n}else mo=1<<s|t<<r|i,go=n}function Nw(n){n.return!==null&&(vl(n,1),HN(n,1,0))}function Iw(n){for(;n===Zg;)Zg=iu[--ru],iu[ru]=null,$g=iu[--ru],iu[ru]=null;for(;n===Yl;)Yl=jr[--Gr],jr[Gr]=null,go=jr[--Gr],jr[Gr]=null,mo=jr[--Gr],jr[Gr]=null}var _r=null,vr=null,an=!1,cs=null;function jN(n,e){var t=Wr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function hA(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,_r=n,vr=ga(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,_r=n,vr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Yl!==null?{id:mo,overflow:go}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Wr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,_r=n,vr=null,!0):!1;default:return!1}}function X1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Y1(n){if(an){var e=vr;if(e){var t=e;if(!hA(n,e)){if(X1(n))throw Error(we(418));e=ga(t.nextSibling);var i=_r;e&&hA(n,e)?jN(i,t):(n.flags=n.flags&-4097|2,an=!1,_r=n)}}else{if(X1(n))throw Error(we(418));n.flags=n.flags&-4097|2,an=!1,_r=n}}}function dA(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;_r=n}function pm(n){if(n!==_r)return!1;if(!an)return dA(n),an=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!H1(n.type,n.memoizedProps)),e&&(e=vr)){if(X1(n))throw GN(),Error(we(418));for(;e;)jN(n,e),e=ga(e.nextSibling)}if(dA(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(we(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){vr=ga(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}vr=null}}else vr=_r?ga(n.stateNode.nextSibling):null;return!0}function GN(){for(var n=vr;n;)n=ga(n.nextSibling)}function Lu(){vr=_r=null,an=!1}function Lw(n){cs===null?cs=[n]:cs.push(n)}var NB=Do.ReactCurrentBatchConfig;function Dh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(we(309));var i=t.stateNode}if(!i)throw Error(we(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(we(284));if(!t._owner)throw Error(we(290,n))}return n}function mm(n,e){throw n=Object.prototype.toString.call(e),Error(we(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function fA(n){var e=n._init;return e(n._payload)}function WN(n){function e(g,S){if(n){var w=g.deletions;w===null?(g.deletions=[S],g.flags|=16):w.push(S)}}function t(g,S){if(!n)return null;for(;S!==null;)e(g,S),S=S.sibling;return null}function i(g,S){for(g=new Map;S!==null;)S.key!==null?g.set(S.key,S):g.set(S.index,S),S=S.sibling;return g}function r(g,S){return g=_a(g,S),g.index=0,g.sibling=null,g}function s(g,S,w){return g.index=w,n?(w=g.alternate,w!==null?(w=w.index,w<S?(g.flags|=2,S):w):(g.flags|=2,S)):(g.flags|=1048576,S)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,S,w,b){return S===null||S.tag!==6?(S=qx(w,g.mode,b),S.return=g,S):(S=r(S,w),S.return=g,S)}function l(g,S,w,b){var A=w.type;return A===$c?h(g,S,w.props.children,b,w.key):S!==null&&(S.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===ta&&fA(A)===S.type)?(b=r(S,w.props),b.ref=Dh(g,S,w),b.return=g,b):(b=Pg(w.type,w.key,w.props,null,g.mode,b),b.ref=Dh(g,S,w),b.return=g,b)}function c(g,S,w,b){return S===null||S.tag!==4||S.stateNode.containerInfo!==w.containerInfo||S.stateNode.implementation!==w.implementation?(S=Kx(w,g.mode,b),S.return=g,S):(S=r(S,w.children||[]),S.return=g,S)}function h(g,S,w,b,A){return S===null||S.tag!==7?(S=kl(w,g.mode,b,A),S.return=g,S):(S=r(S,w),S.return=g,S)}function f(g,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return S=qx(""+S,g.mode,w),S.return=g,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case rm:return w=Pg(S.type,S.key,S.props,null,g.mode,w),w.ref=Dh(g,null,S),w.return=g,w;case Zc:return S=Kx(S,g.mode,w),S.return=g,S;case ta:var b=S._init;return f(g,b(S._payload),w)}if(ed(S)||Ph(S))return S=kl(S,g.mode,w,null),S.return=g,S;mm(g,S)}return null}function p(g,S,w,b){var A=S!==null?S.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return A!==null?null:a(g,S,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case rm:return w.key===A?l(g,S,w,b):null;case Zc:return w.key===A?c(g,S,w,b):null;case ta:return A=w._init,p(g,S,A(w._payload),b)}if(ed(w)||Ph(w))return A!==null?null:h(g,S,w,b,null);mm(g,w)}return null}function m(g,S,w,b,A){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(w)||null,a(S,g,""+b,A);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case rm:return g=g.get(b.key===null?w:b.key)||null,l(S,g,b,A);case Zc:return g=g.get(b.key===null?w:b.key)||null,c(S,g,b,A);case ta:var P=b._init;return m(g,S,w,P(b._payload),A)}if(ed(b)||Ph(b))return g=g.get(w)||null,h(S,g,b,A,null);mm(S,b)}return null}function v(g,S,w,b){for(var A=null,P=null,I=S,L=S=0,R=null;I!==null&&L<w.length;L++){I.index>L?(R=I,I=null):R=I.sibling;var C=p(g,I,w[L],b);if(C===null){I===null&&(I=R);break}n&&I&&C.alternate===null&&e(g,I),S=s(C,S,L),P===null?A=C:P.sibling=C,P=C,I=R}if(L===w.length)return t(g,I),an&&vl(g,L),A;if(I===null){for(;L<w.length;L++)I=f(g,w[L],b),I!==null&&(S=s(I,S,L),P===null?A=I:P.sibling=I,P=I);return an&&vl(g,L),A}for(I=i(g,I);L<w.length;L++)R=m(I,g,L,w[L],b),R!==null&&(n&&R.alternate!==null&&I.delete(R.key===null?L:R.key),S=s(R,S,L),P===null?A=R:P.sibling=R,P=R);return n&&I.forEach(function(U){return e(g,U)}),an&&vl(g,L),A}function x(g,S,w,b){var A=Ph(w);if(typeof A!="function")throw Error(we(150));if(w=A.call(w),w==null)throw Error(we(151));for(var P=A=null,I=S,L=S=0,R=null,C=w.next();I!==null&&!C.done;L++,C=w.next()){I.index>L?(R=I,I=null):R=I.sibling;var U=p(g,I,C.value,b);if(U===null){I===null&&(I=R);break}n&&I&&U.alternate===null&&e(g,I),S=s(U,S,L),P===null?A=U:P.sibling=U,P=U,I=R}if(C.done)return t(g,I),an&&vl(g,L),A;if(I===null){for(;!C.done;L++,C=w.next())C=f(g,C.value,b),C!==null&&(S=s(C,S,L),P===null?A=C:P.sibling=C,P=C);return an&&vl(g,L),A}for(I=i(g,I);!C.done;L++,C=w.next())C=m(I,g,L,C.value,b),C!==null&&(n&&C.alternate!==null&&I.delete(C.key===null?L:C.key),S=s(C,S,L),P===null?A=C:P.sibling=C,P=C);return n&&I.forEach(function(j){return e(g,j)}),an&&vl(g,L),A}function _(g,S,w,b){if(typeof w=="object"&&w!==null&&w.type===$c&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case rm:e:{for(var A=w.key,P=S;P!==null;){if(P.key===A){if(A=w.type,A===$c){if(P.tag===7){t(g,P.sibling),S=r(P,w.props.children),S.return=g,g=S;break e}}else if(P.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===ta&&fA(A)===P.type){t(g,P.sibling),S=r(P,w.props),S.ref=Dh(g,P,w),S.return=g,g=S;break e}t(g,P);break}else e(g,P);P=P.sibling}w.type===$c?(S=kl(w.props.children,g.mode,b,w.key),S.return=g,g=S):(b=Pg(w.type,w.key,w.props,null,g.mode,b),b.ref=Dh(g,S,w),b.return=g,g=b)}return o(g);case Zc:e:{for(P=w.key;S!==null;){if(S.key===P)if(S.tag===4&&S.stateNode.containerInfo===w.containerInfo&&S.stateNode.implementation===w.implementation){t(g,S.sibling),S=r(S,w.children||[]),S.return=g,g=S;break e}else{t(g,S);break}else e(g,S);S=S.sibling}S=Kx(w,g.mode,b),S.return=g,g=S}return o(g);case ta:return P=w._init,_(g,S,P(w._payload),b)}if(ed(w))return v(g,S,w,b);if(Ph(w))return x(g,S,w,b);mm(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,S!==null&&S.tag===6?(t(g,S.sibling),S=r(S,w),S.return=g,g=S):(t(g,S),S=qx(w,g.mode,b),S.return=g,g=S),o(g)):t(g,S)}return _}var Du=WN(!0),XN=WN(!1),Qg=ka(null),Jg=null,su=null,Dw=null;function kw(){Dw=su=Jg=null}function Uw(n){var e=Qg.current;en(Qg),n._currentValue=e}function q1(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function bu(n,e){Jg=n,Dw=su=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Zi=!0),n.firstContext=null)}function Zr(n){var e=n._currentValue;if(Dw!==n)if(n={context:n,memoizedValue:e,next:null},su===null){if(Jg===null)throw Error(we(308));su=n,Jg.dependencies={lanes:0,firstContext:n}}else su=su.next=n;return e}var Tl=null;function Ow(n){Tl===null?Tl=[n]:Tl.push(n)}function YN(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,Ow(e)):(t.next=r.next,r.next=t),e.interleaved=t,bo(n,i)}function bo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var na=!1;function Fw(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qN(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function yo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function va(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Ut&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,bo(n,t)}return r=i.interleaved,r===null?(e.next=e,Ow(i)):(e.next=r.next,r.next=e),i.interleaved=e,bo(n,t)}function Mg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Mw(n,t)}}function pA(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function e0(n,e,t,i){var r=n.updateQueue;na=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,x=a;switch(p=e,m=t,x.tag){case 1:if(v=x.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=vn({},f,p);break e;case 2:na=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=f):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(h===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Kl|=o,n.lanes=o,n.memoizedState=f}}function mA(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(we(191,r));r.call(i)}}}var Of={},zs=ka(Of),qd=ka(Of),Kd=ka(Of);function Al(n){if(n===Of)throw Error(we(174));return n}function Bw(n,e){switch($t(Kd,e),$t(qd,n),$t(zs,Of),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:C1(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=C1(e,n)}en(zs),$t(zs,e)}function ku(){en(zs),en(qd),en(Kd)}function KN(n){Al(Kd.current);var e=Al(zs.current),t=C1(e,n.type);e!==t&&($t(qd,n),$t(zs,t))}function zw(n){qd.current===n&&(en(zs),en(qd))}var hn=ka(0);function t0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hx=[];function Vw(){for(var n=0;n<Hx.length;n++)Hx[n]._workInProgressVersionPrimary=null;Hx.length=0}var Eg=Do.ReactCurrentDispatcher,jx=Do.ReactCurrentBatchConfig,ql=0,gn=null,zn=null,$n=null,n0=!1,gd=!1,Zd=0,IB=0;function di(){throw Error(we(321))}function Hw(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!fs(n[t],e[t]))return!1;return!0}function jw(n,e,t,i,r,s){if(ql=s,gn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Eg.current=n===null||n.memoizedState===null?UB:OB,n=t(i,r),gd){s=0;do{if(gd=!1,Zd=0,25<=s)throw Error(we(301));s+=1,$n=zn=null,e.updateQueue=null,Eg.current=FB,n=t(i,r)}while(gd)}if(Eg.current=i0,e=zn!==null&&zn.next!==null,ql=0,$n=zn=gn=null,n0=!1,e)throw Error(we(300));return n}function Gw(){var n=Zd!==0;return Zd=0,n}function Ns(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?gn.memoizedState=$n=n:$n=$n.next=n,$n}function $r(){if(zn===null){var n=gn.alternate;n=n!==null?n.memoizedState:null}else n=zn.next;var e=$n===null?gn.memoizedState:$n.next;if(e!==null)$n=e,zn=n;else{if(n===null)throw Error(we(310));zn=n,n={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},$n===null?gn.memoizedState=$n=n:$n=$n.next=n}return $n}function $d(n,e){return typeof e=="function"?e(n):e}function Gx(n){var e=$r(),t=e.queue;if(t===null)throw Error(we(311));t.lastRenderedReducer=n;var i=zn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((ql&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,gn.lanes|=h,Kl|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,fs(i,e.memoizedState)||(Zi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,gn.lanes|=s,Kl|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Wx(n){var e=$r(),t=e.queue;if(t===null)throw Error(we(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);fs(s,e.memoizedState)||(Zi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function ZN(){}function $N(n,e){var t=gn,i=$r(),r=e(),s=!fs(i.memoizedState,r);if(s&&(i.memoizedState=r,Zi=!0),i=i.queue,Ww(e3.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||$n!==null&&$n.memoizedState.tag&1){if(t.flags|=2048,Qd(9,JN.bind(null,t,i,r,e),void 0,null),Jn===null)throw Error(we(349));ql&30||QN(t,e,r)}return r}function QN(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=gn.updateQueue,e===null?(e={lastEffect:null,stores:null},gn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function JN(n,e,t,i){e.value=t,e.getSnapshot=i,t3(e)&&n3(n)}function e3(n,e,t){return t(function(){t3(e)&&n3(n)})}function t3(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!fs(n,t)}catch{return!0}}function n3(n){var e=bo(n,1);e!==null&&ds(e,n,1,-1)}function gA(n){var e=Ns();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$d,lastRenderedState:n},e.queue=n,n=n.dispatch=kB.bind(null,gn,n),[e.memoizedState,n]}function Qd(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=gn.updateQueue,e===null?(e={lastEffect:null,stores:null},gn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function i3(){return $r().memoizedState}function bg(n,e,t,i){var r=Ns();gn.flags|=n,r.memoizedState=Qd(1|e,t,void 0,i===void 0?null:i)}function yv(n,e,t,i){var r=$r();i=i===void 0?null:i;var s=void 0;if(zn!==null){var o=zn.memoizedState;if(s=o.destroy,i!==null&&Hw(i,o.deps)){r.memoizedState=Qd(e,t,s,i);return}}gn.flags|=n,r.memoizedState=Qd(1|e,t,s,i)}function vA(n,e){return bg(8390656,8,n,e)}function Ww(n,e){return yv(2048,8,n,e)}function r3(n,e){return yv(4,2,n,e)}function s3(n,e){return yv(4,4,n,e)}function o3(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function a3(n,e,t){return t=t!=null?t.concat([n]):null,yv(4,4,o3.bind(null,e,n),t)}function Xw(){}function l3(n,e){var t=$r();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Hw(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function c3(n,e){var t=$r();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Hw(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function u3(n,e,t){return ql&21?(fs(t,e)||(t=mN(),gn.lanes|=t,Kl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Zi=!0),n.memoizedState=t)}function LB(n,e){var t=Gt;Gt=t!==0&&4>t?t:4,n(!0);var i=jx.transition;jx.transition={};try{n(!1),e()}finally{Gt=t,jx.transition=i}}function h3(){return $r().memoizedState}function DB(n,e,t){var i=xa(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},d3(n))f3(e,t);else if(t=YN(n,e,t,i),t!==null){var r=Di();ds(t,n,i,r),p3(t,e,i)}}function kB(n,e,t){var i=xa(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(d3(n))f3(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,fs(a,o)){var l=e.interleaved;l===null?(r.next=r,Ow(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=YN(n,e,r,i),t!==null&&(r=Di(),ds(t,n,i,r),p3(t,e,i))}}function d3(n){var e=n.alternate;return n===gn||e!==null&&e===gn}function f3(n,e){gd=n0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function p3(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Mw(n,t)}}var i0={readContext:Zr,useCallback:di,useContext:di,useEffect:di,useImperativeHandle:di,useInsertionEffect:di,useLayoutEffect:di,useMemo:di,useReducer:di,useRef:di,useState:di,useDebugValue:di,useDeferredValue:di,useTransition:di,useMutableSource:di,useSyncExternalStore:di,useId:di,unstable_isNewReconciler:!1},UB={readContext:Zr,useCallback:function(n,e){return Ns().memoizedState=[n,e===void 0?null:e],n},useContext:Zr,useEffect:vA,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,bg(4194308,4,o3.bind(null,e,n),t)},useLayoutEffect:function(n,e){return bg(4194308,4,n,e)},useInsertionEffect:function(n,e){return bg(4,2,n,e)},useMemo:function(n,e){var t=Ns();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Ns();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=DB.bind(null,gn,n),[i.memoizedState,n]},useRef:function(n){var e=Ns();return n={current:n},e.memoizedState=n},useState:gA,useDebugValue:Xw,useDeferredValue:function(n){return Ns().memoizedState=n},useTransition:function(){var n=gA(!1),e=n[0];return n=LB.bind(null,n[1]),Ns().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=gn,r=Ns();if(an){if(t===void 0)throw Error(we(407));t=t()}else{if(t=e(),Jn===null)throw Error(we(349));ql&30||QN(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,vA(e3.bind(null,i,s,n),[n]),i.flags|=2048,Qd(9,JN.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Ns(),e=Jn.identifierPrefix;if(an){var t=go,i=mo;t=(i&~(1<<32-hs(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Zd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=IB++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},OB={readContext:Zr,useCallback:l3,useContext:Zr,useEffect:Ww,useImperativeHandle:a3,useInsertionEffect:r3,useLayoutEffect:s3,useMemo:c3,useReducer:Gx,useRef:i3,useState:function(){return Gx($d)},useDebugValue:Xw,useDeferredValue:function(n){var e=$r();return u3(e,zn.memoizedState,n)},useTransition:function(){var n=Gx($d)[0],e=$r().memoizedState;return[n,e]},useMutableSource:ZN,useSyncExternalStore:$N,useId:h3,unstable_isNewReconciler:!1},FB={readContext:Zr,useCallback:l3,useContext:Zr,useEffect:Ww,useImperativeHandle:a3,useInsertionEffect:r3,useLayoutEffect:s3,useMemo:c3,useReducer:Wx,useRef:i3,useState:function(){return Wx($d)},useDebugValue:Xw,useDeferredValue:function(n){var e=$r();return zn===null?e.memoizedState=n:u3(e,zn.memoizedState,n)},useTransition:function(){var n=Wx($d)[0],e=$r().memoizedState;return[n,e]},useMutableSource:ZN,useSyncExternalStore:$N,useId:h3,unstable_isNewReconciler:!1};function os(n,e){if(n&&n.defaultProps){e=vn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function K1(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:vn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var xv={isMounted:function(n){return(n=n._reactInternals)?ic(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Di(),r=xa(n),s=yo(i,r);s.payload=e,t!=null&&(s.callback=t),e=va(n,s,r),e!==null&&(ds(e,n,r,i),Mg(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Di(),r=xa(n),s=yo(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=va(n,s,r),e!==null&&(ds(e,n,r,i),Mg(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Di(),i=xa(n),r=yo(t,i);r.tag=2,e!=null&&(r.callback=e),e=va(n,r,i),e!==null&&(ds(e,n,i,t),Mg(e,n,i))}};function yA(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Gd(t,i)||!Gd(r,s):!0}function m3(n,e,t){var i=!1,r=Ta,s=e.contextType;return typeof s=="object"&&s!==null?s=Zr(s):(r=Ji(e)?Xl:Ei.current,i=e.contextTypes,s=(i=i!=null)?Iu(n,r):Ta),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xv,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function xA(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&xv.enqueueReplaceState(e,e.state,null)}function Z1(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},Fw(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Zr(s):(s=Ji(e)?Xl:Ei.current,r.context=Iu(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(K1(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&xv.enqueueReplaceState(r,r.state,null),e0(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Uu(n,e){try{var t="",i=e;do t+=dF(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function Xx(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function $1(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var BB=typeof WeakMap=="function"?WeakMap:Map;function g3(n,e,t){t=yo(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){s0||(s0=!0,aS=i),$1(n,e)},t}function v3(n,e,t){t=yo(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){$1(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){$1(n,e),typeof i!="function"&&(ya===null?ya=new Set([this]):ya.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function _A(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new BB;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=JB.bind(null,n,e,t),e.then(n,n))}function SA(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function wA(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=yo(-1,1),e.tag=2,va(t,e,1))),t.lanes|=1),n)}var zB=Do.ReactCurrentOwner,Zi=!1;function Ni(n,e,t,i){e.child=n===null?XN(e,null,t,i):Du(e,n.child,t,i)}function MA(n,e,t,i,r){t=t.render;var s=e.ref;return bu(e,r),i=jw(n,e,t,i,s,r),t=Gw(),n!==null&&!Zi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,To(n,e,r)):(an&&t&&Nw(e),e.flags|=1,Ni(n,e,i,r),e.child)}function EA(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!eM(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,y3(n,e,s,i,r)):(n=Pg(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Gd,t(o,i)&&n.ref===e.ref)return To(n,e,r)}return e.flags|=1,n=_a(s,i),n.ref=e.ref,n.return=e,e.child=n}function y3(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Gd(s,i)&&n.ref===e.ref)if(Zi=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Zi=!0);else return e.lanes=n.lanes,To(n,e,r)}return Q1(n,e,t,i,r)}function x3(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t(au,pr),pr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,$t(au,pr),pr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,$t(au,pr),pr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,$t(au,pr),pr|=i;return Ni(n,e,r,t),e.child}function _3(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Q1(n,e,t,i,r){var s=Ji(t)?Xl:Ei.current;return s=Iu(e,s),bu(e,r),t=jw(n,e,t,i,s,r),i=Gw(),n!==null&&!Zi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,To(n,e,r)):(an&&i&&Nw(e),e.flags|=1,Ni(n,e,t,r),e.child)}function bA(n,e,t,i,r){if(Ji(t)){var s=!0;Kg(e)}else s=!1;if(bu(e,r),e.stateNode===null)Tg(n,e),m3(e,t,i),Z1(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Zr(c):(c=Ji(t)?Xl:Ei.current,c=Iu(e,c));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&xA(e,o,i,c),na=!1;var p=e.memoizedState;o.state=p,e0(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Qi.current||na?(typeof h=="function"&&(K1(e,t,h,i),l=e.memoizedState),(a=na||yA(e,t,a,i,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,qN(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:os(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Zr(l):(l=Ji(t)?Xl:Ei.current,l=Iu(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&xA(e,o,i,l),na=!1,p=e.memoizedState,o.state=p,e0(e,i,o,r);var v=e.memoizedState;a!==f||p!==v||Qi.current||na?(typeof m=="function"&&(K1(e,t,m,i),v=e.memoizedState),(c=na||yA(e,t,c,i,p,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return J1(n,e,t,i,s,r)}function J1(n,e,t,i,r,s){_3(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&uA(e,t,!1),To(n,e,s);i=e.stateNode,zB.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Du(e,n.child,null,s),e.child=Du(e,null,a,s)):Ni(n,e,a,s),e.memoizedState=i.state,r&&uA(e,t,!0),e.child}function S3(n){var e=n.stateNode;e.pendingContext?cA(n,e.pendingContext,e.pendingContext!==e.context):e.context&&cA(n,e.context,!1),Bw(n,e.containerInfo)}function TA(n,e,t,i,r){return Lu(),Lw(r),e.flags|=256,Ni(n,e,t,i),e.child}var eS={dehydrated:null,treeContext:null,retryLane:0};function tS(n){return{baseLanes:n,cachePool:null,transitions:null}}function w3(n,e,t){var i=e.pendingProps,r=hn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),$t(hn,r&1),n===null)return Y1(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=wv(o,i,0,null),n=kl(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=tS(t),e.memoizedState=eS,n):Yw(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return VB(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=_a(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=_a(a,s):(s=kl(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?tS(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=eS,i}return s=n.child,n=s.sibling,i=_a(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function Yw(n,e){return e=wv({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function gm(n,e,t,i){return i!==null&&Lw(i),Du(e,n.child,null,t),n=Yw(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function VB(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=Xx(Error(we(422))),gm(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=wv({mode:"visible",children:i.children},r,0,null),s=kl(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Du(e,n.child,null,o),e.child.memoizedState=tS(o),e.memoizedState=eS,s);if(!(e.mode&1))return gm(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(we(419)),i=Xx(s,i,void 0),gm(n,e,o,i)}if(a=(o&n.childLanes)!==0,Zi||a){if(i=Jn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,bo(n,r),ds(i,n,r,-1))}return Jw(),i=Xx(Error(we(421))),gm(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=ez.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,vr=ga(r.nextSibling),_r=e,an=!0,cs=null,n!==null&&(jr[Gr++]=mo,jr[Gr++]=go,jr[Gr++]=Yl,mo=n.id,go=n.overflow,Yl=e),e=Yw(e,i.children),e.flags|=4096,e)}function AA(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),q1(n.return,e,t)}function Yx(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function M3(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ni(n,e,i.children,t),i=hn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&AA(n,t,e);else if(n.tag===19)AA(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if($t(hn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&t0(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Yx(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&t0(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Yx(e,!0,t,null,s);break;case"together":Yx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tg(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function To(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Kl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(we(153));if(e.child!==null){for(n=e.child,t=_a(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=_a(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function HB(n,e,t){switch(e.tag){case 3:S3(e),Lu();break;case 5:KN(e);break;case 1:Ji(e.type)&&Kg(e);break;case 4:Bw(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;$t(Qg,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?($t(hn,hn.current&1),e.flags|=128,null):t&e.child.childLanes?w3(n,e,t):($t(hn,hn.current&1),n=To(n,e,t),n!==null?n.sibling:null);$t(hn,hn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return M3(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),$t(hn,hn.current),i)break;return null;case 22:case 23:return e.lanes=0,x3(n,e,t)}return To(n,e,t)}var E3,nS,b3,T3;E3=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};nS=function(){};b3=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Al(zs.current);var s=null;switch(t){case"input":r=E1(n,r),i=E1(n,i),s=[];break;case"select":r=vn({},r,{value:void 0}),i=vn({},i,{value:void 0}),s=[];break;case"textarea":r=A1(n,r),i=A1(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Yg)}P1(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Od.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Od.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Qt("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};T3=function(n,e,t,i){t!==i&&(e.flags|=4)};function kh(n,e){if(!an)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function fi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function jB(n,e,t){var i=e.pendingProps;switch(Iw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fi(e),null;case 1:return Ji(e.type)&&qg(),fi(e),null;case 3:return i=e.stateNode,ku(),en(Qi),en(Ei),Vw(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(pm(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cs!==null&&(uS(cs),cs=null))),nS(n,e),fi(e),null;case 5:zw(e);var r=Al(Kd.current);if(t=e.type,n!==null&&e.stateNode!=null)b3(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(we(166));return fi(e),null}if(n=Al(zs.current),pm(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Ls]=e,i[Yd]=s,n=(e.mode&1)!==0,t){case"dialog":Qt("cancel",i),Qt("close",i);break;case"iframe":case"object":case"embed":Qt("load",i);break;case"video":case"audio":for(r=0;r<nd.length;r++)Qt(nd[r],i);break;case"source":Qt("error",i);break;case"img":case"image":case"link":Qt("error",i),Qt("load",i);break;case"details":Qt("toggle",i);break;case"input":UT(i,s),Qt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Qt("invalid",i);break;case"textarea":FT(i,s),Qt("invalid",i)}P1(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&fm(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&fm(i.textContent,a,n),r=["children",""+a]):Od.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qt("scroll",i)}switch(t){case"input":sm(i),OT(i,s,!0);break;case"textarea":sm(i),BT(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Yg)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=eN(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Ls]=e,n[Yd]=i,E3(n,e,!1,!1),e.stateNode=n;e:{switch(o=R1(t,i),t){case"dialog":Qt("cancel",n),Qt("close",n),r=i;break;case"iframe":case"object":case"embed":Qt("load",n),r=i;break;case"video":case"audio":for(r=0;r<nd.length;r++)Qt(nd[r],n);r=i;break;case"source":Qt("error",n),r=i;break;case"img":case"image":case"link":Qt("error",n),Qt("load",n),r=i;break;case"details":Qt("toggle",n),r=i;break;case"input":UT(n,i),r=E1(n,i),Qt("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=vn({},i,{value:void 0}),Qt("invalid",n);break;case"textarea":FT(n,i),r=A1(n,i),Qt("invalid",n);break;default:r=i}P1(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?iN(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&tN(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Fd(n,l):typeof l=="number"&&Fd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Od.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Qt("scroll",n):l!=null&&vw(n,s,l,o))}switch(t){case"input":sm(n),OT(n,i,!1);break;case"textarea":sm(n),BT(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ba(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Su(n,!!i.multiple,s,!1):i.defaultValue!=null&&Su(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Yg)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fi(e),null;case 6:if(n&&e.stateNode!=null)T3(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(we(166));if(t=Al(Kd.current),Al(zs.current),pm(e)){if(i=e.stateNode,t=e.memoizedProps,i[Ls]=e,(s=i.nodeValue!==t)&&(n=_r,n!==null))switch(n.tag){case 3:fm(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&fm(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Ls]=e,e.stateNode=i}return fi(e),null;case 13:if(en(hn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(an&&vr!==null&&e.mode&1&&!(e.flags&128))GN(),Lu(),e.flags|=98560,s=!1;else if(s=pm(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(we(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(we(317));s[Ls]=e}else Lu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fi(e),s=!1}else cs!==null&&(uS(cs),cs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||hn.current&1?Vn===0&&(Vn=3):Jw())),e.updateQueue!==null&&(e.flags|=4),fi(e),null);case 4:return ku(),nS(n,e),n===null&&Wd(e.stateNode.containerInfo),fi(e),null;case 10:return Uw(e.type._context),fi(e),null;case 17:return Ji(e.type)&&qg(),fi(e),null;case 19:if(en(hn),s=e.memoizedState,s===null)return fi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)kh(s,!1);else{if(Vn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=t0(n),o!==null){for(e.flags|=128,kh(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return $t(hn,hn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Rn()>Ou&&(e.flags|=128,i=!0,kh(s,!1),e.lanes=4194304)}else{if(!i)if(n=t0(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),kh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!an)return fi(e),null}else 2*Rn()-s.renderingStartTime>Ou&&t!==1073741824&&(e.flags|=128,i=!0,kh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Rn(),e.sibling=null,t=hn.current,$t(hn,i?t&1|2:t&1),e):(fi(e),null);case 22:case 23:return Qw(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?pr&1073741824&&(fi(e),e.subtreeFlags&6&&(e.flags|=8192)):fi(e),null;case 24:return null;case 25:return null}throw Error(we(156,e.tag))}function GB(n,e){switch(Iw(e),e.tag){case 1:return Ji(e.type)&&qg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ku(),en(Qi),en(Ei),Vw(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return zw(e),null;case 13:if(en(hn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(we(340));Lu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return en(hn),null;case 4:return ku(),null;case 10:return Uw(e.type._context),null;case 22:case 23:return Qw(),null;case 24:return null;default:return null}}var vm=!1,yi=!1,WB=typeof WeakSet=="function"?WeakSet:Set,He=null;function ou(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Sn(n,e,i)}else t.current=null}function iS(n,e,t){try{t()}catch(i){Sn(n,e,i)}}var CA=!1;function XB(n,e){if(z1=Gg,n=NN(),Rw(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=n,p=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++c===r&&(a=o),p===s&&++h===i&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(V1={focusedElem:n,selectionRange:t},Gg=!1,He=e;He!==null;)if(e=He,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,He=n;else for(;He!==null;){e=He;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,_=v.memoizedState,g=e.stateNode,S=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:os(e.type,x),_);g.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(b){Sn(e,e.return,b)}if(n=e.sibling,n!==null){n.return=e.return,He=n;break}He=e.return}return v=CA,CA=!1,v}function vd(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&iS(e,t,s)}r=r.next}while(r!==i)}}function _v(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function rS(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function A3(n){var e=n.alternate;e!==null&&(n.alternate=null,A3(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ls],delete e[Yd],delete e[G1],delete e[CB],delete e[PB])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function C3(n){return n.tag===5||n.tag===3||n.tag===4}function PA(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||C3(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function sS(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Yg));else if(i!==4&&(n=n.child,n!==null))for(sS(n,e,t),n=n.sibling;n!==null;)sS(n,e,t),n=n.sibling}function oS(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(oS(n,e,t),n=n.sibling;n!==null;)oS(n,e,t),n=n.sibling}var ni=null,ls=!1;function Xo(n,e,t){for(t=t.child;t!==null;)P3(n,e,t),t=t.sibling}function P3(n,e,t){if(Bs&&typeof Bs.onCommitFiberUnmount=="function")try{Bs.onCommitFiberUnmount(dv,t)}catch{}switch(t.tag){case 5:yi||ou(t,e);case 6:var i=ni,r=ls;ni=null,Xo(n,e,t),ni=i,ls=r,ni!==null&&(ls?(n=ni,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ni.removeChild(t.stateNode));break;case 18:ni!==null&&(ls?(n=ni,t=t.stateNode,n.nodeType===8?zx(n.parentNode,t):n.nodeType===1&&zx(n,t),Hd(n)):zx(ni,t.stateNode));break;case 4:i=ni,r=ls,ni=t.stateNode.containerInfo,ls=!0,Xo(n,e,t),ni=i,ls=r;break;case 0:case 11:case 14:case 15:if(!yi&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&iS(t,e,o),r=r.next}while(r!==i)}Xo(n,e,t);break;case 1:if(!yi&&(ou(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Sn(t,e,a)}Xo(n,e,t);break;case 21:Xo(n,e,t);break;case 22:t.mode&1?(yi=(i=yi)||t.memoizedState!==null,Xo(n,e,t),yi=i):Xo(n,e,t);break;default:Xo(n,e,t)}}function RA(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new WB),e.forEach(function(i){var r=tz.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function ts(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ni=a.stateNode,ls=!1;break e;case 3:ni=a.stateNode.containerInfo,ls=!0;break e;case 4:ni=a.stateNode.containerInfo,ls=!0;break e}a=a.return}if(ni===null)throw Error(we(160));P3(s,o,r),ni=null,ls=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Sn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)R3(e,n),e=e.sibling}function R3(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ts(e,n),Rs(n),i&4){try{vd(3,n,n.return),_v(3,n)}catch(x){Sn(n,n.return,x)}try{vd(5,n,n.return)}catch(x){Sn(n,n.return,x)}}break;case 1:ts(e,n),Rs(n),i&512&&t!==null&&ou(t,t.return);break;case 5:if(ts(e,n),Rs(n),i&512&&t!==null&&ou(t,t.return),n.flags&32){var r=n.stateNode;try{Fd(r,"")}catch(x){Sn(n,n.return,x)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&QR(r,s),R1(a,o);var c=R1(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?iN(r,f):h==="dangerouslySetInnerHTML"?tN(r,f):h==="children"?Fd(r,f):vw(r,h,f,c)}switch(a){case"input":b1(r,s);break;case"textarea":JR(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Su(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Su(r,!!s.multiple,s.defaultValue,!0):Su(r,!!s.multiple,s.multiple?[]:"",!1))}r[Yd]=s}catch(x){Sn(n,n.return,x)}}break;case 6:if(ts(e,n),Rs(n),i&4){if(n.stateNode===null)throw Error(we(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(x){Sn(n,n.return,x)}}break;case 3:if(ts(e,n),Rs(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Hd(e.containerInfo)}catch(x){Sn(n,n.return,x)}break;case 4:ts(e,n),Rs(n);break;case 13:ts(e,n),Rs(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Zw=Rn())),i&4&&RA(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(yi=(c=yi)||h,ts(e,n),yi=c):ts(e,n),Rs(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!h&&n.mode&1)for(He=n,h=n.child;h!==null;){for(f=He=h;He!==null;){switch(p=He,m=p.child,p.tag){case 0:case 11:case 14:case 15:vd(4,p,p.return);break;case 1:ou(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){Sn(i,t,x)}}break;case 5:ou(p,p.return);break;case 22:if(p.memoizedState!==null){IA(f);continue}}m!==null?(m.return=p,He=m):IA(f)}h=h.sibling}e:for(h=null,f=n;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=nN("display",o))}catch(x){Sn(n,n.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(x){Sn(n,n.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ts(e,n),Rs(n),i&4&&RA(n);break;case 21:break;default:ts(e,n),Rs(n)}}function Rs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(C3(t)){var i=t;break e}t=t.return}throw Error(we(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Fd(r,""),i.flags&=-33);var s=PA(n);oS(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=PA(n);sS(n,a,o);break;default:throw Error(we(161))}}catch(l){Sn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function YB(n,e,t){He=n,N3(n)}function N3(n,e,t){for(var i=(n.mode&1)!==0;He!==null;){var r=He,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||vm;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||yi;a=vm;var c=yi;if(vm=o,(yi=l)&&!c)for(He=r;He!==null;)o=He,l=o.child,o.tag===22&&o.memoizedState!==null?LA(r):l!==null?(l.return=o,He=l):LA(r);for(;s!==null;)He=s,N3(s),s=s.sibling;He=r,vm=a,yi=c}NA(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,He=s):NA(n)}}function NA(n){for(;He!==null;){var e=He;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yi||_v(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!yi)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:os(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&mA(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}mA(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Hd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}yi||e.flags&512&&rS(e)}catch(p){Sn(e,e.return,p)}}if(e===n){He=null;break}if(t=e.sibling,t!==null){t.return=e.return,He=t;break}He=e.return}}function IA(n){for(;He!==null;){var e=He;if(e===n){He=null;break}var t=e.sibling;if(t!==null){t.return=e.return,He=t;break}He=e.return}}function LA(n){for(;He!==null;){var e=He;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{_v(4,e)}catch(l){Sn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Sn(e,r,l)}}var s=e.return;try{rS(e)}catch(l){Sn(e,s,l)}break;case 5:var o=e.return;try{rS(e)}catch(l){Sn(e,o,l)}}}catch(l){Sn(e,e.return,l)}if(e===n){He=null;break}var a=e.sibling;if(a!==null){a.return=e.return,He=a;break}He=e.return}}var qB=Math.ceil,r0=Do.ReactCurrentDispatcher,qw=Do.ReactCurrentOwner,Kr=Do.ReactCurrentBatchConfig,Ut=0,Jn=null,kn=null,ri=0,pr=0,au=ka(0),Vn=0,Jd=null,Kl=0,Sv=0,Kw=0,yd=null,Yi=null,Zw=0,Ou=1/0,lo=null,s0=!1,aS=null,ya=null,ym=!1,la=null,o0=0,xd=0,lS=null,Ag=-1,Cg=0;function Di(){return Ut&6?Rn():Ag!==-1?Ag:Ag=Rn()}function xa(n){return n.mode&1?Ut&2&&ri!==0?ri&-ri:NB.transition!==null?(Cg===0&&(Cg=mN()),Cg):(n=Gt,n!==0||(n=window.event,n=n===void 0?16:wN(n.type)),n):1}function ds(n,e,t,i){if(50<xd)throw xd=0,lS=null,Error(we(185));Df(n,t,i),(!(Ut&2)||n!==Jn)&&(n===Jn&&(!(Ut&2)&&(Sv|=t),Vn===4&&sa(n,ri)),er(n,i),t===1&&Ut===0&&!(e.mode&1)&&(Ou=Rn()+500,vv&&Ua()))}function er(n,e){var t=n.callbackNode;NF(n,e);var i=jg(n,n===Jn?ri:0);if(i===0)t!==null&&HT(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&HT(t),e===1)n.tag===0?RB(DA.bind(null,n)):VN(DA.bind(null,n)),TB(function(){!(Ut&6)&&Ua()}),t=null;else{switch(gN(i)){case 1:t=ww;break;case 4:t=fN;break;case 16:t=Hg;break;case 536870912:t=pN;break;default:t=Hg}t=B3(t,I3.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function I3(n,e){if(Ag=-1,Cg=0,Ut&6)throw Error(we(327));var t=n.callbackNode;if(Tu()&&n.callbackNode!==t)return null;var i=jg(n,n===Jn?ri:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=a0(n,i);else{e=i;var r=Ut;Ut|=2;var s=D3();(Jn!==n||ri!==e)&&(lo=null,Ou=Rn()+500,Dl(n,e));do try{$B();break}catch(a){L3(n,a)}while(!0);kw(),r0.current=s,Ut=r,kn!==null?e=0:(Jn=null,ri=0,e=Vn)}if(e!==0){if(e===2&&(r=k1(n),r!==0&&(i=r,e=cS(n,r))),e===1)throw t=Jd,Dl(n,0),sa(n,i),er(n,Rn()),t;if(e===6)sa(n,i);else{if(r=n.current.alternate,!(i&30)&&!KB(r)&&(e=a0(n,i),e===2&&(s=k1(n),s!==0&&(i=s,e=cS(n,s))),e===1))throw t=Jd,Dl(n,0),sa(n,i),er(n,Rn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(we(345));case 2:yl(n,Yi,lo);break;case 3:if(sa(n,i),(i&130023424)===i&&(e=Zw+500-Rn(),10<e)){if(jg(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Di(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=j1(yl.bind(null,n,Yi,lo),e);break}yl(n,Yi,lo);break;case 4:if(sa(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-hs(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Rn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*qB(i/1960))-i,10<i){n.timeoutHandle=j1(yl.bind(null,n,Yi,lo),i);break}yl(n,Yi,lo);break;case 5:yl(n,Yi,lo);break;default:throw Error(we(329))}}}return er(n,Rn()),n.callbackNode===t?I3.bind(null,n):null}function cS(n,e){var t=yd;return n.current.memoizedState.isDehydrated&&(Dl(n,e).flags|=256),n=a0(n,e),n!==2&&(e=Yi,Yi=t,e!==null&&uS(e)),n}function uS(n){Yi===null?Yi=n:Yi.push.apply(Yi,n)}function KB(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!fs(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sa(n,e){for(e&=~Kw,e&=~Sv,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-hs(e),i=1<<t;n[t]=-1,e&=~i}}function DA(n){if(Ut&6)throw Error(we(327));Tu();var e=jg(n,0);if(!(e&1))return er(n,Rn()),null;var t=a0(n,e);if(n.tag!==0&&t===2){var i=k1(n);i!==0&&(e=i,t=cS(n,i))}if(t===1)throw t=Jd,Dl(n,0),sa(n,e),er(n,Rn()),t;if(t===6)throw Error(we(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,yl(n,Yi,lo),er(n,Rn()),null}function $w(n,e){var t=Ut;Ut|=1;try{return n(e)}finally{Ut=t,Ut===0&&(Ou=Rn()+500,vv&&Ua())}}function Zl(n){la!==null&&la.tag===0&&!(Ut&6)&&Tu();var e=Ut;Ut|=1;var t=Kr.transition,i=Gt;try{if(Kr.transition=null,Gt=1,n)return n()}finally{Gt=i,Kr.transition=t,Ut=e,!(Ut&6)&&Ua()}}function Qw(){pr=au.current,en(au)}function Dl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,bB(t)),kn!==null)for(t=kn.return;t!==null;){var i=t;switch(Iw(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&qg();break;case 3:ku(),en(Qi),en(Ei),Vw();break;case 5:zw(i);break;case 4:ku();break;case 13:en(hn);break;case 19:en(hn);break;case 10:Uw(i.type._context);break;case 22:case 23:Qw()}t=t.return}if(Jn=n,kn=n=_a(n.current,null),ri=pr=e,Vn=0,Jd=null,Kw=Sv=Kl=0,Yi=yd=null,Tl!==null){for(e=0;e<Tl.length;e++)if(t=Tl[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Tl=null}return n}function L3(n,e){do{var t=kn;try{if(kw(),Eg.current=i0,n0){for(var i=gn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}n0=!1}if(ql=0,$n=zn=gn=null,gd=!1,Zd=0,qw.current=null,t===null||t.return===null){Vn=1,Jd=e,kn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=ri,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=SA(o);if(m!==null){m.flags&=-257,wA(m,o,a,s,e),m.mode&1&&_A(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var x=new Set;x.add(l),e.updateQueue=x}else v.add(l);break e}else{if(!(e&1)){_A(s,c,e),Jw();break e}l=Error(we(426))}}else if(an&&a.mode&1){var _=SA(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),wA(_,o,a,s,e),Lw(Uu(l,a));break e}}s=l=Uu(l,a),Vn!==4&&(Vn=2),yd===null?yd=[s]:yd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=g3(s,l,e);pA(s,g);break e;case 1:a=l;var S=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ya===null||!ya.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=v3(s,a,e);pA(s,b);break e}}s=s.return}while(s!==null)}U3(t)}catch(A){e=A,kn===t&&t!==null&&(kn=t=t.return);continue}break}while(!0)}function D3(){var n=r0.current;return r0.current=i0,n===null?i0:n}function Jw(){(Vn===0||Vn===3||Vn===2)&&(Vn=4),Jn===null||!(Kl&268435455)&&!(Sv&268435455)||sa(Jn,ri)}function a0(n,e){var t=Ut;Ut|=2;var i=D3();(Jn!==n||ri!==e)&&(lo=null,Dl(n,e));do try{ZB();break}catch(r){L3(n,r)}while(!0);if(kw(),Ut=t,r0.current=i,kn!==null)throw Error(we(261));return Jn=null,ri=0,Vn}function ZB(){for(;kn!==null;)k3(kn)}function $B(){for(;kn!==null&&!wF();)k3(kn)}function k3(n){var e=F3(n.alternate,n,pr);n.memoizedProps=n.pendingProps,e===null?U3(n):kn=e,qw.current=null}function U3(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=GB(t,e),t!==null){t.flags&=32767,kn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Vn=6,kn=null;return}}else if(t=jB(t,e,pr),t!==null){kn=t;return}if(e=e.sibling,e!==null){kn=e;return}kn=e=n}while(e!==null);Vn===0&&(Vn=5)}function yl(n,e,t){var i=Gt,r=Kr.transition;try{Kr.transition=null,Gt=1,QB(n,e,t,i)}finally{Kr.transition=r,Gt=i}return null}function QB(n,e,t,i){do Tu();while(la!==null);if(Ut&6)throw Error(we(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(we(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(IF(n,s),n===Jn&&(kn=Jn=null,ri=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||ym||(ym=!0,B3(Hg,function(){return Tu(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Kr.transition,Kr.transition=null;var o=Gt;Gt=1;var a=Ut;Ut|=4,qw.current=null,XB(n,t),R3(t,n),yB(V1),Gg=!!z1,V1=z1=null,n.current=t,YB(t),MF(),Ut=a,Gt=o,Kr.transition=s}else n.current=t;if(ym&&(ym=!1,la=n,o0=r),s=n.pendingLanes,s===0&&(ya=null),TF(t.stateNode),er(n,Rn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(s0)throw s0=!1,n=aS,aS=null,n;return o0&1&&n.tag!==0&&Tu(),s=n.pendingLanes,s&1?n===lS?xd++:(xd=0,lS=n):xd=0,Ua(),null}function Tu(){if(la!==null){var n=gN(o0),e=Kr.transition,t=Gt;try{if(Kr.transition=null,Gt=16>n?16:n,la===null)var i=!1;else{if(n=la,la=null,o0=0,Ut&6)throw Error(we(331));var r=Ut;for(Ut|=4,He=n.current;He!==null;){var s=He,o=s.child;if(He.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(He=c;He!==null;){var h=He;switch(h.tag){case 0:case 11:case 15:vd(8,h,s)}var f=h.child;if(f!==null)f.return=h,He=f;else for(;He!==null;){h=He;var p=h.sibling,m=h.return;if(A3(h),h===c){He=null;break}if(p!==null){p.return=m,He=p;break}He=m}}}var v=s.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}He=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,He=o;else e:for(;He!==null;){if(s=He,s.flags&2048)switch(s.tag){case 0:case 11:case 15:vd(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,He=g;break e}He=s.return}}var S=n.current;for(He=S;He!==null;){o=He;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,He=w;else e:for(o=S;He!==null;){if(a=He,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_v(9,a)}}catch(A){Sn(a,a.return,A)}if(a===o){He=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,He=b;break e}He=a.return}}if(Ut=r,Ua(),Bs&&typeof Bs.onPostCommitFiberRoot=="function")try{Bs.onPostCommitFiberRoot(dv,n)}catch{}i=!0}return i}finally{Gt=t,Kr.transition=e}}return!1}function kA(n,e,t){e=Uu(t,e),e=g3(n,e,1),n=va(n,e,1),e=Di(),n!==null&&(Df(n,1,e),er(n,e))}function Sn(n,e,t){if(n.tag===3)kA(n,n,t);else for(;e!==null;){if(e.tag===3){kA(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ya===null||!ya.has(i))){n=Uu(t,n),n=v3(e,n,1),e=va(e,n,1),n=Di(),e!==null&&(Df(e,1,n),er(e,n));break}}e=e.return}}function JB(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Di(),n.pingedLanes|=n.suspendedLanes&t,Jn===n&&(ri&t)===t&&(Vn===4||Vn===3&&(ri&130023424)===ri&&500>Rn()-Zw?Dl(n,0):Kw|=t),er(n,e)}function O3(n,e){e===0&&(n.mode&1?(e=lm,lm<<=1,!(lm&130023424)&&(lm=4194304)):e=1);var t=Di();n=bo(n,e),n!==null&&(Df(n,e,t),er(n,t))}function ez(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),O3(n,t)}function tz(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(we(314))}i!==null&&i.delete(e),O3(n,t)}var F3;F3=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Qi.current)Zi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Zi=!1,HB(n,e,t);Zi=!!(n.flags&131072)}else Zi=!1,an&&e.flags&1048576&&HN(e,$g,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Tg(n,e),n=e.pendingProps;var r=Iu(e,Ei.current);bu(e,t),r=jw(null,e,i,n,r,t);var s=Gw();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ji(i)?(s=!0,Kg(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Fw(e),r.updater=xv,e.stateNode=r,r._reactInternals=e,Z1(e,i,n,t),e=J1(null,e,i,!0,s,t)):(e.tag=0,an&&s&&Nw(e),Ni(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Tg(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=iz(i),n=os(i,n),r){case 0:e=Q1(null,e,i,n,t);break e;case 1:e=bA(null,e,i,n,t);break e;case 11:e=MA(null,e,i,n,t);break e;case 14:e=EA(null,e,i,os(i.type,n),t);break e}throw Error(we(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:os(i,r),Q1(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:os(i,r),bA(n,e,i,r,t);case 3:e:{if(S3(e),n===null)throw Error(we(387));i=e.pendingProps,s=e.memoizedState,r=s.element,qN(n,e),e0(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Uu(Error(we(423)),e),e=TA(n,e,i,t,r);break e}else if(i!==r){r=Uu(Error(we(424)),e),e=TA(n,e,i,t,r);break e}else for(vr=ga(e.stateNode.containerInfo.firstChild),_r=e,an=!0,cs=null,t=XN(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Lu(),i===r){e=To(n,e,t);break e}Ni(n,e,i,t)}e=e.child}return e;case 5:return KN(e),n===null&&Y1(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,H1(i,r)?o=null:s!==null&&H1(i,s)&&(e.flags|=32),_3(n,e),Ni(n,e,o,t),e.child;case 6:return n===null&&Y1(e),null;case 13:return w3(n,e,t);case 4:return Bw(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Du(e,null,i,t):Ni(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:os(i,r),MA(n,e,i,r,t);case 7:return Ni(n,e,e.pendingProps,t),e.child;case 8:return Ni(n,e,e.pendingProps.children,t),e.child;case 12:return Ni(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,$t(Qg,i._currentValue),i._currentValue=o,s!==null)if(fs(s.value,o)){if(s.children===r.children&&!Qi.current){e=To(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=yo(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),q1(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(we(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),q1(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ni(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,bu(e,t),r=Zr(r),i=i(r),e.flags|=1,Ni(n,e,i,t),e.child;case 14:return i=e.type,r=os(i,e.pendingProps),r=os(i.type,r),EA(n,e,i,r,t);case 15:return y3(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:os(i,r),Tg(n,e),e.tag=1,Ji(i)?(n=!0,Kg(e)):n=!1,bu(e,t),m3(e,i,r),Z1(e,i,r,t),J1(null,e,i,!0,n,t);case 19:return M3(n,e,t);case 22:return x3(n,e,t)}throw Error(we(156,e.tag))};function B3(n,e){return dN(n,e)}function nz(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(n,e,t,i){return new nz(n,e,t,i)}function eM(n){return n=n.prototype,!(!n||!n.isReactComponent)}function iz(n){if(typeof n=="function")return eM(n)?1:0;if(n!=null){if(n=n.$$typeof,n===xw)return 11;if(n===_w)return 14}return 2}function _a(n,e){var t=n.alternate;return t===null?(t=Wr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Pg(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")eM(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case $c:return kl(t.children,r,s,e);case yw:o=8,r|=8;break;case _1:return n=Wr(12,t,e,r|2),n.elementType=_1,n.lanes=s,n;case S1:return n=Wr(13,t,e,r),n.elementType=S1,n.lanes=s,n;case w1:return n=Wr(19,t,e,r),n.elementType=w1,n.lanes=s,n;case KR:return wv(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case YR:o=10;break e;case qR:o=9;break e;case xw:o=11;break e;case _w:o=14;break e;case ta:o=16,i=null;break e}throw Error(we(130,n==null?n:typeof n,""))}return e=Wr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function kl(n,e,t,i){return n=Wr(7,n,i,e),n.lanes=t,n}function wv(n,e,t,i){return n=Wr(22,n,i,e),n.elementType=KR,n.lanes=t,n.stateNode={isHidden:!1},n}function qx(n,e,t){return n=Wr(6,n,null,e),n.lanes=t,n}function Kx(n,e,t){return e=Wr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function rz(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Px(0),this.expirationTimes=Px(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Px(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function tM(n,e,t,i,r,s,o,a,l){return n=new rz(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Wr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fw(s),n}function sz(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function z3(n){if(!n)return Ta;n=n._reactInternals;e:{if(ic(n)!==n||n.tag!==1)throw Error(we(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ji(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(we(171))}if(n.tag===1){var t=n.type;if(Ji(t))return zN(n,t,e)}return e}function V3(n,e,t,i,r,s,o,a,l){return n=tM(t,i,!0,n,r,s,o,a,l),n.context=z3(null),t=n.current,i=Di(),r=xa(t),s=yo(i,r),s.callback=e??null,va(t,s,r),n.current.lanes=r,Df(n,r,i),er(n,i),n}function Mv(n,e,t,i){var r=e.current,s=Di(),o=xa(r);return t=z3(t),e.context===null?e.context=t:e.pendingContext=t,e=yo(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=va(r,e,o),n!==null&&(ds(n,r,o,s),Mg(n,r,o)),o}function l0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function UA(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function nM(n,e){UA(n,e),(n=n.alternate)&&UA(n,e)}function oz(){return null}var H3=typeof reportError=="function"?reportError:function(n){console.error(n)};function iM(n){this._internalRoot=n}Ev.prototype.render=iM.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(we(409));Mv(n,e,null,null)};Ev.prototype.unmount=iM.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Zl(function(){Mv(null,n,null,null)}),e[Eo]=null}};function Ev(n){this._internalRoot=n}Ev.prototype.unstable_scheduleHydration=function(n){if(n){var e=xN();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ra.length&&e!==0&&e<ra[t].priority;t++);ra.splice(t,0,n),t===0&&SN(n)}};function rM(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function bv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function OA(){}function az(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=l0(o);s.call(c)}}var o=V3(e,i,n,0,null,!1,!1,"",OA);return n._reactRootContainer=o,n[Eo]=o.current,Wd(n.nodeType===8?n.parentNode:n),Zl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=l0(l);a.call(c)}}var l=tM(n,0,!1,null,null,!1,!1,"",OA);return n._reactRootContainer=l,n[Eo]=l.current,Wd(n.nodeType===8?n.parentNode:n),Zl(function(){Mv(e,l,t,i)}),l}function Tv(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=l0(o);a.call(l)}}Mv(e,o,n,r)}else o=az(t,e,n,r,i);return l0(o)}vN=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=td(e.pendingLanes);t!==0&&(Mw(e,t|1),er(e,Rn()),!(Ut&6)&&(Ou=Rn()+500,Ua()))}break;case 13:Zl(function(){var i=bo(n,1);if(i!==null){var r=Di();ds(i,n,1,r)}}),nM(n,1)}};Ew=function(n){if(n.tag===13){var e=bo(n,134217728);if(e!==null){var t=Di();ds(e,n,134217728,t)}nM(n,134217728)}};yN=function(n){if(n.tag===13){var e=xa(n),t=bo(n,e);if(t!==null){var i=Di();ds(t,n,e,i)}nM(n,e)}};xN=function(){return Gt};_N=function(n,e){var t=Gt;try{return Gt=n,e()}finally{Gt=t}};I1=function(n,e,t){switch(e){case"input":if(b1(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=gv(i);if(!r)throw Error(we(90));$R(i),b1(i,r)}}}break;case"textarea":JR(n,t);break;case"select":e=t.value,e!=null&&Su(n,!!t.multiple,e,!1)}};oN=$w;aN=Zl;var lz={usingClientEntryPoint:!1,Events:[Uf,tu,gv,rN,sN,$w]},Uh={findFiberByHostInstance:bl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cz={bundleType:Uh.bundleType,version:Uh.version,rendererPackageName:Uh.rendererPackageName,rendererConfig:Uh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Do.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=uN(n),n===null?null:n.stateNode},findFiberByHostInstance:Uh.findFiberByHostInstance||oz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xm.isDisabled&&xm.supportsFiber)try{dv=xm.inject(cz),Bs=xm}catch{}}Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lz;Pr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rM(e))throw Error(we(200));return sz(n,e,null,t)};Pr.createRoot=function(n,e){if(!rM(n))throw Error(we(299));var t=!1,i="",r=H3;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=tM(n,1,!1,null,null,t,!1,i,r),n[Eo]=e.current,Wd(n.nodeType===8?n.parentNode:n),new iM(e)};Pr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(we(188)):(n=Object.keys(n).join(","),Error(we(268,n)));return n=uN(e),n=n===null?null:n.stateNode,n};Pr.flushSync=function(n){return Zl(n)};Pr.hydrate=function(n,e,t){if(!bv(e))throw Error(we(200));return Tv(null,n,e,!0,t)};Pr.hydrateRoot=function(n,e,t){if(!rM(n))throw Error(we(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=H3;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=V3(e,null,n,1,t??null,r,!1,s,o),n[Eo]=e.current,Wd(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Ev(e)};Pr.render=function(n,e,t){if(!bv(e))throw Error(we(200));return Tv(null,n,e,!1,t)};Pr.unmountComponentAtNode=function(n){if(!bv(n))throw Error(we(40));return n._reactRootContainer?(Zl(function(){Tv(null,null,n,!1,function(){n._reactRootContainer=null,n[Eo]=null})}),!0):!1};Pr.unstable_batchedUpdates=$w;Pr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!bv(t))throw Error(we(200));if(n==null||n._reactInternals===void 0)throw Error(we(38));return Tv(n,e,t,!1,i)};Pr.version="18.3.1-next-f1338f8080-20240426";function j3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(j3)}catch(n){console.error(n)}}j3(),jR.exports=Pr;var uz=jR.exports,FA=uz;y1.createRoot=FA.createRoot,y1.hydrateRoot=FA.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ef(){return ef=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ef.apply(this,arguments)}var ca;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ca||(ca={}));const BA="popstate";function hz(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return hS("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:c0(r)}return fz(e,t,null,n)}function On(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function sM(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dz(){return Math.random().toString(36).substr(2,8)}function zA(n,e){return{usr:n.state,key:n.key,idx:e}}function hS(n,e,t,i){return t===void 0&&(t=null),ef({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?th(e):e,{state:t,key:e&&e.key||i||dz()})}function c0(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function th(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function fz(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=ca.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(ef({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=ca.Pop;let _=h(),g=_==null?null:_-c;c=_,l&&l({action:a,location:x.location,delta:g})}function p(_,g){a=ca.Push;let S=hS(x.location,_,g);c=h()+1;let w=zA(S,c),b=x.createHref(S);try{o.pushState(w,"",b)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;r.location.assign(b)}s&&l&&l({action:a,location:x.location,delta:1})}function m(_,g){a=ca.Replace;let S=hS(x.location,_,g);c=h();let w=zA(S,c),b=x.createHref(S);o.replaceState(w,"",b),s&&l&&l({action:a,location:x.location,delta:0})}function v(_){let g=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof _=="string"?_:c0(_);return S=S.replace(/ $/,"%20"),On(g,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,g)}let x={get action(){return a},get location(){return n(r,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(BA,f),l=_,()=>{r.removeEventListener(BA,f),l=null}},createHref(_){return e(r,_)},createURL:v,encodeLocation(_){let g=v(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(_){return o.go(_)}};return x}var VA;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(VA||(VA={}));function pz(n,e,t){return t===void 0&&(t="/"),mz(n,e,t)}function mz(n,e,t,i){let r=typeof e=="string"?th(e):e,s=oM(r.pathname||"/",t);if(s==null)return null;let o=G3(n);gz(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Cz(s);a=bz(o[l],c)}return a}function G3(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(On(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Sa([i,l.relativePath]),h=t.concat(l);s.children&&s.children.length>0&&(On(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),G3(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Mz(c,s.index),routesMeta:h})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of W3(s.path))r(s,o,l)}),e}function W3(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=W3(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function gz(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Ez(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const vz=/^:[\w-]+$/,yz=3,xz=2,_z=1,Sz=10,wz=-2,HA=n=>n==="*";function Mz(n,e){let t=n.split("/"),i=t.length;return t.some(HA)&&(i+=wz),e&&(i+=xz),t.filter(r=>!HA(r)).reduce((r,s)=>r+(vz.test(s)?yz:s===""?_z:Sz),i)}function Ez(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function bz(n,e,t){let{routesMeta:i}=n,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=Tz({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:Sa([s,f.pathname]),pathnameBase:Lz(Sa([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=Sa([s,f.pathnameBase]))}return o}function Tz(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Az(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,h,f)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let x=a[f]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const v=a[f];return m&&!v?c[p]=void 0:c[p]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function Az(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),sM(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function Cz(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sM(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function oM(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const Pz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rz=n=>Pz.test(n);function Nz(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?th(n):n,s;if(t)if(Rz(t))s=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),sM(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+t))}t.startsWith("/")?s=jA(t.substring(1),"/"):s=jA(t,e)}else s=e;return{pathname:s,search:Dz(i),hash:kz(r)}}function jA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Zx(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Iz(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function X3(n,e){let t=Iz(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Y3(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=th(n):(r=ef({},n),On(!r.pathname||!r.pathname.includes("?"),Zx("?","pathname","search",r)),On(!r.pathname||!r.pathname.includes("#"),Zx("#","pathname","hash",r)),On(!r.search||!r.search.includes("#"),Zx("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;r.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=Nz(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Sa=n=>n.join("/").replace(/\/\/+/g,"/"),Lz=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Dz=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kz=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Uz(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const q3=["post","put","patch","delete"];new Set(q3);const Oz=["get",...q3];new Set(Oz);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tf(){return tf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},tf.apply(this,arguments)}const aM=F.createContext(null),Fz=F.createContext(null),rc=F.createContext(null),Av=F.createContext(null),Oa=F.createContext({outlet:null,matches:[],isDataRoute:!1}),K3=F.createContext(null);function Bz(n,e){let{relative:t}=e===void 0?{}:e;Ff()||On(!1);let{basename:i,navigator:r}=F.useContext(rc),{hash:s,pathname:o,search:a}=Q3(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:Sa([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Ff(){return F.useContext(Av)!=null}function Fa(){return Ff()||On(!1),F.useContext(Av).location}function Z3(n){F.useContext(rc).static||F.useLayoutEffect(n)}function lM(){let{isDataRoute:n}=F.useContext(Oa);return n?Qz():zz()}function zz(){Ff()||On(!1);let n=F.useContext(aM),{basename:e,future:t,navigator:i}=F.useContext(rc),{matches:r}=F.useContext(Oa),{pathname:s}=Fa(),o=JSON.stringify(X3(r,t.v7_relativeSplatPath)),a=F.useRef(!1);return Z3(()=>{a.current=!0}),F.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let f=Y3(c,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Sa([e,f.pathname])),(h.replace?i.replace:i.push)(f,h.state,h)},[e,i,o,s,n])}function $3(){let{matches:n}=F.useContext(Oa),e=n[n.length-1];return e?e.params:{}}function Q3(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=F.useContext(rc),{matches:r}=F.useContext(Oa),{pathname:s}=Fa(),o=JSON.stringify(X3(r,i.v7_relativeSplatPath));return F.useMemo(()=>Y3(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function Vz(n,e){return Hz(n,e)}function Hz(n,e,t,i){Ff()||On(!1);let{navigator:r}=F.useContext(rc),{matches:s}=F.useContext(Oa),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Fa(),h;if(e){var f;let _=typeof e=="string"?th(e):e;l==="/"||(f=_.pathname)!=null&&f.startsWith(l)||On(!1),h=_}else h=c;let p=h.pathname||"/",m=p;if(l!=="/"){let _=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let v=pz(n,{pathname:m}),x=Yz(v&&v.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Sa([l,r.encodeLocation?r.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Sa([l,r.encodeLocation?r.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,t,i);return e&&x?F.createElement(Av.Provider,{value:{location:tf({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ca.Pop}},x):x}function jz(){let n=$z(),e=Uz(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:r},t):null,null)}const Gz=F.createElement(jz,null);class Wz extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?F.createElement(Oa.Provider,{value:this.props.routeContext},F.createElement(K3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Xz(n){let{routeContext:e,match:t,children:i}=n,r=F.useContext(aM);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),F.createElement(Oa.Provider,{value:e},i)}function Yz(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(r=t)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||On(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:p,errors:m}=t,v=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let m,v=!1,x=null,_=null;t&&(m=a&&f.route.id?a[f.route.id]:void 0,x=f.route.errorElement||Gz,l&&(c<0&&p===0?(Jz("route-fallback"),v=!0,_=null):c===p&&(v=!0,_=f.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,p+1)),S=()=>{let w;return m?w=x:v?w=_:f.route.Component?w=F.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=h,F.createElement(Xz,{match:f,routeContext:{outlet:h,matches:g,isDataRoute:t!=null},children:w})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?F.createElement(Wz,{location:t.location,revalidation:t.revalidation,component:x,error:m,children:S(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):S()},null)}var J3=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(J3||{}),eI=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(eI||{});function qz(n){let e=F.useContext(aM);return e||On(!1),e}function Kz(n){let e=F.useContext(Fz);return e||On(!1),e}function Zz(n){let e=F.useContext(Oa);return e||On(!1),e}function tI(n){let e=Zz(),t=e.matches[e.matches.length-1];return t.route.id||On(!1),t.route.id}function $z(){var n;let e=F.useContext(K3),t=Kz(),i=tI();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function Qz(){let{router:n}=qz(J3.UseNavigateStable),e=tI(eI.UseNavigateStable),t=F.useRef(!1);return Z3(()=>{t.current=!0}),F.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,tf({fromRouteId:e},s)))},[n,e])}const GA={};function Jz(n,e,t){GA[n]||(GA[n]=!0)}function e4(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function ao(n){On(!1)}function t4(n){let{basename:e="/",children:t=null,location:i,navigationType:r=ca.Pop,navigator:s,static:o=!1,future:a}=n;Ff()&&On(!1);let l=e.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:l,navigator:s,static:o,future:tf({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=th(i));let{pathname:h="/",search:f="",hash:p="",state:m=null,key:v="default"}=i,x=F.useMemo(()=>{let _=oM(h,l);return _==null?null:{location:{pathname:_,search:f,hash:p,state:m,key:v},navigationType:r}},[l,h,f,p,m,v,r]);return x==null?null:F.createElement(rc.Provider,{value:c},F.createElement(Av.Provider,{children:t,value:x}))}function n4(n){let{children:e,location:t}=n;return Vz(dS(e),t)}new Promise(()=>{});function dS(n,e){e===void 0&&(e=[]);let t=[];return F.Children.forEach(n,(i,r)=>{if(!F.isValidElement(i))return;let s=[...e,r];if(i.type===F.Fragment){t.push.apply(t,dS(i.props.children,s));return}i.type!==ao&&On(!1),!i.props.index||!i.props.children||On(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=dS(i.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fS(){return fS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},fS.apply(this,arguments)}function i4(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function r4(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function s4(n,e){return n.button===0&&(!e||e==="_self")&&!r4(n)}function pS(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let i=n[t];return e.concat(Array.isArray(i)?i.map(r=>[t,r]):[[t,i]])},[]))}function o4(n,e){let t=pS(n);return e&&e.forEach((i,r)=>{t.has(r)||e.getAll(r).forEach(s=>{t.append(r,s)})}),t}const a4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],l4="6";try{window.__reactRouterVersion=l4}catch{}const c4="startTransition",WA=JO[c4];function u4(n){let{basename:e,children:t,future:i,window:r}=n,s=F.useRef();s.current==null&&(s.current=hz({window:r,v5Compat:!0}));let o=s.current,[a,l]=F.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=F.useCallback(f=>{c&&WA?WA(()=>l(f)):l(f)},[l,c]);return F.useLayoutEffect(()=>o.listen(h),[o,h]),F.useEffect(()=>e4(i),[i]),F.createElement(t4,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const h4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",d4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jt=F.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f}=e,p=i4(e,a4),{basename:m}=F.useContext(rc),v,x=!1;if(typeof c=="string"&&d4.test(c)&&(v=c,h4))try{let w=new URL(window.location.href),b=c.startsWith("//")?new URL(w.protocol+c):new URL(c),A=oM(b.pathname,m);b.origin===w.origin&&A!=null?c=A+b.search+b.hash:x=!0}catch{}let _=Bz(c,{relative:r}),g=f4(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:f});function S(w){i&&i(w),w.defaultPrevented||g(w)}return F.createElement("a",fS({},p,{href:v||_,onClick:x||s?i:S,ref:t,target:l}))});var XA;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(XA||(XA={}));var YA;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(YA||(YA={}));function f4(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=lM(),c=Fa(),h=Q3(n,{relative:o});return F.useCallback(f=>{if(s4(f,t)){f.preventDefault();let p=i!==void 0?i:c0(c)===c0(h);l(n,{replace:p,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,i,r,t,n,s,o,a])}function p4(n){let e=F.useRef(pS(n)),t=F.useRef(!1),i=Fa(),r=F.useMemo(()=>o4(i.search,t.current?null:e.current),[i.search]),s=lM(),o=F.useCallback((a,l)=>{const c=pS(typeof a=="function"?a(r):a);t.current=!0,s("?"+c,l)},[s,r]);return[r,o]}const cM=F.createContext({});function uM(n){const e=F.useRef(null);return e.current===null&&(e.current=n()),e.current}const Cv=F.createContext(null),hM=F.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class m4 extends F.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function g4({children:n,isPresent:e}){const t=F.useId(),i=F.useRef(null),r=F.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=F.useContext(hM);return F.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=t;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),E.jsx(m4,{isPresent:e,childRef:i,sizeRef:r,children:F.cloneElement(n,{ref:i})})}const v4=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o})=>{const a=uM(y4),l=F.useId(),c=F.useCallback(f=>{a.set(f,!0);for(const p of a.values())if(!p)return;i&&i()},[a,i]),h=F.useMemo(()=>({id:l,initial:e,isPresent:t,custom:r,onExitComplete:c,register:f=>(a.set(f,!1),()=>a.delete(f))}),s?[Math.random(),c]:[t,c]);return F.useMemo(()=>{a.forEach((f,p)=>a.set(p,!1))},[t]),F.useEffect(()=>{!t&&!a.size&&i&&i()},[t]),o==="popLayout"&&(n=E.jsx(g4,{isPresent:t,children:n})),E.jsx(Cv.Provider,{value:h,children:n})};function y4(){return new Map}function nI(n=!0){const e=F.useContext(Cv);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=F.useId();F.useEffect(()=>{n&&r(s)},[n]);const o=F.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const _m=n=>n.key||"";function qA(n){const e=[];return F.Children.forEach(n,t=>{F.isValidElement(t)&&e.push(t)}),e}const dM=typeof window<"u",iI=dM?F.useLayoutEffect:F.useEffect,u0=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=nI(o),c=F.useMemo(()=>qA(n),[n]),h=o&&!a?[]:c.map(_m),f=F.useRef(!0),p=F.useRef(c),m=uM(()=>new Map),[v,x]=F.useState(c),[_,g]=F.useState(c);iI(()=>{f.current=!1,p.current=c;for(let b=0;b<_.length;b++){const A=_m(_[b]);h.includes(A)?m.delete(A):m.get(A)!==!0&&m.set(A,!1)}},[_,h.length,h.join("-")]);const S=[];if(c!==v){let b=[...c];for(let A=0;A<_.length;A++){const P=_[A],I=_m(P);h.includes(I)||(b.splice(A,0,P),S.push(P))}s==="wait"&&S.length&&(b=S),g(qA(b)),x(c);return}const{forceRender:w}=F.useContext(cM);return E.jsx(E.Fragment,{children:_.map(b=>{const A=_m(b),P=o&&!a?!1:c===_||h.includes(A),I=()=>{if(m.has(A))m.set(A,!0);else return;let L=!0;m.forEach(R=>{R||(L=!1)}),L&&(w==null||w(),g(p.current),o&&(l==null||l()),i&&i())};return E.jsx(v4,{isPresent:P,initial:!f.current||t?void 0:!1,custom:P?void 0:e,presenceAffectsLayout:r,mode:s,onExitComplete:P?void 0:I,children:b},A)})})},Sr=n=>n;let rI=Sr;function fM(n){let e;return()=>(e===void 0&&(e=n()),e)}const Fu=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},xo=n=>n*1e3,_o=n=>n/1e3,x4={useManualTiming:!1};function _4(n){let e=new Set,t=new Set,i=!1,r=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),n()),c(o)}const l={schedule:(c,h=!1,f=!1)=>{const m=f&&i?e:t;return h&&s.add(c),m.has(c)||m.add(c),c},cancel:c=>{t.delete(c),s.delete(c)},process:c=>{if(o=c,i){r=!0;return}i=!0,[e,t]=[t,e],e.forEach(a),e.clear(),i=!1,r&&(r=!1,l.process(c))}};return l}const Sm=["read","resolveKeyframes","update","preRender","render","postRender"],S4=40;function sI(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=Sm.reduce((g,S)=>(g[S]=_4(s),g),{}),{read:a,resolveKeyframes:l,update:c,preRender:h,render:f,postRender:p}=o,m=()=>{const g=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,S4),1),r.timestamp=g,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),h.process(r),f.process(r),p.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(m))},v=()=>{t=!0,i=!0,r.isProcessing||n(m)};return{schedule:Sm.reduce((g,S)=>{const w=o[S];return g[S]=(b,A=!1,P=!1)=>(t||v(),w.schedule(b,A,P)),g},{}),cancel:g=>{for(let S=0;S<Sm.length;S++)o[Sm[S]].cancel(g)},state:r,steps:o}}const{schedule:tn,cancel:Aa,state:ii,steps:$x}=sI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Sr,!0),oI=F.createContext({strict:!1}),KA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bu={};for(const n in KA)Bu[n]={isEnabled:e=>KA[n].some(t=>!!e[t])};function w4(n){for(const e in n)Bu[e]={...Bu[e],...n[e]}}const M4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function h0(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||M4.has(n)}let aI=n=>!h0(n);function E4(n){n&&(aI=e=>e.startsWith("on")?!h0(e):n(e))}try{E4(require("@emotion/is-prop-valid").default)}catch{}function b4(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(aI(r)||t===!0&&h0(r)||!e&&!h0(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function T4(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const Pv=F.createContext({});function nf(n){return typeof n=="string"||Array.isArray(n)}function Rv(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const pM=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mM=["initial",...pM];function Nv(n){return Rv(n.animate)||mM.some(e=>nf(n[e]))}function lI(n){return!!(Nv(n)||n.variants)}function A4(n,e){if(Nv(n)){const{initial:t,animate:i}=n;return{initial:t===!1||nf(t)?t:void 0,animate:nf(i)?i:void 0}}return n.inherit!==!1?e:{}}function C4(n){const{initial:e,animate:t}=A4(n,F.useContext(Pv));return F.useMemo(()=>({initial:e,animate:t}),[ZA(e),ZA(t)])}function ZA(n){return Array.isArray(n)?n.join(" "):n}const P4=Symbol.for("motionComponentSymbol");function lu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function R4(n,e,t){return F.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):lu(t)&&(t.current=i))},[e])}const gM=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),N4="framerAppearId",cI="data-"+gM(N4),{schedule:vM}=sI(queueMicrotask,!1),uI=F.createContext({});function I4(n,e,t,i,r){var s,o;const{visualElement:a}=F.useContext(Pv),l=F.useContext(oI),c=F.useContext(Cv),h=F.useContext(hM).reducedMotion,f=F.useRef(null);i=i||l.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const p=f.current,m=F.useContext(uI);p&&!p.projection&&r&&(p.type==="html"||p.type==="svg")&&L4(f.current,t,r,m);const v=F.useRef(!1);F.useInsertionEffect(()=>{p&&v.current&&p.update(t,c)});const x=t[cI],_=F.useRef(!!x&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,x))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,x)));return iI(()=>{p&&(v.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),vM.render(p.render),_.current&&p.animationState&&p.animationState.animateChanges())}),F.useEffect(()=>{p&&(!_.current&&p.animationState&&p.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)===null||g===void 0||g.call(window,x)}),_.current=!1))}),p}function L4(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:hI(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&lu(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function hI(n){if(n)return n.options.allowProjection!==!1?n.projection:hI(n.parent)}function D4({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){var s,o;n&&w4(n);function a(c,h){let f;const p={...F.useContext(hM),...c,layoutId:k4(c)},{isStatic:m}=p,v=C4(c),x=i(c,m);if(!m&&dM){U4();const _=O4(p);f=_.MeasureLayout,v.visualElement=I4(r,x,p,e,_.ProjectionNode)}return E.jsxs(Pv.Provider,{value:v,children:[f&&v.visualElement?E.jsx(f,{visualElement:v.visualElement,...p}):null,t(r,c,R4(x,v.visualElement,h),x,m,v.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${(o=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:""})`}`;const l=F.forwardRef(a);return l[P4]=r,l}function k4({layoutId:n}){const e=F.useContext(cM).id;return e&&n!==void 0?e+"-"+n:n}function U4(n,e){F.useContext(oI).strict}function O4(n){const{drag:e,layout:t}=Bu;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const F4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yM(n){return typeof n!="string"||n.includes("-")?!1:!!(F4.indexOf(n)>-1||/[A-Z]/u.test(n))}function $A(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function xM(n,e,t,i){if(typeof e=="function"){const[r,s]=$A(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=$A(i);e=e(t!==void 0?t:n.custom,r,s)}return e}const mS=n=>Array.isArray(n),B4=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),z4=n=>mS(n)?n[n.length-1]||0:n,_i=n=>!!(n&&n.getVelocity);function Rg(n){const e=_i(n)?n.get():n;return B4(e)?e.toValue():e}function V4({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},i,r,s){const o={latestValues:H4(i,r,s,n),renderState:e()};return t&&(o.onMount=a=>t({props:i,current:a,...o}),o.onUpdate=a=>t(a)),o}const dI=n=>(e,t)=>{const i=F.useContext(Pv),r=F.useContext(Cv),s=()=>V4(n,e,i,r);return t?s():uM(s)};function H4(n,e,t,i){const r={},s=i(n,{});for(const p in s)r[p]=Rg(s[p]);let{initial:o,animate:a}=n;const l=Nv(n),c=lI(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const f=h?a:o;if(f&&typeof f!="boolean"&&!Rv(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const v=xM(n,p[m]);if(v){const{transitionEnd:x,transition:_,...g}=v;for(const S in g){let w=g[S];if(Array.isArray(w)){const b=h?w.length-1:0;w=w[b]}w!==null&&(r[S]=w)}for(const S in x)r[S]=x[S]}}}return r}const nh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sc=new Set(nh),fI=n=>e=>typeof e=="string"&&e.startsWith(n),pI=fI("--"),j4=fI("var(--"),_M=n=>j4(n)?G4.test(n.split("/*")[0].trim()):!1,G4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,mI=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ao=(n,e,t)=>t>e?e:t<n?n:t,ih={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},rf={...ih,transform:n=>Ao(0,1,n)},wm={...ih,default:1},Bf=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ea=Bf("deg"),Vs=Bf("%"),ot=Bf("px"),W4=Bf("vh"),X4=Bf("vw"),QA={...Vs,parse:n=>Vs.parse(n)/100,transform:n=>Vs.transform(n*100)},Y4={borderWidth:ot,borderTopWidth:ot,borderRightWidth:ot,borderBottomWidth:ot,borderLeftWidth:ot,borderRadius:ot,radius:ot,borderTopLeftRadius:ot,borderTopRightRadius:ot,borderBottomRightRadius:ot,borderBottomLeftRadius:ot,width:ot,maxWidth:ot,height:ot,maxHeight:ot,top:ot,right:ot,bottom:ot,left:ot,padding:ot,paddingTop:ot,paddingRight:ot,paddingBottom:ot,paddingLeft:ot,margin:ot,marginTop:ot,marginRight:ot,marginBottom:ot,marginLeft:ot,backgroundPositionX:ot,backgroundPositionY:ot},q4={rotate:ea,rotateX:ea,rotateY:ea,rotateZ:ea,scale:wm,scaleX:wm,scaleY:wm,scaleZ:wm,skew:ea,skewX:ea,skewY:ea,distance:ot,translateX:ot,translateY:ot,translateZ:ot,x:ot,y:ot,z:ot,perspective:ot,transformPerspective:ot,opacity:rf,originX:QA,originY:QA,originZ:ot},JA={...ih,transform:Math.round},SM={...Y4,...q4,zIndex:JA,size:ot,fillOpacity:rf,strokeOpacity:rf,numOctaves:JA},K4={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Z4=nh.length;function $4(n,e,t){let i="",r=!0;for(let s=0;s<Z4;s++){const o=nh[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=mI(a,SM[o]);if(!l){r=!1;const h=K4[o]||o;i+=`${h}(${c}) `}t&&(e[o]=c)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function wM(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(sc.has(l)){o=!0;continue}else if(pI(l)){r[l]=c;continue}else{const h=mI(c,SM[l]);l.startsWith("origin")?(a=!0,s[l]=h):i[l]=h}}if(e.transform||(o||t?i.transform=$4(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;i.transformOrigin=`${l} ${c} ${h}`}}const Q4={offset:"stroke-dashoffset",array:"stroke-dasharray"},J4={offset:"strokeDashoffset",array:"strokeDasharray"};function eV(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?Q4:J4;n[s.offset]=ot.transform(-i);const o=ot.transform(e),a=ot.transform(t);n[s.array]=`${o} ${a}`}function eC(n,e,t){return typeof n=="string"?n:ot.transform(e+t*n)}function tV(n,e,t){const i=eC(e,n.x,n.width),r=eC(t,n.y,n.height);return`${i} ${r}`}function MM(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,f){if(wM(n,c,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:m,dimensions:v}=n;p.transform&&(v&&(m.transform=p.transform),delete p.transform),v&&(r!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=tV(v,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),i!==void 0&&(p.scale=i),o!==void 0&&eV(p,o,a,l,!1)}const EM=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),gI=()=>({...EM(),attrs:{}}),bM=n=>typeof n=="string"&&n.toLowerCase()==="svg";function vI(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const yI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function xI(n,e,t,i){vI(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(yI.has(r)?r:gM(r),e.attrs[r])}const d0={};function nV(n){Object.assign(d0,n)}function _I(n,{layout:e,layoutId:t}){return sc.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!d0[n]||n==="opacity")}function TM(n,e,t){var i;const{style:r}=n,s={};for(const o in r)(_i(r[o])||e.style&&_i(e.style[o])||_I(o,n)||((i=t==null?void 0:t.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}function SI(n,e,t){const i=TM(n,e,t);for(const r in n)if(_i(n[r])||_i(e[r])){const s=nh.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}function iV(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const tC=["x","y","width","height","cx","cy","r"],rV={useVisualState:dI({scrapeMotionValuesFromProps:SI,createRenderState:gI,onUpdate:({props:n,prevProps:e,current:t,renderState:i,latestValues:r})=>{if(!t)return;let s=!!n.drag;if(!s){for(const a in r)if(sc.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<tC.length;a++){const l=tC[a];n[l]!==e[l]&&(o=!0)}o&&tn.read(()=>{iV(t,i),tn.render(()=>{MM(i,r,bM(t.tagName),n.transformTemplate),xI(t,i)})})}})},sV={useVisualState:dI({scrapeMotionValuesFromProps:TM,createRenderState:EM})};function wI(n,e,t){for(const i in e)!_i(e[i])&&!_I(i,t)&&(n[i]=e[i])}function oV({transformTemplate:n},e){return F.useMemo(()=>{const t=EM();return wM(t,e,n),Object.assign({},t.vars,t.style)},[e])}function aV(n,e){const t=n.style||{},i={};return wI(i,t,n),Object.assign(i,oV(n,e)),i}function lV(n,e){const t={},i=aV(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}function cV(n,e,t,i){const r=F.useMemo(()=>{const s=gI();return MM(s,e,bM(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};wI(s,n.style,n),r.style={...s,...r.style}}return r}function uV(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(yM(t)?cV:lV)(i,s,o,t),c=b4(i,typeof t=="string",n),h=t!==F.Fragment?{...c,...l,ref:r}:{},{children:f}=i,p=F.useMemo(()=>_i(f)?f.get():f,[f]);return F.createElement(t,{...h,children:p})}}function hV(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...yM(i)?rV:sV,preloadedFeatures:n,useRender:uV(r),createVisualElement:e,Component:i};return D4(o)}}function MI(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function Iv(n,e,t){const i=n.getProps();return xM(i,e,t!==void 0?t:i.custom,n)}const dV=fM(()=>window.ScrollTimeline!==void 0);class fV{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e,t){const i=this.animations.map(r=>{if(dV()&&r.attachTimeline)return r.attachTimeline(e);if(typeof t=="function")return t(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class pV extends fV{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function AM(n,e){return n?n[e]||n.default||n:void 0}const gS=2e4;function EI(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<gS;)e+=t,i=n.next(e);return e>=gS?1/0:e}function CM(n){return typeof n=="function"}function nC(n,e){n.timeline=e,n.onfinish=null}const PM=n=>Array.isArray(n)&&typeof n[0]=="number",mV={linearEasing:void 0};function gV(n,e){const t=fM(n);return()=>{var i;return(i=mV[e])!==null&&i!==void 0?i:t()}}const f0=gV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bI=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=n(Fu(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function TI(n){return!!(typeof n=="function"&&f0()||!n||typeof n=="string"&&(n in vS||f0())||PM(n)||Array.isArray(n)&&n.every(TI))}const id=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,vS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:id([0,.65,.55,1]),circOut:id([.55,0,1,.45]),backIn:id([.31,.01,.66,-.59]),backOut:id([.33,1.53,.69,.99])};function AI(n,e){if(n)return typeof n=="function"&&f0()?bI(n,e):PM(n)?id(n):Array.isArray(n)?n.map(t=>AI(t,e)||vS.easeOut):vS[n]}const ss={x:!1,y:!1};function CI(){return ss.x||ss.y}function vV(n,e,t){var i;if(n instanceof Element)return[n];if(typeof n=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function PI(n,e){const t=vV(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function iC(n){return e=>{e.pointerType==="touch"||CI()||n(e)}}function yV(n,e,t={}){const[i,r,s]=PI(n,t),o=iC(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const h=iC(f=>{c(f),l.removeEventListener("pointerleave",h)});l.addEventListener("pointerleave",h,r)});return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const RI=(n,e)=>e?n===e?!0:RI(n,e.parentElement):!1,RM=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,xV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function _V(n){return xV.has(n.tagName)||n.tabIndex!==-1}const rd=new WeakSet;function rC(n){return e=>{e.key==="Enter"&&n(e)}}function Qx(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const SV=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=rC(()=>{if(rd.has(t))return;Qx(t,"down");const r=rC(()=>{Qx(t,"up")}),s=()=>Qx(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function sC(n){return RM(n)&&!CI()}function wV(n,e,t={}){const[i,r,s]=PI(n,t),o=a=>{const l=a.currentTarget;if(!sC(a)||rd.has(l))return;rd.add(l);const c=e(a),h=(m,v)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),!(!sC(m)||!rd.has(l))&&(rd.delete(l),typeof c=="function"&&c(m,{success:v}))},f=m=>{h(m,t.useGlobalTarget||RI(l,m.target))},p=m=>{h(m,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",p,r)};return i.forEach(a=>{!_V(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),a.addEventListener("focus",c=>SV(c,r),r)}),s}function MV(n){return n==="x"||n==="y"?ss[n]?null:(ss[n]=!0,()=>{ss[n]=!1}):ss.x||ss.y?null:(ss.x=ss.y=!0,()=>{ss.x=ss.y=!1})}const NI=new Set(["width","height","top","left","right","bottom",...nh]);let Ng;function EV(){Ng=void 0}const Hs={now:()=>(Ng===void 0&&Hs.set(ii.isProcessing||x4.useManualTiming?ii.timestamp:performance.now()),Ng),set:n=>{Ng=n,queueMicrotask(EV)}};function NM(n,e){n.indexOf(e)===-1&&n.push(e)}function IM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class LM{constructor(){this.subscriptions=[]}add(e){return NM(this.subscriptions,e),()=>IM(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function II(n,e){return e?n*(1e3/e):0}const oC=30,bV=n=>!isNaN(parseFloat(n));class TV{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=Hs.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Hs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=bV(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new LM);const i=this.events[e].add(t);return e==="change"?()=>{i(),tn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Hs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>oC)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,oC);return II(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function sf(n,e){return new TV(n,e)}function AV(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,sf(t))}function CV(n,e){const t=Iv(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=z4(s[o]);AV(n,o,a)}}function PV(n){return!!(_i(n)&&n.add)}function yS(n,e){const t=n.getValue("willChange");if(PV(t))return t.add(e)}function LI(n){return n.props[cI]}const DI=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,RV=1e-7,NV=12;function IV(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=DI(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>RV&&++a<NV);return o}function zf(n,e,t,i){if(n===e&&t===i)return Sr;const r=s=>IV(s,0,1,n,t);return s=>s===0||s===1?s:DI(r(s),e,i)}const kI=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,UI=n=>e=>1-n(1-e),OI=zf(.33,1.53,.69,.99),DM=UI(OI),FI=kI(DM),BI=n=>(n*=2)<1?.5*DM(n):.5*(2-Math.pow(2,-10*(n-1))),kM=n=>1-Math.sin(Math.acos(n)),zI=UI(kM),VI=kI(kM),HI=n=>/^0[^.\s]+$/u.test(n);function LV(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||HI(n):!0}const _d=n=>Math.round(n*1e5)/1e5,UM=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function DV(n){return n==null}const kV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,OM=(n,e)=>t=>!!(typeof t=="string"&&kV.test(t)&&t.startsWith(n)||e&&!DV(t)&&Object.prototype.hasOwnProperty.call(t,e)),jI=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(UM);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},UV=n=>Ao(0,255,n),Jx={...ih,transform:n=>Math.round(UV(n))},Cl={test:OM("rgb","red"),parse:jI("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+Jx.transform(n)+", "+Jx.transform(e)+", "+Jx.transform(t)+", "+_d(rf.transform(i))+")"};function OV(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const xS={test:OM("#"),parse:OV,transform:Cl.transform},cu={test:OM("hsl","hue"),parse:jI("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Vs.transform(_d(e))+", "+Vs.transform(_d(t))+", "+_d(rf.transform(i))+")"},vi={test:n=>Cl.test(n)||xS.test(n)||cu.test(n),parse:n=>Cl.test(n)?Cl.parse(n):cu.test(n)?cu.parse(n):xS.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Cl.transform(n):cu.transform(n)},FV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function BV(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(UM))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(FV))===null||t===void 0?void 0:t.length)||0)>0}const GI="number",WI="color",zV="var",VV="var(",aC="${}",HV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function of(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(HV,l=>(vi.test(l)?(i.color.push(s),r.push(WI),t.push(vi.parse(l))):l.startsWith(VV)?(i.var.push(s),r.push(zV),t.push(l)):(i.number.push(s),r.push(GI),t.push(parseFloat(l))),++s,aC)).split(aC);return{values:t,split:a,indexes:i,types:r}}function XI(n){return of(n).values}function YI(n){const{split:e,types:t}=of(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===GI?s+=_d(r[o]):a===WI?s+=vi.transform(r[o]):s+=r[o]}return s}}const jV=n=>typeof n=="number"?0:n;function GV(n){const e=XI(n);return YI(n)(e.map(jV))}const Ca={test:BV,parse:XI,createTransformer:YI,getAnimatableNone:GV},WV=new Set(["brightness","contrast","saturate","opacity"]);function XV(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(UM)||[];if(!i)return n;const r=t.replace(i,"");let s=WV.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const YV=/\b([a-z-]*)\(.*?\)/gu,_S={...Ca,getAnimatableNone:n=>{const e=n.match(YV);return e?e.map(XV).join(" "):n}},qV={...SM,color:vi,backgroundColor:vi,outlineColor:vi,fill:vi,stroke:vi,borderColor:vi,borderTopColor:vi,borderRightColor:vi,borderBottomColor:vi,borderLeftColor:vi,filter:_S,WebkitFilter:_S},FM=n=>qV[n];function qI(n,e){let t=FM(n);return t!==_S&&(t=Ca),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const KV=new Set(["auto","none","0"]);function ZV(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!KV.has(s)&&of(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=qI(t,r)}const lC=n=>n===ih||n===ot,cC=(n,e)=>parseFloat(n.split(", ")[e]),uC=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return cC(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?cC(s[1],n):0}},$V=new Set(["x","y","z"]),QV=nh.filter(n=>!$V.has(n));function JV(n){const e=[];return QV.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const zu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:uC(4,13),y:uC(5,14)};zu.translateX=zu.x;zu.translateY=zu.y;const Ul=new Set;let SS=!1,wS=!1;function KI(){if(wS){const n=Array.from(Ul).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=JV(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}wS=!1,SS=!1,Ul.forEach(n=>n.complete()),Ul.clear()}function ZI(){Ul.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(wS=!0)})}function e5(){ZI(),KI()}class BM{constructor(e,t,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ul.add(this),SS||(SS=!0,tn.read(ZI),tn.resolveKeyframes(KI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ul.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ul.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const $I=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),t5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function n5(n){const e=t5.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function QI(n,e,t=1){const[i,r]=n5(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return $I(o)?parseFloat(o):o}return _M(r)?QI(r,e,t+1):r}const JI=n=>e=>e.test(n),i5={test:n=>n==="auto",parse:n=>n},eL=[ih,ot,Vs,ea,X4,W4,i5],hC=n=>eL.find(JI(n));class tL extends BM{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),_M(c))){const h=QI(c,t.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!NI.has(i)||e.length!==2)return;const[r,s]=e,o=hC(r),a=hC(s);if(o!==a)if(lC(o)&&lC(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)LV(e[r])&&i.push(r);i.length&&ZV(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zu[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=zu[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const dC=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ca.test(n)||n==="0")&&!n.startsWith("url("));function r5(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function s5(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=dC(r,e),a=dC(s,e);return!o||!a?!1:r5(n)||(t==="spring"||CM(t))&&i}const o5=n=>n!==null;function Lv(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(o5),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const a5=40;class nL{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Hs.now(),this.options={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>a5?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&e5(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Hs.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!s5(e,i,r,s))if(o)this.options.duration=0;else{l&&l(Lv(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,t);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...h},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const fn=(n,e,t)=>n+(e-n)*t;function e_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function l5({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=e_(l,a,n+1/3),s=e_(l,a,n),o=e_(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function p0(n,e){return t=>t>0?e:n}const t_=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},c5=[xS,Cl,cu],u5=n=>c5.find(e=>e.test(n));function fC(n){const e=u5(n);if(!e)return!1;let t=e.parse(n);return e===cu&&(t=l5(t)),t}const pC=(n,e)=>{const t=fC(n),i=fC(e);if(!t||!i)return p0(n,e);const r={...t};return s=>(r.red=t_(t.red,i.red,s),r.green=t_(t.green,i.green,s),r.blue=t_(t.blue,i.blue,s),r.alpha=fn(t.alpha,i.alpha,s),Cl.transform(r))},h5=(n,e)=>t=>e(n(t)),Vf=(...n)=>n.reduce(h5),MS=new Set(["none","hidden"]);function d5(n,e){return MS.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function f5(n,e){return t=>fn(n,e,t)}function zM(n){return typeof n=="number"?f5:typeof n=="string"?_M(n)?p0:vi.test(n)?pC:g5:Array.isArray(n)?iL:typeof n=="object"?vi.test(n)?pC:p5:p0}function iL(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>zM(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function p5(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=zM(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function m5(n,e){var t;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][r[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;i[s]=l,r[o]++}return i}const g5=(n,e)=>{const t=Ca.createTransformer(e),i=of(n),r=of(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?MS.has(n)&&!r.values.length||MS.has(e)&&!i.values.length?d5(n,e):Vf(iL(m5(i,r),r.values),t):p0(n,e)};function rL(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?fn(n,e,t):zM(n)(n,e)}const v5=5;function sL(n,e,t){const i=Math.max(e-v5,0);return II(t-n(i),e-i)}const _n={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},n_=.001;function y5({duration:n=_n.duration,bounce:e=_n.bounce,velocity:t=_n.velocity,mass:i=_n.mass}){let r,s,o=1-e;o=Ao(_n.minDamping,_n.maxDamping,o),n=Ao(_n.minDuration,_n.maxDuration,_o(n)),o<1?(r=c=>{const h=c*o,f=h*n,p=h-t,m=ES(c,o),v=Math.exp(-f);return n_-p/m*v},s=c=>{const f=c*o*n,p=f*t+t,m=Math.pow(o,2)*Math.pow(c,2)*n,v=Math.exp(-f),x=ES(Math.pow(c,2),o);return(-r(c)+n_>0?-1:1)*((p-m)*v)/x}):(r=c=>{const h=Math.exp(-c*n),f=(c-t)*n+1;return-n_+h*f},s=c=>{const h=Math.exp(-c*n),f=(t-c)*(n*n);return h*f});const a=5/n,l=_5(r,s,a);if(n=xo(n),isNaN(l))return{stiffness:_n.stiffness,damping:_n.damping,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const x5=12;function _5(n,e,t){let i=t;for(let r=1;r<x5;r++)i=i-n(i)/e(i);return i}function ES(n,e){return n*Math.sqrt(1-e*e)}const S5=["duration","bounce"],w5=["stiffness","damping","mass"];function mC(n,e){return e.some(t=>n[t]!==void 0)}function M5(n){let e={velocity:_n.velocity,stiffness:_n.stiffness,damping:_n.damping,mass:_n.mass,isResolvedFromDuration:!1,...n};if(!mC(n,w5)&&mC(n,S5))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*Ao(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:_n.mass,stiffness:r,damping:s}}else{const t=y5(n);e={...e,...t,mass:_n.mass},e.isResolvedFromDuration=!0}return e}function oL(n=_n.visualDuration,e=_n.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:h,duration:f,velocity:p,isResolvedFromDuration:m}=M5({...t,velocity:-_o(t.velocity||0)}),v=p||0,x=c/(2*Math.sqrt(l*h)),_=o-s,g=_o(Math.sqrt(l/h)),S=Math.abs(_)<5;i||(i=S?_n.restSpeed.granular:_n.restSpeed.default),r||(r=S?_n.restDelta.granular:_n.restDelta.default);let w;if(x<1){const A=ES(g,x);w=P=>{const I=Math.exp(-x*g*P);return o-I*((v+x*g*_)/A*Math.sin(A*P)+_*Math.cos(A*P))}}else if(x===1)w=A=>o-Math.exp(-g*A)*(_+(v+g*_)*A);else{const A=g*Math.sqrt(x*x-1);w=P=>{const I=Math.exp(-x*g*P),L=Math.min(A*P,300);return o-I*((v+x*g*_)*Math.sinh(L)+A*_*Math.cosh(L))/A}}const b={calculatedDuration:m&&f||null,next:A=>{const P=w(A);if(m)a.done=A>=f;else{let I=0;x<1&&(I=A===0?xo(v):sL(w,A,P));const L=Math.abs(I)<=i,R=Math.abs(o-P)<=r;a.done=L&&R}return a.value=a.done?o:P,a},toString:()=>{const A=Math.min(EI(b),gS),P=bI(I=>b.next(A*I).value,A,30);return A+"ms "+P}};return b}function gC({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const f=n[0],p={done:!1,value:f},m=L=>a!==void 0&&L<a||l!==void 0&&L>l,v=L=>a===void 0?l:l===void 0||Math.abs(a-L)<Math.abs(l-L)?a:l;let x=t*e;const _=f+x,g=o===void 0?_:o(_);g!==_&&(x=g-f);const S=L=>-x*Math.exp(-L/i),w=L=>g+S(L),b=L=>{const R=S(L),C=w(L);p.done=Math.abs(R)<=c,p.value=p.done?g:C};let A,P;const I=L=>{m(p.value)&&(A=L,P=oL({keyframes:[p.value,v(p.value)],velocity:sL(w,L,p.value),damping:r,stiffness:s,restDelta:c,restSpeed:h}))};return I(0),{calculatedDuration:null,next:L=>{let R=!1;return!P&&A===void 0&&(R=!0,b(L),I(L)),A!==void 0&&L>=A?P.next(L-A):(!R&&b(L),p)}}}const E5=zf(.42,0,1,1),b5=zf(0,0,.58,1),aL=zf(.42,0,.58,1),T5=n=>Array.isArray(n)&&typeof n[0]!="number",A5={linear:Sr,easeIn:E5,easeInOut:aL,easeOut:b5,circIn:kM,circInOut:VI,circOut:zI,backIn:DM,backInOut:FI,backOut:OI,anticipate:BI},vC=n=>{if(PM(n)){rI(n.length===4);const[e,t,i,r]=n;return zf(e,t,i,r)}else if(typeof n=="string")return A5[n];return n};function C5(n,e,t){const i=[],r=t||rL,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Sr:e;a=Vf(l,a)}i.push(a)}return i}function P5(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(rI(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=C5(e,i,r),l=a.length,c=h=>{if(o&&h<n[0])return e[0];let f=0;if(l>1)for(;f<n.length-2&&!(h<n[f+1]);f++);const p=Fu(n[f],n[f+1],h);return a[f](p)};return t?h=>c(Ao(n[0],n[s-1],h)):c}function R5(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Fu(0,e,i);n.push(fn(t,1,r))}}function N5(n){const e=[0];return R5(e,n.length-1),e}function I5(n,e){return n.map(t=>t*e)}function L5(n,e){return n.map(()=>e||aL).splice(0,n.length-1)}function m0({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=T5(i)?i.map(vC):vC(i),s={done:!1,value:e[0]},o=I5(t&&t.length===e.length?t:N5(e),n),a=P5(o,e,{ease:Array.isArray(r)?r:L5(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const D5=n=>{const e=({timestamp:t})=>n(t);return{start:()=>tn.update(e,!0),stop:()=>Aa(e),now:()=>ii.isProcessing?ii.timestamp:Hs.now()}},k5={decay:gC,inertia:gC,tween:m0,keyframes:m0,spring:oL},U5=n=>n/100;class VM extends nL{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:i,element:r,keyframes:s}=this.options,o=(r==null?void 0:r.KeyframeResolver)||BM,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,t,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=CM(t)?t:k5[t]||m0;let l,c;a!==m0&&typeof e[0]!="number"&&(l=Vf(U5,rL(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=EI(h));const{calculatedDuration:f}=h,p=f+r,m=p*(i+1)-r;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:L}=this.options;return{done:!0,value:L[L.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:h,resolvedDuration:f}=i;if(this.startTime===null)return s.next(0);const{delay:p,repeat:m,repeatType:v,repeatDelay:x,onUpdate:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-p*(this.speed>=0?1:-1),S=this.speed>=0?g<0:g>h;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let w=this.currentTime,b=s;if(m){const L=Math.min(this.currentTime,h)/f;let R=Math.floor(L),C=L%1;!C&&L>=1&&(C=1),C===1&&R--,R=Math.min(R,m+1),!!(R%2)&&(v==="reverse"?(C=1-C,x&&(C-=x/f)):v==="mirror"&&(b=o)),w=Ao(0,1,C)*f}const A=S?{done:!1,value:l[0]}:b.next(w);a&&(A.value=a(A.value));let{done:P}=A;!S&&c!==null&&(P=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return I&&r!==void 0&&(A.value=Lv(l,this.options,r)),_&&_(A.value),I&&this.finish(),A}get duration(){const{resolved:e}=this;return e?_o(e.calculatedDuration):0}get time(){return _o(this.currentTime)}set time(e){e=xo(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=_o(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=D5,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const O5=new Set(["opacity","clipPath","filter","transform"]);function F5(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:t};l&&(c.offset=l);const h=AI(a,r);return Array.isArray(h)&&(c.easing=h),n.animate(c,{delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const B5=fM(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),g0=10,z5=2e4;function V5(n){return CM(n.type)||n.type==="spring"||!TI(n.ease)}function H5(n,e){const t=new VM({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<z5;)i=t.sample(s),r.push(i.value),s+=g0;return{times:void 0,keyframes:r,duration:s-g0,ease:"linear"}}const lL={anticipate:BI,backInOut:FI,circInOut:VI};function j5(n){return n in lL}class yC extends nL{constructor(e){super(e);const{name:t,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new tL(s,(o,a)=>this.onKeyframesResolved(o,a),t,i,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:i=300,times:r,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&f0()&&j5(s)&&(s=lL[s]),V5(this.options)){const{onComplete:f,onUpdate:p,motionValue:m,element:v,...x}=this.options,_=H5(e,x);e=_.keyframes,e.length===1&&(e[1]=e[0]),i=_.duration,r=_.times,s=_.ease,o="keyframes"}const h=F5(a.owner.current,l,e,{...this.options,duration:i,times:r,ease:s});return h.startTime=c??this.calcStartTime(),this.pendingTimeline?(nC(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:f}=this.options;a.set(Lv(e,this.options,t)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:i,times:r,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return _o(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return _o(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=xo(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Sr;const{animation:i}=t;nC(i,e)}return Sr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:r,type:s,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:f,element:p,...m}=this.options,v=new VM({...m,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),x=xo(this.time);c.setWithVelocity(v.sample(x-g0).value,v.sample(x).value,g0)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return B5()&&i&&O5.has(i)&&!l&&!c&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}}const G5={type:"spring",stiffness:500,damping:25,restSpeed:10},W5=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),X5={type:"keyframes",duration:.8},Y5={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},q5=(n,{keyframes:e})=>e.length>2?X5:sc.has(n)?n.startsWith("scale")?W5(e[1]):G5:Y5;function K5({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const HM=(n,e,t,i={},r,s)=>o=>{const a=AM(i,n)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-xo(l);let h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};K5(a)||(h={...h,...q5(n,h)}),h.duration&&(h.duration=xo(h.duration)),h.repeatDelay&&(h.repeatDelay=xo(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const p=Lv(h.keyframes,a);if(p!==void 0)return tn.update(()=>{h.onUpdate(p),h.onComplete()}),new pV([])}return!s&&yC.supports(h)?new yC(h):new VM(h)};function Z5({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function cL(n,e,{delay:t=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const c=[],h=r&&n.animationState&&n.animationState.getState()[r];for(const f in l){const p=n.getValue(f,(s=n.latestValues[f])!==null&&s!==void 0?s:null),m=l[f];if(m===void 0||h&&Z5(h,f))continue;const v={delay:t,...AM(o||{},f)};let x=!1;if(window.MotionHandoffAnimation){const g=LI(n);if(g){const S=window.MotionHandoffAnimation(g,f,tn);S!==null&&(v.startTime=S,x=!0)}}yS(n,f),p.start(HM(f,p,m,n.shouldReduceMotion&&NI.has(f)?{type:!1}:v,n,x));const _=p.animation;_&&c.push(_)}return a&&Promise.all(c).then(()=>{tn.update(()=>{a&&CV(n,a)})}),c}function bS(n,e,t={}){var i;const r=Iv(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(cL(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=s;return $5(n,e,h+c,f,p,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,h]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>h())}else return Promise.all([o(),a(t.delay)])}function $5(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(Q5).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(bS(c,e,{...s,delay:t+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Q5(n,e){return n.sortNodePosition(e)}function J5(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>bS(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=bS(n,e,t);else{const r=typeof e=="function"?Iv(n,e,t.custom):e;i=Promise.all(cL(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const eH=mM.length;function uL(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?uL(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<eH;t++){const i=mM[t],r=n.props[i];(nf(r)||r===!1)&&(e[i]=r)}return e}const tH=[...pM].reverse(),nH=pM.length;function iH(n){return e=>Promise.all(e.map(({animation:t,options:i})=>J5(n,t,i)))}function rH(n){let e=iH(n),t=xC(),i=!0;const r=l=>(c,h)=>{var f;const p=Iv(n,h,l==="exit"?(f=n.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:m,transitionEnd:v,...x}=p;c={...c,...x,...v}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,h=uL(n.parent)||{},f=[],p=new Set;let m={},v=1/0;for(let _=0;_<nH;_++){const g=tH[_],S=t[g],w=c[g]!==void 0?c[g]:h[g],b=nf(w),A=g===l?S.isActive:null;A===!1&&(v=_);let P=w===h[g]&&w!==c[g]&&b;if(P&&i&&n.manuallyAnimateOnMount&&(P=!1),S.protectedKeys={...m},!S.isActive&&A===null||!w&&!S.prevProp||Rv(w)||typeof w=="boolean")continue;const I=sH(S.prevProp,w);let L=I||g===l&&S.isActive&&!P&&b||_>v&&b,R=!1;const C=Array.isArray(w)?w:[w];let U=C.reduce(r(g),{});A===!1&&(U={});const{prevResolvedValues:j={}}=S,X={...j,...U},J=te=>{L=!0,p.has(te)&&(R=!0,p.delete(te)),S.needsAnimating[te]=!0;const D=n.getValue(te);D&&(D.liveStyle=!1)};for(const te in X){const D=U[te],G=j[te];if(m.hasOwnProperty(te))continue;let W=!1;mS(D)&&mS(G)?W=!MI(D,G):W=D!==G,W?D!=null?J(te):p.add(te):D!==void 0&&p.has(te)?J(te):S.protectedKeys[te]=!0}S.prevProp=w,S.prevResolvedValues=U,S.isActive&&(m={...m,...U}),i&&n.blockInitialAnimation&&(L=!1),L&&(!(P&&I)||R)&&f.push(...C.map(te=>({animation:te,options:{type:g}})))}if(p.size){const _={};p.forEach(g=>{const S=n.getBaseTarget(g),w=n.getValue(g);w&&(w.liveStyle=!0),_[g]=S??null}),f.push({animation:_})}let x=!!f.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(x=!1),i=!1,x?e(f):Promise.resolve()}function a(l,c){var h;if(t[l].isActive===c)return Promise.resolve();(h=n.variantChildren)===null||h===void 0||h.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),t[l].isActive=c;const f=o(l);for(const p in t)t[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=xC(),i=!0}}}function sH(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!MI(e,n):!1}function tl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xC(){return{animate:tl(!0),whileInView:tl(),whileHover:tl(),whileTap:tl(),whileDrag:tl(),whileFocus:tl(),exit:tl()}}class Ba{constructor(e){this.isMounted=!1,this.node=e}update(){}}class oH extends Ba{constructor(e){super(e),e.animationState||(e.animationState=rH(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Rv(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let aH=0;class lH extends Ba{constructor(){super(...arguments),this.id=aH++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const cH={animation:{Feature:oH},exit:{Feature:lH}};function af(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function Hf(n){return{point:{x:n.pageX,y:n.pageY}}}const uH=n=>e=>RM(e)&&n(e,Hf(e));function Sd(n,e,t,i){return af(n,e,uH(t),i)}const _C=(n,e)=>Math.abs(n-e);function hH(n,e){const t=_C(n.x,e.x),i=_C(n.y,e.y);return Math.sqrt(t**2+i**2)}class hL{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=r_(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=hH(f.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:v}=f,{timestamp:x}=ii;this.history.push({...v,timestamp:x});const{onStart:_,onMove:g}=this.handlers;p||(_&&_(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=i_(p,this.transformPagePoint),tn.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=r_(f.type==="pointercancel"?this.lastMoveEventInfo:i_(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,_),v&&v(f,_)},!RM(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=Hf(e),a=i_(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=ii;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=t;h&&h(e,r_(a,this.history)),this.removeListeners=Vf(Sd(this.contextWindow,"pointermove",this.handlePointerMove),Sd(this.contextWindow,"pointerup",this.handlePointerUp),Sd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Aa(this.updatePoint)}}function i_(n,e){return e?{point:e(n.point)}:n}function SC(n,e){return{x:n.x-e.x,y:n.y-e.y}}function r_({point:n},e){return{point:n,delta:SC(n,dL(e)),offset:SC(n,dH(e)),velocity:fH(e,.1)}}function dH(n){return n[0]}function dL(n){return n[n.length-1]}function fH(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=dL(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>xo(e)));)t--;if(!i)return{x:0,y:0};const s=_o(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const fL=1e-4,pH=1-fL,mH=1+fL,pL=.01,gH=0-pL,vH=0+pL;function br(n){return n.max-n.min}function yH(n,e,t){return Math.abs(n-e)<=t}function wC(n,e,t,i=.5){n.origin=i,n.originPoint=fn(e.min,e.max,n.origin),n.scale=br(t)/br(e),n.translate=fn(t.min,t.max,n.origin)-n.originPoint,(n.scale>=pH&&n.scale<=mH||isNaN(n.scale))&&(n.scale=1),(n.translate>=gH&&n.translate<=vH||isNaN(n.translate))&&(n.translate=0)}function wd(n,e,t,i){wC(n.x,e.x,t.x,i?i.originX:void 0),wC(n.y,e.y,t.y,i?i.originY:void 0)}function MC(n,e,t){n.min=t.min+e.min,n.max=n.min+br(e)}function xH(n,e,t){MC(n.x,e.x,t.x),MC(n.y,e.y,t.y)}function EC(n,e,t){n.min=e.min-t.min,n.max=n.min+br(e)}function Md(n,e,t){EC(n.x,e.x,t.x),EC(n.y,e.y,t.y)}function _H(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?fn(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?fn(t,n,i.max):Math.min(n,t)),n}function bC(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function SH(n,{top:e,left:t,bottom:i,right:r}){return{x:bC(n.x,t,r),y:bC(n.y,e,i)}}function TC(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function wH(n,e){return{x:TC(n.x,e.x),y:TC(n.y,e.y)}}function MH(n,e){let t=.5;const i=br(n),r=br(e);return r>i?t=Fu(e.min,e.max-i,n.min):i>r&&(t=Fu(n.min,n.max-r,e.min)),Ao(0,1,t)}function EH(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const TS=.35;function bH(n=TS){return n===!1?n=0:n===!0&&(n=TS),{x:AC(n,"left","right"),y:AC(n,"top","bottom")}}function AC(n,e,t){return{min:CC(n,e),max:CC(n,t)}}function CC(n,e){return typeof n=="number"?n:n[e]||0}const PC=()=>({translate:0,scale:1,origin:0,originPoint:0}),uu=()=>({x:PC(),y:PC()}),RC=()=>({min:0,max:0}),Cn=()=>({x:RC(),y:RC()});function Vr(n){return[n("x"),n("y")]}function mL({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function TH({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function AH(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function s_(n){return n===void 0||n===1}function AS({scale:n,scaleX:e,scaleY:t}){return!s_(n)||!s_(e)||!s_(t)}function xl(n){return AS(n)||gL(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function gL(n){return NC(n.x)||NC(n.y)}function NC(n){return n&&n!=="0%"}function v0(n,e,t){const i=n-t,r=e*i;return t+r}function IC(n,e,t,i,r){return r!==void 0&&(n=v0(n,r,i)),v0(n,t,i)+e}function CS(n,e=0,t=1,i,r){n.min=IC(n.min,e,t,i,r),n.max=IC(n.max,e,t,i,r)}function vL(n,{x:e,y:t}){CS(n.x,e.translate,e.scale,e.originPoint),CS(n.y,t.translate,t.scale,t.originPoint)}const LC=.999999999999,DC=1.0000000000001;function CH(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&du(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,vL(n,o)),i&&xl(s.latestValues)&&du(n,s.latestValues))}e.x<DC&&e.x>LC&&(e.x=1),e.y<DC&&e.y>LC&&(e.y=1)}function hu(n,e){n.min=n.min+e,n.max=n.max+e}function kC(n,e,t,i,r=.5){const s=fn(n.min,n.max,r);CS(n,e,t,s,i)}function du(n,e){kC(n.x,e.x,e.scaleX,e.scale,e.originX),kC(n.y,e.y,e.scaleY,e.scale,e.originY)}function yL(n,e){return mL(AH(n.getBoundingClientRect(),e))}function PH(n,e,t){const i=yL(n,t),{scroll:r}=e;return r&&(hu(i.x,r.offset.x),hu(i.y,r.offset.y)),i}const xL=({current:n})=>n?n.ownerDocument.defaultView:null,RH=new WeakMap;class NH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Cn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Hf(h).point)},s=(h,f)=>{const{drag:p,dragPropagation:m,onDragStart:v}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=MV(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vr(_=>{let g=this.getAxisMotionValue(_).get()||0;if(Vs.test(g)){const{projection:S}=this.visualElement;if(S&&S.layout){const w=S.layout.layoutBox[_];w&&(g=br(w)*(parseFloat(g)/100))}}this.originPoint[_]=g}),v&&tn.postRender(()=>v(h,f)),yS(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:v,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:_}=f;if(m&&this.currentDirection===null){this.currentDirection=IH(_),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,_),this.updateAxis("y",f.point,_),this.visualElement.render(),x&&x(h,f)},a=(h,f)=>this.stop(h,f),l=()=>Vr(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new hL(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:xL(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&tn.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!Mm(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=_H(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&lu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=SH(r.layoutBox,t):this.constraints=!1,this.elastic=bH(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Vr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=EH(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!lu(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=PH(i,r.root,this.visualElement.getTransformPagePoint());let o=wH(r.layout.layoutBox,s);if(t){const a=t(TH(o));this.hasMutatedConstraints=!!a,a&&(o=mL(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Vr(h=>{if(!Mm(h,t,this.currentDirection))return;let f=l&&l[h]||{};o&&(f={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,v={type:"inertia",velocity:i?e[h]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return yS(this.visualElement,e),i.start(HM(e,i,0,t,this.visualElement,!1))}stopAnimation(){Vr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Vr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Vr(t=>{const{drag:i}=this.getProps();if(!Mm(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-fn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!lu(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Vr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=MH({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Vr(o=>{if(!Mm(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(fn(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;RH.set(this.visualElement,this);const e=this.visualElement.current,t=Sd(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();lu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),tn.read(i);const o=af(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Vr(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=TS,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Mm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function IH(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class LH extends Ba{constructor(e){super(e),this.removeGroupControls=Sr,this.removeListeners=Sr,this.controls=new NH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Sr}unmount(){this.removeGroupControls(),this.removeListeners()}}const UC=n=>(e,t)=>{n&&tn.postRender(()=>n(e,t))};class DH extends Ba{constructor(){super(...arguments),this.removePointerDownListener=Sr}onPointerDown(e){this.session=new hL(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xL(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:UC(e),onStart:UC(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&tn.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=Sd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ig={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function OC(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Oh={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ot.test(n))n=parseFloat(n);else return n;const t=OC(n,e.target.x),i=OC(n,e.target.y);return`${t}% ${i}%`}},kH={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=Ca.parse(n);if(r.length>5)return i;const s=Ca.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=fn(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};class UH extends F.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;nV(OH),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Ig.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||tn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),vM.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function _L(n){const[e,t]=nI(),i=F.useContext(cM);return E.jsx(UH,{...n,layoutGroup:i,switchLayoutGroup:F.useContext(uI),isPresent:e,safeToRemove:t})}const OH={borderRadius:{...Oh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Oh,borderTopRightRadius:Oh,borderBottomLeftRadius:Oh,borderBottomRightRadius:Oh,boxShadow:kH};function FH(n,e,t){const i=_i(n)?n:sf(n);return i.start(HM("",i,e,t)),i.animation}function BH(n){return n instanceof SVGElement&&n.tagName!=="svg"}const zH=(n,e)=>n.depth-e.depth;class VH{constructor(){this.children=[],this.isDirty=!1}add(e){NM(this.children,e),this.isDirty=!0}remove(e){IM(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(zH),this.isDirty=!1,this.children.forEach(e)}}function HH(n,e){const t=Hs.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(Aa(i),n(s-e))};return tn.read(i,!0),()=>Aa(i)}const SL=["TopLeft","TopRight","BottomLeft","BottomRight"],jH=SL.length,FC=n=>typeof n=="string"?parseFloat(n):n,BC=n=>typeof n=="number"||ot.test(n);function GH(n,e,t,i,r,s){r?(n.opacity=fn(0,t.opacity!==void 0?t.opacity:1,WH(i)),n.opacityExit=fn(e.opacity!==void 0?e.opacity:1,0,XH(i))):s&&(n.opacity=fn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<jH;o++){const a=`border${SL[o]}Radius`;let l=zC(e,a),c=zC(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||BC(l)===BC(c)?(n[a]=Math.max(fn(FC(l),FC(c),i),0),(Vs.test(c)||Vs.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=fn(e.rotate||0,t.rotate||0,i))}function zC(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const WH=wL(0,.5,zI),XH=wL(.5,.95,Sr);function wL(n,e,t){return i=>i<n?0:i>e?1:t(Fu(n,e,i))}function VC(n,e){n.min=e.min,n.max=e.max}function Br(n,e){VC(n.x,e.x),VC(n.y,e.y)}function HC(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function jC(n,e,t,i,r){return n-=e,n=v0(n,1/t,i),r!==void 0&&(n=v0(n,1/r,i)),n}function YH(n,e=0,t=1,i=.5,r,s=n,o=n){if(Vs.test(e)&&(e=parseFloat(e),e=fn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=fn(s.min,s.max,i);n===s&&(a-=e),n.min=jC(n.min,e,t,a,r),n.max=jC(n.max,e,t,a,r)}function GC(n,e,[t,i,r],s,o){YH(n,e[t],e[i],e[r],e.scale,s,o)}const qH=["x","scaleX","originX"],KH=["y","scaleY","originY"];function WC(n,e,t,i){GC(n.x,e,qH,t?t.x:void 0,i?i.x:void 0),GC(n.y,e,KH,t?t.y:void 0,i?i.y:void 0)}function XC(n){return n.translate===0&&n.scale===1}function ML(n){return XC(n.x)&&XC(n.y)}function YC(n,e){return n.min===e.min&&n.max===e.max}function ZH(n,e){return YC(n.x,e.x)&&YC(n.y,e.y)}function qC(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function EL(n,e){return qC(n.x,e.x)&&qC(n.y,e.y)}function KC(n){return br(n.x)/br(n.y)}function ZC(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class $H{constructor(){this.members=[]}add(e){NM(this.members,e),e.scheduleRender()}remove(e){if(IM(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function QH(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:h,rotateX:f,rotateY:p,skewX:m,skewY:v}=t;c&&(i=`perspective(${c}px) ${i}`),h&&(i+=`rotate(${h}deg) `),f&&(i+=`rotateX(${f}deg) `),p&&(i+=`rotateY(${p}deg) `),m&&(i+=`skewX(${m}deg) `),v&&(i+=`skewY(${v}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const _l={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},sd=typeof window<"u"&&window.MotionDebug!==void 0,o_=["","X","Y","Z"],JH={visibility:"hidden"},$C=1e3;let ej=0;function a_(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function bL(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=LI(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",tn,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&bL(i)}function TL({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=ej++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,sd&&(_l.totalNodes=_l.resolvedTargetDeltas=_l.recalculatedProjection=0),this.nodes.forEach(ij),this.nodes.forEach(lj),this.nodes.forEach(cj),this.nodes.forEach(rj),sd&&window.MotionDebug.record(_l)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new VH)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new LM),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=BH(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let f;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=HH(p,250),Ig.hasAnimatedSinceResize&&(Ig.hasAnimatedSinceResize=!1,this.nodes.forEach(JC))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||pj,{onLayoutAnimationStart:_,onLayoutAnimationComplete:g}=h.getProps(),S=!this.targetLayout||!EL(this.targetLayout,v)||m,w=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||p&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,w);const b={...AM(x,"layout"),onPlay:_,onComplete:g};(h.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else p||JC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Aa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(uj),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(QC);return}this.isUpdating||this.nodes.forEach(oj),this.isUpdating=!1,this.nodes.forEach(aj),this.nodes.forEach(tj),this.nodes.forEach(nj),this.clearAllSnapshots();const a=Hs.now();ii.delta=Ao(0,1e3/60,a-ii.timestamp),ii.timestamp=a,ii.isProcessing=!0,$x.update.process(ii),$x.preRender.process(ii),$x.render.process(ii),ii.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,vM.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sj),this.sharedNodes.forEach(hj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Cn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!ML(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||xl(this.latestValues)||h)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),mj(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Cn();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(gj))){const{scroll:h}=this.root;h&&(hu(l.x,h.offset.x),hu(l.y,h.offset.y))}return l}removeElementScroll(o){var a;const l=Cn();if(Br(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&Br(l,o),hu(l.x,f.offset.x),hu(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=Cn();Br(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&du(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),xl(h.latestValues)&&du(l,h.latestValues)}return xl(this.latestValues)&&du(l,this.latestValues),l}removeTransform(o){const a=Cn();Br(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!xl(c.latestValues))continue;AS(c.latestValues)&&c.updateSnapshot();const h=Cn(),f=c.measurePageBox();Br(h,f),WC(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return xl(this.latestValues)&&WC(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ii.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=ii.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cn(),this.relativeTargetOrigin=Cn(),Md(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Cn(),this.targetWithTransforms=Cn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Br(this.target,this.layout.layoutBox),vL(this.target,this.targetDelta)):Br(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Cn(),this.relativeTargetOrigin=Cn(),Md(this.relativeTargetOrigin,this.target,m.target),Br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}sd&&_l.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||AS(this.parent.latestValues)||gL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ii.timestamp&&(c=!1),c)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;Br(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;CH(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Cn());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(HC(this.prevProjectionDelta.x,this.projectionDelta.x),HC(this.prevProjectionDelta.y,this.projectionDelta.y)),wd(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!ZC(this.projectionDelta.x,this.prevProjectionDelta.x)||!ZC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),sd&&_l.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=uu(),this.projectionDelta=uu(),this.projectionDeltaWithTransform=uu()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},f=uu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Cn(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,x=m!==v,_=this.getStack(),g=!_||_.members.length<=1,S=!!(x&&!g&&this.options.crossfade===!0&&!this.path.some(fj));this.animationProgress=0;let w;this.mixTargetDelta=b=>{const A=b/1e3;eP(f.x,o.x,A),eP(f.y,o.y,A),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Md(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dj(this.relativeTarget,this.relativeTargetOrigin,p,A),w&&ZH(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Cn()),Br(w,this.relativeTarget)),x&&(this.animationValues=h,GH(h,c,this.latestValues,A,S,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Aa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tn.update(()=>{Ig.hasAnimatedSinceResize=!0,this.currentAnimation=FH(0,$C,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($C),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&AL(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Cn();const f=br(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=br(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Br(a,l),du(a,h),wd(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new $H),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&a_("z",o,c,this.animationValues);for(let h=0;h<o_.length;h++)a_(`rotate${o_[h]}`,o,c,this.animationValues),a_(`skew${o_[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return JH;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Rg(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Rg(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!xl(this.latestValues)&&(x.transform=h?h({},""):"none",this.hasProjected=!1),x}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=QH(this.projectionDeltaWithTransform,this.treeScale,p),h&&(c.transform=h(p,c.transform));const{x:m,y:v}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const x in d0){if(p[x]===void 0)continue;const{correct:_,applyTo:g}=d0[x],S=c.transform==="none"?p[x]:_(p[x],f);if(g){const w=g.length;for(let b=0;b<w;b++)c[g[b]]=S}else c[x]=S}return this.options.layoutId&&(c.pointerEvents=f===this?Rg(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(QC),this.root.sharedNodes.clear()}}}function tj(n){n.updateLayout()}function nj(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?Vr(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=br(p);p.min=i[f].min,p.max=p.min+m}):AL(s,t.layoutBox,i)&&Vr(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=br(i[f]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+m)});const a=uu();wd(a,i,t.layoutBox);const l=uu();o?wd(l,n.applyTransform(r,!0),t.measuredBox):wd(l,i,t.layoutBox);const c=!ML(a);let h=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const v=Cn();Md(v,t.layoutBox,p.layoutBox);const x=Cn();Md(x,i,m.layoutBox),EL(v,x)||(h=!0),f.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=v,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function ij(n){sd&&_l.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function rj(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function sj(n){n.clearSnapshot()}function QC(n){n.clearMeasurements()}function oj(n){n.isLayoutDirty=!1}function aj(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function JC(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function lj(n){n.resolveTargetDelta()}function cj(n){n.calcProjection()}function uj(n){n.resetSkewAndRotation()}function hj(n){n.removeLeadSnapshot()}function eP(n,e,t){n.translate=fn(e.translate,0,t),n.scale=fn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function tP(n,e,t,i){n.min=fn(e.min,t.min,i),n.max=fn(e.max,t.max,i)}function dj(n,e,t,i){tP(n.x,e.x,t.x,i),tP(n.y,e.y,t.y,i)}function fj(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const pj={duration:.45,ease:[.4,0,.1,1]},nP=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),iP=nP("applewebkit/")&&!nP("chrome/")?Math.round:Sr;function rP(n){n.min=iP(n.min),n.max=iP(n.max)}function mj(n){rP(n.x),rP(n.y)}function AL(n,e,t){return n==="position"||n==="preserve-aspect"&&!yH(KC(e),KC(t),.2)}function gj(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const vj=TL({attachResizeListener:(n,e)=>af(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),l_={current:void 0},CL=TL({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!l_.current){const n=new vj({});n.mount(window),n.setOptions({layoutScroll:!0}),l_.current=n}return l_.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),yj={pan:{Feature:DH},drag:{Feature:LH,ProjectionNode:CL,MeasureLayout:_L}};function sP(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&tn.postRender(()=>s(e,Hf(e)))}class xj extends Ba{mount(){const{current:e}=this.node;e&&(this.unmount=yV(e,t=>(sP(this.node,t,"Start"),i=>sP(this.node,i,"End"))))}unmount(){}}class _j extends Ba{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vf(af(this.node.current,"focus",()=>this.onFocus()),af(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function oP(n,e,t){const{props:i}=n;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&tn.postRender(()=>s(e,Hf(e)))}class Sj extends Ba{mount(){const{current:e}=this.node;e&&(this.unmount=wV(e,t=>(oP(this.node,t,"Start"),(i,{success:r})=>oP(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const PS=new WeakMap,c_=new WeakMap,wj=n=>{const e=PS.get(n.target);e&&e(n)},Mj=n=>{n.forEach(wj)};function Ej({root:n,...e}){const t=n||document;c_.has(t)||c_.set(t,{});const i=c_.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(Mj,{root:n,...e})),i[r]}function bj(n,e,t){const i=Ej(e);return PS.set(n,t),i.observe(n),()=>{PS.delete(n),i.unobserve(n)}}const Tj={some:0,all:1};class Aj extends Ba{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:Tj[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=c?h:f;p&&p(l)};return bj(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Cj(e,t))&&this.startObserver()}unmount(){}}function Cj({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Pj={inView:{Feature:Aj},tap:{Feature:Sj},focus:{Feature:_j},hover:{Feature:xj}},Rj={layout:{ProjectionNode:CL,MeasureLayout:_L}},RS={current:null},PL={current:!1};function Nj(){if(PL.current=!0,!!dM)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>RS.current=n.matches;n.addListener(e),e()}else RS.current=!1}const Ij=[...eL,vi,Ca],Lj=n=>Ij.find(JI(n)),aP=new WeakMap;function Dj(n,e,t){for(const i in e){const r=e[i],s=t[i];if(_i(r))n.addValue(i,r);else if(_i(s))n.addValue(i,sf(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,sf(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const lP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kj{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=BM,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Hs.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,tn.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:h}=o;this.onUpdate=h,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Nv(t),this.isVariantNode=lI(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(t,{},this);for(const m in p){const v=p[m];l[m]!==void 0&&_i(v)&&v.set(l[m],!1)}}mount(e){this.current=e,aP.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),PL.current||Nj(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:RS.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){aP.delete(this.current),this.projection&&this.projection.unmount(),Aa(this.notifyUpdate),Aa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=sc.has(e),r=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&tn.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Bu){const t=Bu[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Cn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<lP.length;i++){const r=lP[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=Dj(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=sf(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&($I(r)||HI(r))?r=parseFloat(r):!Lj(r)&&Ca.test(t)&&(r=qI(e,t)),this.setBaseTarget(e,_i(r)?r.get():r)),_i(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=xM(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!_i(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new LM),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class RL extends kj{constructor(){super(...arguments),this.KeyframeResolver=tL}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;_i(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function Uj(n){return window.getComputedStyle(n)}class Oj extends RL{constructor(){super(...arguments),this.type="html",this.renderInstance=vI}readValueFromInstance(e,t){if(sc.has(t)){const i=FM(t);return i&&i.default||0}else{const i=Uj(e),r=(pI(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return yL(e,t)}build(e,t,i){wM(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return TM(e,t,i)}}class Fj extends RL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Cn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(sc.has(t)){const i=FM(t);return i&&i.default||0}return t=yI.has(t)?t:gM(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return SI(e,t,i)}build(e,t,i){MM(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,r){xI(e,t,i,r)}mount(e){this.isSVGTag=bM(e.tagName),super.mount(e)}}const Bj=(n,e)=>yM(n)?new Fj(e):new Oj(e,{allowProjection:n!==F.Fragment}),zj=hV({...cH,...Pj,...yj,...Rj},Bj),Ct=T4(zj);function co(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function NL(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.14.2
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var wr={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Vu={duration:.5,overwrite:!1,delay:0},jM,si,ln,Xr=1e8,Zt=1/Xr,NS=Math.PI*2,Vj=NS/4,Hj=0,IL=Math.sqrt,jj=Math.cos,Gj=Math.sin,ei=function(e){return typeof e=="string"},Mn=function(e){return typeof e=="function"},Co=function(e){return typeof e=="number"},GM=function(e){return typeof e>"u"},Xs=function(e){return typeof e=="object"},tr=function(e){return e!==!1},WM=function(){return typeof window<"u"},Em=function(e){return Mn(e)||ei(e)},LL=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},wi=Array.isArray,Wj=/random\([^)]+\)/g,Xj=/,\s*/g,cP=/(?:-?\.?\d|\.)+/gi,DL=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,fu=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,u_=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,kL=/[+-]=-?[.\d]+/,Yj=/[^,'"\[\]\s]+/gi,qj=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,dn,Is,IS,XM,Tr={},y0={},UL,OL=function(e){return(y0=Hu(e,Tr))&&or},YM=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},lf=function(e,t){return!t&&console.warn(e)},FL=function(e,t){return e&&(Tr[e]=t)&&y0&&(y0[e]=t)||Tr},cf=function(){return 0},Kj={suppressEvents:!0,isStart:!0,kill:!1},Lg={suppressEvents:!0,kill:!1},Zj={suppressEvents:!0},qM={},wa=[],LS={},BL,mr={},h_={},uP=30,Dg=[],KM="",ZM=function(e){var t=e[0],i,r;if(Xs(t)||Mn(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=Dg.length;r--&&!Dg[r].targetTest(t););i=Dg[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new cD(e[r],i)))||e.splice(r,1);return e},Ol=function(e){return e._gsap||ZM(Yr(e))[0]._gsap},zL=function(e,t,i){return(i=e[t])&&Mn(i)?e[t]():GM(i)&&e.getAttribute&&e.getAttribute(t)||i},nr=function(e,t){return(e=e.split(",")).forEach(t)||e},Pn=function(e){return Math.round(e*1e5)/1e5||0},un=function(e){return Math.round(e*1e7)/1e7||0},Au=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},$j=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},x0=function(){var e=wa.length,t=wa.slice(0),i,r;for(LS={},wa.length=0,i=0;i<e;i++)r=t[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},$M=function(e){return!!(e._initted||e._startAt||e.add)},VL=function(e,t,i,r){wa.length&&!si&&x0(),e.render(t,i,!!(si&&t<0&&$M(e))),wa.length&&!si&&x0()},HL=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(Yj).length<2?t:ei(e)?e.trim():e},jL=function(e){return e},Ar=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Qj=function(e){return function(t,i){for(var r in i)r in t||r==="duration"&&e||r==="ease"||(t[r]=i[r])}},Hu=function(e,t){for(var i in t)e[i]=t[i];return e},hP=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=Xs(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},_0=function(e,t){var i={},r;for(r in e)r in t||(i[r]=e[r]);return i},Ed=function(e){var t=e.parent||dn,i=e.keyframes?Qj(wi(e.keyframes)):Ar;if(tr(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},Jj=function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0},GL=function(e,t,i,r,s){var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},Dv=function(e,t,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Pa=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Fl=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},e8=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},DS=function(e,t,i,r){return e._startAt&&(si?e._startAt.revert(Lg):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},t8=function n(e){return!e||e._ts&&n(e.parent)},dP=function(e){return e._repeat?ju(e._tTime,e=e.duration()+e._rDelay)*e:0},ju=function(e,t){var i=Math.floor(e=un(e/t));return e&&i===e?i-1:i},S0=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},kv=function(e){return e._end=un(e._start+(e._tDur/Math.abs(e._ts||e._rts||Zt)||0))},Uv=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=un(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),kv(e),i._dirty||Fl(i,e)),e},WL=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=S0(e.rawTime(),t),(!t._dur||jf(0,t.totalDuration(),i)-t._tTime>Zt)&&t.render(i,!0)),Fl(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-Zt}},Ds=function(e,t,i,r){return t.parent&&Pa(t),t._start=un((Co(i)?i:i||e!==dn?Hr(e,i,t):e._time)+t._delay),t._end=un(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),GL(e,t,"_first","_last",e._sort?"_start":0),kS(t)||(e._recent=t),r||WL(e,t),e._ts<0&&Uv(e,e._tTime),e},XL=function(e,t){return(Tr.ScrollTrigger||YM("scrollTrigger",t))&&Tr.ScrollTrigger.create(t,e)},YL=function(e,t,i,r,s){if(JM(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!si&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&BL!==gr.frame)return wa.push(e),e._lazy=[s,r],1},n8=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},kS=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},i8=function(e,t,i,r){var s=e.ratio,o=t<0||!t&&(!e._start&&n8(e)&&!(!e._initted&&kS(e))||(e._ts<0||e._dp._ts<0)&&!kS(e))?0:1,a=e._rDelay,l=0,c,h,f;if(a&&e._repeat&&(l=jf(0,e._tDur,t),h=ju(l,a),e._yoyo&&h&1&&(o=1-o),h!==ju(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||si||r||e._zTime===Zt||!t&&e._zTime){if(!e._initted&&YL(e,t,r,i,l))return;for(f=e._zTime,e._zTime=t||(i?Zt:0),i||(i=t&&!f),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&DS(e,t,i,!0),e._onUpdate&&!i&&yr(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&yr(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Pa(e,1),!i&&!si&&(yr(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},r8=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},Gu=function(e,t,i,r){var s=e._repeat,o=un(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:un(o*(s+1)+e._rDelay*s):o,a>0&&!r&&Uv(e,e._tTime=e._tDur*a),e.parent&&kv(e),i||Fl(e.parent,e),e},fP=function(e){return e instanceof Ii?Fl(e):Gu(e,e._dur)},s8={_start:0,endTime:cf,totalDuration:cf},Hr=function n(e,t,i){var r=e.labels,s=e._recent||s8,o=e.duration()>=Xr?s.endTime(!1):e._dur,a,l,c;return ei(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&i&&(l=l/100*(wi(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},bd=function(e,t,i){var r=Co(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=tr(l.vars.inherit)&&l.parent;o.immediateRender=tr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Dn(t[0],o,t[s+1])},za=function(e,t){return e||e===0?t(e):t},jf=function(e,t,i){return i<e?e:i>t?t:i},xi=function(e,t){return!ei(e)||!(t=qj.exec(e))?"":t[1]},o8=function(e,t,i){return za(i,function(r){return jf(e,t,r)})},US=[].slice,qL=function(e,t){return e&&Xs(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Xs(e[0]))&&!e.nodeType&&e!==Is},a8=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(r){var s;return ei(r)&&!t||qL(r,1)?(s=i).push.apply(s,Yr(r)):i.push(r)})||i},Yr=function(e,t,i){return ln&&!t&&ln.selector?ln.selector(e):ei(e)&&!i&&(IS||!Wu())?US.call((t||XM).querySelectorAll(e),0):wi(e)?a8(e,i):qL(e)?US.call(e,0):e?[e]:[]},OS=function(e){return e=Yr(e)[0]||lf("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Yr(t,i.querySelectorAll?i:i===e?lf("Invalid scope")||XM.createElement("div"):e)}},KL=function(e){return e.sort(function(){return .5-Math.random()})},ZL=function(e){if(Mn(e))return e;var t=Xs(e)?e:{each:e},i=Bl(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,c=t.axis,h=r,f=r;return ei(r)?h=f={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(h=r[0],f=r[1]),function(p,m,v){var x=(v||t).length,_=o[x],g,S,w,b,A,P,I,L,R;if(!_){if(R=t.grid==="auto"?0:(t.grid||[1,Xr])[1],!R){for(I=-Xr;I<(I=v[R++].getBoundingClientRect().left)&&R<x;);R<x&&R--}for(_=o[x]=[],g=l?Math.min(R,x)*h-.5:r%R,S=R===Xr?0:l?x*f/R-.5:r/R|0,I=0,L=Xr,P=0;P<x;P++)w=P%R-g,b=S-(P/R|0),_[P]=A=c?Math.abs(c==="y"?b:w):IL(w*w+b*b),A>I&&(I=A),A<L&&(L=A);r==="random"&&KL(_),_.max=I-L,_.min=L,_.v=x=(parseFloat(t.amount)||parseFloat(t.each)*(R>x?x-1:c?c==="y"?x/R:R:Math.max(R,x/R))||0)*(r==="edges"?-1:1),_.b=x<0?s-x:s,_.u=xi(t.amount||t.each)||0,i=i&&x<0?oD(i):i}return x=(_[p]-_.min)/_.max||0,un(_.b+(i?i(x):x)*_.v)+_.u}},FS=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=un(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(Co(i)?0:xi(i))}},$L=function(e,t){var i=wi(e),r,s;return!i&&Xs(e)&&(r=i=e.radius||Xr,e.values?(e=Yr(e.values),(s=!Co(e[0]))&&(r*=r)):e=FS(e.increment)),za(t,i?Mn(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=Xr,h=0,f=e.length,p,m;f--;)s?(p=e[f].x-a,m=e[f].y-l,p=p*p+m*m):p=Math.abs(e[f]-a),p<c&&(c=p,h=f);return h=!r||c<=r?e[h]:o,s||h===o||Co(o)?h:h+xi(o)}:FS(e))},QL=function(e,t,i,r){return za(wi(e)?!t:i===!0?!!(i=0):!r,function(){return wi(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*r)/r})},l8=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},c8=function(e,t){return function(i){return e(parseFloat(i))+(t||xi(i))}},u8=function(e,t,i){return eD(e,t,0,1,i)},JL=function(e,t,i){return za(i,function(r){return e[~~t(r)]})},h8=function n(e,t,i){var r=t-e;return wi(e)?JL(e,n(0,e.length),t):za(i,function(s){return(r+(s-e)%r)%r+e})},d8=function n(e,t,i){var r=t-e,s=r*2;return wi(e)?JL(e,n(0,e.length-1),t):za(i,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},uf=function(e){return e.replace(Wj,function(t){var i=t.indexOf("[")+1,r=t.substring(i||7,i?t.indexOf("]"):t.length-1).split(Xj);return QL(i?r:+r[0],i?0:+r[1],+r[2]||1e-5)})},eD=function(e,t,i,r,s){var o=t-e,a=r-i;return za(s,function(l){return i+((l-e)/o*a||0)})},f8=function n(e,t,i,r){var s=isNaN(e+t)?0:function(m){return(1-m)*e+m*t};if(!s){var o=ei(e),a={},l,c,h,f,p;if(i===!0&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if(wi(e)&&!wi(t)){for(h=[],f=e.length,p=f-2,c=1;c<f;c++)h.push(n(e[c-1],e[c]));f--,s=function(v){v*=f;var x=Math.min(p,~~v);return h[x](v-x)},i=t}else r||(e=Hu(wi(e)?[]:{},e));if(!h){for(l in t)QM.call(a,e,l,"get",t[l]);s=function(v){return nE(v,a)||(o?e.p:e)}}}return za(i,s)},pP=function(e,t,i){var r=e.labels,s=Xr,o,a,l;for(o in r)a=r[o]-t,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},yr=function(e,t,i){var r=e.vars,s=r[t],o=ln,a=e._ctx,l,c,h;if(s)return l=r[t+"Params"],c=r.callbackScope||e,i&&wa.length&&x0(),a&&(ln=a),h=l?s.apply(c,l):s.call(c),ln=o,h},od=function(e){return Pa(e),e.scrollTrigger&&e.scrollTrigger.kill(!!si),e.progress()<1&&yr(e,"onInterrupt"),e},pu,tD=[],nD=function(e){if(e)if(e=!e.name&&e.default||e,WM()||e.headless){var t=e.name,i=Mn(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:cf,render:nE,add:QM,kill:P8,modifier:C8,rawVars:0},o={targetTest:0,get:0,getSetter:tE,aliases:{},register:0};if(Wu(),e!==r){if(mr[t])return;Ar(r,Ar(_0(e,s),o)),Hu(r.prototype,Hu(s,_0(e,o))),mr[r.prop=t]=r,e.targetTest&&(Dg.push(r),qM[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}FL(t,r),e.register&&e.register(or,r,ir)}else tD.push(e)},Kt=255,ad={aqua:[0,Kt,Kt],lime:[0,Kt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Kt],navy:[0,0,128],white:[Kt,Kt,Kt],olive:[128,128,0],yellow:[Kt,Kt,0],orange:[Kt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Kt,0,0],pink:[Kt,192,203],cyan:[0,Kt,Kt],transparent:[Kt,Kt,Kt,0]},d_=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*Kt+.5|0},iD=function(e,t,i){var r=e?Co(e)?[e>>16,e>>8&Kt,e&Kt]:0:ad.black,s,o,a,l,c,h,f,p,m,v;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),ad[e])r=ad[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Kt,r&Kt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Kt,e&Kt]}else if(e.substr(0,3)==="hsl"){if(r=v=e.match(cP),!t)l=+r[0]%360/360,c=+r[1]/100,h=+r[2]/100,o=h<=.5?h*(c+1):h+c-h*c,s=h*2-o,r.length>3&&(r[3]*=1),r[0]=d_(l+1/3,s,o),r[1]=d_(l,s,o),r[2]=d_(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(DL),i&&r.length<4&&(r[3]=1),r}else r=e.match(cP)||ad.transparent;r=r.map(Number)}return t&&!v&&(s=r[0]/Kt,o=r[1]/Kt,a=r[2]/Kt,f=Math.max(s,o,a),p=Math.min(s,o,a),h=(f+p)/2,f===p?l=c=0:(m=f-p,c=h>.5?m/(2-f-p):m/(f+p),l=f===s?(o-a)/m+(o<a?6:0):f===o?(a-s)/m+2:(s-o)/m+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(h*100+.5)),i&&r.length<4&&(r[3]=1),r},rD=function(e){var t=[],i=[],r=-1;return e.split(Ma).forEach(function(s){var o=s.match(fu)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},mP=function(e,t,i){var r="",s=(e+r).match(Ma),o=t?"hsla(":"rgba(",a=0,l,c,h,f;if(!s)return e;if(s=s.map(function(p){return(p=iD(p,t,1))&&o+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),i&&(h=rD(e),l=i.c,l.join(r)!==h.c.join(r)))for(c=e.replace(Ma,"1").split(fu),f=c.length-1;a<f;a++)r+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(h.length?h:s.length?s:i).shift());if(!c)for(c=e.split(Ma),f=c.length-1;a<f;a++)r+=c[a]+s[a];return r+c[f]},Ma=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in ad)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),p8=/hsl[a]?\(/,sD=function(e){var t=e.join(" "),i;if(Ma.lastIndex=0,Ma.test(t))return i=p8.test(t),e[1]=mP(e[1],i),e[0]=mP(e[0],i,rD(e[1])),!0},hf,gr=function(){var n=Date.now,e=500,t=33,i=n(),r=i,s=1e3/240,o=s,a=[],l,c,h,f,p,m,v=function x(_){var g=n()-r,S=_===!0,w,b,A,P;if((g>e||g<0)&&(i+=g-t),r+=g,A=r-i,w=A-o,(w>0||S)&&(P=++f.frame,p=A-f.time*1e3,f.time=A=A/1e3,o+=w+(w>=s?4:s-w),b=1),S||(l=c(x)),b)for(m=0;m<a.length;m++)a[m](A,p,P,_)};return f={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(_){return p/(1e3/(_||60))},wake:function(){UL&&(!IS&&WM()&&(Is=IS=window,XM=Is.document||{},Tr.gsap=or,(Is.gsapVersions||(Is.gsapVersions=[])).push(or.version),OL(y0||Is.GreenSockGlobals||!Is.gsap&&Is||{}),tD.forEach(nD)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&f.sleep(),c=h||function(_){return setTimeout(_,o-f.time*1e3+1|0)},hf=1,v(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(l),hf=0,c=cf},lagSmoothing:function(_,g){e=_||1/0,t=Math.min(g||33,e)},fps:function(_){s=1e3/(_||240),o=f.time*1e3+s},add:function(_,g,S){var w=g?function(b,A,P,I){_(b,A,P,I),f.remove(w)}:_;return f.remove(_),a[S?"unshift":"push"](w),Wu(),w},remove:function(_,g){~(g=a.indexOf(_))&&a.splice(g,1)&&m>=g&&m--},_listeners:a},f}(),Wu=function(){return!hf&&gr.wake()},Lt={},m8=/^[\d.\-M][\d.\-,\s]/,g8=/["']/g,v8=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length,a,l,c;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[r]=isNaN(c)?c.replace(g8,"").trim():+c,r=l.substr(a+1).trim();return t},y8=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)},x8=function(e){var t=(e+"").split("("),i=Lt[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[v8(t[1])]:y8(e).split(",").map(HL)):Lt._CE&&m8.test(e)?Lt._CE("",e):i},oD=function(e){return function(t){return 1-e(1-t)}},aD=function n(e,t){for(var i=e._first,r;i;)i instanceof Ii?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},Bl=function(e,t){return e&&(Mn(e)?e:Lt[e]||x8(e))||t},oc=function(e,t,i,r){i===void 0&&(i=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:r},o;return nr(e,function(a){Lt[a]=Tr[a]=s,Lt[o=a.toLowerCase()]=i;for(var l in s)Lt[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Lt[a+"."+l]=s[l]}),s},lD=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},f_=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/NS*(Math.asin(1/r)||0),a=function(h){return h===1?1:r*Math.pow(2,-10*h)*Gj((h-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:lD(a);return s=NS/s,l.config=function(c,h){return n(e,c,h)},l},p_=function n(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:lD(i);return r.config=function(s){return n(e,s)},r};nr("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;oc(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});Lt.Linear.easeNone=Lt.none=Lt.Linear.easeIn;oc("Elastic",f_("in"),f_("out"),f_());(function(n,e){var t=1/e,i=2*t,r=2.5*t,s=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<r?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};oc("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);oc("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});oc("Circ",function(n){return-(IL(1-n*n)-1)});oc("Sine",function(n){return n===1?1:-jj(n*Vj)+1});oc("Back",p_("in"),p_("out"),p_());Lt.SteppedEase=Lt.steps=Tr.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0,o=1-Zt;return function(a){return((r*jf(0,o,a)|0)+s)*i}}};Vu.ease=Lt["quad.out"];nr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return KM+=n+","+n+"Params,"});var cD=function(e,t){this.id=Hj++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:zL,this.set=t?t.getSetter:tE},df=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Gu(this,+t.duration,1,1),this.data=t.data,ln&&(this._ctx=ln,ln.data.push(this)),hf||gr.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Gu(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(Wu(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Uv(this,i),!s._dp||s.parent||WL(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Ds(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Zt||!this._initted&&this._dur&&i||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),VL(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+dP(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+dP(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?ju(this._tTime,s)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-Zt?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?S0(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Zt?0:this._rts,this.totalTime(jf(-Math.abs(this._delay),this.totalDuration(),s),r!==!1),kv(this),e8(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Wu(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Zt&&(this._tTime-=Zt)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=un(i);var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Ds(r,this,this._start-this._delay),this}return this._start},e.endTime=function(i){return this._start+(tr(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?S0(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=Zj);var r=si;return si=i,$M(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),si=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,fP(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,fP(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(Hr(this,i),tr(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,tr(r)),this._dur||(this._zTime=-Zt),this},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Zt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Zt,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-Zt)},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this,s=r._prom;return new Promise(function(o){var a=Mn(i)?i:jL,l=function(){var h=r.then;r.then=null,s&&s(),Mn(a)&&(a=a(r))&&(a.then||a===r)&&(r.then=h),o(a),r.then=h};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?l():r._prom=l})},e.kill=function(){od(this)},n}();Ar(df.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Zt,_prom:0,_ps:!1,_rts:1});var Ii=function(n){NL(e,n);function e(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=tr(i.sortChildren),dn&&Ds(i.parent||dn,co(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&XL(co(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return bd(0,arguments,this),this},t.from=function(r,s,o){return bd(1,arguments,this),this},t.fromTo=function(r,s,o,a){return bd(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,Ed(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Dn(r,s,Hr(this,o),1),this},t.call=function(r,s,o){return Ds(this,Dn.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,c,h){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=h,o.parent=this,new Dn(r,o,Hr(this,l)),this},t.staggerFrom=function(r,s,o,a,l,c,h){return o.runBackwards=1,Ed(o).immediateRender=tr(o.immediateRender),this.staggerTo(r,s,o,a,l,c,h)},t.staggerFromTo=function(r,s,o,a,l,c,h,f){return a.startAt=o,Ed(a).immediateRender=tr(a.immediateRender),this.staggerTo(r,s,a,l,c,h,f)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,h=r<=0?0:un(r),f=this._zTime<0!=r<0&&(this._initted||!c),p,m,v,x,_,g,S,w,b,A,P,I;if(this!==dn&&h>l&&r>=0&&(h=l),h!==this._tTime||o||f){if(a!==this._time&&c&&(h+=this._time-a,r+=this._time-a),p=h,b=this._start,w=this._ts,g=!w,f&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(P=this._yoyo,_=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(_*100+r,s,o);if(p=un(h%_),h===l?(x=this._repeat,p=c):(A=un(h/_),x=~~A,x&&x===A&&(p=c,x--),p>c&&(p=c)),A=ju(this._tTime,_),!a&&this._tTime&&A!==x&&this._tTime-A*_-this._dur<=0&&(A=x),P&&x&1&&(p=c-p,I=1),x!==A&&!this._lock){var L=P&&A&1,R=L===(P&&x&1);if(x<A&&(L=!L),a=L?0:h%c?c:h,this._lock=1,this.render(a||(I?0:un(x*_)),s,!c)._lock=0,this._tTime=h,!s&&this.parent&&yr(this,"onRepeat"),this.vars.repeatRefresh&&!I&&(this.invalidate()._lock=1,A=x),a&&a!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,R&&(this._lock=2,a=L?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!I&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;aD(this,I)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=r8(this,un(a),un(p)),S&&(h-=p-(p=S._start))),this._tTime=h,this._time=p,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&h&&c&&!s&&!A&&(yr(this,"onStart"),this._tTime!==h))return this;if(p>=a&&r>=0)for(m=this._first;m;){if(v=m._next,(m._act||p>=m._start)&&m._ts&&S!==m){if(m.parent!==this)return this.render(r,s,o);if(m.render(m._ts>0?(p-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(p-m._start)*m._ts,s,o),p!==this._time||!this._ts&&!g){S=0,v&&(h+=this._zTime=-Zt);break}}m=v}else{m=this._last;for(var C=r<0?r:p;m;){if(v=m._prev,(m._act||C<=m._end)&&m._ts&&S!==m){if(m.parent!==this)return this.render(r,s,o);if(m.render(m._ts>0?(C-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(C-m._start)*m._ts,s,o||si&&$M(m)),p!==this._time||!this._ts&&!g){S=0,v&&(h+=this._zTime=C?-Zt:Zt);break}}m=v}}if(S&&!s&&(this.pause(),S.render(p>=a?0:-Zt)._zTime=p>=a?1:-1,this._ts))return this._start=b,kv(this),this.render(r,s,o);this._onUpdate&&!s&&yr(this,"onUpdate",!0),(h===l&&this._tTime>=this.totalDuration()||!h&&a)&&(b===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(h===l&&this._ts>0||!h&&this._ts<0)&&Pa(this,1),!s&&!(r<0&&!a)&&(h||a||!l)&&(yr(this,h===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(Co(s)||(s=Hr(this,s,r)),!(r instanceof df)){if(wi(r))return r.forEach(function(a){return o.add(a,s)}),this;if(ei(r))return this.addLabel(r,s);if(Mn(r))r=Dn.delayedCall(0,r);else return this}return this!==r?Ds(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Xr);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Dn?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return ei(r)?this.removeLabel(r):Mn(r)?this.killTweensOf(r):(r.parent===this&&Dv(this,r),r===this._recent&&(this._recent=this._last),Fl(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=un(gr.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=Hr(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=Dn.delayedCall(0,s||cf,o);return a.data="isPause",this._hasPause=1,Ds(this,a,Hr(this,r))},t.removePause=function(r){var s=this._first;for(r=Hr(this,r);s;)s._start===r&&s.data==="isPause"&&Pa(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)ua!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=Yr(r),l=this._first,c=Co(s),h;l;)l instanceof Dn?$j(l._targets,a)&&(c?(!ua||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(h=l.getTweensOf(a,s)).length&&o.push.apply(o,h),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=Hr(o,r),l=s,c=l.startAt,h=l.onStart,f=l.onStartParams,p=l.immediateRender,m,v=Dn.to(o,Ar({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||Zt,onStart:function(){if(o.pause(),!m){var _=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());v._dur!==_&&Gu(v,_,0,1).render(v._time,!0,!0),m=1}h&&h.apply(v,f||[])}},s));return p?v.render(0):v},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,Ar({startAt:{time:Hr(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),pP(this,Hr(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),pP(this,Hr(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Zt)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);var a=this._first,l=this.labels,c;for(r=un(r);a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return Fl(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Fl(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=Xr,c,h,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(f=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),h=a._start,h>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Ds(o,a,h-a._delay,1)._lock=0):l=h,h<0&&a._ts&&(s-=h,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=un(h/o._ts),o._time-=h,o._tTime-=h),o.shiftChildren(-h,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;Gu(o,o===dn&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(dn._ts&&(VL(dn,S0(r,dn)),BL=gr.frame),gr.frame>=uP){uP+=wr.autoSleep||120;var s=dn._first;if((!s||!s._ts)&&wr.autoSleep&&gr._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||gr.sleep()}}},e}(df);Ar(Ii.prototype,{_lock:0,_hasPause:0,_forcing:0});var _8=function(e,t,i,r,s,o,a){var l=new ir(this._pt,e,t,0,1,mD,null,s),c=0,h=0,f,p,m,v,x,_,g,S;for(l.b=i,l.e=r,i+="",r+="",(g=~r.indexOf("random("))&&(r=uf(r)),o&&(S=[i,r],o(S,e,t),i=S[0],r=S[1]),p=i.match(u_)||[];f=u_.exec(r);)v=f[0],x=r.substring(c,f.index),m?m=(m+1)%5:x.substr(-5)==="rgba("&&(m=1),v!==p[h++]&&(_=parseFloat(p[h-1])||0,l._pt={_next:l._pt,p:x||h===1?x:",",s:_,c:v.charAt(1)==="="?Au(_,v)-_:parseFloat(v)-_,m:m&&m<4?Math.round:0},c=u_.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(kL.test(r)||g)&&(l.e=0),this._pt=l,l},QM=function(e,t,i,r,s,o,a,l,c,h){Mn(r)&&(r=r(s||0,e,o));var f=e[t],p=i!=="get"?i:Mn(f)?c?e[t.indexOf("set")||!Mn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():f,m=Mn(f)?c?b8:fD:eE,v;if(ei(r)&&(~r.indexOf("random(")&&(r=uf(r)),r.charAt(1)==="="&&(v=Au(p,r)+(xi(p)||0),(v||v===0)&&(r=v))),!h||p!==r||BS)return!isNaN(p*r)&&r!==""?(v=new ir(this._pt,e,t,+p||0,r-(p||0),typeof f=="boolean"?A8:pD,0,m),c&&(v.fp=c),a&&v.modifier(a,this,e),this._pt=v):(!f&&!(t in e)&&YM(t,r),_8.call(this,e,t,p,r,m,l||wr.stringFilter,c))},S8=function(e,t,i,r,s){if(Mn(e)&&(e=Td(e,s,t,i,r)),!Xs(e)||e.style&&e.nodeType||wi(e)||LL(e))return ei(e)?Td(e,s,t,i,r):e;var o={},a;for(a in e)o[a]=Td(e[a],s,t,i,r);return o},uD=function(e,t,i,r,s,o){var a,l,c,h;if(mr[e]&&(a=new mr[e]).init(s,a.rawVars?t[e]:S8(t[e],r,s,o,i),i,r,o)!==!1&&(i._pt=l=new ir(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==pu))for(c=i._ptLookup[i._targets.indexOf(s)],h=a._props.length;h--;)c[a._props[h]]=l;return a},ua,BS,JM=function n(e,t,i){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,c=r.onUpdate,h=r.runBackwards,f=r.yoyoEase,p=r.keyframes,m=r.autoRevert,v=e._dur,x=e._startAt,_=e._targets,g=e.parent,S=g&&g.data==="nested"?g.vars.targets:_,w=e._overwrite==="auto"&&!jM,b=e.timeline,A,P,I,L,R,C,U,j,X,J,se,Q,te;if(b&&(!p||!s)&&(s="none"),e._ease=Bl(s,Vu.ease),e._yEase=f?oD(Bl(f===!0?s:f,Vu.ease)):0,f&&e._yoyo&&!e._repeat&&(f=e._yEase,e._yEase=e._ease,e._ease=f),e._from=!b&&!!r.runBackwards,!b||p&&!r.stagger){if(j=_[0]?Ol(_[0]).harness:0,Q=j&&r[j.prop],A=_0(r,qM),x&&(x._zTime<0&&x.progress(1),t<0&&h&&a&&!m?x.render(-1,!0):x.revert(h&&v?Lg:Kj),x._lazy=0),o){if(Pa(e._startAt=Dn.set(_,Ar({data:"isStart",overwrite:!1,parent:g,immediateRender:!0,lazy:!x&&tr(l),startAt:null,delay:0,onUpdate:c&&function(){return yr(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(si||!a&&!m)&&e._startAt.revert(Lg),a&&v&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(h&&v&&!x){if(t&&(a=!1),I=Ar({overwrite:!1,data:"isFromStart",lazy:a&&!x&&tr(l),immediateRender:a,stagger:0,parent:g},A),Q&&(I[j.prop]=Q),Pa(e._startAt=Dn.set(_,I)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(si?e._startAt.revert(Lg):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,Zt,Zt);else if(!t)return}for(e._pt=e._ptCache=0,l=v&&tr(l)||l&&!v,P=0;P<_.length;P++){if(R=_[P],U=R._gsap||ZM(_)[P]._gsap,e._ptLookup[P]=J={},LS[U.id]&&wa.length&&x0(),se=S===_?P:S.indexOf(R),j&&(X=new j).init(R,Q||A,e,se,S)!==!1&&(e._pt=L=new ir(e._pt,R,X.name,0,1,X.render,X,0,X.priority),X._props.forEach(function(D){J[D]=L}),X.priority&&(C=1)),!j||Q)for(I in A)mr[I]&&(X=uD(I,A,e,se,R,S))?X.priority&&(C=1):J[I]=L=QM.call(e,R,I,"get",A[I],se,S,0,r.stringFilter);e._op&&e._op[P]&&e.kill(R,e._op[P]),w&&e._pt&&(ua=e,dn.killTweensOf(R,J,e.globalTime(t)),te=!e.parent,ua=0),e._pt&&l&&(LS[U.id]=1)}C&&gD(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!te,p&&t<=0&&b.render(Xr,!0,!0)},w8=function(e,t,i,r,s,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],h,f,p,m;if(!c)for(c=e._ptCache[t]=[],p=e._ptLookup,m=e._targets.length;m--;){if(h=p[m][t],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==t&&h.fp!==t;)h=h._next;if(!h)return BS=1,e.vars[t]="+=0",JM(e,a),BS=0,l?lf(t+" not eligible for reset"):1;c.push(h)}for(m=c.length;m--;)f=c[m],h=f._pt||f,h.s=(r||r===0)&&!s?r:h.s+(r||0)+o*h.c,h.c=i-h.s,f.e&&(f.e=Pn(i)+xi(f.e)),f.b&&(f.b=h.s+xi(f.b))},M8=function(e,t){var i=e[0]?Ol(e[0]).harness:0,r=i&&i.aliases,s,o,a,l;if(!r)return t;s=Hu({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},E8=function(e,t,i,r){var s=t.ease||r||"power1.inOut",o,a;if(wi(t))a=i[e]||(i[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Td=function(e,t,i,r,s){return Mn(e)?e.call(t,i,r,s):ei(e)&&~e.indexOf("random(")?uf(e):e},hD=KM+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",dD={};nr(hD+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return dD[n]=1});var Dn=function(n){NL(e,n);function e(i,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=n.call(this,o?r:Ed(r))||this;var l=a.vars,c=l.duration,h=l.delay,f=l.immediateRender,p=l.stagger,m=l.overwrite,v=l.keyframes,x=l.defaults,_=l.scrollTrigger,g=l.yoyoEase,S=r.parent||dn,w=(wi(i)||LL(i)?Co(i[0]):"length"in r)?[i]:Yr(i),b,A,P,I,L,R,C,U;if(a._targets=w.length?ZM(w):lf("GSAP target "+i+" not found. https://gsap.com",!wr.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=m,v||p||Em(c)||Em(h)){if(r=a.vars,b=a.timeline=new Ii({data:"nested",defaults:x||{},targets:S&&S.data==="nested"?S.vars.targets:w}),b.kill(),b.parent=b._dp=co(a),b._start=0,p||Em(c)||Em(h)){if(I=w.length,C=p&&ZL(p),Xs(p))for(L in p)~hD.indexOf(L)&&(U||(U={}),U[L]=p[L]);for(A=0;A<I;A++)P=_0(r,dD),P.stagger=0,g&&(P.yoyoEase=g),U&&Hu(P,U),R=w[A],P.duration=+Td(c,co(a),A,R,w),P.delay=(+Td(h,co(a),A,R,w)||0)-a._delay,!p&&I===1&&P.delay&&(a._delay=h=P.delay,a._start+=h,P.delay=0),b.to(R,P,C?C(A,R,w):0),b._ease=Lt.none;b.duration()?c=h=0:a.timeline=0}else if(v){Ed(Ar(b.vars.defaults,{ease:"none"})),b._ease=Bl(v.ease||r.ease||"none");var j=0,X,J,se;if(wi(v))v.forEach(function(Q){return b.to(w,Q,">")}),b.duration();else{P={};for(L in v)L==="ease"||L==="easeEach"||E8(L,v[L],P,v.easeEach);for(L in P)for(X=P[L].sort(function(Q,te){return Q.t-te.t}),j=0,A=0;A<X.length;A++)J=X[A],se={ease:J.e,duration:(J.t-(A?X[A-1].t:0))/100*c},se[L]=J.v,b.to(w,se,j),j+=se.duration;b.duration()<c&&b.to({},{duration:c-b.duration()})}}c||a.duration(c=b.duration())}else a.timeline=0;return m===!0&&!jM&&(ua=co(a),dn.killTweensOf(w),ua=0),Ds(S,co(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(f||!c&&!v&&a._start===un(S._time)&&tr(f)&&t8(co(a))&&S.data!=="nested")&&(a._tTime=-Zt,a.render(Math.max(0,-h)||0)),_&&XL(co(a),_),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,c=this._dur,h=r<0,f=r>l-Zt&&!h?l:r<Zt?0:r,p,m,v,x,_,g,S,w,b;if(!c)i8(this,r,s,o);else if(f!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h||this._lazy){if(p=f,w=this.timeline,this._repeat){if(x=c+this._rDelay,this._repeat<-1&&h)return this.totalTime(x*100+r,s,o);if(p=un(f%x),f===l?(v=this._repeat,p=c):(_=un(f/x),v=~~_,v&&v===_?(p=c,v--):p>c&&(p=c)),g=this._yoyo&&v&1,g&&(b=this._yEase,p=c-p),_=ju(this._tTime,x),p===a&&!o&&this._initted&&v===_)return this._tTime=f,this;v!==_&&(w&&this._yEase&&aD(w,g),this.vars.repeatRefresh&&!g&&!this._lock&&p!==x&&this._initted&&(this._lock=o=1,this.render(un(x*v),!0).invalidate()._lock=0))}if(!this._initted){if(YL(this,h?r:p,o,s,f))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&v!==_))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=f,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(b||this._ease)(p/c),this._from&&(this.ratio=S=1-S),!a&&f&&!s&&!_&&(yr(this,"onStart"),this._tTime!==f))return this;for(m=this._pt;m;)m.r(S,m.d),m=m._next;w&&w.render(r<0?r:w._dur*w._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(h&&DS(this,r,s,o),yr(this,"onUpdate")),this._repeat&&v!==_&&this.vars.onRepeat&&!s&&this.parent&&yr(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(h&&!this._onUpdate&&DS(this,r,!0,!0),(r||!c)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&Pa(this,1),!s&&!(h&&!a)&&(f||a||g)&&(yr(this,f===l?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a,l){hf||gr.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||JM(this,c),h=this._ease(c/this._dur),w8(this,r,s,o,a,h,c,l)?this.resetTo(r,s,o,a,1):(Uv(this,0),this.parent||GL(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?od(this):this.scrollTrigger&&this.scrollTrigger.kill(!!si),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,ua&&ua.vars.overwrite!==!0)._first||od(this),this.parent&&o!==this.timeline.totalDuration()&&Gu(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?Yr(r):a,c=this._ptLookup,h=this._pt,f,p,m,v,x,_,g;if((!s||s==="all")&&Jj(a,l))return s==="all"&&(this._pt=0),od(this);for(f=this._op=this._op||[],s!=="all"&&(ei(s)&&(x={},nr(s,function(S){return x[S]=1}),s=x),s=M8(a,s)),g=a.length;g--;)if(~l.indexOf(a[g])){p=c[g],s==="all"?(f[g]=s,v=p,m={}):(m=f[g]=f[g]||{},v=s);for(x in v)_=p&&p[x],_&&((!("kill"in _.d)||_.d.kill(x)===!0)&&Dv(this,_,"_pt"),delete p[x]),m!=="all"&&(m[x]=1)}return this._initted&&!this._pt&&h&&od(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return bd(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return bd(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return dn.killTweensOf(r,s,o)},e}(df);Ar(Dn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});nr("staggerTo,staggerFrom,staggerFromTo",function(n){Dn[n]=function(){var e=new Ii,t=US.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var eE=function(e,t,i){return e[t]=i},fD=function(e,t,i){return e[t](i)},b8=function(e,t,i,r){return e[t](r.fp,i)},T8=function(e,t,i){return e.setAttribute(t,i)},tE=function(e,t){return Mn(e[t])?fD:GM(e[t])&&e.setAttribute?T8:eE},pD=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},A8=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},mD=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},nE=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},C8=function(e,t,i,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},P8=function(e){for(var t=this._pt,i,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?Dv(this,t,"_pt"):t.dep||(i=1),t=r;return!i},R8=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},gD=function(e){for(var t=e._pt,i,r,s,o;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},ir=function(){function n(t,i,r,s,o,a,l,c,h){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||pD,this.d=l||this,this.set=c||eE,this.pr=h||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=R8,this.m=i,this.mt=s,this.tween=r},n}();nr(KM+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return qM[n]=1});Tr.TweenMax=Tr.TweenLite=Dn;Tr.TimelineLite=Tr.TimelineMax=Ii;dn=new Ii({sortChildren:!1,defaults:Vu,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});wr.stringFilter=sD;var zl=[],kg={},N8=[],gP=0,I8=0,m_=function(e){return(kg[e]||N8).map(function(t){return t()})},zS=function(){var e=Date.now(),t=[];e-gP>2&&(m_("matchMediaInit"),zl.forEach(function(i){var r=i.queries,s=i.conditions,o,a,l,c;for(a in r)o=Is.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(i.revert(),l&&t.push(i))}),m_("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),gP=e,m_("matchMedia"))},vD=function(){function n(t,i){this.selector=i&&OS(i),this.data=[],this._r=[],this.isReverted=!1,this.id=I8++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){Mn(i)&&(s=r,r=i,i=Mn);var o=this,a=function(){var c=ln,h=o.selector,f;return c&&c!==o&&c.data.push(o),s&&(o.selector=OS(s)),ln=o,f=r.apply(o,arguments),Mn(f)&&o._r.push(f),ln=c,o.selector=h,o.isReverted=!1,f};return o.last=a,i===Mn?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},e.ignore=function(i){var r=ln;ln=null,i(this),ln=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof Dn&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(h){return a.splice(a.indexOf(h),1)}));for(a.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,f){return f.g-h.g||-1/0}).forEach(function(h){return h.t.revert(i)}),l=s.data.length;l--;)c=s.data[l],c instanceof Ii?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Dn)&&c.revert&&c.revert(i);s._r.forEach(function(h){return h(i,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=zl.length;o--;)zl[o].id===this.id&&zl.splice(o,1)},e.revert=function(i){this.kill(i||{})},n}(),L8=function(){function n(t){this.contexts=[],this.scope=t,ln&&ln.data.push(this)}var e=n.prototype;return e.add=function(i,r,s){Xs(i)||(i={matches:i});var o=new vD(0,s||this.scope),a=o.conditions={},l,c,h;ln&&!o.selector&&(o.selector=ln.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=i;for(c in i)c==="all"?h=1:(l=Is.matchMedia(i[c]),l&&(zl.indexOf(o)<0&&zl.push(o),(a[c]=l.matches)&&(h=1),l.addListener?l.addListener(zS):l.addEventListener("change",zS)));return h&&r(o,function(f){return o.add(null,f)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),w0={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return nD(r)})},timeline:function(e){return new Ii(e)},getTweensOf:function(e,t){return dn.getTweensOf(e,t)},getProperty:function(e,t,i,r){ei(e)&&(e=Yr(e)[0]);var s=Ol(e||{}).get,o=i?jL:HL;return i==="native"&&(i=""),e&&(t?o((mr[t]&&mr[t].get||s)(e,t,i,r)):function(a,l,c){return o((mr[a]&&mr[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,i){if(e=Yr(e),e.length>1){var r=e.map(function(h){return or.quickSetter(h,t,i)}),s=r.length;return function(h){for(var f=s;f--;)r[f](h)}}e=e[0]||{};var o=mr[t],a=Ol(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(h){var f=new o;pu._pt=0,f.init(e,i?h+i:h,pu,0,[e]),f.render(1,f),pu._pt&&nE(1,pu)}:a.set(e,l);return o?c:function(h){return c(e,l,i?h+i:h,a,1)}},quickTo:function(e,t,i){var r,s=or.to(e,Ar((r={},r[t]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),o=function(l,c,h){return s.resetTo(t,l,c,h)};return o.tween=s,o},isTweening:function(e){return dn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Bl(e.ease,Vu.ease)),hP(Vu,e||{})},config:function(e){return hP(wr,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!mr[a]&&!Tr[a]&&lf(t+" effect requires "+a+" plugin.")}),h_[t]=function(a,l,c){return i(Yr(a),Ar(l||{},s),c)},o&&(Ii.prototype[t]=function(a,l,c){return this.add(h_[t](a,Xs(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Lt[e]=Bl(t)},parseEase:function(e,t){return arguments.length?Bl(e,t):Lt},getById:function(e){return dn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new Ii(e),r,s;for(i.smoothChildTiming=tr(e.smoothChildTiming),dn.remove(i),i._dp=0,i._time=i._tTime=dn._time,r=dn._first;r;)s=r._next,(t||!(!r._dur&&r instanceof Dn&&r.vars.onComplete===r._targets[0]))&&Ds(i,r,r._start-r._delay),r=s;return Ds(dn,i,0),i},context:function(e,t){return e?new vD(e,t):ln},matchMedia:function(e){return new L8(e)},matchMediaRefresh:function(){return zl.forEach(function(e){var t=e.conditions,i,r;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||zS()},addEventListener:function(e,t){var i=kg[e]||(kg[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=kg[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:h8,wrapYoyo:d8,distribute:ZL,random:QL,snap:$L,normalize:u8,getUnit:xi,clamp:o8,splitColor:iD,toArray:Yr,selector:OS,mapRange:eD,pipe:l8,unitize:c8,interpolate:f8,shuffle:KL},install:OL,effects:h_,ticker:gr,updateRoot:Ii.updateRoot,plugins:mr,globalTimeline:dn,core:{PropTween:ir,globals:FL,Tween:Dn,Timeline:Ii,Animation:df,getCache:Ol,_removeLinkedListItem:Dv,reverting:function(){return si},context:function(e){return e&&ln&&(ln.data.push(e),e._ctx=ln),ln},suppressOverwrites:function(e){return jM=e}}};nr("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return w0[n]=Dn[n]});gr.add(Ii.updateRoot);pu=w0.to({},{duration:0});var D8=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},k8=function(e,t){var i=e._targets,r,s,o;for(r in t)for(s=i.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=D8(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))},g_=function(e,t){return{name:e,headless:1,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,c;if(ei(s)&&(l={},nr(s,function(h){return l[h]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}k8(a,s)}}}},or=w0.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)si?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},g_("roundProps",FS),g_("modifiers"),g_("snap",$L))||w0;Dn.version=Ii.version=or.version="3.14.2";UL=1;WM()&&Wu();Lt.Power0;Lt.Power1;Lt.Power2;Lt.Power3;Lt.Power4;Lt.Linear;Lt.Quad;Lt.Cubic;Lt.Quart;Lt.Quint;Lt.Strong;Lt.Elastic;Lt.Back;Lt.SteppedEase;Lt.Bounce;Lt.Sine;Lt.Expo;Lt.Circ;/*!
 * CSSPlugin 3.14.2
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var vP,ha,Cu,iE,Pl,yP,rE,U8=function(){return typeof window<"u"},Po={},Sl=180/Math.PI,Pu=Math.PI/180,Ac=Math.atan2,xP=1e8,sE=/([A-Z])/g,O8=/(left|right|width|margin|padding|x)/i,F8=/[\s,\(]\S/,Us={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},VS=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},B8=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},z8=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},V8=function(e,t){return t.set(t.t,t.p,e===1?t.e:e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},H8=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},yD=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},xD=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},j8=function(e,t,i){return e.style[t]=i},G8=function(e,t,i){return e.style.setProperty(t,i)},W8=function(e,t,i){return e._gsap[t]=i},X8=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},Y8=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},q8=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},pn="transform",rr=pn+"Origin",K8=function n(e,t){var i=this,r=this.target,s=r.style,o=r._gsap;if(e in Po&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Us[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=ho(r,a)}):this.tfm[e]=o.x?o[e]:ho(r,e),e===rr&&(this.tfm.zOrigin=o.zOrigin);else return Us.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(this.props.indexOf(pn)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(rr,t,"")),e=pn}(s||t)&&this.props.push(e,t,s[e])},_D=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Z8=function(){var e=this.props,t=this.target,i=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(sE,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=rE(),(!s||!s.isStart)&&!i[pn]&&(_D(i),r.zOrigin&&i[rr]&&(i[rr]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},SD=function(e,t){var i={target:e,props:[],revert:Z8,save:K8};return e._gsap||or.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(r){return i.save(r)}),i},wD,HS=function(e,t){var i=ha.createElementNS?ha.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ha.createElement(e);return i&&i.style?i:ha.createElement(e)},xr=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(sE,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,Xu(t)||t,1)||""},_P="O,Moz,ms,Ms,Webkit".split(","),Xu=function(e,t,i){var r=t||Pl,s=r.style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(_P[o]+e in s););return o<0?null:(o===3?"ms":o>=0?_P[o]:"")+e},jS=function(){U8()&&window.document&&(vP=window,ha=vP.document,Cu=ha.documentElement,Pl=HS("div")||{style:{}},HS("div"),pn=Xu(pn),rr=pn+"Origin",Pl.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",wD=!!Xu("perspective"),rE=or.core.reverting,iE=1)},SP=function(e){var t=e.ownerSVGElement,i=HS("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0),s;r.style.display="block",i.appendChild(r),Cu.appendChild(i);try{s=r.getBBox()}catch{}return i.removeChild(r),Cu.removeChild(i),s},wP=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},MD=function(e){var t,i;try{t=e.getBBox()}catch{t=SP(e),i=1}return t&&(t.width||t.height)||i||(t=SP(e)),t&&!t.width&&!t.x&&!t.y?{x:+wP(e,["x","cx","x1"])||0,y:+wP(e,["y","cy","y1"])||0,width:0,height:0}:t},ED=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&MD(e))},Ra=function(e,t){if(t){var i=e.style,r;t in Po&&t!==rr&&(t=pn),i.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(r==="--"?t:t.replace(sE,"-$1").toLowerCase())):i.removeAttribute(t)}},da=function(e,t,i,r,s,o){var a=new ir(e._pt,t,i,0,1,o?xD:yD);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},MP={deg:1,rad:1,turn:1},$8={grid:1,flex:1},Na=function n(e,t,i,r){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=Pl.style,l=O8.test(t),c=e.tagName.toLowerCase()==="svg",h=(c?"client":"offset")+(l?"Width":"Height"),f=100,p=r==="px",m=r==="%",v,x,_,g;if(r===o||!s||MP[r]||MP[o])return s;if(o!=="px"&&!p&&(s=n(e,t,i,"px")),g=e.getCTM&&ED(e),(m||o==="%")&&(Po[t]||~t.indexOf("adius")))return v=g?e.getBBox()[l?"width":"height"]:e[h],Pn(m?s/v*f:s/100*v);if(a[l?"width":"height"]=f+(p?o:r),x=r!=="rem"&&~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,g&&(x=(e.ownerSVGElement||{}).parentNode),(!x||x===ha||!x.appendChild)&&(x=ha.body),_=x._gsap,_&&m&&_.width&&l&&_.time===gr.time&&!_.uncache)return Pn(s/_.width*f);if(m&&(t==="height"||t==="width")){var S=e.style[t];e.style[t]=f+r,v=e[h],S?e.style[t]=S:Ra(e,t)}else(m||o==="%")&&!$8[xr(x,"display")]&&(a.position=xr(e,"position")),x===e&&(a.position="static"),x.appendChild(Pl),v=Pl[h],x.removeChild(Pl),a.position="absolute";return l&&m&&(_=Ol(x),_.time=gr.time,_.width=x[h]),Pn(p?v*s/f:v&&s?f/v*s:0)},ho=function(e,t,i,r){var s;return iE||jS(),t in Us&&t!=="transform"&&(t=Us[t],~t.indexOf(",")&&(t=t.split(",")[0])),Po[t]&&t!=="transform"?(s=pf(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:E0(xr(e,rr))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=M0[t]&&M0[t](e,t,i)||xr(e,t)||zL(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?Na(e,t,s,i)+i:s},Q8=function(e,t,i,r){if(!i||i==="none"){var s=Xu(t,e,1),o=s&&xr(e,s,1);o&&o!==i?(t=s,i=o):t==="borderColor"&&(i=xr(e,"borderTopColor"))}var a=new ir(this._pt,e.style,t,0,1,mD),l=0,c=0,h,f,p,m,v,x,_,g,S,w,b,A;if(a.b=i,a.e=r,i+="",r+="",r.substring(0,6)==="var(--"&&(r=xr(e,r.substring(4,r.indexOf(")")))),r==="auto"&&(x=e.style[t],e.style[t]=r,r=xr(e,t)||r,x?e.style[t]=x:Ra(e,t)),h=[i,r],sD(h),i=h[0],r=h[1],p=i.match(fu)||[],A=r.match(fu)||[],A.length){for(;f=fu.exec(r);)_=f[0],S=r.substring(l,f.index),v?v=(v+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(v=1),_!==(x=p[c++]||"")&&(m=parseFloat(x)||0,b=x.substr((m+"").length),_.charAt(1)==="="&&(_=Au(m,_)+b),g=parseFloat(_),w=_.substr((g+"").length),l=fu.lastIndex-w.length,w||(w=w||wr.units[t]||b,l===r.length&&(r+=w,a.e+=w)),b!==w&&(m=Na(e,t,x,w)||0),a._pt={_next:a._pt,p:S||c===1?S:",",s:m,c:g-m,m:v&&v<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?xD:yD;return kL.test(r)&&(a.e=0),this._pt=a,a},EP={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},J8=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),t[0]=EP[i]||i,t[1]=EP[r]||r,t.join(" ")},e6=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,r=i.style,s=t.u,o=i._gsap,a,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],Po[a]&&(l=1,a=a==="transformOrigin"?rr:pn),Ra(i,a);l&&(Ra(i,pn),o&&(o.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",pf(i,1),o.uncache=1,_D(r)))}},M0={clearProps:function(e,t,i,r,s){if(s.data!=="isFromStart"){var o=e._pt=new ir(e._pt,t,i,0,0,e6);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},ff=[1,0,0,1,0,0],bD={},TD=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},bP=function(e){var t=xr(e,pn);return TD(t)?ff:t.substr(7).match(DL).map(Pn)},oE=function(e,t){var i=e._gsap||Ol(e),r=e.style,s=bP(e),o,a,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?ff:s):(s===ff&&!e.offsetParent&&e!==Cu&&!i.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,a=e.nextElementSibling,Cu.appendChild(e)),s=bP(e),l?r.display=l:Ra(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):Cu.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},GS=function(e,t,i,r,s,o){var a=e._gsap,l=s||oE(e,!0),c=a.xOrigin||0,h=a.yOrigin||0,f=a.xOffset||0,p=a.yOffset||0,m=l[0],v=l[1],x=l[2],_=l[3],g=l[4],S=l[5],w=t.split(" "),b=parseFloat(w[0])||0,A=parseFloat(w[1])||0,P,I,L,R;i?l!==ff&&(I=m*_-v*x)&&(L=b*(_/I)+A*(-x/I)+(x*S-_*g)/I,R=b*(-v/I)+A*(m/I)-(m*S-v*g)/I,b=L,A=R):(P=MD(e),b=P.x+(~w[0].indexOf("%")?b/100*P.width:b),A=P.y+(~(w[1]||w[0]).indexOf("%")?A/100*P.height:A)),r||r!==!1&&a.smooth?(g=b-c,S=A-h,a.xOffset=f+(g*m+S*x)-g,a.yOffset=p+(g*v+S*_)-S):a.xOffset=a.yOffset=0,a.xOrigin=b,a.yOrigin=A,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[rr]="0px 0px",o&&(da(o,a,"xOrigin",c,b),da(o,a,"yOrigin",h,A),da(o,a,"xOffset",f,a.xOffset),da(o,a,"yOffset",p,a.yOffset)),e.setAttribute("data-svg-origin",b+" "+A)},pf=function(e,t){var i=e._gsap||new cD(e);if("x"in i&&!t&&!i.uncache)return i;var r=e.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=xr(e,rr)||"0",h,f,p,m,v,x,_,g,S,w,b,A,P,I,L,R,C,U,j,X,J,se,Q,te,D,G,W,ee,de,Le,ie,pe;return h=f=p=x=_=g=S=w=b=0,m=v=1,i.svg=!!(e.getCTM&&ED(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[pn]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[pn]!=="none"?l[pn]:"")),r.scale=r.rotate=r.translate="none"),I=oE(e,i.svg),i.svg&&(i.uncache?(D=e.getBBox(),c=i.xOrigin-D.x+"px "+(i.yOrigin-D.y)+"px",te=""):te=!t&&e.getAttribute("data-svg-origin"),GS(e,te||c,!!te||i.originIsAbsolute,i.smooth!==!1,I)),A=i.xOrigin||0,P=i.yOrigin||0,I!==ff&&(U=I[0],j=I[1],X=I[2],J=I[3],h=se=I[4],f=Q=I[5],I.length===6?(m=Math.sqrt(U*U+j*j),v=Math.sqrt(J*J+X*X),x=U||j?Ac(j,U)*Sl:0,S=X||J?Ac(X,J)*Sl+x:0,S&&(v*=Math.abs(Math.cos(S*Pu))),i.svg&&(h-=A-(A*U+P*X),f-=P-(A*j+P*J))):(pe=I[6],Le=I[7],W=I[8],ee=I[9],de=I[10],ie=I[11],h=I[12],f=I[13],p=I[14],L=Ac(pe,de),_=L*Sl,L&&(R=Math.cos(-L),C=Math.sin(-L),te=se*R+W*C,D=Q*R+ee*C,G=pe*R+de*C,W=se*-C+W*R,ee=Q*-C+ee*R,de=pe*-C+de*R,ie=Le*-C+ie*R,se=te,Q=D,pe=G),L=Ac(-X,de),g=L*Sl,L&&(R=Math.cos(-L),C=Math.sin(-L),te=U*R-W*C,D=j*R-ee*C,G=X*R-de*C,ie=J*C+ie*R,U=te,j=D,X=G),L=Ac(j,U),x=L*Sl,L&&(R=Math.cos(L),C=Math.sin(L),te=U*R+j*C,D=se*R+Q*C,j=j*R-U*C,Q=Q*R-se*C,U=te,se=D),_&&Math.abs(_)+Math.abs(x)>359.9&&(_=x=0,g=180-g),m=Pn(Math.sqrt(U*U+j*j+X*X)),v=Pn(Math.sqrt(Q*Q+pe*pe)),L=Ac(se,Q),S=Math.abs(L)>2e-4?L*Sl:0,b=ie?1/(ie<0?-ie:ie):0),i.svg&&(te=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!TD(xr(e,pn)),te&&e.setAttribute("transform",te))),Math.abs(S)>90&&Math.abs(S)<270&&(s?(m*=-1,S+=x<=0?180:-180,x+=x<=0?180:-180):(v*=-1,S+=S<=0?180:-180)),t=t||i.uncache,i.x=h-((i.xPercent=h&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-h)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=f-((i.yPercent=f&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=p+o,i.scaleX=Pn(m),i.scaleY=Pn(v),i.rotation=Pn(x)+a,i.rotationX=Pn(_)+a,i.rotationY=Pn(g)+a,i.skewX=S+a,i.skewY=w+a,i.transformPerspective=b+o,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(r[rr]=E0(c)),i.xOffset=i.yOffset=0,i.force3D=wr.force3D,i.renderTransform=i.svg?n6:wD?AD:t6,i.uncache=0,i},E0=function(e){return(e=e.split(" "))[0]+" "+e[1]},v_=function(e,t,i){var r=xi(t);return Pn(parseFloat(t)+parseFloat(Na(e,"x",i+"px",r)))+r},t6=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,AD(e,t)},nl="0deg",Fh="0px",il=") ",AD=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,h=i.rotationY,f=i.rotationX,p=i.skewX,m=i.skewY,v=i.scaleX,x=i.scaleY,_=i.transformPerspective,g=i.force3D,S=i.target,w=i.zOrigin,b="",A=g==="auto"&&e&&e!==1||g===!0;if(w&&(f!==nl||h!==nl)){var P=parseFloat(h)*Pu,I=Math.sin(P),L=Math.cos(P),R;P=parseFloat(f)*Pu,R=Math.cos(P),o=v_(S,o,I*R*-w),a=v_(S,a,-Math.sin(P)*-w),l=v_(S,l,L*R*-w+w)}_!==Fh&&(b+="perspective("+_+il),(r||s)&&(b+="translate("+r+"%, "+s+"%) "),(A||o!==Fh||a!==Fh||l!==Fh)&&(b+=l!==Fh||A?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+il),c!==nl&&(b+="rotate("+c+il),h!==nl&&(b+="rotateY("+h+il),f!==nl&&(b+="rotateX("+f+il),(p!==nl||m!==nl)&&(b+="skew("+p+", "+m+il),(v!==1||x!==1)&&(b+="scale("+v+", "+x+il),S.style[pn]=b||"translate(0, 0)"},n6=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,h=i.skewY,f=i.scaleX,p=i.scaleY,m=i.target,v=i.xOrigin,x=i.yOrigin,_=i.xOffset,g=i.yOffset,S=i.forceCSS,w=parseFloat(o),b=parseFloat(a),A,P,I,L,R;l=parseFloat(l),c=parseFloat(c),h=parseFloat(h),h&&(h=parseFloat(h),c+=h,l+=h),l||c?(l*=Pu,c*=Pu,A=Math.cos(l)*f,P=Math.sin(l)*f,I=Math.sin(l-c)*-p,L=Math.cos(l-c)*p,c&&(h*=Pu,R=Math.tan(c-h),R=Math.sqrt(1+R*R),I*=R,L*=R,h&&(R=Math.tan(h),R=Math.sqrt(1+R*R),A*=R,P*=R)),A=Pn(A),P=Pn(P),I=Pn(I),L=Pn(L)):(A=f,L=p,P=I=0),(w&&!~(o+"").indexOf("px")||b&&!~(a+"").indexOf("px"))&&(w=Na(m,"x",o,"px"),b=Na(m,"y",a,"px")),(v||x||_||g)&&(w=Pn(w+v-(v*A+x*I)+_),b=Pn(b+x-(v*P+x*L)+g)),(r||s)&&(R=m.getBBox(),w=Pn(w+r/100*R.width),b=Pn(b+s/100*R.height)),R="matrix("+A+","+P+","+I+","+L+","+w+","+b+")",m.setAttribute("transform",R),S&&(m.style[pn]=R)},i6=function(e,t,i,r,s){var o=360,a=ei(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Sl:1),c=l-r,h=r+c+"deg",f,p;return a&&(f=s.split("_")[1],f==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),f==="cw"&&c<0?c=(c+o*xP)%o-~~(c/o)*o:f==="ccw"&&c>0&&(c=(c-o*xP)%o-~~(c/o)*o)),e._pt=p=new ir(e._pt,t,i,r,c,B8),p.e=h,p.u="deg",e._props.push(i),p},TP=function(e,t){for(var i in t)e[i]=t[i];return e},r6=function(e,t,i){var r=TP({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,c,h,f,p,m,v;r.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[pn]=t,a=pf(i,1),Ra(i,pn),i.setAttribute("transform",c)):(c=getComputedStyle(i)[pn],o[pn]=t,a=pf(i,1),o[pn]=c);for(l in Po)c=r[l],h=a[l],c!==h&&s.indexOf(l)<0&&(m=xi(c),v=xi(h),f=m!==v?Na(i,l,c,v):parseFloat(c),p=parseFloat(h),e._pt=new ir(e._pt,a,l,f,p-f,VS),e._pt.u=v||0,e._props.push(l));TP(a,r)};nr("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});M0[e>1?"border"+n:n]=function(a,l,c,h,f){var p,m;if(arguments.length<4)return p=o.map(function(v){return ho(a,v,c)}),m=p.join(" "),m.split(p[0]).length===5?p[0]:m;p=(h+"").split(" "),m={},o.forEach(function(v,x){return m[v]=p[x]=p[x]||p[(x-1)/2|0]}),a.init(l,m,f)}});var CD={name:"css",register:jS,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var o=this._props,a=e.style,l=i.vars.startAt,c,h,f,p,m,v,x,_,g,S,w,b,A,P,I,L,R;iE||jS(),this.styles=this.styles||SD(e),L=this.styles.props,this.tween=i;for(x in t)if(x!=="autoRound"&&(h=t[x],!(mr[x]&&uD(x,t,i,r,e,s)))){if(m=typeof h,v=M0[x],m==="function"&&(h=h.call(i,r,e,s),m=typeof h),m==="string"&&~h.indexOf("random(")&&(h=uf(h)),v)v(this,e,x,h,i)&&(I=1);else if(x.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(x)+"").trim(),h+="",Ma.lastIndex=0,Ma.test(c)||(_=xi(c),g=xi(h),g?_!==g&&(c=Na(e,x,c,g)+g):_&&(h+=_)),this.add(a,"setProperty",c,h,r,s,0,0,x),o.push(x),L.push(x,0,a[x]);else if(m!=="undefined"){if(l&&x in l?(c=typeof l[x]=="function"?l[x].call(i,r,e,s):l[x],ei(c)&&~c.indexOf("random(")&&(c=uf(c)),xi(c+"")||c==="auto"||(c+=wr.units[x]||xi(ho(e,x))||""),(c+"").charAt(1)==="="&&(c=ho(e,x))):c=ho(e,x),p=parseFloat(c),S=m==="string"&&h.charAt(1)==="="&&h.substr(0,2),S&&(h=h.substr(2)),f=parseFloat(h),x in Us&&(x==="autoAlpha"&&(p===1&&ho(e,"visibility")==="hidden"&&f&&(p=0),L.push("visibility",0,a.visibility),da(this,a,"visibility",p?"inherit":"hidden",f?"inherit":"hidden",!f)),x!=="scale"&&x!=="transform"&&(x=Us[x],~x.indexOf(",")&&(x=x.split(",")[0]))),w=x in Po,w){if(this.styles.save(x),R=h,m==="string"&&h.substring(0,6)==="var(--"){if(h=xr(e,h.substring(4,h.indexOf(")"))),h.substring(0,5)==="calc("){var C=e.style.perspective;e.style.perspective=h,h=xr(e,"perspective"),C?e.style.perspective=C:Ra(e,"perspective")}f=parseFloat(h)}if(b||(A=e._gsap,A.renderTransform&&!t.parseTransform||pf(e,t.parseTransform),P=t.smoothOrigin!==!1&&A.smooth,b=this._pt=new ir(this._pt,a,pn,0,1,A.renderTransform,A,0,-1),b.dep=1),x==="scale")this._pt=new ir(this._pt,A,"scaleY",A.scaleY,(S?Au(A.scaleY,S+f):f)-A.scaleY||0,VS),this._pt.u=0,o.push("scaleY",x),x+="X";else if(x==="transformOrigin"){L.push(rr,0,a[rr]),h=J8(h),A.svg?GS(e,h,0,P,0,this):(g=parseFloat(h.split(" ")[2])||0,g!==A.zOrigin&&da(this,A,"zOrigin",A.zOrigin,g),da(this,a,x,E0(c),E0(h)));continue}else if(x==="svgOrigin"){GS(e,h,1,P,0,this);continue}else if(x in bD){i6(this,A,x,p,S?Au(p,S+h):h);continue}else if(x==="smoothOrigin"){da(this,A,"smooth",A.smooth,h);continue}else if(x==="force3D"){A[x]=h;continue}else if(x==="transform"){r6(this,h,e);continue}}else x in a||(x=Xu(x)||x);if(w||(f||f===0)&&(p||p===0)&&!F8.test(h)&&x in a)_=(c+"").substr((p+"").length),f||(f=0),g=xi(h)||(x in wr.units?wr.units[x]:_),_!==g&&(p=Na(e,x,c,g)),this._pt=new ir(this._pt,w?A:a,x,p,(S?Au(p,S+f):f)-p,!w&&(g==="px"||x==="zIndex")&&t.autoRound!==!1?H8:VS),this._pt.u=g||0,w&&R!==h?(this._pt.b=c,this._pt.e=R,this._pt.r=V8):_!==g&&g!=="%"&&(this._pt.b=c,this._pt.r=z8);else if(x in a)Q8.call(this,e,x,c,S?S+h:h);else if(x in e)this.add(e,x,c||e[x],S?S+h:h,r,s);else if(x!=="parseTransform"){YM(x,h);continue}w||(x in a?L.push(x,0,a[x]):typeof e[x]=="function"?L.push(x,2,e[x]()):L.push(x,1,c||e[x])),o.push(x)}}I&&gD(this)},render:function(e,t){if(t.tween._time||!rE())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:ho,aliases:Us,getSetter:function(e,t,i){var r=Us[t];return r&&r.indexOf(",")<0&&(t=r),t in Po&&t!==rr&&(e._gsap.x||ho(e,"x"))?i&&yP===i?t==="scale"?X8:W8:(yP=i||{})&&(t==="scale"?Y8:q8):e.style&&!GM(e.style[t])?j8:~t.indexOf("-")?G8:tE(e,t)},core:{_removeProperty:Ra,_getMatrix:oE}};or.utils.checkPrefix=Xu;or.core.getStyleSaver=SD;(function(n,e,t,i){var r=nr(n+","+e+","+t,function(s){Po[s]=1});nr(e,function(s){wr.units[s]="deg",bD[s]=1}),Us[r[13]]=n+","+e,nr(i,function(s){var o=s.split(":");Us[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");nr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){wr.units[n]="px"});or.registerPlugin(CD);var Ea=or.registerPlugin(CD)||or;Ea.core.Tween;const s6="/api";async function Ov(n,e={}){const t=`${s6}${n}`,i=await fetch(t,{headers:{"Content-Type":"application/json",...e.headers},...e});if(!i.ok)throw new Error(`API Error: ${i.status}`);return i.json()}const o6=n=>{if(!n)return"https://res.cloudinary.com/dgv7d7n6q/image/upload/v1734944400/product_placeholder.png";if(n.startsWith("/api/image")||n.startsWith("/uploads/"))return n;if(!n.startsWith("http")&&!n.startsWith("/"))return`/api/image?path=${n}`;if(n.includes("/storage/v1/object/public/")){const e=n.split("/");return`/api/image?path=${e[e.length-1]}`}return n.startsWith("http")?`/api/image?url=${encodeURIComponent(n)}`:n},a6=async(n=12,e=!1,t={})=>{try{const i=new URLSearchParams({limit:n});return e&&i.append("show_on_homepage","true"),t.search&&i.append("search",t.search),t.manufacturer_code&&i.append("manufacturer_code",t.manufacturer_code),t.category_id&&i.append("category_id",t.category_id),t.category&&i.append("category",t.category),await Ov(`/products?${i}`)}catch(i){return console.error("Error fetching products:",i),[]}},l6=async(n={})=>{try{const e=new URLSearchParams;n.is_visible&&e.append("is_visible","true"),n.is_vehicle_name!==void 0&&e.append("is_vehicle_name",n.is_vehicle_name);const t=e.toString()?`?${e}`:"";return await Ov(`/categories${t}`)}catch(e){return console.error("Error fetching categories:",e),[]}},c6=async()=>{try{return await Ov("/site-settings")}catch(n){return console.error("Error fetching site settings:",n),{}}},PD=F.createContext({settings:{},isLoading:!0}),u6=({children:n})=>{const[e,t]=F.useState({}),[i,r]=F.useState(!0);return F.useEffect(()=>{(async()=>{try{const o=await c6();if(Array.isArray(o)){const a={};o.forEach(l=>{l&&l.key&&(a[l.key]=l.value)}),t(a)}}catch(o){console.error("Error loading site settings:",o)}finally{r(!1)}})()},[]),E.jsx(PD.Provider,{value:{settings:e,isLoading:i},children:n})},vs=()=>F.useContext(PD),h6=({isScrolled:n})=>{const[e,t]=F.useState(!1),[i,r]=F.useState(null),[s,o]=F.useState(null),[a,l]=F.useState([]),[c,h]=F.useState([]),{settings:f}=vs(),p=Fa(),m=F.useRef(null),v=F.useRef(null);F.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),F.useEffect(()=>{(async()=>{try{const w=await Ov("/categories?is_visible=true");w&&(l(w.filter(b=>b.is_vehicle_name)),h(w.filter(b=>!b.is_vehicle_name)))}catch(w){console.error("Error loading data:",w)}})()},[]),F.useEffect(()=>{const S=()=>r(null),w=()=>r(null);return i!==null&&(document.addEventListener("click",S),window.addEventListener("scroll",w)),()=>{document.removeEventListener("click",S),window.removeEventListener("scroll",w)}},[i]);const x=[{path:"/",label:"TRANG CH"},{path:"/about",label:"GII THIU"},{label:"PH TNG THEO XE",dropdownType:"vehicle"},{label:"PH TNG B PHN",dropdownType:"parts"},{path:"/catalog",label:"BI VIT"},{path:"/image-library",label:"TH VIN NH"},{path:"/contact",label:"LIN H"}],_=S=>S?S==="/"?p.pathname==="/":p.pathname.startsWith(S.split("?")[0]):!1;F.useEffect(()=>{const S=m.current;if(!S)return;const w=A=>{const P=S.getBoundingClientRect(),I=(A.clientX-P.left-P.width/2)*.2,L=(A.clientY-P.top-P.height/2)*.2;Ea.to(S,{x:I,y:L,duration:.3,ease:"power2.out"})},b=()=>{Ea.to(S,{x:0,y:0,duration:.5,ease:"elastic.out(1, 0.3)"})};return S.addEventListener("mousemove",w),S.addEventListener("mouseleave",b),()=>{S.removeEventListener("mousemove",w),S.removeEventListener("mouseleave",b)}},[]),F.useEffect(()=>{if(!v.current)return;const S=v.current.querySelectorAll("a, button");Ea.fromTo(S,{y:-20,opacity:0},{y:0,opacity:1,duration:.5,stagger:.05,ease:"power2.out",delay:.3})},[]);const g=S=>S==="vehicle"?a:S==="parts"?c:[];return E.jsxs(E.Fragment,{children:[E.jsx("header",{className:`fixed top-0 z-50 w-full transition-all duration-300 ${n?"bg-background/95 backdrop-blur-md border-b border-border py-3 shadow-lg":"bg-transparent py-5"}`,children:E.jsxs("div",{className:"container mx-auto px-4 md:px-10 lg:px-20 flex items-center justify-between",children:[E.jsx(jt,{ref:m,to:"/",className:"group cursor-pointer",children:f.site_logo?E.jsx("img",{src:f.site_logo,alt:"Logo",className:"h-12 w-auto object-contain transition-transform group-hover:scale-110 duration-300"}):E.jsx("div",{className:"w-12 h-12 text-primary transition-transform group-hover:scale-110 group-hover:rotate-12 duration-300",children:E.jsx("span",{className:"material-symbols-outlined text-5xl font-bold",children:"local_shipping"})})}),E.jsx("nav",{ref:v,className:"hidden lg:flex items-center gap-5",children:x.map((S,w)=>S.dropdownType?E.jsxs("div",{className:"relative",onMouseEnter:()=>r(w),onMouseLeave:()=>r(null),onClick:b=>b.stopPropagation(),children:[E.jsxs("button",{className:`text-sm font-medium transition-colors relative group flex items-center gap-1 py-2 ${p.pathname.includes("/products")?"text-primary":"text-slate-700 hover:text-primary"}`,children:[S.label,E.jsx("span",{className:"material-symbols-outlined text-sm",children:"expand_more"})]}),i===w&&E.jsx(Ct.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"absolute top-full left-0 pt-1 min-w-[180px]",children:E.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-slate-200 py-2",children:[E.jsx(jt,{to:"/products",onClick:()=>r(null),className:"block px-4 py-2 text-sm text-slate-700 hover:bg-primary/10 hover:text-primary transition-colors font-medium uppercase",children:"TT C"}),E.jsx("div",{className:"h-px bg-slate-100 my-1"}),g(S.dropdownType).map(b=>E.jsx(jt,{to:`/products?category=${b.slug||b.id}`,onClick:()=>r(null),className:"block px-4 py-2 text-sm text-slate-700 hover:bg-primary/10 hover:text-primary transition-colors uppercase",children:b.name},b.id)),g(S.dropdownType).length===0&&E.jsx("p",{className:"px-4 py-2 text-xs text-slate-400",children:"Cha c danh mc"})]})})]},w):E.jsxs(jt,{to:S.path,className:`text-sm font-medium transition-colors relative group py-2 ${_(S.path)?"text-primary":"text-slate-700 hover:text-primary"}`,children:[S.label,E.jsx("span",{className:`absolute -bottom-1 left-0 h-[2px] bg-primary transition-all duration-300 ${_(S.path)?"w-full":"w-0 group-hover:w-full"}`})]},S.path+w))}),E.jsxs(jt,{to:"/contact",className:"hidden sm:flex items-center gap-2 px-5 py-2 bg-primary hover:brightness-110 text-white text-sm font-bold rounded-lg transition-all shadow-lg shadow-primary/20 hover:shadow-primary/40 hover:scale-105 active:scale-95",children:["Nhn Bo Gi",E.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_forward"})]}),E.jsx("button",{className:"lg:hidden text-slate-700 p-2 hover:bg-slate-100 rounded-xl transition-colors",onClick:()=>t(!e),children:E.jsx("span",{className:"material-symbols-outlined text-3xl",children:e?"close":"menu"})})]})}),E.jsx(u0,{children:e&&E.jsx(Ct.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"lg:hidden fixed inset-0 z-[100] bg-black/20 backdrop-blur-sm",onClick:()=>t(!1),children:E.jsx(Ct.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"absolute right-0 top-0 bottom-0 w-[80%] max-w-sm bg-white shadow-2xl overflow-y-auto overscroll-contain",onClick:S=>S.stopPropagation(),children:E.jsx("div",{className:"flex flex-col h-full pt-20 pb-10",children:E.jsxs("nav",{className:"px-6 flex flex-col gap-2",children:[x.map((S,w)=>E.jsx("div",{children:S.dropdownType?E.jsxs("div",{className:"py-2 border-b border-border/50",children:[E.jsxs("button",{onClick:()=>o(s===w?null:w),className:"w-full flex items-center justify-between text-base font-medium text-slate-700 py-1",children:[S.label,E.jsx("span",{className:`material-symbols-outlined transition-transform duration-300 ${s===w?"rotate-180":""}`,children:"expand_more"})]}),E.jsx(u0,{children:s===w&&E.jsx(Ct.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:E.jsxs("div",{className:"mt-2 pl-4 space-y-3 pb-2 border-l-2 border-primary/20 ml-1",children:[E.jsx(jt,{to:"/products",onClick:()=>t(!1),className:"block text-sm text-slate-500 hover:text-primary py-1",children:"Tt c"}),g(S.dropdownType).map(b=>E.jsx(jt,{to:`/products?category=${b.slug||b.id}`,onClick:()=>t(!1),className:"block text-sm text-slate-500 hover:text-primary py-1",children:b.name},b.id))]})})})]}):E.jsx(jt,{to:S.path,onClick:()=>t(!1),className:`text-base font-medium py-3 border-b border-border/50 block ${_(S.path)?"text-primary":"text-slate-700"}`,children:S.label})},w)),E.jsx("div",{className:"mt-6",children:E.jsxs(jt,{to:"/contact",onClick:()=>t(!1),className:"flex items-center justify-center gap-2 px-4 py-3 bg-primary text-white text-sm font-semibold rounded-lg shadow-md shadow-primary/20",children:["Nhn Bo Gi",E.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})})]})})})})})]})},d6=()=>{const{settings:n}=vs(),e=n.contact_phone||"0382890990",t=n.contact_email||"hnsinotruk@gmail.com",i=n.company_logo||n.site_logo||"",r=n.site_name||"Ph Tng Chnh Hng",s=n.site_description||"Chuyn cung cp ph tng chnh hng cho cc dng xe ti HOWO SINOTRUK. y  linh kin t ng c, hp s, gm, cu n cc chi tit nh nht. Cam kt gi tt nht th trng.";return E.jsx("footer",{className:"bg-gray-200 border-t border-gray-300 pt-12 pb-6",children:E.jsxs("div",{className:"container mx-auto px-4 md:px-10 lg:px-20",children:[E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10 mb-10",children:[E.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[E.jsxs(jt,{to:"/",className:"flex items-center gap-3 group cursor-pointer",children:[i?E.jsx("img",{src:i,alt:"Logo",className:"h-10 w-auto object-contain transition-transform group-hover:scale-105"}):E.jsx("div",{className:"w-10 h-10 text-primary transition-transform group-hover:scale-110",children:E.jsx("span",{className:"material-symbols-outlined text-4xl font-bold",children:"local_shipping"})}),E.jsx("span",{className:"text-slate-800 font-bold text-base md:text-lg tracking-tight",children:r})]}),E.jsx("p",{className:"text-slate-500 leading-relaxed text-sm max-w-sm",children:s}),E.jsxs("div",{className:"flex gap-4",children:[E.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-2xl bg-gray-300 border border-gray-400 flex items-center justify-center text-gray-700 hover:bg-primary hover:border-primary hover:text-white transition-all duration-300",children:E.jsx("span",{className:"material-symbols-outlined text-xl",children:"public"})}),E.jsx("a",{href:`mailto:${t}`,className:"w-12 h-12 rounded-2xl bg-gray-300 border border-gray-400 flex items-center justify-center text-gray-700 hover:bg-primary hover:border-primary hover:text-white transition-all duration-300",children:E.jsx("span",{className:"material-symbols-outlined text-xl",children:"mail"})}),E.jsx("a",{href:"https://maps.google.com",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 rounded-2xl bg-gray-300 border border-gray-400 flex items-center justify-center text-gray-700 hover:bg-primary hover:border-primary hover:text-white transition-all duration-300",children:E.jsx("span",{className:"material-symbols-outlined text-xl",children:"location_on"})})]})]}),E.jsxs("div",{className:"lg:col-span-5 grid grid-cols-2 gap-10",children:[E.jsxs("div",{children:[E.jsx("h4",{className:"text-slate-800 font-bold mb-8 uppercase tracking-widest text-sm",children:"Ph Tng"}),E.jsx("ul",{className:"space-y-4 text-sm text-slate-500",children:[{label:"ng c",path:"/products/dong-co"},{label:"Hp s",path:"/products/hop-so"},{label:"H thng cu",path:"/products/he-thong-cau"},{label:"Ly hp",path:"/products/ly-hop"}].map(o=>E.jsx("li",{children:E.jsx(jt,{to:o.path,className:"hover:text-primary transition-colors",children:o.label})},o.label))})]}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-slate-800 font-bold mb-8 uppercase tracking-widest text-sm",children:"H Tr"}),E.jsx("ul",{className:"space-y-4 text-sm text-slate-500",children:[{label:"Chnh sch bo hnh",path:"/about#warranty"},{label:"Chnh sch cung cp",path:"/about#supply"},{label:"Thanh ton",path:"/about#payment"},{label:"Lin h",path:"/contact"}].map(o=>E.jsx("li",{children:E.jsx(jt,{to:o.path,className:"hover:text-primary transition-colors",children:o.label})},o.label))})]})]}),E.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[E.jsx("h4",{className:"text-slate-800 font-bold uppercase tracking-widest text-sm",children:"Lin H Ngay"}),E.jsxs("a",{href:`tel:${e}`,className:"flex items-center gap-3 p-4 rounded-2xl bg-primary/5 border border-primary/10 hover:bg-primary/10 transition-colors",children:[E.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"call"}),E.jsxs("div",{children:[E.jsx("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-widest",children:"Hotline 24/7"}),E.jsx("span",{className:"text-slate-800 font-bold text-lg",children:e})]})]}),E.jsxs("a",{href:`mailto:${t}`,className:"flex items-center gap-3 p-4 rounded-2xl bg-gray-300 border border-gray-400 hover:border-primary/30 transition-colors",children:[E.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"mail"}),E.jsxs("div",{children:[E.jsx("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-widest",children:"Email"}),E.jsx("span",{className:"text-slate-800 font-bold text-sm",children:t})]})]})]})]}),E.jsxs("div",{className:"border-t border-slate-200 pt-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[E.jsxs("p",{className:"text-slate-500 text-sm",children:[" 2015 ",r,"."]}),E.jsx("div",{className:"flex gap-10 text-xs text-slate-500 uppercase tracking-widest font-bold",children:E.jsx(jt,{to:"/about",className:"hover:text-primary transition-colors",children:"V Chng Ti"})})]})]})})},f6=({children:n})=>{const[e,t]=F.useState(!1);return Fa(),F.useEffect(()=>{const i=()=>{t(window.scrollY>50)};return window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)},[]),E.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[E.jsx(h6,{isScrolled:e}),E.jsx("main",{className:"flex-grow pt-20",children:n}),E.jsx(d6,{})]})},p6=()=>{const{pathname:n}=Fa();return F.useEffect(()=>{window.scrollTo(0,0)},[n]),null},m6=()=>(F.useEffect(()=>{const n=i=>{const r=i.target;if(r.tagName==="IMG"){const s=r.src;if(s.includes("/api/image")){i.preventDefault();const o=new URL(s),a=o.searchParams.get("path"),l=o.searchParams.get("url");e(i.clientX,i.clientY,a,l,r.alt)}}},e=(i,r,s,o,a)=>{const l=document.getElementById("image-protect-menu");l&&l.remove();const c=document.createElement("div");if(c.id="image-protect-menu",c.style.cssText=`
                position: fixed;
                top: ${r}px;
                left: ${i}px;
                background: white;
                border-radius: 12px;
                box-shadow: 0 10px 40px rgba(0,0,0,0.2);
                padding: 8px 0;
                z-index: 99999;
                min-width: 200px;
                font-family: system-ui, -apple-system, sans-serif;
                animation: menuFadeIn 0.15s ease-out;
            `,!document.getElementById("image-protect-styles")){const m=document.createElement("style");m.id="image-protect-styles",m.textContent=`
                    @keyframes menuFadeIn {
                        from { opacity: 0; transform: scale(0.95); }
                        to { opacity: 1; transform: scale(1); }
                    }
                    #image-protect-menu button {
                        width: 100%;
                        padding: 10px 16px;
                        text-align: left;
                        background: none;
                        border: none;
                        cursor: pointer;
                        font-size: 14px;
                        color: #374151;
                        display: flex;
                        align-items: center;
                        gap: 10px;
                        transition: background 0.1s;
                    }
                    #image-protect-menu button:hover {
                        background: #f3f4f6;
                    }
                    #image-protect-menu button .icon {
                        font-size: 18px;
                        color: #6b7280;
                    }
                `,document.head.appendChild(m)}const h=document.createElement("button");h.innerHTML=`
                <span class="material-symbols-outlined icon">download</span>
                <span>Ti nh xung</span>
            `,h.onclick=()=>{let m="/api/image?watermark=true";s&&(m+=`&path=${encodeURIComponent(s)}`),o&&(m+=`&url=${encodeURIComponent(o)}`);const v=document.createElement("a");v.href=m,v.download=a||"image.jpg",document.body.appendChild(v),v.click(),document.body.removeChild(v),c.remove()};const f=document.createElement("button");f.innerHTML=`
                <span class="material-symbols-outlined icon">link</span>
                <span>Sao chp lin kt</span>
            `,f.onclick=()=>{navigator.clipboard.writeText(window.location.href),c.remove()},c.appendChild(h),c.appendChild(f),document.body.appendChild(c);const p=m=>{c.contains(m.target)||(c.remove(),document.removeEventListener("click",p))};setTimeout(()=>document.addEventListener("click",p),10)};document.addEventListener("contextmenu",n);const t=i=>{i.target.tagName==="IMG"&&i.target.src.includes("/api/image")&&i.preventDefault()};return document.addEventListener("dragstart",t),()=>{document.removeEventListener("contextmenu",n),document.removeEventListener("dragstart",t)}},[]),null),WS={hero:{main:"/images/banner-1.png",secondary:"/images/banner-2.png"},about:{background:"/images/howoA7.jpg"}},AP=[WS.hero.main,WS.hero.secondary],CP=(n,e=.3)=>{const t=F.useRef(null),i=F.useRef({x:0,y:0});F.useEffect(()=>{const r=n.current;if(!r)return;const s=a=>{const l=r.getBoundingClientRect(),c=l.left+l.width/2,h=l.top+l.height/2;i.current.x=(a.clientX-c)*e,i.current.y=(a.clientY-h)*e,t.current&&cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{Ea.to(r,{x:i.current.x,y:i.current.y,duration:.2,ease:"power2.out",overwrite:!0})})},o=()=>{t.current&&cancelAnimationFrame(t.current),Ea.to(r,{x:0,y:0,duration:.4,ease:"elastic.out(1, 0.5)",overwrite:!0})};return r.addEventListener("mousemove",s,{passive:!0}),r.addEventListener("mouseleave",o,{passive:!0}),()=>{r.removeEventListener("mousemove",s),r.removeEventListener("mouseleave",o),t.current&&cancelAnimationFrame(t.current)}},[n,e])},g6=()=>{const n=F.useRef(null),e=F.useRef(null),t=F.useRef(null),[i,r]=F.useState(0),{settings:s}=vs(),o=s.contact_phone||"0382890990",l=(s.site_name||"SINOTRUK H NI").toUpperCase(),[c,...h]=l.split(" "),f=h.join(" "),p=s.site_description||"Chuyn cung cp ph tng chnh hng cho cc dng xe ti HOWO SINOTRUK";return CP(n,.35),CP(e,.25),F.useEffect(()=>{const m=setInterval(()=>{r(v=>(v+1)%AP.length)},7e3);return()=>clearInterval(m)},[]),F.useEffect(()=>{t.current&&Ea.fromTo(t.current,{y:40,opacity:0},{y:0,opacity:1,duration:.6,ease:"power3.out",delay:.4})},[]),E.jsxs("section",{className:"relative w-full h-[500px] md:h-[500px] lg:h-[500px] flex items-center justify-center overflow-hidden bg-background pb-4",children:[E.jsx("div",{className:"absolute inset-0 z-0 flex items-center justify-center",children:E.jsx("div",{className:"container mx-auto px-4 md:px-10 lg:px-20 h-full py-0",children:E.jsxs("div",{className:"w-full h-full relative rounded-2xl md:rounded-3xl overflow-hidden shadow-2xl",children:[E.jsx(u0,{mode:"sync",children:E.jsx(Ct.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1.4},className:"absolute inset-0 w-full h-full",children:E.jsx("img",{src:AP[i],alt:"Banner",className:"w-full h-full object-cover block"})},i)}),E.jsx("div",{className:"absolute inset-0 bg-black/10"})]})})}),E.jsx("div",{className:"absolute inset-0 z-[3] pointer-events-none bg-gradient-to-r from-white/40 via-white/20 to-transparent"}),E.jsx("div",{className:"absolute inset-0 z-[3] pointer-events-none bg-gradient-to-t from-white/30 via-transparent to-transparent"}),E.jsx("div",{className:"relative z-10 container mx-auto px-4 md:px-10 lg:px-20 py-12 md:py-16",children:E.jsxs("div",{className:"max-w-3xl space-y-4 md:space-y-6 px-4 md:px-8",children:[E.jsxs(Ct.div,{initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{duration:.6},className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-primary/10 border border-primary/30 text-primary text-xs font-bold uppercase tracking-widest backdrop-blur-sm",children:[E.jsx("span",{className:"material-symbols-outlined text-sm",children:"verified"}),"Ph tng chnh hng, Original Parts"]}),E.jsx("div",{ref:t,className:"overflow-hidden",children:E.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold leading-[0.9] tracking-tighter drop-shadow-sm",children:[E.jsx("span",{className:"inline-block hover:scale-105 transition-transform duration-300 cursor-default",style:{color:"#306269"},children:c}),f&&E.jsxs(E.Fragment,{children:[E.jsx("br",{}),E.jsx("span",{className:"inline-block hover:scale-105 transition-transform duration-300 cursor-default",style:{color:"#800c0b"},children:f})]})]})}),E.jsx(Ct.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.5},className:"text-slate-700 text-base md:text-lg max-w-xl leading-relaxed font-medium pl-0 pr-4 py-3 rounded-lg backdrop-blur-[1.5px] bg-white/12 shadow-sm",children:p}),E.jsxs(Ct.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:.6},className:"flex flex-col sm:flex-row gap-3 sm:gap-4 pt-2",children:[E.jsxs(jt,{ref:n,to:"/products",className:"flex items-center justify-center h-11 sm:h-12 px-6 sm:px-8 bg-primary hover:brightness-110 rounded-xl text-white font-bold text-sm sm:text-base transition-colors shadow-xl shadow-primary/30 group will-change-transform",children:["Xem Sn Phm",E.jsx("span",{className:"material-symbols-outlined ml-2 text-lg group-hover:rotate-180 transition-transform duration-500",children:"view_in_ar"})]}),E.jsxs("a",{ref:e,href:`https://zalo.me/${o.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center h-11 sm:h-12 px-6 sm:px-8 bg-[#0068ff] text-white font-bold text-sm sm:text-base rounded-xl hover:bg-[#0056d6] transition-colors group will-change-transform backdrop-blur-sm shadow-md",children:["Chat Zalo",E.jsx("span",{className:"material-symbols-outlined ml-2 text-lg group-hover:translate-x-1 transition-transform",children:"chat"})]})]})]})}),E.jsxs("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 z-20 flex flex-col items-center gap-2 animate-bounce",children:[E.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Cun"}),E.jsx("span",{className:"material-symbols-outlined text-primary",children:"keyboard_arrow_down"})]})]})},v6=[{label:"Nm Kinh Nghim",value:"15+",icon:"calendar_month"},{label:"Ph Tng  Bn",value:"50K+",icon:"settings"},{label:"Khch Hng Hi Lng",value:"98%",icon:"sentiment_satisfied"},{label:"H Tr K Thut",value:"24/7",icon:"support_agent"}],y6=()=>E.jsx("section",{className:"bg-background relative z-20 mt-0 pb-4",children:E.jsx("div",{className:"container mx-auto px-4 md:px-10 lg:px-20",children:E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 md:p-6 bg-white border border-slate-200 rounded-3xl shadow-xl",children:v6.map((n,e)=>E.jsxs("div",{className:`flex flex-row gap-4 items-center p-2 transition-all hover:scale-105 ${e!==0?"md:border-l md:border-slate-200 md:pl-6":""}`,children:[E.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary mr-3",children:E.jsx("span",{className:"material-symbols-outlined text-2xl",children:n.icon})}),E.jsxs("div",{className:"flex items-baseline gap-3",children:[E.jsx("p",{className:"text-slate-800 text-xl md:text-2xl font-bold tracking-tighter",children:n.value}),E.jsx("p",{className:"text-slate-500 text-xs font-semibold uppercase tracking-wider",children:n.label})]})]},e))})})}),x6=()=>{const{settings:n}=vs(),e=n.contact_phone||"0382890990",t=n.contact_phone||"0382.890.990";return E.jsx("section",{className:"pt-4 md:pt-8 pb-2 md:pb-16 bg-gray-50 overflow-hidden",children:E.jsx("div",{className:"container mx-auto px-4 md:px-10 lg:px-20",children:E.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 lg:gap-16 items-center",children:[E.jsxs("div",{className:"relative group order-1 lg:order-2 hidden md:block",children:[E.jsx("div",{className:"absolute -inset-4 bg-primary/20 rounded-[2.5rem] blur-2xl group-hover:bg-primary/30 transition-all"}),E.jsx("div",{className:"relative aspect-video rounded-3xl overflow-hidden shadow-2xl border border-border bg-white",children:E.jsx("div",{className:"relative w-full h-full flex flex-col items-center justify-between p-6 md:p-8 text-center bg-cover bg-center bg-no-repeat",style:{backgroundImage:"linear-gradient(to bottom, rgba(255,255,255,0.15), rgba(255,255,255,0.2)), url('/images/part-service.png')"},children:E.jsx("div",{className:"flex flex-wrap justify-center gap-2 flex-shrink-0 mt-auto",children:["ng c","Hp s","Cu","Dn ng","Ly hp"].map((i,r)=>E.jsx("span",{className:"px-4 py-2 bg-white/40 backdrop-blur-sm text-slate-800 font-semibold rounded-full text-xs md:text-sm border border-white/80 shadow-md",children:i},r))})})})]}),E.jsxs("div",{className:"space-y-6 md:space-y-8 order-2 lg:order-1",children:[E.jsxs("div",{className:"flex items-center gap-3 text-primary font-bold tracking-[0.2em] md:tracking-[0.3em] uppercase text-xs md:text-sm",children:[E.jsx("span",{className:"w-8 md:w-12 h-[2px] bg-primary"}),"Gii Thiu"]}),E.jsxs("h3",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-gray-800 leading-[1.1]",children:["Ph Tng Chnh Hng ",E.jsx("br",{}),E.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-gray-600 via-primary to-sky-400",children:"Cht Lng Hng u"})]}),E.jsx("p",{className:"text-slate-500 text-base md:text-xl leading-relaxed",children:"Vi s hiu bit su sc v cc chng loi xe ti nng do Trung Quc sn xut, phong cch phc v chuyn nghip v gi c cnh tranh cng ch  bo hnh cho sn phm, chng ti mong rng s tr thnh i tc tin cy ca Qu khch hng trn ton quc."}),E.jsxs("div",{className:"space-y-3 md:space-y-4",children:[E.jsx("div",{className:"grid grid-cols-2 gap-3 md:gap-6 mb-6 md:mb-8",children:[{title:"Nhp khu trc tip",desc:"Chnh hng, Original Parts",icon:"verified"},{title:"Bo Hnh Uy Tn",desc:"i mi 100% nu sai mu hoc li do nh sn xut",icon:"shield"}].map((i,r)=>E.jsxs("div",{className:"flex items-center gap-3 md:gap-4 p-3 md:p-4 rounded-xl md:rounded-2xl bg-gray-100 border border-gray-300 shadow-sm",children:[E.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 flex-shrink-0 rounded-lg md:rounded-xl bg-primary/10 flex items-center justify-center text-primary border border-primary/20",children:E.jsx("span",{className:"material-symbols-outlined text-lg md:text-xl",children:i.icon})}),E.jsxs("div",{children:[E.jsx("h4",{className:"font-bold text-slate-800 text-sm md:text-base",children:i.title}),E.jsx("p",{className:"text-slate-400 text-xs",children:i.desc})]})]},r))}),E.jsx("div",{className:"mt-6 md:mt-8",children:E.jsxs("a",{href:`tel:${e}`,className:"flex items-center gap-2 px-5 md:px-6 py-2.5 md:py-3 bg-primary hover:bg-primary/90 rounded-xl text-white font-bold transition-all group w-fit shadow-lg text-xs md:text-sm",children:[E.jsx("span",{className:"material-symbols-outlined text-base md:text-lg",children:"call"}),"Hotline: ",t]})})]})]})]})})})},_6="/api";async function Fv(n,e={}){const t=`${_6}${n}`,i=await fetch(t,{headers:{"Content-Type":"application/json",...e.headers},...e});if(!i.ok)throw new Error(`API Error: ${i.status}`);return i.json()}const mf=n=>{if(!n)return"https://res.cloudinary.com/dgv7d7n6q/image/upload/v1734944400/product_placeholder.png";if(n.startsWith("/api/image"))return n;if(n.startsWith("/uploads/"))return`/api/image?path=${n.replace("/uploads/original/","").replace("/uploads/","")}`;if(!n.startsWith("http")&&!n.startsWith("/"))return`/api/image?path=${n}`;if(n.includes("/storage/v1/object/public/")){const e=n.split("/");return`/api/image?path=${e[e.length-1]}`}return n.startsWith("http")?`/api/image?url=${encodeURIComponent(n)}`:n},S6=async(n=12,e=!1,t={})=>{try{const i=new URLSearchParams({limit:n});return e&&i.append("show_on_homepage","true"),t.search&&i.append("search",t.search),t.manufacturer_code&&i.append("manufacturer_code",t.manufacturer_code),t.category_id&&i.append("category_id",t.category_id),await Fv(`/products?${i}`)}catch(i){return console.error("Error fetching products:",i),[]}},w6=async(n={})=>{try{const{limit:e=20,page:t=1,search:i="",is_published:r=!0}=n,s=new URLSearchParams;r!==void 0&&s.append("is_published",r),e&&s.append("limit",e),t&&s.append("page",t),i&&i.trim()&&s.append("search",i.trim());const o=await Fv(`/catalog-articles?${s}`);return Array.isArray(o)?{data:o,pagination:{total:o.length,hasNext:!1,hasPrev:!1,page:1,totalPages:1},search:""}:o}catch(e){return console.error("Error fetching catalog articles:",e),{data:[],pagination:{total:0,hasNext:!1,hasPrev:!1,page:1,totalPages:0},search:""}}},M6=async n=>{try{return(await Fv(`/product-images/${n}`)||[]).map(t=>{var r;const i=((r=t.image)==null?void 0:r.url)||t.image_url;return i?mf(i):null}).filter(Boolean)}catch(e){return console.error("Error fetching product images:",e),[]}},qi={from:n=>({select:(e="*")=>({_table:n,_columns:e,_filters:[],_order:null,_limit:null,eq:function(t,i){return this._filters.push({type:"eq",col:t,val:i}),this},neq:function(t,i){return this._filters.push({type:"neq",col:t,val:i}),this},gt:function(t,i){return this._filters.push({type:"gt",col:t,val:i}),this},gte:function(t,i){return this._filters.push({type:"gte",col:t,val:i}),this},lt:function(t,i){return this._filters.push({type:"lt",col:t,val:i}),this},lte:function(t,i){return this._filters.push({type:"lte",col:t,val:i}),this},not:function(t,i,r){return this._filters.push({type:"not",col:t,operator:i,val:r}),this},ilike:function(t,i){return this._filters.push({type:"ilike",col:t,val:i}),this},in:function(t,i){return this._filters.push({type:"in",col:t,val:i}),this},or:function(t){return this._filters.push({type:"or",conditions:t}),this},order:function(t,i){return this._order={col:t,...i},this},limit:function(t){return this._limit=t,this},range:function(t,i){return this._range={from:t,to:i},this},single:function(){return this._single=!0,this},maybeSingle:function(){return this._single=!0,this._maybeSingle=!0,this},then:async function(t,i){try{const r=new URLSearchParams;this._limit&&r.append("limit",this._limit);const s=this._filters.find(h=>h.type==="eq"&&h.col==="id");this._filters.forEach(h=>{h.type==="eq"&&h.col!=="id"?r.append(h.col,h.val):h.type==="ilike"?r.append(`${h.col}__ilike`,h.val):h.type==="in"&&r.append(`${h.col}__in`,Array.isArray(h.val)?h.val.join(","):h.val)});let a={products:"/products",categories:"/categories",site_settings:"/site-settings",catalog_articles:"/catalog-articles",gallery_images:"/gallery-images"}[this._table]||`/${this._table}`;s&&(a=`${a}/${s.val}`);const l=r.toString()?`?${r}`:"";let c=await Fv(`${a}${l}`);this._table==="site_settings"&&c&&typeof c=="object"&&!Array.isArray(c)&&(c=Object.entries(c).map(([h,f])=>({key:h,value:f}))),this._single?t({data:Array.isArray(c)?c[0]:c,error:null}):t({data:c,error:null,count:Array.isArray(c)?c.length:0})}catch(r){this._maybeSingle?t({data:null,error:null}):i?i({data:null,error:r}):t({data:null,error:r})}}})})},y_=[{id:1,name:"Lc du ng c HOWO A7",code:"LDDC-A7",description:"Ph tng ng c",price:35e4,price_bulk:3e5,image:null},{id:2,name:"M phanh SITRAK G7",code:"MPH-G7S",description:"Ph tng phanh",price:85e4,price_bulk:75e4,image:null},{id:3,name:"Bm thy lc cabin HOWO",code:"BTL-HW",description:"Ph tng cabin",price:25e5,price_bulk:22e5,image:null}],E6=()=>{const n=F.useRef(null),e=F.useRef(!1),[t,i]=F.useState([]),[r,s]=F.useState(!0),{settings:o}=vs(),a=o.contact_phone||"0382890990";F.useEffect(()=>{(async()=>{try{const f=await S6(20,!0,{orderBy:"created_at",ascending:!1});i(f.length>0?f:y_)}catch(f){console.error("Error loading products:",f),i(y_)}finally{s(!1)}})()},[]),F.useEffect(()=>{if(!n.current||e.current||r)return;const h=n.current.querySelectorAll(".product-card"),f=new IntersectionObserver(([p])=>{p.isIntersecting&&!e.current&&(e.current=!0,Ea.fromTo(h,{y:40,opacity:0},{y:0,opacity:1,duration:.5,stagger:.1,ease:"power2.out"}),f.disconnect())},{threshold:.15});return f.observe(n.current),()=>f.disconnect()},[r]);const l=t.length>0?t:y_,c=F.useMemo(()=>l.map((h,f)=>E.jsxs(jt,{to:`/product/${h.slug||h.id}`,className:"product-card group relative bg-white border border-slate-200 rounded-3xl overflow-hidden hover:border-primary/40 transition-colors duration-300 shadow-sm hover:shadow-lg opacity-0 flex flex-col h-full will-change-transform",children:[E.jsxs("div",{className:"aspect-square overflow-hidden relative bg-gradient-to-br from-gray-100 to-gray-200",children:[h.image?E.jsx("img",{src:mf(h.image),alt:h.name,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onError:p=>{p.target.style.display="none"}}):E.jsx("div",{className:"w-full h-full flex items-center justify-center",children:E.jsx("span",{className:"material-symbols-outlined text-7xl text-gray-300",children:"settings"})}),h.manufacturer_code&&E.jsx("div",{className:"absolute top-4 left-4 bg-primary text-white text-[10px] font-bold uppercase tracking-wider px-3 py-1 rounded-full shadow-lg",children:h.manufacturer_code}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white to-transparent opacity-50"})]}),E.jsxs("div",{className:"p-3 flex flex-col flex-1",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("h3",{className:"text-slate-800 font-bold text-base group-hover:text-primary transition-colors line-clamp-2 min-h-[2.8rem]",children:h.name}),E.jsx("p",{className:"text-slate-400 text-xs line-clamp-1 mt-0.5",children:h.description||"Ph tng chnh hng"})]}),E.jsxs("div",{className:"flex gap-2 mt-auto pt-3",children:[E.jsx("div",{className:"flex-1 py-2 bg-white border border-slate-200 text-slate-700 font-medium text-sm rounded-xl hover:border-primary hover:text-primary transition-all flex items-center justify-center",children:"Chi Tit"}),E.jsx("a",{href:`tel:${a}`,onClick:p=>p.stopPropagation(),className:"flex-1 py-2 bg-[#c41e1e] text-white font-medium text-sm rounded-xl hover:bg-[#a01818] transition-all flex items-center justify-center",children:"t Hng"})]})]})]},h.id||f)),[l]);return E.jsx("section",{className:"py-10 bg-background relative overflow-hidden",children:E.jsxs("div",{className:"container mx-auto px-4 md:px-10 lg:px-20 relative z-10",children:[E.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-12 gap-6",children:[E.jsxs("div",{children:[E.jsx("span",{className:"text-primary font-bold tracking-widest text-sm uppercase mb-2 block",children:"Danh mc ph tng"}),E.jsx("h2",{className:"text-slate-800 text-2xl md:text-3xl font-bold tracking-tight",children:"Sn phm mi nht"})]}),E.jsxs(jt,{to:"/products",className:"flex items-center gap-2 px-6 py-2.5 bg-white border border-slate-200 rounded-xl text-slate-700 font-medium text-sm hover:border-primary/50 transition-colors shadow-sm",children:["Tt c ph tng",E.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"arrow_forward"})]})]}),r?E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 md:gap-6",children:[1,2,3].map(h=>E.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl overflow-hidden animate-pulse",children:[E.jsx("div",{className:"aspect-[16/10] bg-slate-200"}),E.jsxs("div",{className:"p-6 space-y-4",children:[E.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4"}),E.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2"}),E.jsx("div",{className:"h-10 bg-slate-200 rounded"})]})]},h))}):E.jsx("div",{ref:n,className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 md:gap-6",children:c})]})})};/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Bv="170",b6={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},T6={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},RD=0,XS=1,ND=2,A6=3,ID=0,zv=1,Ad=2,as=3,Ro=0,ki=1,ks=2,So=0,Vl=1,YS=2,qS=3,KS=4,LD=5,oa=100,DD=101,kD=102,UD=103,OD=104,FD=200,BD=201,zD=202,VD=203,b0=204,T0=205,HD=206,jD=207,GD=208,WD=209,XD=210,YD=211,qD=212,KD=213,ZD=214,A0=0,C0=1,P0=2,$l=3,R0=4,N0=5,I0=6,L0=7,Gf=0,$D=1,QD=2,js=0,JD=1,ek=2,tk=3,aE=4,nk=5,ik=6,rk=7,ZS="attached",sk="detached",Vv=300,No=301,Ia=302,gf=303,vf=304,rh=306,yf=1e3,qr=1001,xf=1002,oi=1003,lE=1004,C6=1004,mu=1005,P6=1005,Hn=1006,Cd=1007,R6=1007,Os=1008,N6=1008,ps=1009,cE=1010,uE=1011,Yu=1012,Hv=1013,Io=1014,$i=1015,sh=1016,jv=1017,Gv=1018,Ql=1020,hE=35902,dE=1021,fE=1022,Si=1023,pE=1024,mE=1025,Hl=1026,Jl=1027,Wv=1028,Wf=1029,gE=1030,Xv=1031,I6=1032,Yv=1033,Pd=33776,Rd=33777,Nd=33778,Id=33779,D0=35840,k0=35841,U0=35842,O0=35843,F0=36196,B0=37492,z0=37496,V0=37808,H0=37809,j0=37810,G0=37811,W0=37812,X0=37813,Y0=37814,q0=37815,K0=37816,Z0=37817,$0=37818,Q0=37819,J0=37820,ev=37821,Ld=36492,tv=36494,nv=36495,vE=36283,iv=36284,rv=36285,sv=36286,ok=2200,ak=2201,lk=2202,_f=2300,ov=2301,Ug=2302,Rl=2400,Nl=2401,Sf=2402,qv=2500,yE=2501,L6=0,D6=1,k6=2,ck=3200,uk=3201,U6=3202,O6=3203,Va=0,hk=1,fo="",Xi="srgb",ac="srgb-linear",Xf="linear",Ht="srgb",F6=0,wl=7680,B6=7681,z6=7682,V6=7683,H6=34055,j6=34056,G6=5386,W6=512,X6=513,Y6=514,q6=515,K6=516,Z6=517,$6=518,$S=519,dk=512,fk=513,pk=514,xE=515,mk=516,gk=517,vk=518,yk=519,wf=35044,Q6=35048,J6=35040,eG=35045,tG=35049,nG=35041,iG=35046,rG=35050,sG=35042,oG="100",QS="300 es",Fs=2e3,Mf=2001;class Ys{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const pi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let PP=1234567;const jl=Math.PI/180,qu=180/Math.PI;function Mr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(pi[n&255]+pi[n>>8&255]+pi[n>>16&255]+pi[n>>24&255]+"-"+pi[e&255]+pi[e>>8&255]+"-"+pi[e>>16&15|64]+pi[e>>24&255]+"-"+pi[t&63|128]+pi[t>>8&255]+"-"+pi[t>>16&255]+pi[t>>24&255]+pi[i&255]+pi[i>>8&255]+pi[i>>16&255]+pi[i>>24&255]).toLowerCase()}function wn(n,e,t){return Math.max(e,Math.min(t,n))}function _E(n,e){return(n%e+e)%e}function aG(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function lG(n,e,t){return n!==e?(t-n)/(e-n):0}function Dd(n,e,t){return(1-t)*n+t*e}function cG(n,e,t,i){return Dd(n,e,1-Math.exp(-t*i))}function uG(n,e=1){return e-Math.abs(_E(n,e*2)-e)}function hG(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function dG(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function fG(n,e){return n+Math.floor(Math.random()*(e-n+1))}function pG(n,e){return n+Math.random()*(e-n)}function mG(n){return n*(.5-Math.random())}function gG(n){n!==void 0&&(PP=n);let e=PP+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function vG(n){return n*jl}function yG(n){return n*qu}function xG(n){return(n&n-1)===0&&n!==0}function _G(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function SG(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function wG(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),h=o((e+i)/2),f=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),v=o((i-e)/2);switch(r){case"XYX":n.set(a*h,l*f,l*p,a*c);break;case"YZY":n.set(l*p,a*h,l*f,a*c);break;case"ZXZ":n.set(l*f,l*p,a*h,a*c);break;case"XZX":n.set(a*h,l*v,l*m,a*c);break;case"YXY":n.set(l*m,a*h,l*v,a*c);break;case"ZYZ":n.set(l*v,l*m,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Li(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function yt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const xk={DEG2RAD:jl,RAD2DEG:qu,generateUUID:Mr,clamp:wn,euclideanModulo:_E,mapLinear:aG,inverseLerp:lG,lerp:Dd,damp:cG,pingpong:uG,smoothstep:hG,smootherstep:dG,randInt:fG,randFloat:pG,randFloatSpread:mG,seededRandom:gG,degToRad:vG,radToDeg:yG,isPowerOfTwo:xG,ceilPowerOfTwo:_G,floorPowerOfTwo:SG,setQuaternionFromProperEuler:wG,normalize:yt,denormalize:Li};class ve{constructor(e=0,t=0){ve.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(wn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class vt{constructor(e,t,i,r,s,o,a,l,c){vt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],h=i[4],f=i[7],p=i[2],m=i[5],v=i[8],x=r[0],_=r[3],g=r[6],S=r[1],w=r[4],b=r[7],A=r[2],P=r[5],I=r[8];return s[0]=o*x+a*S+l*A,s[3]=o*_+a*w+l*P,s[6]=o*g+a*b+l*I,s[1]=c*x+h*S+f*A,s[4]=c*_+h*w+f*P,s[7]=c*g+h*b+f*I,s[2]=p*x+m*S+v*A,s[5]=p*_+m*w+v*P,s[8]=p*g+m*b+v*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return t*o*h-t*a*c-i*s*h+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=h*o-a*c,p=a*l-h*s,m=c*s-o*l,v=t*f+i*p+r*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/v;return e[0]=f*x,e[1]=(r*c-h*i)*x,e[2]=(a*i-r*o)*x,e[3]=p*x,e[4]=(h*t-r*l)*x,e[5]=(r*s-a*t)*x,e[6]=m*x,e[7]=(i*l-c*t)*x,e[8]=(o*t-i*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(x_.makeScale(e,t)),this}rotate(e){return this.premultiply(x_.makeRotation(-e)),this}translate(e,t){return this.premultiply(x_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const x_=new vt;function _k(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const MG={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function gu(n,e){return new MG[n](e)}function Ef(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Sk(){const n=Ef("canvas");return n.style.display="block",n}const RP={};function ld(n){n in RP||(RP[n]=!0,console.warn(n))}function EG(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function bG(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function TG(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const It={enabled:!0,workingColorSpace:ac,spaces:{},convert:function(n,e,t){return this.enabled===!1||e===t||!e||!t||(this.spaces[e].transfer===Ht&&(n.r=wo(n.r),n.g=wo(n.g),n.b=wo(n.b)),this.spaces[e].primaries!==this.spaces[t].primaries&&(n.applyMatrix3(this.spaces[e].toXYZ),n.applyMatrix3(this.spaces[t].fromXYZ)),this.spaces[t].transfer===Ht&&(n.r=Ru(n.r),n.g=Ru(n.g),n.b=Ru(n.b))),n},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)},getPrimaries:function(n){return this.spaces[n].primaries},getTransfer:function(n){return n===fo?Xf:this.spaces[n].transfer},getLuminanceCoefficients:function(n,e=this.workingColorSpace){return n.fromArray(this.spaces[e].luminanceCoefficients)},define:function(n){Object.assign(this.spaces,n)},_getMatrix:function(n,e,t){return n.copy(this.spaces[e].toXYZ).multiply(this.spaces[t].fromXYZ)},_getDrawingBufferColorSpace:function(n){return this.spaces[n].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(n=this.workingColorSpace){return this.spaces[n].workingColorSpaceConfig.unpackColorSpace}};function wo(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Ru(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const NP=[.64,.33,.3,.6,.15,.06],IP=[.2126,.7152,.0722],LP=[.3127,.329],DP=new vt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),kP=new vt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);It.define({[ac]:{primaries:NP,whitePoint:LP,transfer:Xf,toXYZ:DP,fromXYZ:kP,luminanceCoefficients:IP,workingColorSpaceConfig:{unpackColorSpace:Xi},outputColorSpaceConfig:{drawingBufferColorSpace:Xi}},[Xi]:{primaries:NP,whitePoint:LP,transfer:Ht,toXYZ:DP,fromXYZ:kP,luminanceCoefficients:IP,outputColorSpaceConfig:{drawingBufferColorSpace:Xi}}});let Cc;class wk{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Cc===void 0&&(Cc=Ef("canvas")),Cc.width=e.width,Cc.height=e.height;const i=Cc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Cc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Ef("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=wo(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(wo(t[i]/255)*255):t[i]=wo(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let AG=0;class Il{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:AG++}),this.uuid=Mr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(__(r[o].image)):s.push(__(r[o]))}else s=__(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function __(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?wk.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let CG=0;class En extends Ys{constructor(e=En.DEFAULT_IMAGE,t=En.DEFAULT_MAPPING,i=qr,r=qr,s=Hn,o=Os,a=Si,l=ps,c=En.DEFAULT_ANISOTROPY,h=fo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:CG++}),this.uuid=Mr(),this.name="",this.source=new Il(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ve(0,0),this.repeat=new ve(1,1),this.center=new ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Vv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case yf:e.x=e.x-Math.floor(e.x);break;case qr:e.x=e.x<0?0:1;break;case xf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case yf:e.y=e.y-Math.floor(e.y);break;case qr:e.y=e.y<0?0:1;break;case xf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}En.DEFAULT_IMAGE=null;En.DEFAULT_MAPPING=Vv;En.DEFAULT_ANISOTROPY=1;class kt{constructor(e=0,t=0,i=0,r=1){kt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],h=l[4],f=l[8],p=l[1],m=l[5],v=l[9],x=l[2],_=l[6],g=l[10];if(Math.abs(h-p)<.01&&Math.abs(f-x)<.01&&Math.abs(v-_)<.01){if(Math.abs(h+p)<.1&&Math.abs(f+x)<.1&&Math.abs(v+_)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(c+1)/2,b=(m+1)/2,A=(g+1)/2,P=(h+p)/4,I=(f+x)/4,L=(v+_)/4;return w>b&&w>A?w<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(w),r=P/i,s=I/i):b>A?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=P/r,s=L/r):A<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(A),i=I/s,r=L/s),this.set(i,r,s,t),this}let S=Math.sqrt((_-v)*(_-v)+(f-x)*(f-x)+(p-h)*(p-h));return Math.abs(S)<.001&&(S=1),this.x=(_-v)/S,this.y=(f-x)/S,this.z=(p-h)/S,this.w=Math.acos((c+m+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Mk extends Ys{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new kt(0,0,e,t),this.scissorTest=!1,this.viewport=new kt(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Hn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new En(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Il(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ms extends Mk{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Kv extends En{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=oi,this.minFilter=oi,this.wrapR=qr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class PG extends ms{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Kv(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class SE extends En{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=oi,this.minFilter=oi,this.wrapR=qr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class RG extends ms{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new SE(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class sr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],h=i[r+2],f=i[r+3];const p=s[o+0],m=s[o+1],v=s[o+2],x=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=h,e[t+3]=f;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=x;return}if(f!==x||l!==p||c!==m||h!==v){let _=1-a;const g=l*p+c*m+h*v+f*x,S=g>=0?1:-1,w=1-g*g;if(w>Number.EPSILON){const A=Math.sqrt(w),P=Math.atan2(A,g*S);_=Math.sin(_*P)/A,a=Math.sin(a*P)/A}const b=a*S;if(l=l*_+p*b,c=c*_+m*b,h=h*_+v*b,f=f*_+x*b,_===1-a){const A=1/Math.sqrt(l*l+c*c+h*h+f*f);l*=A,c*=A,h*=A,f*=A}}e[t]=l,e[t+1]=c,e[t+2]=h,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],h=i[r+3],f=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+h*f+l*m-c*p,e[t+1]=l*v+h*p+c*f-a*m,e[t+2]=c*v+h*m+a*p-l*f,e[t+3]=h*v-a*f-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),h=a(r/2),f=a(s/2),p=l(i/2),m=l(r/2),v=l(s/2);switch(o){case"XYZ":this._x=p*h*f+c*m*v,this._y=c*m*f-p*h*v,this._z=c*h*v+p*m*f,this._w=c*h*f-p*m*v;break;case"YXZ":this._x=p*h*f+c*m*v,this._y=c*m*f-p*h*v,this._z=c*h*v-p*m*f,this._w=c*h*f+p*m*v;break;case"ZXY":this._x=p*h*f-c*m*v,this._y=c*m*f+p*h*v,this._z=c*h*v+p*m*f,this._w=c*h*f-p*m*v;break;case"ZYX":this._x=p*h*f-c*m*v,this._y=c*m*f+p*h*v,this._z=c*h*v-p*m*f,this._w=c*h*f+p*m*v;break;case"YZX":this._x=p*h*f+c*m*v,this._y=c*m*f+p*h*v,this._z=c*h*v-p*m*f,this._w=c*h*f-p*m*v;break;case"XZY":this._x=p*h*f-c*m*v,this._y=c*m*f-p*h*v,this._z=c*h*v+p*m*f,this._w=c*h*f+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],h=t[6],f=t[10],p=i+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>f){const m=2*Math.sqrt(1+i-a-f);this._w=(h-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-i-f);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+f-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(wn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,h=t._w;return this._x=i*h+o*a+r*c-s*l,this._y=r*h+o*l+s*a-i*c,this._z=s*h+o*c+i*l-r*a,this._w=o*h-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),h=Math.atan2(c,a),f=Math.sin((1-t)*h)/c,p=Math.sin(t*h)/c;return this._w=o*f+this._w*p,this._x=i*f+this._x*p,this._y=r*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class z{constructor(e=0,t=0,i=0){z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(UP.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(UP.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),h=2*(a*t-s*r),f=2*(s*i-o*t);return this.x=t+l*c+o*f-a*h,this.y=i+l*h+a*c-s*f,this.z=r+l*f+s*h-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return S_.copy(this).projectOnVector(e),this.sub(S_)}reflect(e){return this.sub(S_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(wn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const S_=new z,UP=new sr;class Ui{constructor(e=new z(1/0,1/0,1/0),t=new z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(ns.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(ns.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ns.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,ns):ns.fromBufferAttribute(s,o),ns.applyMatrix4(e.matrixWorld),this.expandByPoint(ns);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),bm.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),bm.copy(i.boundingBox)),bm.applyMatrix4(e.matrixWorld),this.union(bm)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ns),ns.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Bh),Tm.subVectors(this.max,Bh),Pc.subVectors(e.a,Bh),Rc.subVectors(e.b,Bh),Nc.subVectors(e.c,Bh),Yo.subVectors(Rc,Pc),qo.subVectors(Nc,Rc),rl.subVectors(Pc,Nc);let t=[0,-Yo.z,Yo.y,0,-qo.z,qo.y,0,-rl.z,rl.y,Yo.z,0,-Yo.x,qo.z,0,-qo.x,rl.z,0,-rl.x,-Yo.y,Yo.x,0,-qo.y,qo.x,0,-rl.y,rl.x,0];return!w_(t,Pc,Rc,Nc,Tm)||(t=[1,0,0,0,1,0,0,0,1],!w_(t,Pc,Rc,Nc,Tm))?!1:(Am.crossVectors(Yo,qo),t=[Am.x,Am.y,Am.z],w_(t,Pc,Rc,Nc,Tm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ns).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ns).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(to[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),to[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),to[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),to[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),to[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),to[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),to[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),to[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(to),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const to=[new z,new z,new z,new z,new z,new z,new z,new z],ns=new z,bm=new Ui,Pc=new z,Rc=new z,Nc=new z,Yo=new z,qo=new z,rl=new z,Bh=new z,Tm=new z,Am=new z,sl=new z;function w_(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){sl.fromArray(n,s);const a=r.x*Math.abs(sl.x)+r.y*Math.abs(sl.y)+r.z*Math.abs(sl.z),l=e.dot(sl),c=t.dot(sl),h=i.dot(sl);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}const NG=new Ui,zh=new z,M_=new z;class Mi{constructor(e=new z,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):NG.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;zh.subVectors(e,this.center);const t=zh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(zh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(M_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(zh.copy(e.center).add(M_)),this.expandByPoint(zh.copy(e.center).sub(M_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const no=new z,E_=new z,Cm=new z,Ko=new z,b_=new z,Pm=new z,T_=new z;class oh{constructor(e=new z,t=new z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,no)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=no.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(no.copy(this.origin).addScaledVector(this.direction,t),no.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){E_.copy(e).add(t).multiplyScalar(.5),Cm.copy(t).sub(e).normalize(),Ko.copy(this.origin).sub(E_);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Cm),a=Ko.dot(this.direction),l=-Ko.dot(Cm),c=Ko.lengthSq(),h=Math.abs(1-o*o);let f,p,m,v;if(h>0)if(f=o*l-a,p=o*a-l,v=s*h,f>=0)if(p>=-v)if(p<=v){const x=1/h;f*=x,p*=x,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+c}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p<=-v?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c):p<=v?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(E_).addScaledVector(Cm,p),m}intersectSphere(e,t){no.subVectors(e.center,this.origin);const i=no.dot(this.direction),r=no.dot(no)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,h=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(i=(e.min.x-p.x)*c,r=(e.max.x-p.x)*c):(i=(e.max.x-p.x)*c,r=(e.min.x-p.x)*c),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,no)!==null}intersectTriangle(e,t,i,r,s){b_.subVectors(t,e),Pm.subVectors(i,e),T_.crossVectors(b_,Pm);let o=this.direction.dot(T_),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ko.subVectors(this.origin,e);const l=a*this.direction.dot(Pm.crossVectors(Ko,Pm));if(l<0)return null;const c=a*this.direction.dot(b_.cross(Ko));if(c<0||l+c>o)return null;const h=-a*Ko.dot(T_);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ct{constructor(e,t,i,r,s,o,a,l,c,h,f,p,m,v,x,_){ct.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,h,f,p,m,v,x,_)}set(e,t,i,r,s,o,a,l,c,h,f,p,m,v,x,_){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=h,g[10]=f,g[14]=p,g[3]=m,g[7]=v,g[11]=x,g[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ct().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Ic.setFromMatrixColumn(e,0).length(),s=1/Ic.setFromMatrixColumn(e,1).length(),o=1/Ic.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),h=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*h,m=o*f,v=a*h,x=a*f;t[0]=l*h,t[4]=-l*f,t[8]=c,t[1]=m+v*c,t[5]=p-x*c,t[9]=-a*l,t[2]=x-p*c,t[6]=v+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*h,m=l*f,v=c*h,x=c*f;t[0]=p+x*a,t[4]=v*a-m,t[8]=o*c,t[1]=o*f,t[5]=o*h,t[9]=-a,t[2]=m*a-v,t[6]=x+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*h,m=l*f,v=c*h,x=c*f;t[0]=p-x*a,t[4]=-o*f,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*h,t[9]=x-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*h,m=o*f,v=a*h,x=a*f;t[0]=l*h,t[4]=v*c-m,t[8]=p*c+x,t[1]=l*f,t[5]=x*c+p,t[9]=m*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,v=a*l,x=a*c;t[0]=l*h,t[4]=x-p*f,t[8]=v*f+m,t[1]=f,t[5]=o*h,t[9]=-a*h,t[2]=-c*h,t[6]=m*f+v,t[10]=p-x*f}else if(e.order==="XZY"){const p=o*l,m=o*c,v=a*l,x=a*c;t[0]=l*h,t[4]=-f,t[8]=c*h,t[1]=p*f+x,t[5]=o*h,t[9]=m*f-v,t[2]=v*f-m,t[6]=a*h,t[10]=x*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(IG,e,LG)}lookAt(e,t,i){const r=this.elements;return dr.subVectors(e,t),dr.lengthSq()===0&&(dr.z=1),dr.normalize(),Zo.crossVectors(i,dr),Zo.lengthSq()===0&&(Math.abs(i.z)===1?dr.x+=1e-4:dr.z+=1e-4,dr.normalize(),Zo.crossVectors(i,dr)),Zo.normalize(),Rm.crossVectors(dr,Zo),r[0]=Zo.x,r[4]=Rm.x,r[8]=dr.x,r[1]=Zo.y,r[5]=Rm.y,r[9]=dr.y,r[2]=Zo.z,r[6]=Rm.z,r[10]=dr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],h=i[1],f=i[5],p=i[9],m=i[13],v=i[2],x=i[6],_=i[10],g=i[14],S=i[3],w=i[7],b=i[11],A=i[15],P=r[0],I=r[4],L=r[8],R=r[12],C=r[1],U=r[5],j=r[9],X=r[13],J=r[2],se=r[6],Q=r[10],te=r[14],D=r[3],G=r[7],W=r[11],ee=r[15];return s[0]=o*P+a*C+l*J+c*D,s[4]=o*I+a*U+l*se+c*G,s[8]=o*L+a*j+l*Q+c*W,s[12]=o*R+a*X+l*te+c*ee,s[1]=h*P+f*C+p*J+m*D,s[5]=h*I+f*U+p*se+m*G,s[9]=h*L+f*j+p*Q+m*W,s[13]=h*R+f*X+p*te+m*ee,s[2]=v*P+x*C+_*J+g*D,s[6]=v*I+x*U+_*se+g*G,s[10]=v*L+x*j+_*Q+g*W,s[14]=v*R+x*X+_*te+g*ee,s[3]=S*P+w*C+b*J+A*D,s[7]=S*I+w*U+b*se+A*G,s[11]=S*L+w*j+b*Q+A*W,s[15]=S*R+w*X+b*te+A*ee,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],h=e[2],f=e[6],p=e[10],m=e[14],v=e[3],x=e[7],_=e[11],g=e[15];return v*(+s*l*f-r*c*f-s*a*p+i*c*p+r*a*m-i*l*m)+x*(+t*l*m-t*c*p+s*o*p-r*o*m+r*c*h-s*l*h)+_*(+t*c*f-t*a*m-s*o*f+i*o*m+s*a*h-i*c*h)+g*(-r*a*h-t*l*f+t*a*p+r*o*f-i*o*p+i*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=e[9],p=e[10],m=e[11],v=e[12],x=e[13],_=e[14],g=e[15],S=f*_*c-x*p*c+x*l*m-a*_*m-f*l*g+a*p*g,w=v*p*c-h*_*c-v*l*m+o*_*m+h*l*g-o*p*g,b=h*x*c-v*f*c+v*a*m-o*x*m-h*a*g+o*f*g,A=v*f*l-h*x*l-v*a*p+o*x*p+h*a*_-o*f*_,P=t*S+i*w+r*b+s*A;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/P;return e[0]=S*I,e[1]=(x*p*s-f*_*s-x*r*m+i*_*m+f*r*g-i*p*g)*I,e[2]=(a*_*s-x*l*s+x*r*c-i*_*c-a*r*g+i*l*g)*I,e[3]=(f*l*s-a*p*s-f*r*c+i*p*c+a*r*m-i*l*m)*I,e[4]=w*I,e[5]=(h*_*s-v*p*s+v*r*m-t*_*m-h*r*g+t*p*g)*I,e[6]=(v*l*s-o*_*s-v*r*c+t*_*c+o*r*g-t*l*g)*I,e[7]=(o*p*s-h*l*s+h*r*c-t*p*c-o*r*m+t*l*m)*I,e[8]=b*I,e[9]=(v*f*s-h*x*s-v*i*m+t*x*m+h*i*g-t*f*g)*I,e[10]=(o*x*s-v*a*s+v*i*c-t*x*c-o*i*g+t*a*g)*I,e[11]=(h*a*s-o*f*s-h*i*c+t*f*c+o*i*m-t*a*m)*I,e[12]=A*I,e[13]=(h*x*r-v*f*r+v*i*p-t*x*p-h*i*_+t*f*_)*I,e[14]=(v*a*r-o*x*r-v*i*l+t*x*l+o*i*_-t*a*_)*I,e[15]=(o*f*r-h*a*r+h*i*l-t*f*l-o*i*p+t*a*p)*I,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,h=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,h*a+i,h*l-r*o,0,c*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,h=o+o,f=a+a,p=s*c,m=s*h,v=s*f,x=o*h,_=o*f,g=a*f,S=l*c,w=l*h,b=l*f,A=i.x,P=i.y,I=i.z;return r[0]=(1-(x+g))*A,r[1]=(m+b)*A,r[2]=(v-w)*A,r[3]=0,r[4]=(m-b)*P,r[5]=(1-(p+g))*P,r[6]=(_+S)*P,r[7]=0,r[8]=(v+w)*I,r[9]=(_-S)*I,r[10]=(1-(p+x))*I,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Ic.set(r[0],r[1],r[2]).length();const o=Ic.set(r[4],r[5],r[6]).length(),a=Ic.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],is.copy(this);const c=1/s,h=1/o,f=1/a;return is.elements[0]*=c,is.elements[1]*=c,is.elements[2]*=c,is.elements[4]*=h,is.elements[5]*=h,is.elements[6]*=h,is.elements[8]*=f,is.elements[9]*=f,is.elements[10]*=f,t.setFromRotationMatrix(is),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Fs){const l=this.elements,c=2*s/(t-e),h=2*s/(i-r),f=(t+e)/(t-e),p=(i+r)/(i-r);let m,v;if(a===Fs)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===Mf)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Fs){const l=this.elements,c=1/(t-e),h=1/(i-r),f=1/(o-s),p=(t+e)*c,m=(i+r)*h;let v,x;if(a===Fs)v=(o+s)*f,x=-2*f;else if(a===Mf)v=s*f,x=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=x,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Ic=new z,is=new ct,IG=new z(0,0,0),LG=new z(1,1,1),Zo=new z,Rm=new z,dr=new z,OP=new ct,FP=new sr;class Cr{constructor(e=0,t=0,i=0,r=Cr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],h=r[9],f=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(wn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-wn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(wn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-wn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(wn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-wn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return OP.makeRotationFromQuaternion(e),this.setFromRotationMatrix(OP,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return FP.setFromEuler(this),this.setFromQuaternion(FP,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Cr.DEFAULT_ORDER="XYZ";class Gl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let DG=0;const BP=new z,Lc=new sr,io=new ct,Nm=new z,Vh=new z,kG=new z,UG=new sr,zP=new z(1,0,0),VP=new z(0,1,0),HP=new z(0,0,1),jP={type:"added"},OG={type:"removed"},Dc={type:"childadded",child:null},A_={type:"childremoved",child:null};class Ot extends Ys{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:DG++}),this.uuid=Mr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ot.DEFAULT_UP.clone();const e=new z,t=new Cr,i=new sr,r=new z(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ct},normalMatrix:{value:new vt}}),this.matrix=new ct,this.matrixWorld=new ct,this.matrixAutoUpdate=Ot.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ot.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Gl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Lc.setFromAxisAngle(e,t),this.quaternion.multiply(Lc),this}rotateOnWorldAxis(e,t){return Lc.setFromAxisAngle(e,t),this.quaternion.premultiply(Lc),this}rotateX(e){return this.rotateOnAxis(zP,e)}rotateY(e){return this.rotateOnAxis(VP,e)}rotateZ(e){return this.rotateOnAxis(HP,e)}translateOnAxis(e,t){return BP.copy(e).applyQuaternion(this.quaternion),this.position.add(BP.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(zP,e)}translateY(e){return this.translateOnAxis(VP,e)}translateZ(e){return this.translateOnAxis(HP,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(io.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Nm.copy(e):Nm.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Vh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?io.lookAt(Vh,Nm,this.up):io.lookAt(Nm,Vh,this.up),this.quaternion.setFromRotationMatrix(io),r&&(io.extractRotation(r.matrixWorld),Lc.setFromRotationMatrix(io),this.quaternion.premultiply(Lc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(jP),Dc.child=e,this.dispatchEvent(Dc),Dc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(OG),A_.child=e,this.dispatchEvent(A_),A_.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),io.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),io.multiply(e.parent.matrixWorld)),e.applyMatrix4(io),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(jP),Dc.child=e,this.dispatchEvent(Dc),Dc.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vh,e,kG),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vh,UG,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,h=l.length;c<h;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),h=o(e.images),f=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),h.length>0&&(i.images=h),f.length>0&&(i.shapes=f),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),v.length>0&&(i.nodes=v)}return i.object=r,i;function o(a){const l=[];for(const c in a){const h=a[c];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Ot.DEFAULT_UP=new z(0,1,0);Ot.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ot.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const rs=new z,ro=new z,C_=new z,so=new z,kc=new z,Uc=new z,GP=new z,P_=new z,R_=new z,N_=new z,I_=new kt,L_=new kt,D_=new kt;class Ki{constructor(e=new z,t=new z,i=new z){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),rs.subVectors(e,t),r.cross(rs);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){rs.subVectors(r,t),ro.subVectors(i,t),C_.subVectors(e,t);const o=rs.dot(rs),a=rs.dot(ro),l=rs.dot(C_),c=ro.dot(ro),h=ro.dot(C_),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const p=1/f,m=(c*l-a*h)*p,v=(o*h-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,so)===null?!1:so.x>=0&&so.y>=0&&so.x+so.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,so)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,so.x),l.addScaledVector(o,so.y),l.addScaledVector(a,so.z),l)}static getInterpolatedAttribute(e,t,i,r,s,o){return I_.setScalar(0),L_.setScalar(0),D_.setScalar(0),I_.fromBufferAttribute(e,t),L_.fromBufferAttribute(e,i),D_.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(I_,s.x),o.addScaledVector(L_,s.y),o.addScaledVector(D_,s.z),o}static isFrontFacing(e,t,i,r){return rs.subVectors(i,t),ro.subVectors(e,t),rs.cross(ro).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return rs.subVectors(this.c,this.b),ro.subVectors(this.a,this.b),rs.cross(ro).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ki.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ki.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Ki.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Ki.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ki.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;kc.subVectors(r,i),Uc.subVectors(s,i),P_.subVectors(e,i);const l=kc.dot(P_),c=Uc.dot(P_);if(l<=0&&c<=0)return t.copy(i);R_.subVectors(e,r);const h=kc.dot(R_),f=Uc.dot(R_);if(h>=0&&f<=h)return t.copy(r);const p=l*f-h*c;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(i).addScaledVector(kc,o);N_.subVectors(e,s);const m=kc.dot(N_),v=Uc.dot(N_);if(v>=0&&m<=v)return t.copy(s);const x=m*c-l*v;if(x<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(i).addScaledVector(Uc,a);const _=h*v-m*f;if(_<=0&&f-h>=0&&m-v>=0)return GP.subVectors(s,r),a=(f-h)/(f-h+(m-v)),t.copy(r).addScaledVector(GP,a);const g=1/(_+x+p);return o=x*g,a=p*g,t.copy(i).addScaledVector(kc,o).addScaledVector(Uc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Ek={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},$o={h:0,s:0,l:0},Im={h:0,s:0,l:0};function k_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Be{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Xi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,It.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=It.workingColorSpace){return this.r=e,this.g=t,this.b=i,It.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=It.workingColorSpace){if(e=_E(e,1),t=wn(t,0,1),i=wn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=k_(o,s,e+1/3),this.g=k_(o,s,e),this.b=k_(o,s,e-1/3)}return It.toWorkingColorSpace(this,r),this}setStyle(e,t=Xi){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Xi){const i=Ek[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=wo(e.r),this.g=wo(e.g),this.b=wo(e.b),this}copyLinearToSRGB(e){return this.r=Ru(e.r),this.g=Ru(e.g),this.b=Ru(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Xi){return It.fromWorkingColorSpace(mi.copy(this),e),Math.round(wn(mi.r*255,0,255))*65536+Math.round(wn(mi.g*255,0,255))*256+Math.round(wn(mi.b*255,0,255))}getHexString(e=Xi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=It.workingColorSpace){It.fromWorkingColorSpace(mi.copy(this),t);const i=mi.r,r=mi.g,s=mi.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const h=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=h<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getRGB(e,t=It.workingColorSpace){return It.fromWorkingColorSpace(mi.copy(this),t),e.r=mi.r,e.g=mi.g,e.b=mi.b,e}getStyle(e=Xi){It.fromWorkingColorSpace(mi.copy(this),e);const t=mi.r,i=mi.g,r=mi.b;return e!==Xi?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL($o),this.setHSL($o.h+e,$o.s+t,$o.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL($o),e.getHSL(Im);const i=Dd($o.h,Im.h,t),r=Dd($o.s,Im.s,t),s=Dd($o.l,Im.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const mi=new Be;Be.NAMES=Ek;let FG=0;class bi extends Ys{static get type(){return"Material"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:FG++}),this.uuid=Mr(),this.name="",this.blending=Vl,this.side=Ro,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=b0,this.blendDst=T0,this.blendEquation=oa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Be(0,0,0),this.blendAlpha=0,this.depthFunc=$l,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=$S,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=wl,this.stencilZFail=wl,this.stencilZPass=wl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Vl&&(i.blending=this.blending),this.side!==Ro&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==b0&&(i.blendSrc=this.blendSrc),this.blendDst!==T0&&(i.blendDst=this.blendDst),this.blendEquation!==oa&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==$l&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==$S&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==wl&&(i.stencilFail=this.stencilFail),this.stencilZFail!==wl&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==wl&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Ha extends bi{static get type(){return"MeshBasicMaterial"}constructor(e){super(),this.isMeshBasicMaterial=!0,this.color=new Be(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cr,this.combine=Gf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const po=BG();function BG(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,h=0;for(;!(c&8388608);)c<<=1,h-=8388608;c&=-8388609,h+=947912704,s[l]=c|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Wi(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=wn(n,-65504,65504),po.floatView[0]=n;const e=po.uint32View[0],t=e>>23&511;return po.baseTable[t]+((e&8388607)>>po.shiftTable[t])}function cd(n){const e=n>>10;return po.uint32View[0]=po.mantissaTable[po.offsetTable[e]+(n&1023)]+po.exponentTable[e],po.floatView[0]}const zG={toHalfFloat:Wi,fromHalfFloat:cd},Ln=new z,Lm=new ve;class Yt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=wf,this.updateRanges=[],this.gpuType=$i,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Lm.fromBufferAttribute(this,t),Lm.applyMatrix3(e),this.setXY(t,Lm.x,Lm.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ln.fromBufferAttribute(this,t),Ln.applyMatrix3(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ln.fromBufferAttribute(this,t),Ln.applyMatrix4(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ln.fromBufferAttribute(this,t),Ln.applyNormalMatrix(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ln.fromBufferAttribute(this,t),Ln.transformDirection(e),this.setXYZ(t,Ln.x,Ln.y,Ln.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Li(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=yt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Li(t,this.array)),t}setX(e,t){return this.normalized&&(t=yt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Li(t,this.array)),t}setY(e,t){return this.normalized&&(t=yt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Li(t,this.array)),t}setZ(e,t){return this.normalized&&(t=yt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Li(t,this.array)),t}setW(e,t){return this.normalized&&(t=yt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=yt(t,this.array),i=yt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=yt(t,this.array),i=yt(i,this.array),r=yt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=yt(t,this.array),i=yt(i,this.array),r=yt(r,this.array),s=yt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==wf&&(e.usage=this.usage),e}}class VG extends Yt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class HG extends Yt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class jG extends Yt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class GG extends Yt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class wE extends Yt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class WG extends Yt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class ME extends Yt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class XG extends Yt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=cd(this.array[e*this.itemSize]);return this.normalized&&(t=Li(t,this.array)),t}setX(e,t){return this.normalized&&(t=yt(t,this.array)),this.array[e*this.itemSize]=Wi(t),this}getY(e){let t=cd(this.array[e*this.itemSize+1]);return this.normalized&&(t=Li(t,this.array)),t}setY(e,t){return this.normalized&&(t=yt(t,this.array)),this.array[e*this.itemSize+1]=Wi(t),this}getZ(e){let t=cd(this.array[e*this.itemSize+2]);return this.normalized&&(t=Li(t,this.array)),t}setZ(e,t){return this.normalized&&(t=yt(t,this.array)),this.array[e*this.itemSize+2]=Wi(t),this}getW(e){let t=cd(this.array[e*this.itemSize+3]);return this.normalized&&(t=Li(t,this.array)),t}setW(e,t){return this.normalized&&(t=yt(t,this.array)),this.array[e*this.itemSize+3]=Wi(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=yt(t,this.array),i=yt(i,this.array)),this.array[e+0]=Wi(t),this.array[e+1]=Wi(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=yt(t,this.array),i=yt(i,this.array),r=yt(r,this.array)),this.array[e+0]=Wi(t),this.array[e+1]=Wi(i),this.array[e+2]=Wi(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=yt(t,this.array),i=yt(i,this.array),r=yt(r,this.array),s=yt(s,this.array)),this.array[e+0]=Wi(t),this.array[e+1]=Wi(i),this.array[e+2]=Wi(r),this.array[e+3]=Wi(s),this}}class Ze extends Yt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let YG=0;const zr=new ct,U_=new Ot,Oc=new z,fr=new Ui,Hh=new Ui,Zn=new z;class St extends Ys{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:YG++}),this.uuid=Mr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(_k(e)?ME:wE)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new vt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return zr.makeRotationFromQuaternion(e),this.applyMatrix4(zr),this}rotateX(e){return zr.makeRotationX(e),this.applyMatrix4(zr),this}rotateY(e){return zr.makeRotationY(e),this.applyMatrix4(zr),this}rotateZ(e){return zr.makeRotationZ(e),this.applyMatrix4(zr),this}translate(e,t,i){return zr.makeTranslation(e,t,i),this.applyMatrix4(zr),this}scale(e,t,i){return zr.makeScale(e,t,i),this.applyMatrix4(zr),this}lookAt(e){return U_.lookAt(e),U_.updateMatrix(),this.applyMatrix4(U_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Oc).negate(),this.translate(Oc.x,Oc.y,Oc.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ze(i,3))}else{for(let i=0,r=t.count;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ui);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];fr.setFromBufferAttribute(s),this.morphTargetsRelative?(Zn.addVectors(this.boundingBox.min,fr.min),this.boundingBox.expandByPoint(Zn),Zn.addVectors(this.boundingBox.max,fr.max),this.boundingBox.expandByPoint(Zn)):(this.boundingBox.expandByPoint(fr.min),this.boundingBox.expandByPoint(fr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Mi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new z,1/0);return}if(e){const i=this.boundingSphere.center;if(fr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Hh.setFromBufferAttribute(a),this.morphTargetsRelative?(Zn.addVectors(fr.min,Hh.min),fr.expandByPoint(Zn),Zn.addVectors(fr.max,Hh.max),fr.expandByPoint(Zn)):(fr.expandByPoint(Hh.min),fr.expandByPoint(Hh.max))}fr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Zn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Zn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,h=a.count;c<h;c++)Zn.fromBufferAttribute(a,c),l&&(Oc.fromBufferAttribute(e,c),Zn.add(Oc)),r=Math.max(r,i.distanceToSquared(Zn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Yt(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let L=0;L<i.count;L++)a[L]=new z,l[L]=new z;const c=new z,h=new z,f=new z,p=new ve,m=new ve,v=new ve,x=new z,_=new z;function g(L,R,C){c.fromBufferAttribute(i,L),h.fromBufferAttribute(i,R),f.fromBufferAttribute(i,C),p.fromBufferAttribute(s,L),m.fromBufferAttribute(s,R),v.fromBufferAttribute(s,C),h.sub(c),f.sub(c),m.sub(p),v.sub(p);const U=1/(m.x*v.y-v.x*m.y);isFinite(U)&&(x.copy(h).multiplyScalar(v.y).addScaledVector(f,-m.y).multiplyScalar(U),_.copy(f).multiplyScalar(m.x).addScaledVector(h,-v.x).multiplyScalar(U),a[L].add(x),a[R].add(x),a[C].add(x),l[L].add(_),l[R].add(_),l[C].add(_))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let L=0,R=S.length;L<R;++L){const C=S[L],U=C.start,j=C.count;for(let X=U,J=U+j;X<J;X+=3)g(e.getX(X+0),e.getX(X+1),e.getX(X+2))}const w=new z,b=new z,A=new z,P=new z;function I(L){A.fromBufferAttribute(r,L),P.copy(A);const R=a[L];w.copy(R),w.sub(A.multiplyScalar(A.dot(R))).normalize(),b.crossVectors(P,R);const U=b.dot(l[L])<0?-1:1;o.setXYZW(L,w.x,w.y,w.z,U)}for(let L=0,R=S.length;L<R;++L){const C=S[L],U=C.start,j=C.count;for(let X=U,J=U+j;X<J;X+=3)I(e.getX(X+0)),I(e.getX(X+1)),I(e.getX(X+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Yt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new z,s=new z,o=new z,a=new z,l=new z,c=new z,h=new z,f=new z;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),x=e.getX(p+1),_=e.getX(p+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,_),h.subVectors(o,s),f.subVectors(r,s),h.cross(f),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,x),c.fromBufferAttribute(i,_),a.add(h),l.add(h),c.add(h),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(_,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),h.subVectors(o,s),f.subVectors(r,s),h.cross(f),i.setXYZ(p+0,h.x,h.y,h.z),i.setXYZ(p+1,h.x,h.y,h.z),i.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Zn.fromBufferAttribute(e,t),Zn.normalize(),e.setXYZ(t,Zn.x,Zn.y,Zn.z)}toNonIndexed(){function e(a,l){const c=a.array,h=a.itemSize,f=a.normalized,p=new c.constructor(l.length*h);let m=0,v=0;for(let x=0,_=l.length;x<_;x++){a.isInterleavedBufferAttribute?m=l[x]*a.data.stride+a.offset:m=l[x]*h;for(let g=0;g<h;g++)p[v++]=c[m++]}return new Yt(p,h,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new St,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let h=0,f=c.length;h<f;h++){const p=c[h],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],h=[];for(let f=0,p=c.length;f<p;f++){const m=c[f];h.push(m.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const h=r[c];this.setAttribute(c,h.clone(t))}const s=e.morphAttributes;for(const c in s){const h=[],f=s[c];for(let p=0,m=f.length;p<m;p++)h.push(f[p].clone(t));this.morphAttributes[c]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,h=o.length;c<h;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const WP=new ct,ol=new oh,Dm=new Mi,XP=new z,km=new z,Um=new z,Om=new z,O_=new z,Fm=new z,YP=new z,Bm=new z;class Un extends Ot{constructor(e=new St,t=new Ha){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){Fm.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const h=a[l],f=s[l];h!==0&&(O_.fromBufferAttribute(f,e),o?Fm.addScaledVector(O_,h):Fm.addScaledVector(O_.sub(t),h))}t.add(Fm)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Dm.copy(i.boundingSphere),Dm.applyMatrix4(s),ol.copy(e.ray).recast(e.near),!(Dm.containsPoint(ol.origin)===!1&&(ol.intersectSphere(Dm,XP)===null||ol.origin.distanceToSquared(XP)>(e.far-e.near)**2))&&(WP.copy(s).invert(),ol.copy(e.ray).applyMatrix4(WP),!(i.boundingBox!==null&&ol.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,ol)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,h=s.attributes.uv1,f=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,x=p.length;v<x;v++){const _=p[v],g=o[_.materialIndex],S=Math.max(_.start,m.start),w=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));for(let b=S,A=w;b<A;b+=3){const P=a.getX(b),I=a.getX(b+1),L=a.getX(b+2);r=zm(this,g,e,i,c,h,f,P,I,L),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),x=Math.min(a.count,m.start+m.count);for(let _=v,g=x;_<g;_+=3){const S=a.getX(_),w=a.getX(_+1),b=a.getX(_+2);r=zm(this,o,e,i,c,h,f,S,w,b),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,x=p.length;v<x;v++){const _=p[v],g=o[_.materialIndex],S=Math.max(_.start,m.start),w=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));for(let b=S,A=w;b<A;b+=3){const P=b,I=b+1,L=b+2;r=zm(this,g,e,i,c,h,f,P,I,L),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),x=Math.min(l.count,m.start+m.count);for(let _=v,g=x;_<g;_+=3){const S=_,w=_+1,b=_+2;r=zm(this,o,e,i,c,h,f,S,w,b),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}}}function qG(n,e,t,i,r,s,o,a){let l;if(e.side===ki?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Ro,a),l===null)return null;Bm.copy(a),Bm.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Bm);return c<t.near||c>t.far?null:{distance:c,point:Bm.clone(),object:n}}function zm(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,km),n.getVertexPosition(l,Um),n.getVertexPosition(c,Om);const h=qG(n,e,t,i,km,Um,Om,YP);if(h){const f=new z;Ki.getBarycoord(YP,km,Um,Om,f),r&&(h.uv=Ki.getInterpolatedAttribute(r,a,l,c,f,new ve)),s&&(h.uv1=Ki.getInterpolatedAttribute(s,a,l,c,f,new ve)),o&&(h.normal=Ki.getInterpolatedAttribute(o,a,l,c,f,new z),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const p={a,b:l,c,normal:new z,materialIndex:0};Ki.getNormal(km,Um,Om,p.normal),h.face=p,h.barycoord=f}return h}class lc extends St{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],h=[],f=[];let p=0,m=0;v("z","y","x",-1,-1,i,t,e,o,s,0),v("z","y","x",1,-1,i,t,-e,o,s,1),v("x","z","y",1,1,e,i,t,r,o,2),v("x","z","y",1,-1,e,i,-t,r,o,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Ze(c,3)),this.setAttribute("normal",new Ze(h,3)),this.setAttribute("uv",new Ze(f,2));function v(x,_,g,S,w,b,A,P,I,L,R){const C=b/I,U=A/L,j=b/2,X=A/2,J=P/2,se=I+1,Q=L+1;let te=0,D=0;const G=new z;for(let W=0;W<Q;W++){const ee=W*U-X;for(let de=0;de<se;de++){const Le=de*C-j;G[x]=Le*S,G[_]=ee*w,G[g]=J,c.push(G.x,G.y,G.z),G[x]=0,G[_]=0,G[g]=P>0?1:-1,h.push(G.x,G.y,G.z),f.push(de/I),f.push(1-W/L),te+=1}}for(let W=0;W<L;W++)for(let ee=0;ee<I;ee++){const de=p+ee+se*W,Le=p+ee+se*(W+1),ie=p+(ee+1)+se*(W+1),pe=p+(ee+1)+se*W;l.push(de,Le,pe),l.push(Le,ie,pe),D+=6}a.addGroup(m,D,R),m+=D,p+=te}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ku(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Ri(n){const e={};for(let t=0;t<n.length;t++){const i=Ku(n[t]);for(const r in i)e[r]=i[r]}return e}function KG(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function bk(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:It.workingColorSpace}const Tk={clone:Ku,merge:Ri};var ZG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,$G=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class gs extends bi{static get type(){return"ShaderMaterial"}constructor(e){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=ZG,this.fragmentShader=$G,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ku(e.uniforms),this.uniformsGroups=KG(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Yf extends Ot{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ct,this.projectionMatrix=new ct,this.projectionMatrixInverse=new ct,this.coordinateSystem=Fs}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Qo=new z,qP=new ve,KP=new ve;class Qn extends Yf{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=qu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(jl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return qu*2*Math.atan(Math.tan(jl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Qo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Qo.x,Qo.y).multiplyScalar(-e/Qo.z),Qo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Qo.x,Qo.y).multiplyScalar(-e/Qo.z)}getViewSize(e,t){return this.getViewBounds(e,qP,KP),t.subVectors(KP,qP)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(jl*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Fc=-90,Bc=1;class Ak extends Ot{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Qn(Fc,Bc,e,t);r.layers=this.layers,this.add(r);const s=new Qn(Fc,Bc,e,t);s.layers=this.layers,this.add(s);const o=new Qn(Fc,Bc,e,t);o.layers=this.layers,this.add(o);const a=new Qn(Fc,Bc,e,t);a.layers=this.layers,this.add(a);const l=new Qn(Fc,Bc,e,t);l.layers=this.layers,this.add(l);const c=new Qn(Fc,Bc,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Fs)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Mf)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,h]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=x,e.setRenderTarget(i,5,r),e.render(t,h),e.setRenderTarget(f,p,m),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class qf extends En{constructor(e,t,i,r,s,o,a,l,c,h){e=e!==void 0?e:[],t=t!==void 0?t:No,super(e,t,i,r,s,o,a,l,c,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Ck extends ms{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new qf(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Hn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new lc(5,5,5),s=new gs({name:"CubemapFromEquirect",uniforms:Ku(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ki,blending:So});s.uniforms.tEquirect.value=t;const o=new Un(r,s),a=t.minFilter;return t.minFilter===Os&&(t.minFilter=Hn),new Ak(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const F_=new z,QG=new z,JG=new vt;class ia{constructor(e=new z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=F_.subVectors(i,t).cross(QG.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(F_),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||JG.getNormalMatrix(e),r=this.coplanarPoint(F_).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const al=new Mi,Vm=new z;class Kf{constructor(e=new ia,t=new ia,i=new ia,r=new ia,s=new ia,o=new ia){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Fs){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],h=r[5],f=r[6],p=r[7],m=r[8],v=r[9],x=r[10],_=r[11],g=r[12],S=r[13],w=r[14],b=r[15];if(i[0].setComponents(l-s,p-c,_-m,b-g).normalize(),i[1].setComponents(l+s,p+c,_+m,b+g).normalize(),i[2].setComponents(l+o,p+h,_+v,b+S).normalize(),i[3].setComponents(l-o,p-h,_-v,b-S).normalize(),i[4].setComponents(l-a,p-f,_-x,b-w).normalize(),t===Fs)i[5].setComponents(l+a,p+f,_+x,b+w).normalize();else if(t===Mf)i[5].setComponents(a,f,x,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),al.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),al.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(al)}intersectsSprite(e){return al.center.set(0,0,0),al.radius=.7071067811865476,al.applyMatrix4(e.matrixWorld),this.intersectsSphere(al)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Vm.x=r.normal.x>0?e.max.x:e.min.x,Vm.y=r.normal.y>0?e.max.y:e.min.y,Vm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Vm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Pk(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function eW(n){const e=new WeakMap;function t(a,l){const c=a.array,h=a.usage,f=c.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,c,h),a.onUploadCallback();let m;if(c instanceof Float32Array)m=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=n.SHORT;else if(c instanceof Uint32Array)m=n.UNSIGNED_INT;else if(c instanceof Int32Array)m=n.INT;else if(c instanceof Int8Array)m=n.BYTE;else if(c instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:f}}function i(a,l,c){const h=l.array,f=l.updateRanges;if(n.bindBuffer(c,a),f.length===0)n.bufferSubData(c,0,h);else{f.sort((m,v)=>m.start-v.start);let p=0;for(let m=1;m<f.length;m++){const v=f[p],x=f[m];x.start<=v.start+v.count+1?v.count=Math.max(v.count,x.start+x.count-v.start):(++p,f[p]=x)}f.length=p+1;for(let m=0,v=f.length;m<v;m++){const x=f[m];n.bufferSubData(c,x.start*h.BYTES_PER_ELEMENT,h,x.start,x.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const h=e.get(a);(!h||h.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}class ah extends St{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,h=l+1,f=e/a,p=t/l,m=[],v=[],x=[],_=[];for(let g=0;g<h;g++){const S=g*p-o;for(let w=0;w<c;w++){const b=w*f-s;v.push(b,-S,0),x.push(0,0,1),_.push(w/a),_.push(1-g/l)}}for(let g=0;g<l;g++)for(let S=0;S<a;S++){const w=S+c*g,b=S+c*(g+1),A=S+1+c*(g+1),P=S+1+c*g;m.push(w,b,P),m.push(b,A,P)}this.setIndex(m),this.setAttribute("position",new Ze(v,3)),this.setAttribute("normal",new Ze(x,3)),this.setAttribute("uv",new Ze(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ah(e.width,e.height,e.widthSegments,e.heightSegments)}}var tW=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,nW=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,iW=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,rW=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,sW=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,oW=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aW=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,lW=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,cW=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,uW=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,hW=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,dW=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,fW=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,pW=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,mW=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,gW=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,vW=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,yW=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,xW=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,_W=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,SW=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,wW=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,MW=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,EW=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,bW=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,TW=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,AW=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,CW=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,PW=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,RW=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,NW="gl_FragColor = linearToOutputTexel( gl_FragColor );",IW=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,LW=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,DW=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,kW=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,UW=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,OW=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,FW=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,BW=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,zW=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,VW=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,HW=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,jW=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,GW=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,WW=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,XW=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,YW=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,qW=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,KW=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,ZW=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,$W=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,QW=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,JW=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,e9=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,t9=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,n9=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,i9=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,r9=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,s9=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,o9=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,a9=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,l9=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,c9=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,u9=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,h9=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,d9=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,f9=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,p9=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,m9=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,g9=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,v9=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,y9=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,x9=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,_9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,S9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,w9=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,M9=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,E9=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,b9=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,T9=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,A9=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,C9=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,P9=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,R9=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,N9=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,I9=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,L9=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,D9=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,k9=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,U9=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,O9=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,F9=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,B9=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,z9=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,V9=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,H9=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,j9=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,G9=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,W9=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,X9=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Y9=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,q9=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,K9=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Z9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,$9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Q9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,J9=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const e7=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,t7=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,n7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,i7=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,r7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,s7=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,o7=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,a7=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,l7=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,c7=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,u7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,h7=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,d7=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,f7=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,p7=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,m7=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,g7=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,v7=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,y7=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,x7=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,S7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,w7=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,M7=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,E7=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,b7=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,T7=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,A7=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,C7=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,P7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,R7=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,N7=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,I7=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,L7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,_t={alphahash_fragment:tW,alphahash_pars_fragment:nW,alphamap_fragment:iW,alphamap_pars_fragment:rW,alphatest_fragment:sW,alphatest_pars_fragment:oW,aomap_fragment:aW,aomap_pars_fragment:lW,batching_pars_vertex:cW,batching_vertex:uW,begin_vertex:hW,beginnormal_vertex:dW,bsdfs:fW,iridescence_fragment:pW,bumpmap_pars_fragment:mW,clipping_planes_fragment:gW,clipping_planes_pars_fragment:vW,clipping_planes_pars_vertex:yW,clipping_planes_vertex:xW,color_fragment:_W,color_pars_fragment:SW,color_pars_vertex:wW,color_vertex:MW,common:EW,cube_uv_reflection_fragment:bW,defaultnormal_vertex:TW,displacementmap_pars_vertex:AW,displacementmap_vertex:CW,emissivemap_fragment:PW,emissivemap_pars_fragment:RW,colorspace_fragment:NW,colorspace_pars_fragment:IW,envmap_fragment:LW,envmap_common_pars_fragment:DW,envmap_pars_fragment:kW,envmap_pars_vertex:UW,envmap_physical_pars_fragment:YW,envmap_vertex:OW,fog_vertex:FW,fog_pars_vertex:BW,fog_fragment:zW,fog_pars_fragment:VW,gradientmap_pars_fragment:HW,lightmap_pars_fragment:jW,lights_lambert_fragment:GW,lights_lambert_pars_fragment:WW,lights_pars_begin:XW,lights_toon_fragment:qW,lights_toon_pars_fragment:KW,lights_phong_fragment:ZW,lights_phong_pars_fragment:$W,lights_physical_fragment:QW,lights_physical_pars_fragment:JW,lights_fragment_begin:e9,lights_fragment_maps:t9,lights_fragment_end:n9,logdepthbuf_fragment:i9,logdepthbuf_pars_fragment:r9,logdepthbuf_pars_vertex:s9,logdepthbuf_vertex:o9,map_fragment:a9,map_pars_fragment:l9,map_particle_fragment:c9,map_particle_pars_fragment:u9,metalnessmap_fragment:h9,metalnessmap_pars_fragment:d9,morphinstance_vertex:f9,morphcolor_vertex:p9,morphnormal_vertex:m9,morphtarget_pars_vertex:g9,morphtarget_vertex:v9,normal_fragment_begin:y9,normal_fragment_maps:x9,normal_pars_fragment:_9,normal_pars_vertex:S9,normal_vertex:w9,normalmap_pars_fragment:M9,clearcoat_normal_fragment_begin:E9,clearcoat_normal_fragment_maps:b9,clearcoat_pars_fragment:T9,iridescence_pars_fragment:A9,opaque_fragment:C9,packing:P9,premultiplied_alpha_fragment:R9,project_vertex:N9,dithering_fragment:I9,dithering_pars_fragment:L9,roughnessmap_fragment:D9,roughnessmap_pars_fragment:k9,shadowmap_pars_fragment:U9,shadowmap_pars_vertex:O9,shadowmap_vertex:F9,shadowmask_pars_fragment:B9,skinbase_vertex:z9,skinning_pars_vertex:V9,skinning_vertex:H9,skinnormal_vertex:j9,specularmap_fragment:G9,specularmap_pars_fragment:W9,tonemapping_fragment:X9,tonemapping_pars_fragment:Y9,transmission_fragment:q9,transmission_pars_fragment:K9,uv_pars_fragment:Z9,uv_pars_vertex:$9,uv_vertex:Q9,worldpos_vertex:J9,background_vert:e7,background_frag:t7,backgroundCube_vert:n7,backgroundCube_frag:i7,cube_vert:r7,cube_frag:s7,depth_vert:o7,depth_frag:a7,distanceRGBA_vert:l7,distanceRGBA_frag:c7,equirect_vert:u7,equirect_frag:h7,linedashed_vert:d7,linedashed_frag:f7,meshbasic_vert:p7,meshbasic_frag:m7,meshlambert_vert:g7,meshlambert_frag:v7,meshmatcap_vert:y7,meshmatcap_frag:x7,meshnormal_vert:_7,meshnormal_frag:S7,meshphong_vert:w7,meshphong_frag:M7,meshphysical_vert:E7,meshphysical_frag:b7,meshtoon_vert:T7,meshtoon_frag:A7,points_vert:C7,points_frag:P7,shadow_vert:R7,shadow_frag:N7,sprite_vert:I7,sprite_frag:L7},Ce={common:{diffuse:{value:new Be(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new vt},alphaMap:{value:null},alphaMapTransform:{value:new vt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new vt}},envmap:{envMap:{value:null},envMapRotation:{value:new vt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new vt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new vt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new vt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new vt},normalScale:{value:new ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new vt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new vt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new vt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new vt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Be(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Be(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new vt},alphaTest:{value:0},uvTransform:{value:new vt}},sprite:{diffuse:{value:new Be(16777215)},opacity:{value:1},center:{value:new ve(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new vt},alphaMap:{value:null},alphaMapTransform:{value:new vt},alphaTest:{value:0}}},us={basic:{uniforms:Ri([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.fog]),vertexShader:_t.meshbasic_vert,fragmentShader:_t.meshbasic_frag},lambert:{uniforms:Ri([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,Ce.lights,{emissive:{value:new Be(0)}}]),vertexShader:_t.meshlambert_vert,fragmentShader:_t.meshlambert_frag},phong:{uniforms:Ri([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,Ce.lights,{emissive:{value:new Be(0)},specular:{value:new Be(1118481)},shininess:{value:30}}]),vertexShader:_t.meshphong_vert,fragmentShader:_t.meshphong_frag},standard:{uniforms:Ri([Ce.common,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.roughnessmap,Ce.metalnessmap,Ce.fog,Ce.lights,{emissive:{value:new Be(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:_t.meshphysical_vert,fragmentShader:_t.meshphysical_frag},toon:{uniforms:Ri([Ce.common,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.gradientmap,Ce.fog,Ce.lights,{emissive:{value:new Be(0)}}]),vertexShader:_t.meshtoon_vert,fragmentShader:_t.meshtoon_frag},matcap:{uniforms:Ri([Ce.common,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,{matcap:{value:null}}]),vertexShader:_t.meshmatcap_vert,fragmentShader:_t.meshmatcap_frag},points:{uniforms:Ri([Ce.points,Ce.fog]),vertexShader:_t.points_vert,fragmentShader:_t.points_frag},dashed:{uniforms:Ri([Ce.common,Ce.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_t.linedashed_vert,fragmentShader:_t.linedashed_frag},depth:{uniforms:Ri([Ce.common,Ce.displacementmap]),vertexShader:_t.depth_vert,fragmentShader:_t.depth_frag},normal:{uniforms:Ri([Ce.common,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,{opacity:{value:1}}]),vertexShader:_t.meshnormal_vert,fragmentShader:_t.meshnormal_frag},sprite:{uniforms:Ri([Ce.sprite,Ce.fog]),vertexShader:_t.sprite_vert,fragmentShader:_t.sprite_frag},background:{uniforms:{uvTransform:{value:new vt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:_t.background_vert,fragmentShader:_t.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new vt}},vertexShader:_t.backgroundCube_vert,fragmentShader:_t.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:_t.cube_vert,fragmentShader:_t.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:_t.equirect_vert,fragmentShader:_t.equirect_frag},distanceRGBA:{uniforms:Ri([Ce.common,Ce.displacementmap,{referencePosition:{value:new z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:_t.distanceRGBA_vert,fragmentShader:_t.distanceRGBA_frag},shadow:{uniforms:Ri([Ce.lights,Ce.fog,{color:{value:new Be(0)},opacity:{value:1}}]),vertexShader:_t.shadow_vert,fragmentShader:_t.shadow_frag}};us.physical={uniforms:Ri([us.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new vt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new vt},clearcoatNormalScale:{value:new ve(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new vt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new vt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new vt},sheen:{value:0},sheenColor:{value:new Be(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new vt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new vt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new vt},transmissionSamplerSize:{value:new ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new vt},attenuationDistance:{value:0},attenuationColor:{value:new Be(0)},specularColor:{value:new Be(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new vt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new vt},anisotropyVector:{value:new ve},anisotropyMap:{value:null},anisotropyMapTransform:{value:new vt}}]),vertexShader:_t.meshphysical_vert,fragmentShader:_t.meshphysical_frag};const Hm={r:0,b:0,g:0},ll=new Cr,D7=new ct;function k7(n,e,t,i,r,s,o){const a=new Be(0);let l=s===!0?0:1,c,h,f=null,p=0,m=null;function v(S){let w=S.isScene===!0?S.background:null;return w&&w.isTexture&&(w=(S.backgroundBlurriness>0?t:e).get(w)),w}function x(S){let w=!1;const b=v(S);b===null?g(a,l):b&&b.isColor&&(g(b,1),w=!0);const A=n.xr.getEnvironmentBlendMode();A==="additive"?i.buffers.color.setClear(0,0,0,1,o):A==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||w)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function _(S,w){const b=v(w);b&&(b.isCubeTexture||b.mapping===rh)?(h===void 0&&(h=new Un(new lc(1,1,1),new gs({name:"BackgroundCubeMaterial",uniforms:Ku(us.backgroundCube.uniforms),vertexShader:us.backgroundCube.vertexShader,fragmentShader:us.backgroundCube.fragmentShader,side:ki,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(A,P,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),ll.copy(w.backgroundRotation),ll.x*=-1,ll.y*=-1,ll.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(ll.y*=-1,ll.z*=-1),h.material.uniforms.envMap.value=b,h.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(D7.makeRotationFromEuler(ll)),h.material.toneMapped=It.getTransfer(b.colorSpace)!==Ht,(f!==b||p!==b.version||m!==n.toneMapping)&&(h.material.needsUpdate=!0,f=b,p=b.version,m=n.toneMapping),h.layers.enableAll(),S.unshift(h,h.geometry,h.material,0,0,null)):b&&b.isTexture&&(c===void 0&&(c=new Un(new ah(2,2),new gs({name:"BackgroundMaterial",uniforms:Ku(us.background.uniforms),vertexShader:us.background.vertexShader,fragmentShader:us.background.fragmentShader,side:Ro,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=b,c.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,c.material.toneMapped=It.getTransfer(b.colorSpace)!==Ht,b.matrixAutoUpdate===!0&&b.updateMatrix(),c.material.uniforms.uvTransform.value.copy(b.matrix),(f!==b||p!==b.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=b,p=b.version,m=n.toneMapping),c.layers.enableAll(),S.unshift(c,c.geometry,c.material,0,0,null))}function g(S,w){S.getRGB(Hm,bk(n)),i.buffers.color.setClear(Hm.r,Hm.g,Hm.b,w,o)}return{getClearColor:function(){return a},setClearColor:function(S,w=1){a.set(S),l=w,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,g(a,l)},render:x,addToRenderList:_}}function U7(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null);let s=r,o=!1;function a(C,U,j,X,J){let se=!1;const Q=f(X,j,U);s!==Q&&(s=Q,c(s.object)),se=m(C,X,j,J),se&&v(C,X,j,J),J!==null&&e.update(J,n.ELEMENT_ARRAY_BUFFER),(se||o)&&(o=!1,b(C,U,j,X),J!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(J).buffer))}function l(){return n.createVertexArray()}function c(C){return n.bindVertexArray(C)}function h(C){return n.deleteVertexArray(C)}function f(C,U,j){const X=j.wireframe===!0;let J=i[C.id];J===void 0&&(J={},i[C.id]=J);let se=J[U.id];se===void 0&&(se={},J[U.id]=se);let Q=se[X];return Q===void 0&&(Q=p(l()),se[X]=Q),Q}function p(C){const U=[],j=[],X=[];for(let J=0;J<t;J++)U[J]=0,j[J]=0,X[J]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:j,attributeDivisors:X,object:C,attributes:{},index:null}}function m(C,U,j,X){const J=s.attributes,se=U.attributes;let Q=0;const te=j.getAttributes();for(const D in te)if(te[D].location>=0){const W=J[D];let ee=se[D];if(ee===void 0&&(D==="instanceMatrix"&&C.instanceMatrix&&(ee=C.instanceMatrix),D==="instanceColor"&&C.instanceColor&&(ee=C.instanceColor)),W===void 0||W.attribute!==ee||ee&&W.data!==ee.data)return!0;Q++}return s.attributesNum!==Q||s.index!==X}function v(C,U,j,X){const J={},se=U.attributes;let Q=0;const te=j.getAttributes();for(const D in te)if(te[D].location>=0){let W=se[D];W===void 0&&(D==="instanceMatrix"&&C.instanceMatrix&&(W=C.instanceMatrix),D==="instanceColor"&&C.instanceColor&&(W=C.instanceColor));const ee={};ee.attribute=W,W&&W.data&&(ee.data=W.data),J[D]=ee,Q++}s.attributes=J,s.attributesNum=Q,s.index=X}function x(){const C=s.newAttributes;for(let U=0,j=C.length;U<j;U++)C[U]=0}function _(C){g(C,0)}function g(C,U){const j=s.newAttributes,X=s.enabledAttributes,J=s.attributeDivisors;j[C]=1,X[C]===0&&(n.enableVertexAttribArray(C),X[C]=1),J[C]!==U&&(n.vertexAttribDivisor(C,U),J[C]=U)}function S(){const C=s.newAttributes,U=s.enabledAttributes;for(let j=0,X=U.length;j<X;j++)U[j]!==C[j]&&(n.disableVertexAttribArray(j),U[j]=0)}function w(C,U,j,X,J,se,Q){Q===!0?n.vertexAttribIPointer(C,U,j,J,se):n.vertexAttribPointer(C,U,j,X,J,se)}function b(C,U,j,X){x();const J=X.attributes,se=j.getAttributes(),Q=U.defaultAttributeValues;for(const te in se){const D=se[te];if(D.location>=0){let G=J[te];if(G===void 0&&(te==="instanceMatrix"&&C.instanceMatrix&&(G=C.instanceMatrix),te==="instanceColor"&&C.instanceColor&&(G=C.instanceColor)),G!==void 0){const W=G.normalized,ee=G.itemSize,de=e.get(G);if(de===void 0)continue;const Le=de.buffer,ie=de.type,pe=de.bytesPerElement,be=ie===n.INT||ie===n.UNSIGNED_INT||G.gpuType===Hv;if(G.isInterleavedBufferAttribute){const _e=G.data,et=_e.stride,at=G.offset;if(_e.isInstancedInterleavedBuffer){for(let tt=0;tt<D.locationSize;tt++)g(D.location+tt,_e.meshPerAttribute);C.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=_e.meshPerAttribute*_e.count)}else for(let tt=0;tt<D.locationSize;tt++)_(D.location+tt);n.bindBuffer(n.ARRAY_BUFFER,Le);for(let tt=0;tt<D.locationSize;tt++)w(D.location+tt,ee/D.locationSize,ie,W,et*pe,(at+ee/D.locationSize*tt)*pe,be)}else{if(G.isInstancedBufferAttribute){for(let _e=0;_e<D.locationSize;_e++)g(D.location+_e,G.meshPerAttribute);C.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=G.meshPerAttribute*G.count)}else for(let _e=0;_e<D.locationSize;_e++)_(D.location+_e);n.bindBuffer(n.ARRAY_BUFFER,Le);for(let _e=0;_e<D.locationSize;_e++)w(D.location+_e,ee/D.locationSize,ie,W,ee*pe,ee/D.locationSize*_e*pe,be)}}else if(Q!==void 0){const W=Q[te];if(W!==void 0)switch(W.length){case 2:n.vertexAttrib2fv(D.location,W);break;case 3:n.vertexAttrib3fv(D.location,W);break;case 4:n.vertexAttrib4fv(D.location,W);break;default:n.vertexAttrib1fv(D.location,W)}}}}S()}function A(){L();for(const C in i){const U=i[C];for(const j in U){const X=U[j];for(const J in X)h(X[J].object),delete X[J];delete U[j]}delete i[C]}}function P(C){if(i[C.id]===void 0)return;const U=i[C.id];for(const j in U){const X=U[j];for(const J in X)h(X[J].object),delete X[J];delete U[j]}delete i[C.id]}function I(C){for(const U in i){const j=i[U];if(j[C.id]===void 0)continue;const X=j[C.id];for(const J in X)h(X[J].object),delete X[J];delete j[C.id]}}function L(){R(),o=!0,s!==r&&(s=r,c(s.object))}function R(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:L,resetDefaultState:R,dispose:A,releaseStatesOfGeometry:P,releaseStatesOfProgram:I,initAttributes:x,enableAttribute:_,disableUnusedAttributes:S}}function O7(n,e,t){let i;function r(c){i=c}function s(c,h){n.drawArrays(i,c,h),t.update(h,i,1)}function o(c,h,f){f!==0&&(n.drawArraysInstanced(i,c,h,f),t.update(h,i,f))}function a(c,h,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,h,0,f);let m=0;for(let v=0;v<f;v++)m+=h[v];t.update(m,i,1)}function l(c,h,f,p){if(f===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<c.length;v++)o(c[v],h[v],p[v]);else{m.multiDrawArraysInstancedWEBGL(i,c,0,h,0,p,0,f);let v=0;for(let x=0;x<f;x++)v+=h[x]*p[x];t.update(v,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function F7(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const I=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(I){return!(I!==Si&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(I){const L=I===sh&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(I!==ps&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&I!==$i&&!L)}function l(I){if(I==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const h=l(c);h!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",h,"instead."),c=h);const f=t.logarithmicDepthBuffer===!0,p=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),S=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),w=n.getParameter(n.MAX_VARYING_VECTORS),b=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),A=v>0,P=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:f,reverseDepthBuffer:p,maxTextures:m,maxVertexTextures:v,maxTextureSize:x,maxCubemapSize:_,maxAttributes:g,maxVertexUniforms:S,maxVaryings:w,maxFragmentUniforms:b,vertexTextures:A,maxSamples:P}}function B7(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new ia,a=new vt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||i!==0||r;return r=p,i=f.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){t=h(f,p,0)},this.setState=function(f,p,m){const v=f.clippingPlanes,x=f.clipIntersection,_=f.clipShadows,g=n.get(f);if(!r||v===null||v.length===0||s&&!_)s?h(null):c();else{const S=s?0:i,w=S*4;let b=g.clippingState||null;l.value=b,b=h(v,p,w,m);for(let A=0;A!==w;++A)b[A]=t[A];g.clippingState=b,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(f,p,m,v){const x=f!==null?f.length:0;let _=null;if(x!==0){if(_=l.value,v!==!0||_===null){const g=m+x*4,S=p.matrixWorldInverse;a.getNormalMatrix(S),(_===null||_.length<g)&&(_=new Float32Array(g));for(let w=0,b=m;w!==x;++w,b+=4)o.copy(f[w]).applyMatrix4(S,a),o.normal.toArray(_,b),_[b+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,_}}function z7(n){let e=new WeakMap;function t(o,a){return a===gf?o.mapping=No:a===vf&&(o.mapping=Ia),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===gf||a===vf)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new Ck(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Zf extends Yf{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const vu=4,ZP=[.125,.215,.35,.446,.526,.582],El=20,B_=new Zf,$P=new Be;let z_=null,V_=0,H_=0,j_=!1;const Ml=(1+Math.sqrt(5))/2,zc=1/Ml,QP=[new z(-Ml,zc,0),new z(Ml,zc,0),new z(-zc,0,Ml),new z(zc,0,Ml),new z(0,Ml,-zc),new z(0,Ml,zc),new z(-1,1,-1),new z(1,1,-1),new z(-1,1,1),new z(1,1,1)];class JS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){z_=this._renderer.getRenderTarget(),V_=this._renderer.getActiveCubeFace(),H_=this._renderer.getActiveMipmapLevel(),j_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=t2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=e2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(z_,V_,H_),this._renderer.xr.enabled=j_,e.scissorTest=!1,jm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===No||e.mapping===Ia?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),z_=this._renderer.getRenderTarget(),V_=this._renderer.getActiveCubeFace(),H_=this._renderer.getActiveMipmapLevel(),j_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Hn,minFilter:Hn,generateMipmaps:!1,type:sh,format:Si,colorSpace:ac,depthBuffer:!1},r=JP(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=JP(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=V7(s)),this._blurMaterial=H7(s,e,t)}return r}_compileMaterial(e){const t=new Un(this._lodPlanes[0],e);this._renderer.compile(t,B_)}_sceneToCubeUV(e,t,i,r){const a=new Qn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,f=h.autoClear,p=h.toneMapping;h.getClearColor($P),h.toneMapping=js,h.autoClear=!1;const m=new Ha({name:"PMREM.Background",side:ki,depthWrite:!1,depthTest:!1}),v=new Un(new lc,m);let x=!1;const _=e.background;_?_.isColor&&(m.color.copy(_),e.background=null,x=!0):(m.color.copy($P),x=!0);for(let g=0;g<6;g++){const S=g%3;S===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):S===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const w=this._cubeSize;jm(r,S*w,g>2?w:0,w,w),h.setRenderTarget(r),x&&h.render(v,a),h.render(e,a)}v.geometry.dispose(),v.material.dispose(),h.toneMapping=p,h.autoClear=f,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===No||e.mapping===Ia;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=t2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=e2());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Un(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;jm(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,B_)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=QP[(r-s-1)%QP.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,f=new Un(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*El-1),x=s/v,_=isFinite(s)?1+Math.floor(h*x):El;_>El&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${El}`);const g=[];let S=0;for(let I=0;I<El;++I){const L=I/x,R=Math.exp(-L*L/2);g.push(R),I===0?S+=R:I<_&&(S+=2*R)}for(let I=0;I<g.length;I++)g[I]=g[I]/S;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:w}=this;p.dTheta.value=v,p.mipInt.value=w-i;const b=this._sizeLods[r],A=3*b*(r>w-vu?r-w+vu:0),P=4*(this._cubeSize-b);jm(t,A,P,3*b,2*b),l.setRenderTarget(t),l.render(f,B_)}}function V7(n){const e=[],t=[],i=[];let r=n;const s=n-vu+1+ZP.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-vu?l=ZP[o-n+vu-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),h=-c,f=1+c,p=[h,h,f,h,f,f,h,h,f,f,h,f],m=6,v=6,x=3,_=2,g=1,S=new Float32Array(x*v*m),w=new Float32Array(_*v*m),b=new Float32Array(g*v*m);for(let P=0;P<m;P++){const I=P%3*2/3-1,L=P>2?0:-1,R=[I,L,0,I+2/3,L,0,I+2/3,L+1,0,I,L,0,I+2/3,L+1,0,I,L+1,0];S.set(R,x*v*P),w.set(p,_*v*P);const C=[P,P,P,P,P,P];b.set(C,g*v*P)}const A=new St;A.setAttribute("position",new Yt(S,x)),A.setAttribute("uv",new Yt(w,_)),A.setAttribute("faceIndex",new Yt(b,g)),e.push(A),r>vu&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function JP(n,e,t){const i=new ms(n,e,t);return i.texture.mapping=rh,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function jm(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function H7(n,e,t){const i=new Float32Array(El),r=new z(0,1,0);return new gs({name:"SphericalGaussianBlur",defines:{n:El,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:EE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:So,depthTest:!1,depthWrite:!1})}function e2(){return new gs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:EE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:So,depthTest:!1,depthWrite:!1})}function t2(){return new gs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:EE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:So,depthTest:!1,depthWrite:!1})}function EE(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function j7(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===gf||l===vf,h=l===No||l===Ia;if(c||h){let f=e.get(a);const p=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new JS(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const m=a.image;return c&&m&&m.height>0||h&&m&&r(m)?(t===null&&(t=new JS(n)),f=c?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function r(a){let l=0;const c=6;for(let h=0;h<c;h++)a[h]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function G7(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&ld("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function W7(n,e,t,i){const r={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const x=p.morphAttributes[v];for(let _=0,g=x.length;_<g;_++)e.remove(x[_])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(f,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(f){const p=f.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=f.morphAttributes;for(const v in m){const x=m[v];for(let _=0,g=x.length;_<g;_++)e.update(x[_],n.ARRAY_BUFFER)}}function c(f){const p=[],m=f.index,v=f.attributes.position;let x=0;if(m!==null){const S=m.array;x=m.version;for(let w=0,b=S.length;w<b;w+=3){const A=S[w+0],P=S[w+1],I=S[w+2];p.push(A,P,P,I,I,A)}}else if(v!==void 0){const S=v.array;x=v.version;for(let w=0,b=S.length/3-1;w<b;w+=3){const A=w+0,P=w+1,I=w+2;p.push(A,P,P,I,I,A)}}else return;const _=new(_k(p)?ME:wE)(p,1);_.version=x;const g=s.get(f);g&&e.remove(g),s.set(f,_)}function h(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:h}}function X7(n,e,t){let i;function r(p){i=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){n.drawElements(i,m,s,p*o),t.update(m,i,1)}function c(p,m,v){v!==0&&(n.drawElementsInstanced(i,m,s,p*o,v),t.update(m,i,v))}function h(p,m,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,m,0,s,p,0,v);let _=0;for(let g=0;g<v;g++)_+=m[g];t.update(_,i,1)}function f(p,m,v,x){if(v===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let g=0;g<p.length;g++)c(p[g]/o,m[g],x[g]);else{_.multiDrawElementsInstancedWEBGL(i,m,0,s,p,0,x,0,v);let g=0;for(let S=0;S<v;S++)g+=m[S]*x[S];t.update(g,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=h,this.renderMultiDrawInstances=f}function Y7(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function q7(n,e,t){const i=new WeakMap,r=new kt;function s(o,a,l){const c=o.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=h!==void 0?h.length:0;let p=i.get(a);if(p===void 0||p.count!==f){let C=function(){L.dispose(),i.delete(a),a.removeEventListener("dispose",C)};var m=C;p!==void 0&&p.texture.dispose();const v=a.morphAttributes.position!==void 0,x=a.morphAttributes.normal!==void 0,_=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],S=a.morphAttributes.normal||[],w=a.morphAttributes.color||[];let b=0;v===!0&&(b=1),x===!0&&(b=2),_===!0&&(b=3);let A=a.attributes.position.count*b,P=1;A>e.maxTextureSize&&(P=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const I=new Float32Array(A*P*4*f),L=new Kv(I,A,P,f);L.type=$i,L.needsUpdate=!0;const R=b*4;for(let U=0;U<f;U++){const j=g[U],X=S[U],J=w[U],se=A*P*4*U;for(let Q=0;Q<j.count;Q++){const te=Q*R;v===!0&&(r.fromBufferAttribute(j,Q),I[se+te+0]=r.x,I[se+te+1]=r.y,I[se+te+2]=r.z,I[se+te+3]=0),x===!0&&(r.fromBufferAttribute(X,Q),I[se+te+4]=r.x,I[se+te+5]=r.y,I[se+te+6]=r.z,I[se+te+7]=0),_===!0&&(r.fromBufferAttribute(J,Q),I[se+te+8]=r.x,I[se+te+9]=r.y,I[se+te+10]=r.z,I[se+te+11]=J.itemSize===4?r.w:1)}}p={count:f,texture:L,size:new ve(A,P)},i.set(a,p),a.addEventListener("dispose",C)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let v=0;for(let _=0;_<c.length;_++)v+=c[_];const x=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(n,"morphTargetBaseInfluence",x),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:s}}function K7(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,h=l.geometry,f=e.get(l,h);if(r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==c&&(p.update(),r.set(p,c))}return f}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class bE extends En{constructor(e,t,i,r,s,o,a,l,c,h=Hl){if(h!==Hl&&h!==Jl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===Hl&&(i=Io),i===void 0&&h===Jl&&(i=Ql),super(null,r,s,o,a,l,h,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:oi,this.minFilter=l!==void 0?l:oi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const Rk=new En,n2=new bE(1,1),Nk=new Kv,Ik=new SE,Lk=new qf,i2=[],r2=[],s2=new Float32Array(16),o2=new Float32Array(9),a2=new Float32Array(4);function lh(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=i2[r];if(s===void 0&&(s=new Float32Array(r),i2[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function jn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Gn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Zv(n,e){let t=r2[e];t===void 0&&(t=new Int32Array(e),r2[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Z7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function $7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(jn(t,e))return;n.uniform2fv(this.addr,e),Gn(t,e)}}function Q7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(jn(t,e))return;n.uniform3fv(this.addr,e),Gn(t,e)}}function J7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(jn(t,e))return;n.uniform4fv(this.addr,e),Gn(t,e)}}function eX(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(jn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Gn(t,e)}else{if(jn(t,i))return;a2.set(i),n.uniformMatrix2fv(this.addr,!1,a2),Gn(t,i)}}function tX(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(jn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Gn(t,e)}else{if(jn(t,i))return;o2.set(i),n.uniformMatrix3fv(this.addr,!1,o2),Gn(t,i)}}function nX(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(jn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Gn(t,e)}else{if(jn(t,i))return;s2.set(i),n.uniformMatrix4fv(this.addr,!1,s2),Gn(t,i)}}function iX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function rX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(jn(t,e))return;n.uniform2iv(this.addr,e),Gn(t,e)}}function sX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(jn(t,e))return;n.uniform3iv(this.addr,e),Gn(t,e)}}function oX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(jn(t,e))return;n.uniform4iv(this.addr,e),Gn(t,e)}}function aX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function lX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(jn(t,e))return;n.uniform2uiv(this.addr,e),Gn(t,e)}}function cX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(jn(t,e))return;n.uniform3uiv(this.addr,e),Gn(t,e)}}function uX(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(jn(t,e))return;n.uniform4uiv(this.addr,e),Gn(t,e)}}function hX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(n2.compareFunction=xE,s=n2):s=Rk,t.setTexture2D(e||s,r)}function dX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Ik,r)}function fX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||Lk,r)}function pX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||Nk,r)}function mX(n){switch(n){case 5126:return Z7;case 35664:return $7;case 35665:return Q7;case 35666:return J7;case 35674:return eX;case 35675:return tX;case 35676:return nX;case 5124:case 35670:return iX;case 35667:case 35671:return rX;case 35668:case 35672:return sX;case 35669:case 35673:return oX;case 5125:return aX;case 36294:return lX;case 36295:return cX;case 36296:return uX;case 35678:case 36198:case 36298:case 36306:case 35682:return hX;case 35679:case 36299:case 36307:return dX;case 35680:case 36300:case 36308:case 36293:return fX;case 36289:case 36303:case 36311:case 36292:return pX}}function gX(n,e){n.uniform1fv(this.addr,e)}function vX(n,e){const t=lh(e,this.size,2);n.uniform2fv(this.addr,t)}function yX(n,e){const t=lh(e,this.size,3);n.uniform3fv(this.addr,t)}function xX(n,e){const t=lh(e,this.size,4);n.uniform4fv(this.addr,t)}function _X(n,e){const t=lh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function SX(n,e){const t=lh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function wX(n,e){const t=lh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function MX(n,e){n.uniform1iv(this.addr,e)}function EX(n,e){n.uniform2iv(this.addr,e)}function bX(n,e){n.uniform3iv(this.addr,e)}function TX(n,e){n.uniform4iv(this.addr,e)}function AX(n,e){n.uniform1uiv(this.addr,e)}function CX(n,e){n.uniform2uiv(this.addr,e)}function PX(n,e){n.uniform3uiv(this.addr,e)}function RX(n,e){n.uniform4uiv(this.addr,e)}function NX(n,e,t){const i=this.cache,r=e.length,s=Zv(t,r);jn(i,s)||(n.uniform1iv(this.addr,s),Gn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||Rk,s[o])}function IX(n,e,t){const i=this.cache,r=e.length,s=Zv(t,r);jn(i,s)||(n.uniform1iv(this.addr,s),Gn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||Ik,s[o])}function LX(n,e,t){const i=this.cache,r=e.length,s=Zv(t,r);jn(i,s)||(n.uniform1iv(this.addr,s),Gn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||Lk,s[o])}function DX(n,e,t){const i=this.cache,r=e.length,s=Zv(t,r);jn(i,s)||(n.uniform1iv(this.addr,s),Gn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||Nk,s[o])}function kX(n){switch(n){case 5126:return gX;case 35664:return vX;case 35665:return yX;case 35666:return xX;case 35674:return _X;case 35675:return SX;case 35676:return wX;case 5124:case 35670:return MX;case 35667:case 35671:return EX;case 35668:case 35672:return bX;case 35669:case 35673:return TX;case 5125:return AX;case 36294:return CX;case 36295:return PX;case 36296:return RX;case 35678:case 36198:case 36298:case 36306:case 35682:return NX;case 35679:case 36299:case 36307:return IX;case 35680:case 36300:case 36308:case 36293:return LX;case 36289:case 36303:case 36311:case 36292:return DX}}class UX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=mX(t.type)}}class OX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=kX(t.type)}}class FX{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const G_=/(\w+)(\])?(\[|\.)?/g;function l2(n,e){n.seq.push(e),n.map[e.id]=e}function BX(n,e,t){const i=n.name,r=i.length;for(G_.lastIndex=0;;){const s=G_.exec(i),o=G_.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){l2(t,c===void 0?new UX(a,n,e):new OX(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new FX(a),l2(t,f)),t=f}}}class Og{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);BX(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function c2(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const zX=37297;let VX=0;function HX(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}const u2=new vt;function jX(n){It._getMatrix(u2,It.workingColorSpace,n);const e=`mat3( ${u2.elements.map(t=>t.toFixed(4))} )`;switch(It.getTransfer(n)){case Xf:return[e,"LinearTransferOETF"];case Ht:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function h2(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+HX(n.getShaderSource(e),o)}else return r}function GX(n,e){const t=jX(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function WX(n,e){let t;switch(e){case JD:t="Linear";break;case ek:t="Reinhard";break;case tk:t="Cineon";break;case aE:t="ACESFilmic";break;case ik:t="AgX";break;case rk:t="Neutral";break;case nk:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Gm=new z;function XX(){It.getLuminanceCoefficients(Gm);const n=Gm.x.toFixed(4),e=Gm.y.toFixed(4),t=Gm.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function YX(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ud).join(`
`)}function qX(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function KX(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function ud(n){return n!==""}function d2(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function f2(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ZX=/^[ \t]*#include +<([\w\d./]+)>/gm;function ew(n){return n.replace(ZX,QX)}const $X=new Map;function QX(n,e){let t=_t[e];if(t===void 0){const i=$X.get(e);if(i!==void 0)t=_t[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return ew(t)}const JX=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function p2(n){return n.replace(JX,eY)}function eY(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function m2(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function tY(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===zv?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Ad?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===as&&(e="SHADOWMAP_TYPE_VSM"),e}function nY(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case No:case Ia:e="ENVMAP_TYPE_CUBE";break;case rh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function iY(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Ia:e="ENVMAP_MODE_REFRACTION";break}return e}function rY(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Gf:e="ENVMAP_BLENDING_MULTIPLY";break;case $D:e="ENVMAP_BLENDING_MIX";break;case QD:e="ENVMAP_BLENDING_ADD";break}return e}function sY(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function oY(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=tY(t),c=nY(t),h=iY(t),f=rY(t),p=sY(t),m=YX(t),v=qX(s),x=r.createProgram();let _,g,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(ud).join(`
`),_.length>0&&(_+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(ud).join(`
`),g.length>0&&(g+=`
`)):(_=[m2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ud).join(`
`),g=[m2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==js?"#define TONE_MAPPING":"",t.toneMapping!==js?_t.tonemapping_pars_fragment:"",t.toneMapping!==js?WX("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",_t.colorspace_pars_fragment,GX("linearToOutputTexel",t.outputColorSpace),XX(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(ud).join(`
`)),o=ew(o),o=d2(o,t),o=f2(o,t),a=ew(a),a=d2(a,t),a=f2(a,t),o=p2(o),a=p2(a),t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,_=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,g=["#define varying in",t.glslVersion===QS?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===QS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const w=S+_+o,b=S+g+a,A=c2(r,r.VERTEX_SHADER,w),P=c2(r,r.FRAGMENT_SHADER,b);r.attachShader(x,A),r.attachShader(x,P),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);function I(U){if(n.debug.checkShaderErrors){const j=r.getProgramInfoLog(x).trim(),X=r.getShaderInfoLog(A).trim(),J=r.getShaderInfoLog(P).trim();let se=!0,Q=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(se=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,x,A,P);else{const te=h2(r,A,"vertex"),D=h2(r,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Material Name: `+U.name+`
Material Type: `+U.type+`

Program Info Log: `+j+`
`+te+`
`+D)}else j!==""?console.warn("THREE.WebGLProgram: Program Info Log:",j):(X===""||J==="")&&(Q=!1);Q&&(U.diagnostics={runnable:se,programLog:j,vertexShader:{log:X,prefix:_},fragmentShader:{log:J,prefix:g}})}r.deleteShader(A),r.deleteShader(P),L=new Og(r,x),R=KX(r,x)}let L;this.getUniforms=function(){return L===void 0&&I(this),L};let R;this.getAttributes=function(){return R===void 0&&I(this),R};let C=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return C===!1&&(C=r.getProgramParameter(x,zX)),C},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=VX++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=A,this.fragmentShader=P,this}let aY=0;class lY{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new cY(e),t.set(e,i)),i}}class cY{constructor(e){this.id=aY++,this.code=e,this.usedTimes=0}}function uY(n,e,t,i,r,s,o){const a=new Gl,l=new lY,c=new Set,h=[],f=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(R){return c.add(R),R===0?"uv":`uv${R}`}function _(R,C,U,j,X){const J=j.fog,se=X.geometry,Q=R.isMeshStandardMaterial?j.environment:null,te=(R.isMeshStandardMaterial?t:e).get(R.envMap||Q),D=te&&te.mapping===rh?te.image.height:null,G=v[R.type];R.precision!==null&&(m=r.getMaxPrecision(R.precision),m!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",m,"instead."));const W=se.morphAttributes.position||se.morphAttributes.normal||se.morphAttributes.color,ee=W!==void 0?W.length:0;let de=0;se.morphAttributes.position!==void 0&&(de=1),se.morphAttributes.normal!==void 0&&(de=2),se.morphAttributes.color!==void 0&&(de=3);let Le,ie,pe,be;if(G){const Ft=us[G];Le=Ft.vertexShader,ie=Ft.fragmentShader}else Le=R.vertexShader,ie=R.fragmentShader,l.update(R),pe=l.getVertexShaderID(R),be=l.getFragmentShaderID(R);const _e=n.getRenderTarget(),et=n.state.buffers.depth.getReversed(),at=X.isInstancedMesh===!0,tt=X.isBatchedMesh===!0,ht=!!R.map,me=!!R.matcap,xe=!!te,H=!!R.aoMap,$e=!!R.lightMap,Se=!!R.bumpMap,Ve=!!R.normalMap,Ae=!!R.displacementMap,rt=!!R.emissiveMap,Ue=!!R.metalnessMap,B=!!R.roughnessMap,k=R.anisotropy>0,ne=R.clearcoat>0,he=R.dispersion>0,ye=R.iridescence>0,fe=R.sheen>0,Ke=R.transmission>0,Pe=k&&!!R.anisotropyMap,ze=ne&&!!R.clearcoatMap,Tt=ne&&!!R.clearcoatNormalMap,Me=ne&&!!R.clearcoatRoughnessMap,je=ye&&!!R.iridescenceMap,st=ye&&!!R.iridescenceThicknessMap,ut=fe&&!!R.sheenColorMap,Ge=fe&&!!R.sheenRoughnessMap,Rt=!!R.specularMap,ft=!!R.specularColorMap,Wt=!!R.specularIntensityMap,q=Ke&&!!R.transmissionMap,Re=Ke&&!!R.thicknessMap,ue=!!R.gradientMap,ge=!!R.alphaMap,Fe=R.alphaTest>0,De=!!R.alphaHash,dt=!!R.extensions;let nn=js;R.toneMapped&&(_e===null||_e.isXRRenderTarget===!0)&&(nn=n.toneMapping);const Fn={shaderID:G,shaderType:R.type,shaderName:R.name,vertexShader:Le,fragmentShader:ie,defines:R.defines,customVertexShaderID:pe,customFragmentShaderID:be,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:m,batching:tt,batchingColor:tt&&X._colorsTexture!==null,instancing:at,instancingColor:at&&X.instanceColor!==null,instancingMorph:at&&X.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:_e===null?n.outputColorSpace:_e.isXRRenderTarget===!0?_e.texture.colorSpace:ac,alphaToCoverage:!!R.alphaToCoverage,map:ht,matcap:me,envMap:xe,envMapMode:xe&&te.mapping,envMapCubeUVHeight:D,aoMap:H,lightMap:$e,bumpMap:Se,normalMap:Ve,displacementMap:p&&Ae,emissiveMap:rt,normalMapObjectSpace:Ve&&R.normalMapType===hk,normalMapTangentSpace:Ve&&R.normalMapType===Va,metalnessMap:Ue,roughnessMap:B,anisotropy:k,anisotropyMap:Pe,clearcoat:ne,clearcoatMap:ze,clearcoatNormalMap:Tt,clearcoatRoughnessMap:Me,dispersion:he,iridescence:ye,iridescenceMap:je,iridescenceThicknessMap:st,sheen:fe,sheenColorMap:ut,sheenRoughnessMap:Ge,specularMap:Rt,specularColorMap:ft,specularIntensityMap:Wt,transmission:Ke,transmissionMap:q,thicknessMap:Re,gradientMap:ue,opaque:R.transparent===!1&&R.blending===Vl&&R.alphaToCoverage===!1,alphaMap:ge,alphaTest:Fe,alphaHash:De,combine:R.combine,mapUv:ht&&x(R.map.channel),aoMapUv:H&&x(R.aoMap.channel),lightMapUv:$e&&x(R.lightMap.channel),bumpMapUv:Se&&x(R.bumpMap.channel),normalMapUv:Ve&&x(R.normalMap.channel),displacementMapUv:Ae&&x(R.displacementMap.channel),emissiveMapUv:rt&&x(R.emissiveMap.channel),metalnessMapUv:Ue&&x(R.metalnessMap.channel),roughnessMapUv:B&&x(R.roughnessMap.channel),anisotropyMapUv:Pe&&x(R.anisotropyMap.channel),clearcoatMapUv:ze&&x(R.clearcoatMap.channel),clearcoatNormalMapUv:Tt&&x(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Me&&x(R.clearcoatRoughnessMap.channel),iridescenceMapUv:je&&x(R.iridescenceMap.channel),iridescenceThicknessMapUv:st&&x(R.iridescenceThicknessMap.channel),sheenColorMapUv:ut&&x(R.sheenColorMap.channel),sheenRoughnessMapUv:Ge&&x(R.sheenRoughnessMap.channel),specularMapUv:Rt&&x(R.specularMap.channel),specularColorMapUv:ft&&x(R.specularColorMap.channel),specularIntensityMapUv:Wt&&x(R.specularIntensityMap.channel),transmissionMapUv:q&&x(R.transmissionMap.channel),thicknessMapUv:Re&&x(R.thicknessMap.channel),alphaMapUv:ge&&x(R.alphaMap.channel),vertexTangents:!!se.attributes.tangent&&(Ve||k),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!se.attributes.color&&se.attributes.color.itemSize===4,pointsUvs:X.isPoints===!0&&!!se.attributes.uv&&(ht||ge),fog:!!J,useFog:R.fog===!0,fogExp2:!!J&&J.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:et,skinning:X.isSkinnedMesh===!0,morphTargets:se.morphAttributes.position!==void 0,morphNormals:se.morphAttributes.normal!==void 0,morphColors:se.morphAttributes.color!==void 0,morphTargetsCount:ee,morphTextureStride:de,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numLightProbes:C.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&U.length>0,shadowMapType:n.shadowMap.type,toneMapping:nn,decodeVideoTexture:ht&&R.map.isVideoTexture===!0&&It.getTransfer(R.map.colorSpace)===Ht,decodeVideoTextureEmissive:rt&&R.emissiveMap.isVideoTexture===!0&&It.getTransfer(R.emissiveMap.colorSpace)===Ht,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===ks,flipSided:R.side===ki,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionClipCullDistance:dt&&R.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(dt&&R.extensions.multiDraw===!0||tt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()};return Fn.vertexUv1s=c.has(1),Fn.vertexUv2s=c.has(2),Fn.vertexUv3s=c.has(3),c.clear(),Fn}function g(R){const C=[];if(R.shaderID?C.push(R.shaderID):(C.push(R.customVertexShaderID),C.push(R.customFragmentShaderID)),R.defines!==void 0)for(const U in R.defines)C.push(U),C.push(R.defines[U]);return R.isRawShaderMaterial===!1&&(S(C,R),w(C,R),C.push(n.outputColorSpace)),C.push(R.customProgramCacheKey),C.join()}function S(R,C){R.push(C.precision),R.push(C.outputColorSpace),R.push(C.envMapMode),R.push(C.envMapCubeUVHeight),R.push(C.mapUv),R.push(C.alphaMapUv),R.push(C.lightMapUv),R.push(C.aoMapUv),R.push(C.bumpMapUv),R.push(C.normalMapUv),R.push(C.displacementMapUv),R.push(C.emissiveMapUv),R.push(C.metalnessMapUv),R.push(C.roughnessMapUv),R.push(C.anisotropyMapUv),R.push(C.clearcoatMapUv),R.push(C.clearcoatNormalMapUv),R.push(C.clearcoatRoughnessMapUv),R.push(C.iridescenceMapUv),R.push(C.iridescenceThicknessMapUv),R.push(C.sheenColorMapUv),R.push(C.sheenRoughnessMapUv),R.push(C.specularMapUv),R.push(C.specularColorMapUv),R.push(C.specularIntensityMapUv),R.push(C.transmissionMapUv),R.push(C.thicknessMapUv),R.push(C.combine),R.push(C.fogExp2),R.push(C.sizeAttenuation),R.push(C.morphTargetsCount),R.push(C.morphAttributeCount),R.push(C.numDirLights),R.push(C.numPointLights),R.push(C.numSpotLights),R.push(C.numSpotLightMaps),R.push(C.numHemiLights),R.push(C.numRectAreaLights),R.push(C.numDirLightShadows),R.push(C.numPointLightShadows),R.push(C.numSpotLightShadows),R.push(C.numSpotLightShadowsWithMaps),R.push(C.numLightProbes),R.push(C.shadowMapType),R.push(C.toneMapping),R.push(C.numClippingPlanes),R.push(C.numClipIntersection),R.push(C.depthPacking)}function w(R,C){a.disableAll(),C.supportsVertexTextures&&a.enable(0),C.instancing&&a.enable(1),C.instancingColor&&a.enable(2),C.instancingMorph&&a.enable(3),C.matcap&&a.enable(4),C.envMap&&a.enable(5),C.normalMapObjectSpace&&a.enable(6),C.normalMapTangentSpace&&a.enable(7),C.clearcoat&&a.enable(8),C.iridescence&&a.enable(9),C.alphaTest&&a.enable(10),C.vertexColors&&a.enable(11),C.vertexAlphas&&a.enable(12),C.vertexUv1s&&a.enable(13),C.vertexUv2s&&a.enable(14),C.vertexUv3s&&a.enable(15),C.vertexTangents&&a.enable(16),C.anisotropy&&a.enable(17),C.alphaHash&&a.enable(18),C.batching&&a.enable(19),C.dispersion&&a.enable(20),C.batchingColor&&a.enable(21),R.push(a.mask),a.disableAll(),C.fog&&a.enable(0),C.useFog&&a.enable(1),C.flatShading&&a.enable(2),C.logarithmicDepthBuffer&&a.enable(3),C.reverseDepthBuffer&&a.enable(4),C.skinning&&a.enable(5),C.morphTargets&&a.enable(6),C.morphNormals&&a.enable(7),C.morphColors&&a.enable(8),C.premultipliedAlpha&&a.enable(9),C.shadowMapEnabled&&a.enable(10),C.doubleSided&&a.enable(11),C.flipSided&&a.enable(12),C.useDepthPacking&&a.enable(13),C.dithering&&a.enable(14),C.transmission&&a.enable(15),C.sheen&&a.enable(16),C.opaque&&a.enable(17),C.pointsUvs&&a.enable(18),C.decodeVideoTexture&&a.enable(19),C.decodeVideoTextureEmissive&&a.enable(20),C.alphaToCoverage&&a.enable(21),R.push(a.mask)}function b(R){const C=v[R.type];let U;if(C){const j=us[C];U=Tk.clone(j.uniforms)}else U=R.uniforms;return U}function A(R,C){let U;for(let j=0,X=h.length;j<X;j++){const J=h[j];if(J.cacheKey===C){U=J,++U.usedTimes;break}}return U===void 0&&(U=new oY(n,C,R,s),h.push(U)),U}function P(R){if(--R.usedTimes===0){const C=h.indexOf(R);h[C]=h[h.length-1],h.pop(),R.destroy()}}function I(R){l.remove(R)}function L(){l.dispose()}return{getParameters:_,getProgramCacheKey:g,getUniforms:b,acquireProgram:A,releaseProgram:P,releaseShaderCache:I,programs:h,dispose:L}}function hY(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function dY(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function g2(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function v2(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(f,p,m,v,x,_){let g=n[e];return g===void 0?(g={id:f.id,object:f,geometry:p,material:m,groupOrder:v,renderOrder:f.renderOrder,z:x,group:_},n[e]=g):(g.id=f.id,g.object=f,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=f.renderOrder,g.z=x,g.group=_),e++,g}function a(f,p,m,v,x,_){const g=o(f,p,m,v,x,_);m.transmission>0?i.push(g):m.transparent===!0?r.push(g):t.push(g)}function l(f,p,m,v,x,_){const g=o(f,p,m,v,x,_);m.transmission>0?i.unshift(g):m.transparent===!0?r.unshift(g):t.unshift(g)}function c(f,p){t.length>1&&t.sort(f||dY),i.length>1&&i.sort(p||g2),r.length>1&&r.sort(p||g2)}function h(){for(let f=e,p=n.length;f<p;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:c}}function fY(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new v2,n.set(i,[o])):r>=s.length?(o=new v2,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function pY(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new z,color:new Be};break;case"SpotLight":t={position:new z,direction:new z,color:new Be,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new z,color:new Be,distance:0,decay:0};break;case"HemisphereLight":t={direction:new z,skyColor:new Be,groundColor:new Be};break;case"RectAreaLight":t={color:new Be,position:new z,halfWidth:new z,halfHeight:new z};break}return n[e.id]=t,t}}}function mY(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let gY=0;function vY(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function yY(n){const e=new pY,t=mY(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new z);const r=new z,s=new ct,o=new ct;function a(c){let h=0,f=0,p=0;for(let R=0;R<9;R++)i.probe[R].set(0,0,0);let m=0,v=0,x=0,_=0,g=0,S=0,w=0,b=0,A=0,P=0,I=0;c.sort(vY);for(let R=0,C=c.length;R<C;R++){const U=c[R],j=U.color,X=U.intensity,J=U.distance,se=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)h+=j.r*X,f+=j.g*X,p+=j.b*X;else if(U.isLightProbe){for(let Q=0;Q<9;Q++)i.probe[Q].addScaledVector(U.sh.coefficients[Q],X);I++}else if(U.isDirectionalLight){const Q=e.get(U);if(Q.color.copy(U.color).multiplyScalar(U.intensity),U.castShadow){const te=U.shadow,D=t.get(U);D.shadowIntensity=te.intensity,D.shadowBias=te.bias,D.shadowNormalBias=te.normalBias,D.shadowRadius=te.radius,D.shadowMapSize=te.mapSize,i.directionalShadow[m]=D,i.directionalShadowMap[m]=se,i.directionalShadowMatrix[m]=U.shadow.matrix,S++}i.directional[m]=Q,m++}else if(U.isSpotLight){const Q=e.get(U);Q.position.setFromMatrixPosition(U.matrixWorld),Q.color.copy(j).multiplyScalar(X),Q.distance=J,Q.coneCos=Math.cos(U.angle),Q.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),Q.decay=U.decay,i.spot[x]=Q;const te=U.shadow;if(U.map&&(i.spotLightMap[A]=U.map,A++,te.updateMatrices(U),U.castShadow&&P++),i.spotLightMatrix[x]=te.matrix,U.castShadow){const D=t.get(U);D.shadowIntensity=te.intensity,D.shadowBias=te.bias,D.shadowNormalBias=te.normalBias,D.shadowRadius=te.radius,D.shadowMapSize=te.mapSize,i.spotShadow[x]=D,i.spotShadowMap[x]=se,b++}x++}else if(U.isRectAreaLight){const Q=e.get(U);Q.color.copy(j).multiplyScalar(X),Q.halfWidth.set(U.width*.5,0,0),Q.halfHeight.set(0,U.height*.5,0),i.rectArea[_]=Q,_++}else if(U.isPointLight){const Q=e.get(U);if(Q.color.copy(U.color).multiplyScalar(U.intensity),Q.distance=U.distance,Q.decay=U.decay,U.castShadow){const te=U.shadow,D=t.get(U);D.shadowIntensity=te.intensity,D.shadowBias=te.bias,D.shadowNormalBias=te.normalBias,D.shadowRadius=te.radius,D.shadowMapSize=te.mapSize,D.shadowCameraNear=te.camera.near,D.shadowCameraFar=te.camera.far,i.pointShadow[v]=D,i.pointShadowMap[v]=se,i.pointShadowMatrix[v]=U.shadow.matrix,w++}i.point[v]=Q,v++}else if(U.isHemisphereLight){const Q=e.get(U);Q.skyColor.copy(U.color).multiplyScalar(X),Q.groundColor.copy(U.groundColor).multiplyScalar(X),i.hemi[g]=Q,g++}}_>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ce.LTC_FLOAT_1,i.rectAreaLTC2=Ce.LTC_FLOAT_2):(i.rectAreaLTC1=Ce.LTC_HALF_1,i.rectAreaLTC2=Ce.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=p;const L=i.hash;(L.directionalLength!==m||L.pointLength!==v||L.spotLength!==x||L.rectAreaLength!==_||L.hemiLength!==g||L.numDirectionalShadows!==S||L.numPointShadows!==w||L.numSpotShadows!==b||L.numSpotMaps!==A||L.numLightProbes!==I)&&(i.directional.length=m,i.spot.length=x,i.rectArea.length=_,i.point.length=v,i.hemi.length=g,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=b,i.spotShadowMap.length=b,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=b+A-P,i.spotLightMap.length=A,i.numSpotLightShadowsWithMaps=P,i.numLightProbes=I,L.directionalLength=m,L.pointLength=v,L.spotLength=x,L.rectAreaLength=_,L.hemiLength=g,L.numDirectionalShadows=S,L.numPointShadows=w,L.numSpotShadows=b,L.numSpotMaps=A,L.numLightProbes=I,i.version=gY++)}function l(c,h){let f=0,p=0,m=0,v=0,x=0;const _=h.matrixWorldInverse;for(let g=0,S=c.length;g<S;g++){const w=c[g];if(w.isDirectionalLight){const b=i.directional[f];b.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),b.direction.sub(r),b.direction.transformDirection(_),f++}else if(w.isSpotLight){const b=i.spot[m];b.position.setFromMatrixPosition(w.matrixWorld),b.position.applyMatrix4(_),b.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),b.direction.sub(r),b.direction.transformDirection(_),m++}else if(w.isRectAreaLight){const b=i.rectArea[v];b.position.setFromMatrixPosition(w.matrixWorld),b.position.applyMatrix4(_),o.identity(),s.copy(w.matrixWorld),s.premultiply(_),o.extractRotation(s),b.halfWidth.set(w.width*.5,0,0),b.halfHeight.set(0,w.height*.5,0),b.halfWidth.applyMatrix4(o),b.halfHeight.applyMatrix4(o),v++}else if(w.isPointLight){const b=i.point[p];b.position.setFromMatrixPosition(w.matrixWorld),b.position.applyMatrix4(_),p++}else if(w.isHemisphereLight){const b=i.hemi[x];b.direction.setFromMatrixPosition(w.matrixWorld),b.direction.transformDirection(_),x++}}}return{setup:a,setupView:l,state:i}}function y2(n){const e=new yY(n),t=[],i=[];function r(h){c.camera=h,t.length=0,i.length=0}function s(h){t.push(h)}function o(h){i.push(h)}function a(){e.setup(t)}function l(h){e.setupView(t,h)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function xY(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new y2(n),e.set(r,[a])):s>=o.length?(a=new y2(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}class TE extends bi{static get type(){return"MeshDepthMaterial"}constructor(e){super(),this.isMeshDepthMaterial=!0,this.depthPacking=ck,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class AE extends bi{static get type(){return"MeshDistanceMaterial"}constructor(e){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const _Y=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,SY=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function wY(n,e,t){let i=new Kf;const r=new ve,s=new ve,o=new kt,a=new TE({depthPacking:uk}),l=new AE,c={},h=t.maxTextureSize,f={[Ro]:ki,[ki]:Ro,[ks]:ks},p=new gs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ve},radius:{value:4}},vertexShader:_Y,fragmentShader:SY}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new St;v.setAttribute("position",new Yt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Un(v,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=zv;let g=this.type;this.render=function(P,I,L){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||P.length===0)return;const R=n.getRenderTarget(),C=n.getActiveCubeFace(),U=n.getActiveMipmapLevel(),j=n.state;j.setBlending(So),j.buffers.color.setClear(1,1,1,1),j.buffers.depth.setTest(!0),j.setScissorTest(!1);const X=g!==as&&this.type===as,J=g===as&&this.type!==as;for(let se=0,Q=P.length;se<Q;se++){const te=P[se],D=te.shadow;if(D===void 0){console.warn("THREE.WebGLShadowMap:",te,"has no shadow.");continue}if(D.autoUpdate===!1&&D.needsUpdate===!1)continue;r.copy(D.mapSize);const G=D.getFrameExtents();if(r.multiply(G),s.copy(D.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/G.x),r.x=s.x*G.x,D.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/G.y),r.y=s.y*G.y,D.mapSize.y=s.y)),D.map===null||X===!0||J===!0){const ee=this.type!==as?{minFilter:oi,magFilter:oi}:{};D.map!==null&&D.map.dispose(),D.map=new ms(r.x,r.y,ee),D.map.texture.name=te.name+".shadowMap",D.camera.updateProjectionMatrix()}n.setRenderTarget(D.map),n.clear();const W=D.getViewportCount();for(let ee=0;ee<W;ee++){const de=D.getViewport(ee);o.set(s.x*de.x,s.y*de.y,s.x*de.z,s.y*de.w),j.viewport(o),D.updateMatrices(te,ee),i=D.getFrustum(),b(I,L,D.camera,te,this.type)}D.isPointLightShadow!==!0&&this.type===as&&S(D,L),D.needsUpdate=!1}g=this.type,_.needsUpdate=!1,n.setRenderTarget(R,C,U)};function S(P,I){const L=e.update(x);p.defines.VSM_SAMPLES!==P.blurSamples&&(p.defines.VSM_SAMPLES=P.blurSamples,m.defines.VSM_SAMPLES=P.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new ms(r.x,r.y)),p.uniforms.shadow_pass.value=P.map.texture,p.uniforms.resolution.value=P.mapSize,p.uniforms.radius.value=P.radius,n.setRenderTarget(P.mapPass),n.clear(),n.renderBufferDirect(I,null,L,p,x,null),m.uniforms.shadow_pass.value=P.mapPass.texture,m.uniforms.resolution.value=P.mapSize,m.uniforms.radius.value=P.radius,n.setRenderTarget(P.map),n.clear(),n.renderBufferDirect(I,null,L,m,x,null)}function w(P,I,L,R){let C=null;const U=L.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(U!==void 0)C=U;else if(C=L.isPointLight===!0?l:a,n.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){const j=C.uuid,X=I.uuid;let J=c[j];J===void 0&&(J={},c[j]=J);let se=J[X];se===void 0&&(se=C.clone(),J[X]=se,I.addEventListener("dispose",A)),C=se}if(C.visible=I.visible,C.wireframe=I.wireframe,R===as?C.side=I.shadowSide!==null?I.shadowSide:I.side:C.side=I.shadowSide!==null?I.shadowSide:f[I.side],C.alphaMap=I.alphaMap,C.alphaTest=I.alphaTest,C.map=I.map,C.clipShadows=I.clipShadows,C.clippingPlanes=I.clippingPlanes,C.clipIntersection=I.clipIntersection,C.displacementMap=I.displacementMap,C.displacementScale=I.displacementScale,C.displacementBias=I.displacementBias,C.wireframeLinewidth=I.wireframeLinewidth,C.linewidth=I.linewidth,L.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const j=n.properties.get(C);j.light=L}return C}function b(P,I,L,R,C){if(P.visible===!1)return;if(P.layers.test(I.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&C===as)&&(!P.frustumCulled||i.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,P.matrixWorld);const X=e.update(P),J=P.material;if(Array.isArray(J)){const se=X.groups;for(let Q=0,te=se.length;Q<te;Q++){const D=se[Q],G=J[D.materialIndex];if(G&&G.visible){const W=w(P,G,R,C);P.onBeforeShadow(n,P,I,L,X,W,D),n.renderBufferDirect(L,null,X,W,P,D),P.onAfterShadow(n,P,I,L,X,W,D)}}}else if(J.visible){const se=w(P,J,R,C);P.onBeforeShadow(n,P,I,L,X,se,null),n.renderBufferDirect(L,null,X,se,P,null),P.onAfterShadow(n,P,I,L,X,se,null)}}const j=P.children;for(let X=0,J=j.length;X<J;X++)b(j[X],I,L,R,C)}function A(P){P.target.removeEventListener("dispose",A);for(const L in c){const R=c[L],C=P.target.uuid;C in R&&(R[C].dispose(),delete R[C])}}}const MY={[A0]:C0,[P0]:I0,[R0]:L0,[$l]:N0,[C0]:A0,[I0]:P0,[L0]:R0,[N0]:$l};function EY(n,e){function t(){let q=!1;const Re=new kt;let ue=null;const ge=new kt(0,0,0,0);return{setMask:function(Fe){ue!==Fe&&!q&&(n.colorMask(Fe,Fe,Fe,Fe),ue=Fe)},setLocked:function(Fe){q=Fe},setClear:function(Fe,De,dt,nn,Fn){Fn===!0&&(Fe*=nn,De*=nn,dt*=nn),Re.set(Fe,De,dt,nn),ge.equals(Re)===!1&&(n.clearColor(Fe,De,dt,nn),ge.copy(Re))},reset:function(){q=!1,ue=null,ge.set(-1,0,0,0)}}}function i(){let q=!1,Re=!1,ue=null,ge=null,Fe=null;return{setReversed:function(De){if(Re!==De){const dt=e.get("EXT_clip_control");Re?dt.clipControlEXT(dt.LOWER_LEFT_EXT,dt.ZERO_TO_ONE_EXT):dt.clipControlEXT(dt.LOWER_LEFT_EXT,dt.NEGATIVE_ONE_TO_ONE_EXT);const nn=Fe;Fe=null,this.setClear(nn)}Re=De},getReversed:function(){return Re},setTest:function(De){De?_e(n.DEPTH_TEST):et(n.DEPTH_TEST)},setMask:function(De){ue!==De&&!q&&(n.depthMask(De),ue=De)},setFunc:function(De){if(Re&&(De=MY[De]),ge!==De){switch(De){case A0:n.depthFunc(n.NEVER);break;case C0:n.depthFunc(n.ALWAYS);break;case P0:n.depthFunc(n.LESS);break;case $l:n.depthFunc(n.LEQUAL);break;case R0:n.depthFunc(n.EQUAL);break;case N0:n.depthFunc(n.GEQUAL);break;case I0:n.depthFunc(n.GREATER);break;case L0:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ge=De}},setLocked:function(De){q=De},setClear:function(De){Fe!==De&&(Re&&(De=1-De),n.clearDepth(De),Fe=De)},reset:function(){q=!1,ue=null,ge=null,Fe=null,Re=!1}}}function r(){let q=!1,Re=null,ue=null,ge=null,Fe=null,De=null,dt=null,nn=null,Fn=null;return{setTest:function(Ft){q||(Ft?_e(n.STENCIL_TEST):et(n.STENCIL_TEST))},setMask:function(Ft){Re!==Ft&&!q&&(n.stencilMask(Ft),Re=Ft)},setFunc:function(Ft,zi,Qr){(ue!==Ft||ge!==zi||Fe!==Qr)&&(n.stencilFunc(Ft,zi,Qr),ue=Ft,ge=zi,Fe=Qr)},setOp:function(Ft,zi,Qr){(De!==Ft||dt!==zi||nn!==Qr)&&(n.stencilOp(Ft,zi,Qr),De=Ft,dt=zi,nn=Qr)},setLocked:function(Ft){q=Ft},setClear:function(Ft){Fn!==Ft&&(n.clearStencil(Ft),Fn=Ft)},reset:function(){q=!1,Re=null,ue=null,ge=null,Fe=null,De=null,dt=null,nn=null,Fn=null}}}const s=new t,o=new i,a=new r,l=new WeakMap,c=new WeakMap;let h={},f={},p=new WeakMap,m=[],v=null,x=!1,_=null,g=null,S=null,w=null,b=null,A=null,P=null,I=new Be(0,0,0),L=0,R=!1,C=null,U=null,j=null,X=null,J=null;const se=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Q=!1,te=0;const D=n.getParameter(n.VERSION);D.indexOf("WebGL")!==-1?(te=parseFloat(/^WebGL (\d)/.exec(D)[1]),Q=te>=1):D.indexOf("OpenGL ES")!==-1&&(te=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),Q=te>=2);let G=null,W={};const ee=n.getParameter(n.SCISSOR_BOX),de=n.getParameter(n.VIEWPORT),Le=new kt().fromArray(ee),ie=new kt().fromArray(de);function pe(q,Re,ue,ge){const Fe=new Uint8Array(4),De=n.createTexture();n.bindTexture(q,De),n.texParameteri(q,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(q,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let dt=0;dt<ue;dt++)q===n.TEXTURE_3D||q===n.TEXTURE_2D_ARRAY?n.texImage3D(Re,0,n.RGBA,1,1,ge,0,n.RGBA,n.UNSIGNED_BYTE,Fe):n.texImage2D(Re+dt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Fe);return De}const be={};be[n.TEXTURE_2D]=pe(n.TEXTURE_2D,n.TEXTURE_2D,1),be[n.TEXTURE_CUBE_MAP]=pe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),be[n.TEXTURE_2D_ARRAY]=pe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),be[n.TEXTURE_3D]=pe(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),_e(n.DEPTH_TEST),o.setFunc($l),Se(!1),Ve(XS),_e(n.CULL_FACE),H(So);function _e(q){h[q]!==!0&&(n.enable(q),h[q]=!0)}function et(q){h[q]!==!1&&(n.disable(q),h[q]=!1)}function at(q,Re){return f[q]!==Re?(n.bindFramebuffer(q,Re),f[q]=Re,q===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=Re),q===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=Re),!0):!1}function tt(q,Re){let ue=m,ge=!1;if(q){ue=p.get(Re),ue===void 0&&(ue=[],p.set(Re,ue));const Fe=q.textures;if(ue.length!==Fe.length||ue[0]!==n.COLOR_ATTACHMENT0){for(let De=0,dt=Fe.length;De<dt;De++)ue[De]=n.COLOR_ATTACHMENT0+De;ue.length=Fe.length,ge=!0}}else ue[0]!==n.BACK&&(ue[0]=n.BACK,ge=!0);ge&&n.drawBuffers(ue)}function ht(q){return v!==q?(n.useProgram(q),v=q,!0):!1}const me={[oa]:n.FUNC_ADD,[DD]:n.FUNC_SUBTRACT,[kD]:n.FUNC_REVERSE_SUBTRACT};me[UD]=n.MIN,me[OD]=n.MAX;const xe={[FD]:n.ZERO,[BD]:n.ONE,[zD]:n.SRC_COLOR,[b0]:n.SRC_ALPHA,[XD]:n.SRC_ALPHA_SATURATE,[GD]:n.DST_COLOR,[HD]:n.DST_ALPHA,[VD]:n.ONE_MINUS_SRC_COLOR,[T0]:n.ONE_MINUS_SRC_ALPHA,[WD]:n.ONE_MINUS_DST_COLOR,[jD]:n.ONE_MINUS_DST_ALPHA,[YD]:n.CONSTANT_COLOR,[qD]:n.ONE_MINUS_CONSTANT_COLOR,[KD]:n.CONSTANT_ALPHA,[ZD]:n.ONE_MINUS_CONSTANT_ALPHA};function H(q,Re,ue,ge,Fe,De,dt,nn,Fn,Ft){if(q===So){x===!0&&(et(n.BLEND),x=!1);return}if(x===!1&&(_e(n.BLEND),x=!0),q!==LD){if(q!==_||Ft!==R){if((g!==oa||b!==oa)&&(n.blendEquation(n.FUNC_ADD),g=oa,b=oa),Ft)switch(q){case Vl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case YS:n.blendFunc(n.ONE,n.ONE);break;case qS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case KS:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}else switch(q){case Vl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case YS:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case qS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case KS:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}S=null,w=null,A=null,P=null,I.set(0,0,0),L=0,_=q,R=Ft}return}Fe=Fe||Re,De=De||ue,dt=dt||ge,(Re!==g||Fe!==b)&&(n.blendEquationSeparate(me[Re],me[Fe]),g=Re,b=Fe),(ue!==S||ge!==w||De!==A||dt!==P)&&(n.blendFuncSeparate(xe[ue],xe[ge],xe[De],xe[dt]),S=ue,w=ge,A=De,P=dt),(nn.equals(I)===!1||Fn!==L)&&(n.blendColor(nn.r,nn.g,nn.b,Fn),I.copy(nn),L=Fn),_=q,R=!1}function $e(q,Re){q.side===ks?et(n.CULL_FACE):_e(n.CULL_FACE);let ue=q.side===ki;Re&&(ue=!ue),Se(ue),q.blending===Vl&&q.transparent===!1?H(So):H(q.blending,q.blendEquation,q.blendSrc,q.blendDst,q.blendEquationAlpha,q.blendSrcAlpha,q.blendDstAlpha,q.blendColor,q.blendAlpha,q.premultipliedAlpha),o.setFunc(q.depthFunc),o.setTest(q.depthTest),o.setMask(q.depthWrite),s.setMask(q.colorWrite);const ge=q.stencilWrite;a.setTest(ge),ge&&(a.setMask(q.stencilWriteMask),a.setFunc(q.stencilFunc,q.stencilRef,q.stencilFuncMask),a.setOp(q.stencilFail,q.stencilZFail,q.stencilZPass)),rt(q.polygonOffset,q.polygonOffsetFactor,q.polygonOffsetUnits),q.alphaToCoverage===!0?_e(n.SAMPLE_ALPHA_TO_COVERAGE):et(n.SAMPLE_ALPHA_TO_COVERAGE)}function Se(q){C!==q&&(q?n.frontFace(n.CW):n.frontFace(n.CCW),C=q)}function Ve(q){q!==RD?(_e(n.CULL_FACE),q!==U&&(q===XS?n.cullFace(n.BACK):q===ND?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):et(n.CULL_FACE),U=q}function Ae(q){q!==j&&(Q&&n.lineWidth(q),j=q)}function rt(q,Re,ue){q?(_e(n.POLYGON_OFFSET_FILL),(X!==Re||J!==ue)&&(n.polygonOffset(Re,ue),X=Re,J=ue)):et(n.POLYGON_OFFSET_FILL)}function Ue(q){q?_e(n.SCISSOR_TEST):et(n.SCISSOR_TEST)}function B(q){q===void 0&&(q=n.TEXTURE0+se-1),G!==q&&(n.activeTexture(q),G=q)}function k(q,Re,ue){ue===void 0&&(G===null?ue=n.TEXTURE0+se-1:ue=G);let ge=W[ue];ge===void 0&&(ge={type:void 0,texture:void 0},W[ue]=ge),(ge.type!==q||ge.texture!==Re)&&(G!==ue&&(n.activeTexture(ue),G=ue),n.bindTexture(q,Re||be[q]),ge.type=q,ge.texture=Re)}function ne(){const q=W[G];q!==void 0&&q.type!==void 0&&(n.bindTexture(q.type,null),q.type=void 0,q.texture=void 0)}function he(){try{n.compressedTexImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function ye(){try{n.compressedTexImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function fe(){try{n.texSubImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Ke(){try{n.texSubImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Pe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function ze(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Tt(){try{n.texStorage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Me(){try{n.texStorage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function je(){try{n.texImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function st(){try{n.texImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function ut(q){Le.equals(q)===!1&&(n.scissor(q.x,q.y,q.z,q.w),Le.copy(q))}function Ge(q){ie.equals(q)===!1&&(n.viewport(q.x,q.y,q.z,q.w),ie.copy(q))}function Rt(q,Re){let ue=c.get(Re);ue===void 0&&(ue=new WeakMap,c.set(Re,ue));let ge=ue.get(q);ge===void 0&&(ge=n.getUniformBlockIndex(Re,q.name),ue.set(q,ge))}function ft(q,Re){const ge=c.get(Re).get(q);l.get(Re)!==ge&&(n.uniformBlockBinding(Re,ge,q.__bindingPointIndex),l.set(Re,ge))}function Wt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},G=null,W={},f={},p=new WeakMap,m=[],v=null,x=!1,_=null,g=null,S=null,w=null,b=null,A=null,P=null,I=new Be(0,0,0),L=0,R=!1,C=null,U=null,j=null,X=null,J=null,Le.set(0,0,n.canvas.width,n.canvas.height),ie.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:_e,disable:et,bindFramebuffer:at,drawBuffers:tt,useProgram:ht,setBlending:H,setMaterial:$e,setFlipSided:Se,setCullFace:Ve,setLineWidth:Ae,setPolygonOffset:rt,setScissorTest:Ue,activeTexture:B,bindTexture:k,unbindTexture:ne,compressedTexImage2D:he,compressedTexImage3D:ye,texImage2D:je,texImage3D:st,updateUBOMapping:Rt,uniformBlockBinding:ft,texStorage2D:Tt,texStorage3D:Me,texSubImage2D:fe,texSubImage3D:Ke,compressedTexSubImage2D:Pe,compressedTexSubImage3D:ze,scissor:ut,viewport:Ge,reset:Wt}}function bY(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function TY(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function AY(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function tw(n,e,t,i){const r=CY(i);switch(t){case dE:return n*e;case pE:return n*e;case mE:return n*e*2;case Wv:return n*e/r.components*r.byteLength;case Wf:return n*e/r.components*r.byteLength;case gE:return n*e*2/r.components*r.byteLength;case Xv:return n*e*2/r.components*r.byteLength;case fE:return n*e*3/r.components*r.byteLength;case Si:return n*e*4/r.components*r.byteLength;case Yv:return n*e*4/r.components*r.byteLength;case Pd:case Rd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Nd:case Id:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case k0:case O0:return Math.max(n,16)*Math.max(e,8)/4;case D0:case U0:return Math.max(n,8)*Math.max(e,8)/2;case F0:case B0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case z0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case V0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case H0:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case j0:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case G0:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case W0:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case X0:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Y0:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case q0:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case K0:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Z0:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case $0:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Q0:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case J0:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case ev:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Ld:case tv:case nv:return Math.ceil(n/4)*Math.ceil(e/4)*16;case vE:case iv:return Math.ceil(n/4)*Math.ceil(e/4)*8;case rv:case sv:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function CY(n){switch(n){case ps:case cE:return{byteLength:1,components:1};case Yu:case uE:case sh:return{byteLength:2,components:1};case jv:case Gv:return{byteLength:2,components:4};case Io:case Hv:case $i:return{byteLength:4,components:1};case hE:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const PY={contain:bY,cover:TY,fill:AY,getByteLength:tw};function RY(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new ve,h=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(B,k){return m?new OffscreenCanvas(B,k):Ef("canvas")}function x(B,k,ne){let he=1;const ye=Ue(B);if((ye.width>ne||ye.height>ne)&&(he=ne/Math.max(ye.width,ye.height)),he<1)if(typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&B instanceof ImageBitmap||typeof VideoFrame<"u"&&B instanceof VideoFrame){const fe=Math.floor(he*ye.width),Ke=Math.floor(he*ye.height);f===void 0&&(f=v(fe,Ke));const Pe=k?v(fe,Ke):f;return Pe.width=fe,Pe.height=Ke,Pe.getContext("2d").drawImage(B,0,0,fe,Ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ye.width+"x"+ye.height+") to ("+fe+"x"+Ke+")."),Pe}else return"data"in B&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ye.width+"x"+ye.height+")."),B;return B}function _(B){return B.generateMipmaps}function g(B){n.generateMipmap(B)}function S(B){return B.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:B.isWebGL3DRenderTarget?n.TEXTURE_3D:B.isWebGLArrayRenderTarget||B.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function w(B,k,ne,he,ye=!1){if(B!==null){if(n[B]!==void 0)return n[B];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}let fe=k;if(k===n.RED&&(ne===n.FLOAT&&(fe=n.R32F),ne===n.HALF_FLOAT&&(fe=n.R16F),ne===n.UNSIGNED_BYTE&&(fe=n.R8)),k===n.RED_INTEGER&&(ne===n.UNSIGNED_BYTE&&(fe=n.R8UI),ne===n.UNSIGNED_SHORT&&(fe=n.R16UI),ne===n.UNSIGNED_INT&&(fe=n.R32UI),ne===n.BYTE&&(fe=n.R8I),ne===n.SHORT&&(fe=n.R16I),ne===n.INT&&(fe=n.R32I)),k===n.RG&&(ne===n.FLOAT&&(fe=n.RG32F),ne===n.HALF_FLOAT&&(fe=n.RG16F),ne===n.UNSIGNED_BYTE&&(fe=n.RG8)),k===n.RG_INTEGER&&(ne===n.UNSIGNED_BYTE&&(fe=n.RG8UI),ne===n.UNSIGNED_SHORT&&(fe=n.RG16UI),ne===n.UNSIGNED_INT&&(fe=n.RG32UI),ne===n.BYTE&&(fe=n.RG8I),ne===n.SHORT&&(fe=n.RG16I),ne===n.INT&&(fe=n.RG32I)),k===n.RGB_INTEGER&&(ne===n.UNSIGNED_BYTE&&(fe=n.RGB8UI),ne===n.UNSIGNED_SHORT&&(fe=n.RGB16UI),ne===n.UNSIGNED_INT&&(fe=n.RGB32UI),ne===n.BYTE&&(fe=n.RGB8I),ne===n.SHORT&&(fe=n.RGB16I),ne===n.INT&&(fe=n.RGB32I)),k===n.RGBA_INTEGER&&(ne===n.UNSIGNED_BYTE&&(fe=n.RGBA8UI),ne===n.UNSIGNED_SHORT&&(fe=n.RGBA16UI),ne===n.UNSIGNED_INT&&(fe=n.RGBA32UI),ne===n.BYTE&&(fe=n.RGBA8I),ne===n.SHORT&&(fe=n.RGBA16I),ne===n.INT&&(fe=n.RGBA32I)),k===n.RGB&&ne===n.UNSIGNED_INT_5_9_9_9_REV&&(fe=n.RGB9_E5),k===n.RGBA){const Ke=ye?Xf:It.getTransfer(he);ne===n.FLOAT&&(fe=n.RGBA32F),ne===n.HALF_FLOAT&&(fe=n.RGBA16F),ne===n.UNSIGNED_BYTE&&(fe=Ke===Ht?n.SRGB8_ALPHA8:n.RGBA8),ne===n.UNSIGNED_SHORT_4_4_4_4&&(fe=n.RGBA4),ne===n.UNSIGNED_SHORT_5_5_5_1&&(fe=n.RGB5_A1)}return(fe===n.R16F||fe===n.R32F||fe===n.RG16F||fe===n.RG32F||fe===n.RGBA16F||fe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),fe}function b(B,k){let ne;return B?k===null||k===Io||k===Ql?ne=n.DEPTH24_STENCIL8:k===$i?ne=n.DEPTH32F_STENCIL8:k===Yu&&(ne=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):k===null||k===Io||k===Ql?ne=n.DEPTH_COMPONENT24:k===$i?ne=n.DEPTH_COMPONENT32F:k===Yu&&(ne=n.DEPTH_COMPONENT16),ne}function A(B,k){return _(B)===!0||B.isFramebufferTexture&&B.minFilter!==oi&&B.minFilter!==Hn?Math.log2(Math.max(k.width,k.height))+1:B.mipmaps!==void 0&&B.mipmaps.length>0?B.mipmaps.length:B.isCompressedTexture&&Array.isArray(B.image)?k.mipmaps.length:1}function P(B){const k=B.target;k.removeEventListener("dispose",P),L(k),k.isVideoTexture&&h.delete(k)}function I(B){const k=B.target;k.removeEventListener("dispose",I),C(k)}function L(B){const k=i.get(B);if(k.__webglInit===void 0)return;const ne=B.source,he=p.get(ne);if(he){const ye=he[k.__cacheKey];ye.usedTimes--,ye.usedTimes===0&&R(B),Object.keys(he).length===0&&p.delete(ne)}i.remove(B)}function R(B){const k=i.get(B);n.deleteTexture(k.__webglTexture);const ne=B.source,he=p.get(ne);delete he[k.__cacheKey],o.memory.textures--}function C(B){const k=i.get(B);if(B.depthTexture&&(B.depthTexture.dispose(),i.remove(B.depthTexture)),B.isWebGLCubeRenderTarget)for(let he=0;he<6;he++){if(Array.isArray(k.__webglFramebuffer[he]))for(let ye=0;ye<k.__webglFramebuffer[he].length;ye++)n.deleteFramebuffer(k.__webglFramebuffer[he][ye]);else n.deleteFramebuffer(k.__webglFramebuffer[he]);k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer[he])}else{if(Array.isArray(k.__webglFramebuffer))for(let he=0;he<k.__webglFramebuffer.length;he++)n.deleteFramebuffer(k.__webglFramebuffer[he]);else n.deleteFramebuffer(k.__webglFramebuffer);if(k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&n.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer)for(let he=0;he<k.__webglColorRenderbuffer.length;he++)k.__webglColorRenderbuffer[he]&&n.deleteRenderbuffer(k.__webglColorRenderbuffer[he]);k.__webglDepthRenderbuffer&&n.deleteRenderbuffer(k.__webglDepthRenderbuffer)}const ne=B.textures;for(let he=0,ye=ne.length;he<ye;he++){const fe=i.get(ne[he]);fe.__webglTexture&&(n.deleteTexture(fe.__webglTexture),o.memory.textures--),i.remove(ne[he])}i.remove(B)}let U=0;function j(){U=0}function X(){const B=U;return B>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+r.maxTextures),U+=1,B}function J(B){const k=[];return k.push(B.wrapS),k.push(B.wrapT),k.push(B.wrapR||0),k.push(B.magFilter),k.push(B.minFilter),k.push(B.anisotropy),k.push(B.internalFormat),k.push(B.format),k.push(B.type),k.push(B.generateMipmaps),k.push(B.premultiplyAlpha),k.push(B.flipY),k.push(B.unpackAlignment),k.push(B.colorSpace),k.join()}function se(B,k){const ne=i.get(B);if(B.isVideoTexture&&Ae(B),B.isRenderTargetTexture===!1&&B.version>0&&ne.__version!==B.version){const he=B.image;if(he===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(he.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ie(ne,B,k);return}}t.bindTexture(n.TEXTURE_2D,ne.__webglTexture,n.TEXTURE0+k)}function Q(B,k){const ne=i.get(B);if(B.version>0&&ne.__version!==B.version){ie(ne,B,k);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ne.__webglTexture,n.TEXTURE0+k)}function te(B,k){const ne=i.get(B);if(B.version>0&&ne.__version!==B.version){ie(ne,B,k);return}t.bindTexture(n.TEXTURE_3D,ne.__webglTexture,n.TEXTURE0+k)}function D(B,k){const ne=i.get(B);if(B.version>0&&ne.__version!==B.version){pe(ne,B,k);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ne.__webglTexture,n.TEXTURE0+k)}const G={[yf]:n.REPEAT,[qr]:n.CLAMP_TO_EDGE,[xf]:n.MIRRORED_REPEAT},W={[oi]:n.NEAREST,[lE]:n.NEAREST_MIPMAP_NEAREST,[mu]:n.NEAREST_MIPMAP_LINEAR,[Hn]:n.LINEAR,[Cd]:n.LINEAR_MIPMAP_NEAREST,[Os]:n.LINEAR_MIPMAP_LINEAR},ee={[dk]:n.NEVER,[yk]:n.ALWAYS,[fk]:n.LESS,[xE]:n.LEQUAL,[pk]:n.EQUAL,[vk]:n.GEQUAL,[mk]:n.GREATER,[gk]:n.NOTEQUAL};function de(B,k){if(k.type===$i&&e.has("OES_texture_float_linear")===!1&&(k.magFilter===Hn||k.magFilter===Cd||k.magFilter===mu||k.magFilter===Os||k.minFilter===Hn||k.minFilter===Cd||k.minFilter===mu||k.minFilter===Os)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(B,n.TEXTURE_WRAP_S,G[k.wrapS]),n.texParameteri(B,n.TEXTURE_WRAP_T,G[k.wrapT]),(B===n.TEXTURE_3D||B===n.TEXTURE_2D_ARRAY)&&n.texParameteri(B,n.TEXTURE_WRAP_R,G[k.wrapR]),n.texParameteri(B,n.TEXTURE_MAG_FILTER,W[k.magFilter]),n.texParameteri(B,n.TEXTURE_MIN_FILTER,W[k.minFilter]),k.compareFunction&&(n.texParameteri(B,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(B,n.TEXTURE_COMPARE_FUNC,ee[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(k.magFilter===oi||k.minFilter!==mu&&k.minFilter!==Os||k.type===$i&&e.has("OES_texture_float_linear")===!1)return;if(k.anisotropy>1||i.get(k).__currentAnisotropy){const ne=e.get("EXT_texture_filter_anisotropic");n.texParameterf(B,ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,r.getMaxAnisotropy())),i.get(k).__currentAnisotropy=k.anisotropy}}}function Le(B,k){let ne=!1;B.__webglInit===void 0&&(B.__webglInit=!0,k.addEventListener("dispose",P));const he=k.source;let ye=p.get(he);ye===void 0&&(ye={},p.set(he,ye));const fe=J(k);if(fe!==B.__cacheKey){ye[fe]===void 0&&(ye[fe]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ne=!0),ye[fe].usedTimes++;const Ke=ye[B.__cacheKey];Ke!==void 0&&(ye[B.__cacheKey].usedTimes--,Ke.usedTimes===0&&R(k)),B.__cacheKey=fe,B.__webglTexture=ye[fe].texture}return ne}function ie(B,k,ne){let he=n.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(he=n.TEXTURE_2D_ARRAY),k.isData3DTexture&&(he=n.TEXTURE_3D);const ye=Le(B,k),fe=k.source;t.bindTexture(he,B.__webglTexture,n.TEXTURE0+ne);const Ke=i.get(fe);if(fe.version!==Ke.__version||ye===!0){t.activeTexture(n.TEXTURE0+ne);const Pe=It.getPrimaries(It.workingColorSpace),ze=k.colorSpace===fo?null:It.getPrimaries(k.colorSpace),Tt=k.colorSpace===fo||Pe===ze?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Tt);let Me=x(k.image,!1,r.maxTextureSize);Me=rt(k,Me);const je=s.convert(k.format,k.colorSpace),st=s.convert(k.type);let ut=w(k.internalFormat,je,st,k.colorSpace,k.isVideoTexture);de(he,k);let Ge;const Rt=k.mipmaps,ft=k.isVideoTexture!==!0,Wt=Ke.__version===void 0||ye===!0,q=fe.dataReady,Re=A(k,Me);if(k.isDepthTexture)ut=b(k.format===Jl,k.type),Wt&&(ft?t.texStorage2D(n.TEXTURE_2D,1,ut,Me.width,Me.height):t.texImage2D(n.TEXTURE_2D,0,ut,Me.width,Me.height,0,je,st,null));else if(k.isDataTexture)if(Rt.length>0){ft&&Wt&&t.texStorage2D(n.TEXTURE_2D,Re,ut,Rt[0].width,Rt[0].height);for(let ue=0,ge=Rt.length;ue<ge;ue++)Ge=Rt[ue],ft?q&&t.texSubImage2D(n.TEXTURE_2D,ue,0,0,Ge.width,Ge.height,je,st,Ge.data):t.texImage2D(n.TEXTURE_2D,ue,ut,Ge.width,Ge.height,0,je,st,Ge.data);k.generateMipmaps=!1}else ft?(Wt&&t.texStorage2D(n.TEXTURE_2D,Re,ut,Me.width,Me.height),q&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Me.width,Me.height,je,st,Me.data)):t.texImage2D(n.TEXTURE_2D,0,ut,Me.width,Me.height,0,je,st,Me.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){ft&&Wt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Re,ut,Rt[0].width,Rt[0].height,Me.depth);for(let ue=0,ge=Rt.length;ue<ge;ue++)if(Ge=Rt[ue],k.format!==Si)if(je!==null)if(ft){if(q)if(k.layerUpdates.size>0){const Fe=tw(Ge.width,Ge.height,k.format,k.type);for(const De of k.layerUpdates){const dt=Ge.data.subarray(De*Fe/Ge.data.BYTES_PER_ELEMENT,(De+1)*Fe/Ge.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ue,0,0,De,Ge.width,Ge.height,1,je,dt)}k.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ue,0,0,0,Ge.width,Ge.height,Me.depth,je,Ge.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ue,ut,Ge.width,Ge.height,Me.depth,0,Ge.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ft?q&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ue,0,0,0,Ge.width,Ge.height,Me.depth,je,st,Ge.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ue,ut,Ge.width,Ge.height,Me.depth,0,je,st,Ge.data)}else{ft&&Wt&&t.texStorage2D(n.TEXTURE_2D,Re,ut,Rt[0].width,Rt[0].height);for(let ue=0,ge=Rt.length;ue<ge;ue++)Ge=Rt[ue],k.format!==Si?je!==null?ft?q&&t.compressedTexSubImage2D(n.TEXTURE_2D,ue,0,0,Ge.width,Ge.height,je,Ge.data):t.compressedTexImage2D(n.TEXTURE_2D,ue,ut,Ge.width,Ge.height,0,Ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ft?q&&t.texSubImage2D(n.TEXTURE_2D,ue,0,0,Ge.width,Ge.height,je,st,Ge.data):t.texImage2D(n.TEXTURE_2D,ue,ut,Ge.width,Ge.height,0,je,st,Ge.data)}else if(k.isDataArrayTexture)if(ft){if(Wt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Re,ut,Me.width,Me.height,Me.depth),q)if(k.layerUpdates.size>0){const ue=tw(Me.width,Me.height,k.format,k.type);for(const ge of k.layerUpdates){const Fe=Me.data.subarray(ge*ue/Me.data.BYTES_PER_ELEMENT,(ge+1)*ue/Me.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ge,Me.width,Me.height,1,je,st,Fe)}k.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Me.width,Me.height,Me.depth,je,st,Me.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ut,Me.width,Me.height,Me.depth,0,je,st,Me.data);else if(k.isData3DTexture)ft?(Wt&&t.texStorage3D(n.TEXTURE_3D,Re,ut,Me.width,Me.height,Me.depth),q&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Me.width,Me.height,Me.depth,je,st,Me.data)):t.texImage3D(n.TEXTURE_3D,0,ut,Me.width,Me.height,Me.depth,0,je,st,Me.data);else if(k.isFramebufferTexture){if(Wt)if(ft)t.texStorage2D(n.TEXTURE_2D,Re,ut,Me.width,Me.height);else{let ue=Me.width,ge=Me.height;for(let Fe=0;Fe<Re;Fe++)t.texImage2D(n.TEXTURE_2D,Fe,ut,ue,ge,0,je,st,null),ue>>=1,ge>>=1}}else if(Rt.length>0){if(ft&&Wt){const ue=Ue(Rt[0]);t.texStorage2D(n.TEXTURE_2D,Re,ut,ue.width,ue.height)}for(let ue=0,ge=Rt.length;ue<ge;ue++)Ge=Rt[ue],ft?q&&t.texSubImage2D(n.TEXTURE_2D,ue,0,0,je,st,Ge):t.texImage2D(n.TEXTURE_2D,ue,ut,je,st,Ge);k.generateMipmaps=!1}else if(ft){if(Wt){const ue=Ue(Me);t.texStorage2D(n.TEXTURE_2D,Re,ut,ue.width,ue.height)}q&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,je,st,Me)}else t.texImage2D(n.TEXTURE_2D,0,ut,je,st,Me);_(k)&&g(he),Ke.__version=fe.version,k.onUpdate&&k.onUpdate(k)}B.__version=k.version}function pe(B,k,ne){if(k.image.length!==6)return;const he=Le(B,k),ye=k.source;t.bindTexture(n.TEXTURE_CUBE_MAP,B.__webglTexture,n.TEXTURE0+ne);const fe=i.get(ye);if(ye.version!==fe.__version||he===!0){t.activeTexture(n.TEXTURE0+ne);const Ke=It.getPrimaries(It.workingColorSpace),Pe=k.colorSpace===fo?null:It.getPrimaries(k.colorSpace),ze=k.colorSpace===fo||Ke===Pe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ze);const Tt=k.isCompressedTexture||k.image[0].isCompressedTexture,Me=k.image[0]&&k.image[0].isDataTexture,je=[];for(let ge=0;ge<6;ge++)!Tt&&!Me?je[ge]=x(k.image[ge],!0,r.maxCubemapSize):je[ge]=Me?k.image[ge].image:k.image[ge],je[ge]=rt(k,je[ge]);const st=je[0],ut=s.convert(k.format,k.colorSpace),Ge=s.convert(k.type),Rt=w(k.internalFormat,ut,Ge,k.colorSpace),ft=k.isVideoTexture!==!0,Wt=fe.__version===void 0||he===!0,q=ye.dataReady;let Re=A(k,st);de(n.TEXTURE_CUBE_MAP,k);let ue;if(Tt){ft&&Wt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Re,Rt,st.width,st.height);for(let ge=0;ge<6;ge++){ue=je[ge].mipmaps;for(let Fe=0;Fe<ue.length;Fe++){const De=ue[Fe];k.format!==Si?ut!==null?ft?q&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Fe,0,0,De.width,De.height,ut,De.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Fe,Rt,De.width,De.height,0,De.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ft?q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Fe,0,0,De.width,De.height,ut,Ge,De.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Fe,Rt,De.width,De.height,0,ut,Ge,De.data)}}}else{if(ue=k.mipmaps,ft&&Wt){ue.length>0&&Re++;const ge=Ue(je[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Re,Rt,ge.width,ge.height)}for(let ge=0;ge<6;ge++)if(Me){ft?q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0,0,0,je[ge].width,je[ge].height,ut,Ge,je[ge].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0,Rt,je[ge].width,je[ge].height,0,ut,Ge,je[ge].data);for(let Fe=0;Fe<ue.length;Fe++){const dt=ue[Fe].image[ge].image;ft?q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Fe+1,0,0,dt.width,dt.height,ut,Ge,dt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Fe+1,Rt,dt.width,dt.height,0,ut,Ge,dt.data)}}else{ft?q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0,0,0,ut,Ge,je[ge]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0,Rt,ut,Ge,je[ge]);for(let Fe=0;Fe<ue.length;Fe++){const De=ue[Fe];ft?q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Fe+1,0,0,ut,Ge,De.image[ge]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Fe+1,Rt,ut,Ge,De.image[ge])}}}_(k)&&g(n.TEXTURE_CUBE_MAP),fe.__version=ye.version,k.onUpdate&&k.onUpdate(k)}B.__version=k.version}function be(B,k,ne,he,ye,fe){const Ke=s.convert(ne.format,ne.colorSpace),Pe=s.convert(ne.type),ze=w(ne.internalFormat,Ke,Pe,ne.colorSpace),Tt=i.get(k),Me=i.get(ne);if(Me.__renderTarget=k,!Tt.__hasExternalTextures){const je=Math.max(1,k.width>>fe),st=Math.max(1,k.height>>fe);ye===n.TEXTURE_3D||ye===n.TEXTURE_2D_ARRAY?t.texImage3D(ye,fe,ze,je,st,k.depth,0,Ke,Pe,null):t.texImage2D(ye,fe,ze,je,st,0,Ke,Pe,null)}t.bindFramebuffer(n.FRAMEBUFFER,B),Ve(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,he,ye,Me.__webglTexture,0,Se(k)):(ye===n.TEXTURE_2D||ye>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ye<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,he,ye,Me.__webglTexture,fe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function _e(B,k,ne){if(n.bindRenderbuffer(n.RENDERBUFFER,B),k.depthBuffer){const he=k.depthTexture,ye=he&&he.isDepthTexture?he.type:null,fe=b(k.stencilBuffer,ye),Ke=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Pe=Se(k);Ve(k)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Pe,fe,k.width,k.height):ne?n.renderbufferStorageMultisample(n.RENDERBUFFER,Pe,fe,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,fe,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ke,n.RENDERBUFFER,B)}else{const he=k.textures;for(let ye=0;ye<he.length;ye++){const fe=he[ye],Ke=s.convert(fe.format,fe.colorSpace),Pe=s.convert(fe.type),ze=w(fe.internalFormat,Ke,Pe,fe.colorSpace),Tt=Se(k);ne&&Ve(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Tt,ze,k.width,k.height):Ve(k)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Tt,ze,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,ze,k.width,k.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function et(B,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,B),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const he=i.get(k.depthTexture);he.__renderTarget=k,(!he.__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),se(k.depthTexture,0);const ye=he.__webglTexture,fe=Se(k);if(k.depthTexture.format===Hl)Ve(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ye,0,fe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ye,0);else if(k.depthTexture.format===Jl)Ve(k)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ye,0,fe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ye,0);else throw new Error("Unknown depthTexture format")}function at(B){const k=i.get(B),ne=B.isWebGLCubeRenderTarget===!0;if(k.__boundDepthTexture!==B.depthTexture){const he=B.depthTexture;if(k.__depthDisposeCallback&&k.__depthDisposeCallback(),he){const ye=()=>{delete k.__boundDepthTexture,delete k.__depthDisposeCallback,he.removeEventListener("dispose",ye)};he.addEventListener("dispose",ye),k.__depthDisposeCallback=ye}k.__boundDepthTexture=he}if(B.depthTexture&&!k.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");et(k.__webglFramebuffer,B)}else if(ne){k.__webglDepthbuffer=[];for(let he=0;he<6;he++)if(t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[he]),k.__webglDepthbuffer[he]===void 0)k.__webglDepthbuffer[he]=n.createRenderbuffer(),_e(k.__webglDepthbuffer[he],B,!1);else{const ye=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,fe=k.__webglDepthbuffer[he];n.bindRenderbuffer(n.RENDERBUFFER,fe),n.framebufferRenderbuffer(n.FRAMEBUFFER,ye,n.RENDERBUFFER,fe)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer===void 0)k.__webglDepthbuffer=n.createRenderbuffer(),_e(k.__webglDepthbuffer,B,!1);else{const he=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ye=k.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ye),n.framebufferRenderbuffer(n.FRAMEBUFFER,he,n.RENDERBUFFER,ye)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function tt(B,k,ne){const he=i.get(B);k!==void 0&&be(he.__webglFramebuffer,B,B.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ne!==void 0&&at(B)}function ht(B){const k=B.texture,ne=i.get(B),he=i.get(k);B.addEventListener("dispose",I);const ye=B.textures,fe=B.isWebGLCubeRenderTarget===!0,Ke=ye.length>1;if(Ke||(he.__webglTexture===void 0&&(he.__webglTexture=n.createTexture()),he.__version=k.version,o.memory.textures++),fe){ne.__webglFramebuffer=[];for(let Pe=0;Pe<6;Pe++)if(k.mipmaps&&k.mipmaps.length>0){ne.__webglFramebuffer[Pe]=[];for(let ze=0;ze<k.mipmaps.length;ze++)ne.__webglFramebuffer[Pe][ze]=n.createFramebuffer()}else ne.__webglFramebuffer[Pe]=n.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){ne.__webglFramebuffer=[];for(let Pe=0;Pe<k.mipmaps.length;Pe++)ne.__webglFramebuffer[Pe]=n.createFramebuffer()}else ne.__webglFramebuffer=n.createFramebuffer();if(Ke)for(let Pe=0,ze=ye.length;Pe<ze;Pe++){const Tt=i.get(ye[Pe]);Tt.__webglTexture===void 0&&(Tt.__webglTexture=n.createTexture(),o.memory.textures++)}if(B.samples>0&&Ve(B)===!1){ne.__webglMultisampledFramebuffer=n.createFramebuffer(),ne.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ne.__webglMultisampledFramebuffer);for(let Pe=0;Pe<ye.length;Pe++){const ze=ye[Pe];ne.__webglColorRenderbuffer[Pe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ne.__webglColorRenderbuffer[Pe]);const Tt=s.convert(ze.format,ze.colorSpace),Me=s.convert(ze.type),je=w(ze.internalFormat,Tt,Me,ze.colorSpace,B.isXRRenderTarget===!0),st=Se(B);n.renderbufferStorageMultisample(n.RENDERBUFFER,st,je,B.width,B.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pe,n.RENDERBUFFER,ne.__webglColorRenderbuffer[Pe])}n.bindRenderbuffer(n.RENDERBUFFER,null),B.depthBuffer&&(ne.__webglDepthRenderbuffer=n.createRenderbuffer(),_e(ne.__webglDepthRenderbuffer,B,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(fe){t.bindTexture(n.TEXTURE_CUBE_MAP,he.__webglTexture),de(n.TEXTURE_CUBE_MAP,k);for(let Pe=0;Pe<6;Pe++)if(k.mipmaps&&k.mipmaps.length>0)for(let ze=0;ze<k.mipmaps.length;ze++)be(ne.__webglFramebuffer[Pe][ze],B,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ze);else be(ne.__webglFramebuffer[Pe],B,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0);_(k)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ke){for(let Pe=0,ze=ye.length;Pe<ze;Pe++){const Tt=ye[Pe],Me=i.get(Tt);t.bindTexture(n.TEXTURE_2D,Me.__webglTexture),de(n.TEXTURE_2D,Tt),be(ne.__webglFramebuffer,B,Tt,n.COLOR_ATTACHMENT0+Pe,n.TEXTURE_2D,0),_(Tt)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let Pe=n.TEXTURE_2D;if((B.isWebGL3DRenderTarget||B.isWebGLArrayRenderTarget)&&(Pe=B.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Pe,he.__webglTexture),de(Pe,k),k.mipmaps&&k.mipmaps.length>0)for(let ze=0;ze<k.mipmaps.length;ze++)be(ne.__webglFramebuffer[ze],B,k,n.COLOR_ATTACHMENT0,Pe,ze);else be(ne.__webglFramebuffer,B,k,n.COLOR_ATTACHMENT0,Pe,0);_(k)&&g(Pe),t.unbindTexture()}B.depthBuffer&&at(B)}function me(B){const k=B.textures;for(let ne=0,he=k.length;ne<he;ne++){const ye=k[ne];if(_(ye)){const fe=S(B),Ke=i.get(ye).__webglTexture;t.bindTexture(fe,Ke),g(fe),t.unbindTexture()}}}const xe=[],H=[];function $e(B){if(B.samples>0){if(Ve(B)===!1){const k=B.textures,ne=B.width,he=B.height;let ye=n.COLOR_BUFFER_BIT;const fe=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ke=i.get(B),Pe=k.length>1;if(Pe)for(let ze=0;ze<k.length;ze++)t.bindFramebuffer(n.FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ke.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ke.__webglFramebuffer);for(let ze=0;ze<k.length;ze++){if(B.resolveDepthBuffer&&(B.depthBuffer&&(ye|=n.DEPTH_BUFFER_BIT),B.stencilBuffer&&B.resolveStencilBuffer&&(ye|=n.STENCIL_BUFFER_BIT)),Pe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ke.__webglColorRenderbuffer[ze]);const Tt=i.get(k[ze]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Tt,0)}n.blitFramebuffer(0,0,ne,he,0,0,ne,he,ye,n.NEAREST),l===!0&&(xe.length=0,H.length=0,xe.push(n.COLOR_ATTACHMENT0+ze),B.depthBuffer&&B.resolveDepthBuffer===!1&&(xe.push(fe),H.push(fe),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,H)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,xe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Pe)for(let ze=0;ze<k.length;ze++){t.bindFramebuffer(n.FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.RENDERBUFFER,Ke.__webglColorRenderbuffer[ze]);const Tt=i.get(k[ze]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ke.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.TEXTURE_2D,Tt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ke.__webglMultisampledFramebuffer)}else if(B.depthBuffer&&B.resolveDepthBuffer===!1&&l){const k=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[k])}}}function Se(B){return Math.min(r.maxSamples,B.samples)}function Ve(B){const k=i.get(B);return B.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function Ae(B){const k=o.render.frame;h.get(B)!==k&&(h.set(B,k),B.update())}function rt(B,k){const ne=B.colorSpace,he=B.format,ye=B.type;return B.isCompressedTexture===!0||B.isVideoTexture===!0||ne!==ac&&ne!==fo&&(It.getTransfer(ne)===Ht?(he!==Si||ye!==ps)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ne)),k}function Ue(B){return typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement?(c.width=B.naturalWidth||B.width,c.height=B.naturalHeight||B.height):typeof VideoFrame<"u"&&B instanceof VideoFrame?(c.width=B.displayWidth,c.height=B.displayHeight):(c.width=B.width,c.height=B.height),c}this.allocateTextureUnit=X,this.resetTextureUnits=j,this.setTexture2D=se,this.setTexture2DArray=Q,this.setTexture3D=te,this.setTextureCube=D,this.rebindTextures=tt,this.setupRenderTarget=ht,this.updateRenderTargetMipmap=me,this.updateMultisampleRenderTarget=$e,this.setupDepthRenderbuffer=at,this.setupFrameBufferTexture=be,this.useMultisampledRTT=Ve}function Dk(n,e){function t(i,r=fo){let s;const o=It.getTransfer(r);if(i===ps)return n.UNSIGNED_BYTE;if(i===jv)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Gv)return n.UNSIGNED_SHORT_5_5_5_1;if(i===hE)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===cE)return n.BYTE;if(i===uE)return n.SHORT;if(i===Yu)return n.UNSIGNED_SHORT;if(i===Hv)return n.INT;if(i===Io)return n.UNSIGNED_INT;if(i===$i)return n.FLOAT;if(i===sh)return n.HALF_FLOAT;if(i===dE)return n.ALPHA;if(i===fE)return n.RGB;if(i===Si)return n.RGBA;if(i===pE)return n.LUMINANCE;if(i===mE)return n.LUMINANCE_ALPHA;if(i===Hl)return n.DEPTH_COMPONENT;if(i===Jl)return n.DEPTH_STENCIL;if(i===Wv)return n.RED;if(i===Wf)return n.RED_INTEGER;if(i===gE)return n.RG;if(i===Xv)return n.RG_INTEGER;if(i===Yv)return n.RGBA_INTEGER;if(i===Pd||i===Rd||i===Nd||i===Id)if(o===Ht)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Pd)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Rd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Nd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Id)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Pd)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Rd)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Nd)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Id)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===D0||i===k0||i===U0||i===O0)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===D0)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===k0)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===U0)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===O0)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===F0||i===B0||i===z0)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===F0||i===B0)return o===Ht?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===z0)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===V0||i===H0||i===j0||i===G0||i===W0||i===X0||i===Y0||i===q0||i===K0||i===Z0||i===$0||i===Q0||i===J0||i===ev)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===V0)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===H0)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===j0)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===G0)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===W0)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===X0)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Y0)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===q0)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===K0)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Z0)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===$0)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Q0)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===J0)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===ev)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Ld||i===tv||i===nv)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Ld)return o===Ht?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===tv)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===nv)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===vE||i===iv||i===rv||i===sv)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Ld)return s.COMPRESSED_RED_RGTC1_EXT;if(i===iv)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===rv)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===sv)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Ql?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class kk extends Qn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class yu extends Ot{constructor(){super(),this.isGroup=!0,this.type="Group"}}const NY={type:"move"};class W_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new yu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new yu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new yu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const x of e.hand.values()){const _=t.getJointPose(x,i),g=this._getHandJoint(c,x);_!==null&&(g.matrix.fromArray(_.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=_.radius),g.visible=_!==null}const h=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],p=h.position.distanceTo(f.position),m=.02,v=.005;c.inputState.pinching&&p>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(NY)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new yu;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const IY=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,LY=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class DY{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new En,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new gs({vertexShader:IY,fragmentShader:LY,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Un(new ah(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class kY extends Ys{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,h=null,f=null,p=null,m=null,v=null;const x=new DY,_=t.getContextAttributes();let g=null,S=null;const w=[],b=[],A=new ve;let P=null;const I=new Qn;I.viewport=new kt;const L=new Qn;L.viewport=new kt;const R=[I,L],C=new kk;let U=null,j=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let pe=w[ie];return pe===void 0&&(pe=new W_,w[ie]=pe),pe.getTargetRaySpace()},this.getControllerGrip=function(ie){let pe=w[ie];return pe===void 0&&(pe=new W_,w[ie]=pe),pe.getGripSpace()},this.getHand=function(ie){let pe=w[ie];return pe===void 0&&(pe=new W_,w[ie]=pe),pe.getHandSpace()};function X(ie){const pe=b.indexOf(ie.inputSource);if(pe===-1)return;const be=w[pe];be!==void 0&&(be.update(ie.inputSource,ie.frame,c||o),be.dispatchEvent({type:ie.type,data:ie.inputSource}))}function J(){r.removeEventListener("select",X),r.removeEventListener("selectstart",X),r.removeEventListener("selectend",X),r.removeEventListener("squeeze",X),r.removeEventListener("squeezestart",X),r.removeEventListener("squeezeend",X),r.removeEventListener("end",J),r.removeEventListener("inputsourceschange",se);for(let ie=0;ie<w.length;ie++){const pe=b[ie];pe!==null&&(b[ie]=null,w[ie].disconnect(pe))}U=null,j=null,x.reset(),e.setRenderTarget(g),m=null,p=null,f=null,r=null,S=null,Le.stop(),i.isPresenting=!1,e.setPixelRatio(P),e.setSize(A.width,A.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ie){s=ie,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ie){a=ie,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ie){c=ie},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(ie){if(r=ie,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",X),r.addEventListener("selectstart",X),r.addEventListener("selectend",X),r.addEventListener("squeeze",X),r.addEventListener("squeezestart",X),r.addEventListener("squeezeend",X),r.addEventListener("end",J),r.addEventListener("inputsourceschange",se),_.xrCompatible!==!0&&await t.makeXRCompatible(),P=e.getPixelRatio(),e.getSize(A),r.renderState.layers===void 0){const pe={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,pe),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),S=new ms(m.framebufferWidth,m.framebufferHeight,{format:Si,type:ps,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}else{let pe=null,be=null,_e=null;_.depth&&(_e=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,pe=_.stencil?Jl:Hl,be=_.stencil?Ql:Io);const et={colorFormat:t.RGBA8,depthFormat:_e,scaleFactor:s};f=new XRWebGLBinding(r,t),p=f.createProjectionLayer(et),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),S=new ms(p.textureWidth,p.textureHeight,{format:Si,type:ps,depthTexture:new bE(p.textureWidth,p.textureHeight,be,void 0,void 0,void 0,void 0,void 0,void 0,pe),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),Le.setContext(r),Le.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function se(ie){for(let pe=0;pe<ie.removed.length;pe++){const be=ie.removed[pe],_e=b.indexOf(be);_e>=0&&(b[_e]=null,w[_e].disconnect(be))}for(let pe=0;pe<ie.added.length;pe++){const be=ie.added[pe];let _e=b.indexOf(be);if(_e===-1){for(let at=0;at<w.length;at++)if(at>=b.length){b.push(be),_e=at;break}else if(b[at]===null){b[at]=be,_e=at;break}if(_e===-1)break}const et=w[_e];et&&et.connect(be)}}const Q=new z,te=new z;function D(ie,pe,be){Q.setFromMatrixPosition(pe.matrixWorld),te.setFromMatrixPosition(be.matrixWorld);const _e=Q.distanceTo(te),et=pe.projectionMatrix.elements,at=be.projectionMatrix.elements,tt=et[14]/(et[10]-1),ht=et[14]/(et[10]+1),me=(et[9]+1)/et[5],xe=(et[9]-1)/et[5],H=(et[8]-1)/et[0],$e=(at[8]+1)/at[0],Se=tt*H,Ve=tt*$e,Ae=_e/(-H+$e),rt=Ae*-H;if(pe.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(rt),ie.translateZ(Ae),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert(),et[10]===-1)ie.projectionMatrix.copy(pe.projectionMatrix),ie.projectionMatrixInverse.copy(pe.projectionMatrixInverse);else{const Ue=tt+Ae,B=ht+Ae,k=Se-rt,ne=Ve+(_e-rt),he=me*ht/B*Ue,ye=xe*ht/B*Ue;ie.projectionMatrix.makePerspective(k,ne,he,ye,Ue,B),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}}function G(ie,pe){pe===null?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(pe.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(r===null)return;let pe=ie.near,be=ie.far;x.texture!==null&&(x.depthNear>0&&(pe=x.depthNear),x.depthFar>0&&(be=x.depthFar)),C.near=L.near=I.near=pe,C.far=L.far=I.far=be,(U!==C.near||j!==C.far)&&(r.updateRenderState({depthNear:C.near,depthFar:C.far}),U=C.near,j=C.far),I.layers.mask=ie.layers.mask|2,L.layers.mask=ie.layers.mask|4,C.layers.mask=I.layers.mask|L.layers.mask;const _e=ie.parent,et=C.cameras;G(C,_e);for(let at=0;at<et.length;at++)G(et[at],_e);et.length===2?D(C,I,L):C.projectionMatrix.copy(I.projectionMatrix),W(ie,C,_e)};function W(ie,pe,be){be===null?ie.matrix.copy(pe.matrixWorld):(ie.matrix.copy(be.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(pe.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0),ie.projectionMatrix.copy(pe.projectionMatrix),ie.projectionMatrixInverse.copy(pe.projectionMatrixInverse),ie.isPerspectiveCamera&&(ie.fov=qu*2*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(ie){l=ie,p!==null&&(p.fixedFoveation=ie),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ie)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(C)};let ee=null;function de(ie,pe){if(h=pe.getViewerPose(c||o),v=pe,h!==null){const be=h.views;m!==null&&(e.setRenderTargetFramebuffer(S,m.framebuffer),e.setRenderTarget(S));let _e=!1;be.length!==C.cameras.length&&(C.cameras.length=0,_e=!0);for(let at=0;at<be.length;at++){const tt=be[at];let ht=null;if(m!==null)ht=m.getViewport(tt);else{const xe=f.getViewSubImage(p,tt);ht=xe.viewport,at===0&&(e.setRenderTargetTextures(S,xe.colorTexture,p.ignoreDepthValues?void 0:xe.depthStencilTexture),e.setRenderTarget(S))}let me=R[at];me===void 0&&(me=new Qn,me.layers.enable(at),me.viewport=new kt,R[at]=me),me.matrix.fromArray(tt.transform.matrix),me.matrix.decompose(me.position,me.quaternion,me.scale),me.projectionMatrix.fromArray(tt.projectionMatrix),me.projectionMatrixInverse.copy(me.projectionMatrix).invert(),me.viewport.set(ht.x,ht.y,ht.width,ht.height),at===0&&(C.matrix.copy(me.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),_e===!0&&C.cameras.push(me)}const et=r.enabledFeatures;if(et&&et.includes("depth-sensing")){const at=f.getDepthInformation(be[0]);at&&at.isValid&&at.texture&&x.init(e,at,r.renderState)}}for(let be=0;be<w.length;be++){const _e=b[be],et=w[be];_e!==null&&et!==void 0&&et.update(_e,pe,c||o)}ee&&ee(ie,pe),pe.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:pe}),v=null}const Le=new Pk;Le.setAnimationLoop(de),this.setAnimationLoop=function(ie){ee=ie},this.dispose=function(){}}}const cl=new Cr,UY=new ct;function OY(n,e){function t(_,g){_.matrixAutoUpdate===!0&&_.updateMatrix(),g.value.copy(_.matrix)}function i(_,g){g.color.getRGB(_.fogColor.value,bk(n)),g.isFog?(_.fogNear.value=g.near,_.fogFar.value=g.far):g.isFogExp2&&(_.fogDensity.value=g.density)}function r(_,g,S,w,b){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(_,g):g.isMeshToonMaterial?(s(_,g),f(_,g)):g.isMeshPhongMaterial?(s(_,g),h(_,g)):g.isMeshStandardMaterial?(s(_,g),p(_,g),g.isMeshPhysicalMaterial&&m(_,g,b)):g.isMeshMatcapMaterial?(s(_,g),v(_,g)):g.isMeshDepthMaterial?s(_,g):g.isMeshDistanceMaterial?(s(_,g),x(_,g)):g.isMeshNormalMaterial?s(_,g):g.isLineBasicMaterial?(o(_,g),g.isLineDashedMaterial&&a(_,g)):g.isPointsMaterial?l(_,g,S,w):g.isSpriteMaterial?c(_,g):g.isShadowMaterial?(_.color.value.copy(g.color),_.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(_,g){_.opacity.value=g.opacity,g.color&&_.diffuse.value.copy(g.color),g.emissive&&_.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.bumpMap&&(_.bumpMap.value=g.bumpMap,t(g.bumpMap,_.bumpMapTransform),_.bumpScale.value=g.bumpScale,g.side===ki&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,t(g.normalMap,_.normalMapTransform),_.normalScale.value.copy(g.normalScale),g.side===ki&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,t(g.displacementMap,_.displacementMapTransform),_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias),g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,_.emissiveMapTransform)),g.specularMap&&(_.specularMap.value=g.specularMap,t(g.specularMap,_.specularMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest);const S=e.get(g),w=S.envMap,b=S.envMapRotation;w&&(_.envMap.value=w,cl.copy(b),cl.x*=-1,cl.y*=-1,cl.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(cl.y*=-1,cl.z*=-1),_.envMapRotation.value.setFromMatrix4(UY.makeRotationFromEuler(cl)),_.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=g.reflectivity,_.ior.value=g.ior,_.refractionRatio.value=g.refractionRatio),g.lightMap&&(_.lightMap.value=g.lightMap,_.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,_.lightMapTransform)),g.aoMap&&(_.aoMap.value=g.aoMap,_.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,_.aoMapTransform))}function o(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform))}function a(_,g){_.dashSize.value=g.dashSize,_.totalSize.value=g.dashSize+g.gapSize,_.scale.value=g.scale}function l(_,g,S,w){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.size.value=g.size*S,_.scale.value=w*.5,g.map&&(_.map.value=g.map,t(g.map,_.uvTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function c(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.rotation.value=g.rotation,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function h(_,g){_.specular.value.copy(g.specular),_.shininess.value=Math.max(g.shininess,1e-4)}function f(_,g){g.gradientMap&&(_.gradientMap.value=g.gradientMap)}function p(_,g){_.metalness.value=g.metalness,g.metalnessMap&&(_.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,_.metalnessMapTransform)),_.roughness.value=g.roughness,g.roughnessMap&&(_.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,_.roughnessMapTransform)),g.envMap&&(_.envMapIntensity.value=g.envMapIntensity)}function m(_,g,S){_.ior.value=g.ior,g.sheen>0&&(_.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),_.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(_.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,_.sheenColorMapTransform)),g.sheenRoughnessMap&&(_.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,_.sheenRoughnessMapTransform))),g.clearcoat>0&&(_.clearcoat.value=g.clearcoat,_.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(_.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,_.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(_.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===ki&&_.clearcoatNormalScale.value.negate())),g.dispersion>0&&(_.dispersion.value=g.dispersion),g.iridescence>0&&(_.iridescence.value=g.iridescence,_.iridescenceIOR.value=g.iridescenceIOR,_.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(_.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,_.iridescenceMapTransform)),g.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),g.transmission>0&&(_.transmission.value=g.transmission,_.transmissionSamplerMap.value=S.texture,_.transmissionSamplerSize.value.set(S.width,S.height),g.transmissionMap&&(_.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,_.transmissionMapTransform)),_.thickness.value=g.thickness,g.thicknessMap&&(_.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=g.attenuationDistance,_.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(_.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(_.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=g.specularIntensity,_.specularColor.value.copy(g.specularColor),g.specularColorMap&&(_.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,_.specularColorMapTransform)),g.specularIntensityMap&&(_.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,_.specularIntensityMapTransform))}function v(_,g){g.matcap&&(_.matcap.value=g.matcap)}function x(_,g){const S=e.get(g).light;_.referencePosition.value.setFromMatrixPosition(S.matrixWorld),_.nearDistance.value=S.shadow.camera.near,_.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function FY(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,w){const b=w.program;i.uniformBlockBinding(S,b)}function c(S,w){let b=r[S.id];b===void 0&&(v(S),b=h(S),r[S.id]=b,S.addEventListener("dispose",_));const A=w.program;i.updateUBOMapping(S,A);const P=e.render.frame;s[S.id]!==P&&(p(S),s[S.id]=P)}function h(S){const w=f();S.__bindingPointIndex=w;const b=n.createBuffer(),A=S.__size,P=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,b),n.bufferData(n.UNIFORM_BUFFER,A,P),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,b),b}function f(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(S){const w=r[S.id],b=S.uniforms,A=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,w);for(let P=0,I=b.length;P<I;P++){const L=Array.isArray(b[P])?b[P]:[b[P]];for(let R=0,C=L.length;R<C;R++){const U=L[R];if(m(U,P,R,A)===!0){const j=U.__offset,X=Array.isArray(U.value)?U.value:[U.value];let J=0;for(let se=0;se<X.length;se++){const Q=X[se],te=x(Q);typeof Q=="number"||typeof Q=="boolean"?(U.__data[0]=Q,n.bufferSubData(n.UNIFORM_BUFFER,j+J,U.__data)):Q.isMatrix3?(U.__data[0]=Q.elements[0],U.__data[1]=Q.elements[1],U.__data[2]=Q.elements[2],U.__data[3]=0,U.__data[4]=Q.elements[3],U.__data[5]=Q.elements[4],U.__data[6]=Q.elements[5],U.__data[7]=0,U.__data[8]=Q.elements[6],U.__data[9]=Q.elements[7],U.__data[10]=Q.elements[8],U.__data[11]=0):(Q.toArray(U.__data,J),J+=te.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,j,U.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(S,w,b,A){const P=S.value,I=w+"_"+b;if(A[I]===void 0)return typeof P=="number"||typeof P=="boolean"?A[I]=P:A[I]=P.clone(),!0;{const L=A[I];if(typeof P=="number"||typeof P=="boolean"){if(L!==P)return A[I]=P,!0}else if(L.equals(P)===!1)return L.copy(P),!0}return!1}function v(S){const w=S.uniforms;let b=0;const A=16;for(let I=0,L=w.length;I<L;I++){const R=Array.isArray(w[I])?w[I]:[w[I]];for(let C=0,U=R.length;C<U;C++){const j=R[C],X=Array.isArray(j.value)?j.value:[j.value];for(let J=0,se=X.length;J<se;J++){const Q=X[J],te=x(Q),D=b%A,G=D%te.boundary,W=D+G;b+=G,W!==0&&A-W<te.storage&&(b+=A-W),j.__data=new Float32Array(te.storage/Float32Array.BYTES_PER_ELEMENT),j.__offset=b,b+=te.storage}}}const P=b%A;return P>0&&(b+=A-P),S.__size=b,S.__cache={},this}function x(S){const w={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(w.boundary=4,w.storage=4):S.isVector2?(w.boundary=8,w.storage=8):S.isVector3||S.isColor?(w.boundary=16,w.storage=12):S.isVector4?(w.boundary=16,w.storage=16):S.isMatrix3?(w.boundary=48,w.storage=48):S.isMatrix4?(w.boundary=64,w.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),w}function _(S){const w=S.target;w.removeEventListener("dispose",_);const b=o.indexOf(w.__bindingPointIndex);o.splice(b,1),n.deleteBuffer(r[w.id]),delete r[w.id],delete s[w.id]}function g(){for(const S in r)n.deleteBuffer(r[S]);o=[],r={},s={}}return{bind:l,update:c,dispose:g}}class Uk{constructor(e={}){const{canvas:t=Sk(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:p=!1}=e;this.isWebGLRenderer=!0;let m;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=i.getContextAttributes().alpha}else m=o;const v=new Uint32Array(4),x=new Int32Array(4);let _=null,g=null;const S=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Xi,this.toneMapping=js,this.toneMappingExposure=1;const b=this;let A=!1,P=0,I=0,L=null,R=-1,C=null;const U=new kt,j=new kt;let X=null;const J=new Be(0);let se=0,Q=t.width,te=t.height,D=1,G=null,W=null;const ee=new kt(0,0,Q,te),de=new kt(0,0,Q,te);let Le=!1;const ie=new Kf;let pe=!1,be=!1;const _e=new ct,et=new ct,at=new z,tt=new kt,ht={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let me=!1;function xe(){return L===null?D:1}let H=i;function $e(O,K){return t.getContext(O,K)}try{const O={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Bv}`),t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",Fe,!1),t.addEventListener("webglcontextcreationerror",De,!1),H===null){const K="webgl2";if(H=$e(K,O),H===null)throw $e(K)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(O){throw console.error("THREE.WebGLRenderer: "+O.message),O}let Se,Ve,Ae,rt,Ue,B,k,ne,he,ye,fe,Ke,Pe,ze,Tt,Me,je,st,ut,Ge,Rt,ft,Wt,q;function Re(){Se=new G7(H),Se.init(),ft=new Dk(H,Se),Ve=new F7(H,Se,e,ft),Ae=new EY(H,Se),Ve.reverseDepthBuffer&&p&&Ae.buffers.depth.setReversed(!0),rt=new Y7(H),Ue=new hY,B=new RY(H,Se,Ae,Ue,Ve,ft,rt),k=new z7(b),ne=new j7(b),he=new eW(H),Wt=new U7(H,he),ye=new W7(H,he,rt,Wt),fe=new K7(H,ye,he,rt),ut=new q7(H,Ve,B),Me=new B7(Ue),Ke=new uY(b,k,ne,Se,Ve,Wt,Me),Pe=new OY(b,Ue),ze=new fY,Tt=new xY(Se),st=new k7(b,k,ne,Ae,fe,m,l),je=new wY(b,fe,Ve),q=new FY(H,rt,Ve,Ae),Ge=new O7(H,Se,rt),Rt=new X7(H,Se,rt),rt.programs=Ke.programs,b.capabilities=Ve,b.extensions=Se,b.properties=Ue,b.renderLists=ze,b.shadowMap=je,b.state=Ae,b.info=rt}Re();const ue=new kY(b,H);this.xr=ue,this.getContext=function(){return H},this.getContextAttributes=function(){return H.getContextAttributes()},this.forceContextLoss=function(){const O=Se.get("WEBGL_lose_context");O&&O.loseContext()},this.forceContextRestore=function(){const O=Se.get("WEBGL_lose_context");O&&O.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(O){O!==void 0&&(D=O,this.setSize(Q,te,!1))},this.getSize=function(O){return O.set(Q,te)},this.setSize=function(O,K,oe=!0){if(ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Q=O,te=K,t.width=Math.floor(O*D),t.height=Math.floor(K*D),oe===!0&&(t.style.width=O+"px",t.style.height=K+"px"),this.setViewport(0,0,O,K)},this.getDrawingBufferSize=function(O){return O.set(Q*D,te*D).floor()},this.setDrawingBufferSize=function(O,K,oe){Q=O,te=K,D=oe,t.width=Math.floor(O*oe),t.height=Math.floor(K*oe),this.setViewport(0,0,O,K)},this.getCurrentViewport=function(O){return O.copy(U)},this.getViewport=function(O){return O.copy(ee)},this.setViewport=function(O,K,oe,ae){O.isVector4?ee.set(O.x,O.y,O.z,O.w):ee.set(O,K,oe,ae),Ae.viewport(U.copy(ee).multiplyScalar(D).round())},this.getScissor=function(O){return O.copy(de)},this.setScissor=function(O,K,oe,ae){O.isVector4?de.set(O.x,O.y,O.z,O.w):de.set(O,K,oe,ae),Ae.scissor(j.copy(de).multiplyScalar(D).round())},this.getScissorTest=function(){return Le},this.setScissorTest=function(O){Ae.setScissorTest(Le=O)},this.setOpaqueSort=function(O){G=O},this.setTransparentSort=function(O){W=O},this.getClearColor=function(O){return O.copy(st.getClearColor())},this.setClearColor=function(){st.setClearColor.apply(st,arguments)},this.getClearAlpha=function(){return st.getClearAlpha()},this.setClearAlpha=function(){st.setClearAlpha.apply(st,arguments)},this.clear=function(O=!0,K=!0,oe=!0){let ae=0;if(O){let $=!1;if(L!==null){const Te=L.texture.format;$=Te===Yv||Te===Xv||Te===Wf}if($){const Te=L.texture.type,Ne=Te===ps||Te===Io||Te===Yu||Te===Ql||Te===jv||Te===Gv,Xe=st.getClearColor(),Ye=st.getClearAlpha(),lt=Xe.r,pt=Xe.g,qe=Xe.b;Ne?(v[0]=lt,v[1]=pt,v[2]=qe,v[3]=Ye,H.clearBufferuiv(H.COLOR,0,v)):(x[0]=lt,x[1]=pt,x[2]=qe,x[3]=Ye,H.clearBufferiv(H.COLOR,0,x))}else ae|=H.COLOR_BUFFER_BIT}K&&(ae|=H.DEPTH_BUFFER_BIT),oe&&(ae|=H.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),H.clear(ae)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",Fe,!1),t.removeEventListener("webglcontextcreationerror",De,!1),ze.dispose(),Tt.dispose(),Ue.dispose(),k.dispose(),ne.dispose(),fe.dispose(),Wt.dispose(),q.dispose(),Ke.dispose(),ue.dispose(),ue.removeEventListener("sessionstart",ip),ue.removeEventListener("sessionend",rp),_s.stop()};function ge(O){O.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function Fe(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const O=rt.autoReset,K=je.enabled,oe=je.autoUpdate,ae=je.needsUpdate,$=je.type;Re(),rt.autoReset=O,je.enabled=K,je.autoUpdate=oe,je.needsUpdate=ae,je.type=$}function De(O){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",O.statusMessage)}function dt(O){const K=O.target;K.removeEventListener("dispose",dt),nn(K)}function nn(O){Fn(O),Ue.remove(O)}function Fn(O){const K=Ue.get(O).programs;K!==void 0&&(K.forEach(function(oe){Ke.releaseProgram(oe)}),O.isShaderMaterial&&Ke.releaseShaderCache(O))}this.renderBufferDirect=function(O,K,oe,ae,$,Te){K===null&&(K=ht);const Ne=$.isMesh&&$.matrixWorld.determinant()<0,Xe=yy(O,K,oe,ae,$);Ae.setMaterial(ae,Ne);let Ye=oe.index,lt=1;if(ae.wireframe===!0){if(Ye=ye.getWireframeAttribute(oe),Ye===void 0)return;lt=2}const pt=oe.drawRange,qe=oe.attributes.position;let Mt=pt.start*lt,Nt=(pt.start+pt.count)*lt;Te!==null&&(Mt=Math.max(Mt,Te.start*lt),Nt=Math.min(Nt,(Te.start+Te.count)*lt)),Ye!==null?(Mt=Math.max(Mt,0),Nt=Math.min(Nt,Ye.count)):qe!=null&&(Mt=Math.max(Mt,0),Nt=Math.min(Nt,qe.count));const it=Nt-Mt;if(it<0||it===1/0)return;Wt.setup($,ae,Xe,oe,Ye);let xt,Et=Ge;if(Ye!==null&&(xt=he.get(Ye),Et=Rt,Et.setIndex(xt)),$.isMesh)ae.wireframe===!0?(Ae.setLineWidth(ae.wireframeLinewidth*xe()),Et.setMode(H.LINES)):Et.setMode(H.TRIANGLES);else if($.isLine){let ke=ae.linewidth;ke===void 0&&(ke=1),Ae.setLineWidth(ke*xe()),$.isLineSegments?Et.setMode(H.LINES):$.isLineLoop?Et.setMode(H.LINE_LOOP):Et.setMode(H.LINE_STRIP)}else $.isPoints?Et.setMode(H.POINTS):$.isSprite&&Et.setMode(H.TRIANGLES);if($.isBatchedMesh)if($._multiDrawInstances!==null)Et.renderMultiDrawInstances($._multiDrawStarts,$._multiDrawCounts,$._multiDrawCount,$._multiDrawInstances);else if(Se.get("WEBGL_multi_draw"))Et.renderMultiDraw($._multiDrawStarts,$._multiDrawCounts,$._multiDrawCount);else{const ke=$._multiDrawStarts,rn=$._multiDrawCounts,At=$._multiDrawCount,Wn=Ye?he.get(Ye).bytesPerElement:1,bn=Ue.get(ae).currentProgram.getUniforms();for(let Xn=0;Xn<At;Xn++)bn.setValue(H,"_gl_DrawID",Xn),Et.render(ke[Xn]/Wn,rn[Xn])}else if($.isInstancedMesh)Et.renderInstances(Mt,it,$.count);else if(oe.isInstancedBufferGeometry){const ke=oe._maxInstanceCount!==void 0?oe._maxInstanceCount:1/0,rn=Math.min(oe.instanceCount,ke);Et.renderInstances(Mt,it,rn)}else Et.render(Mt,it)};function Ft(O,K,oe){O.transparent===!0&&O.side===ks&&O.forceSinglePass===!1?(O.side=ki,O.needsUpdate=!0,fc(O,K,oe),O.side=Ro,O.needsUpdate=!0,fc(O,K,oe),O.side=ks):fc(O,K,oe)}this.compile=function(O,K,oe=null){oe===null&&(oe=O),g=Tt.get(oe),g.init(K),w.push(g),oe.traverseVisible(function($){$.isLight&&$.layers.test(K.layers)&&(g.pushLight($),$.castShadow&&g.pushShadow($))}),O!==oe&&O.traverseVisible(function($){$.isLight&&$.layers.test(K.layers)&&(g.pushLight($),$.castShadow&&g.pushShadow($))}),g.setupLights();const ae=new Set;return O.traverse(function($){if(!($.isMesh||$.isPoints||$.isLine||$.isSprite))return;const Te=$.material;if(Te)if(Array.isArray(Te))for(let Ne=0;Ne<Te.length;Ne++){const Xe=Te[Ne];Ft(Xe,oe,$),ae.add(Xe)}else Ft(Te,oe,$),ae.add(Te)}),w.pop(),g=null,ae},this.compileAsync=function(O,K,oe=null){const ae=this.compile(O,K,oe);return new Promise($=>{function Te(){if(ae.forEach(function(Ne){Ue.get(Ne).currentProgram.isReady()&&ae.delete(Ne)}),ae.size===0){$(O);return}setTimeout(Te,10)}Se.get("KHR_parallel_shader_compile")!==null?Te():setTimeout(Te,10)})};let zi=null;function Qr(O){zi&&zi(O)}function ip(){_s.stop()}function rp(){_s.start()}const _s=new Pk;_s.setAnimationLoop(Qr),typeof self<"u"&&_s.setContext(self),this.setAnimationLoop=function(O){zi=O,ue.setAnimationLoop(O),O===null?_s.stop():_s.start()},ue.addEventListener("sessionstart",ip),ue.addEventListener("sessionend",rp),this.render=function(O,K){if(K!==void 0&&K.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;if(O.matrixWorldAutoUpdate===!0&&O.updateMatrixWorld(),K.parent===null&&K.matrixWorldAutoUpdate===!0&&K.updateMatrixWorld(),ue.enabled===!0&&ue.isPresenting===!0&&(ue.cameraAutoUpdate===!0&&ue.updateCamera(K),K=ue.getCamera()),O.isScene===!0&&O.onBeforeRender(b,O,K,L),g=Tt.get(O,w.length),g.init(K),w.push(g),et.multiplyMatrices(K.projectionMatrix,K.matrixWorldInverse),ie.setFromProjectionMatrix(et),be=this.localClippingEnabled,pe=Me.init(this.clippingPlanes,be),_=ze.get(O,S.length),_.init(),S.push(_),ue.enabled===!0&&ue.isPresenting===!0){const Te=b.xr.getDepthSensingMesh();Te!==null&&Wa(Te,K,-1/0,b.sortObjects)}Wa(O,K,0,b.sortObjects),_.finish(),b.sortObjects===!0&&_.sort(G,W),me=ue.enabled===!1||ue.isPresenting===!1||ue.hasDepthSensing()===!1,me&&st.addToRenderList(_,O),this.info.render.frame++,pe===!0&&Me.beginShadows();const oe=g.state.shadowsArray;je.render(oe,O,K),pe===!0&&Me.endShadows(),this.info.autoReset===!0&&this.info.reset();const ae=_.opaque,$=_.transmissive;if(g.setupLights(),K.isArrayCamera){const Te=K.cameras;if($.length>0)for(let Ne=0,Xe=Te.length;Ne<Xe;Ne++){const Ye=Te[Ne];ko(ae,$,O,Ye)}me&&st.render(O);for(let Ne=0,Xe=Te.length;Ne<Xe;Ne++){const Ye=Te[Ne];sp(_,O,Ye,Ye.viewport)}}else $.length>0&&ko(ae,$,O,K),me&&st.render(O),sp(_,O,K);L!==null&&(B.updateMultisampleRenderTarget(L),B.updateRenderTargetMipmap(L)),O.isScene===!0&&O.onAfterRender(b,O,K),Wt.resetDefaultState(),R=-1,C=null,w.pop(),w.length>0?(g=w[w.length-1],pe===!0&&Me.setGlobalState(b.clippingPlanes,g.state.camera)):g=null,S.pop(),S.length>0?_=S[S.length-1]:_=null};function Wa(O,K,oe,ae){if(O.visible===!1)return;if(O.layers.test(K.layers)){if(O.isGroup)oe=O.renderOrder;else if(O.isLOD)O.autoUpdate===!0&&O.update(K);else if(O.isLight)g.pushLight(O),O.castShadow&&g.pushShadow(O);else if(O.isSprite){if(!O.frustumCulled||ie.intersectsSprite(O)){ae&&tt.setFromMatrixPosition(O.matrixWorld).applyMatrix4(et);const Ne=fe.update(O),Xe=O.material;Xe.visible&&_.push(O,Ne,Xe,oe,tt.z,null)}}else if((O.isMesh||O.isLine||O.isPoints)&&(!O.frustumCulled||ie.intersectsObject(O))){const Ne=fe.update(O),Xe=O.material;if(ae&&(O.boundingSphere!==void 0?(O.boundingSphere===null&&O.computeBoundingSphere(),tt.copy(O.boundingSphere.center)):(Ne.boundingSphere===null&&Ne.computeBoundingSphere(),tt.copy(Ne.boundingSphere.center)),tt.applyMatrix4(O.matrixWorld).applyMatrix4(et)),Array.isArray(Xe)){const Ye=Ne.groups;for(let lt=0,pt=Ye.length;lt<pt;lt++){const qe=Ye[lt],Mt=Xe[qe.materialIndex];Mt&&Mt.visible&&_.push(O,Ne,Mt,oe,tt.z,qe)}}else Xe.visible&&_.push(O,Ne,Xe,oe,tt.z,null)}}const Te=O.children;for(let Ne=0,Xe=Te.length;Ne<Xe;Ne++)Wa(Te[Ne],K,oe,ae)}function sp(O,K,oe,ae){const $=O.opaque,Te=O.transmissive,Ne=O.transparent;g.setupLightsView(oe),pe===!0&&Me.setGlobalState(b.clippingPlanes,oe),ae&&Ae.viewport(U.copy(ae)),$.length>0&&dc($,K,oe),Te.length>0&&dc(Te,K,oe),Ne.length>0&&dc(Ne,K,oe),Ae.buffers.depth.setTest(!0),Ae.buffers.depth.setMask(!0),Ae.buffers.color.setMask(!0),Ae.setPolygonOffset(!1)}function ko(O,K,oe,ae){if((oe.isScene===!0?oe.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[ae.id]===void 0&&(g.state.transmissionRenderTarget[ae.id]=new ms(1,1,{generateMipmaps:!0,type:Se.has("EXT_color_buffer_half_float")||Se.has("EXT_color_buffer_float")?sh:ps,minFilter:Os,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:It.workingColorSpace}));const Te=g.state.transmissionRenderTarget[ae.id],Ne=ae.viewport||U;Te.setSize(Ne.z,Ne.w);const Xe=b.getRenderTarget();b.setRenderTarget(Te),b.getClearColor(J),se=b.getClearAlpha(),se<1&&b.setClearColor(16777215,.5),b.clear(),me&&st.render(oe);const Ye=b.toneMapping;b.toneMapping=js;const lt=ae.viewport;if(ae.viewport!==void 0&&(ae.viewport=void 0),g.setupLightsView(ae),pe===!0&&Me.setGlobalState(b.clippingPlanes,ae),dc(O,oe,ae),B.updateMultisampleRenderTarget(Te),B.updateRenderTargetMipmap(Te),Se.has("WEBGL_multisampled_render_to_texture")===!1){let pt=!1;for(let qe=0,Mt=K.length;qe<Mt;qe++){const Nt=K[qe],it=Nt.object,xt=Nt.geometry,Et=Nt.material,ke=Nt.group;if(Et.side===ks&&it.layers.test(ae.layers)){const rn=Et.side;Et.side=ki,Et.needsUpdate=!0,op(it,oe,ae,xt,Et,ke),Et.side=rn,Et.needsUpdate=!0,pt=!0}}pt===!0&&(B.updateMultisampleRenderTarget(Te),B.updateRenderTargetMipmap(Te))}b.setRenderTarget(Xe),b.setClearColor(J,se),lt!==void 0&&(ae.viewport=lt),b.toneMapping=Ye}function dc(O,K,oe){const ae=K.isScene===!0?K.overrideMaterial:null;for(let $=0,Te=O.length;$<Te;$++){const Ne=O[$],Xe=Ne.object,Ye=Ne.geometry,lt=ae===null?Ne.material:ae,pt=Ne.group;Xe.layers.test(oe.layers)&&op(Xe,K,oe,Ye,lt,pt)}}function op(O,K,oe,ae,$,Te){O.onBeforeRender(b,K,oe,ae,$,Te),O.modelViewMatrix.multiplyMatrices(oe.matrixWorldInverse,O.matrixWorld),O.normalMatrix.getNormalMatrix(O.modelViewMatrix),$.onBeforeRender(b,K,oe,ae,O,Te),$.transparent===!0&&$.side===ks&&$.forceSinglePass===!1?($.side=ki,$.needsUpdate=!0,b.renderBufferDirect(oe,K,ae,$,O,Te),$.side=Ro,$.needsUpdate=!0,b.renderBufferDirect(oe,K,ae,$,O,Te),$.side=ks):b.renderBufferDirect(oe,K,ae,$,O,Te),O.onAfterRender(b,K,oe,ae,$,Te)}function fc(O,K,oe){K.isScene!==!0&&(K=ht);const ae=Ue.get(O),$=g.state.lights,Te=g.state.shadowsArray,Ne=$.state.version,Xe=Ke.getParameters(O,$.state,Te,K,oe),Ye=Ke.getProgramCacheKey(Xe);let lt=ae.programs;ae.environment=O.isMeshStandardMaterial?K.environment:null,ae.fog=K.fog,ae.envMap=(O.isMeshStandardMaterial?ne:k).get(O.envMap||ae.environment),ae.envMapRotation=ae.environment!==null&&O.envMap===null?K.environmentRotation:O.envMapRotation,lt===void 0&&(O.addEventListener("dispose",dt),lt=new Map,ae.programs=lt);let pt=lt.get(Ye);if(pt!==void 0){if(ae.currentProgram===pt&&ae.lightsStateVersion===Ne)return lp(O,Xe),pt}else Xe.uniforms=Ke.getUniforms(O),O.onBeforeCompile(Xe,b),pt=Ke.acquireProgram(Xe,Ye),lt.set(Ye,pt),ae.uniforms=Xe.uniforms;const qe=ae.uniforms;return(!O.isShaderMaterial&&!O.isRawShaderMaterial||O.clipping===!0)&&(qe.clippingPlanes=Me.uniform),lp(O,Xe),ae.needsLights=cp(O),ae.lightsStateVersion=Ne,ae.needsLights&&(qe.ambientLightColor.value=$.state.ambient,qe.lightProbe.value=$.state.probe,qe.directionalLights.value=$.state.directional,qe.directionalLightShadows.value=$.state.directionalShadow,qe.spotLights.value=$.state.spot,qe.spotLightShadows.value=$.state.spotShadow,qe.rectAreaLights.value=$.state.rectArea,qe.ltc_1.value=$.state.rectAreaLTC1,qe.ltc_2.value=$.state.rectAreaLTC2,qe.pointLights.value=$.state.point,qe.pointLightShadows.value=$.state.pointShadow,qe.hemisphereLights.value=$.state.hemi,qe.directionalShadowMap.value=$.state.directionalShadowMap,qe.directionalShadowMatrix.value=$.state.directionalShadowMatrix,qe.spotShadowMap.value=$.state.spotShadowMap,qe.spotLightMatrix.value=$.state.spotLightMatrix,qe.spotLightMap.value=$.state.spotLightMap,qe.pointShadowMap.value=$.state.pointShadowMap,qe.pointShadowMatrix.value=$.state.pointShadowMatrix),ae.currentProgram=pt,ae.uniformsList=null,pt}function ap(O){if(O.uniformsList===null){const K=O.currentProgram.getUniforms();O.uniformsList=Og.seqWithValue(K.seq,O.uniforms)}return O.uniformsList}function lp(O,K){const oe=Ue.get(O);oe.outputColorSpace=K.outputColorSpace,oe.batching=K.batching,oe.batchingColor=K.batchingColor,oe.instancing=K.instancing,oe.instancingColor=K.instancingColor,oe.instancingMorph=K.instancingMorph,oe.skinning=K.skinning,oe.morphTargets=K.morphTargets,oe.morphNormals=K.morphNormals,oe.morphColors=K.morphColors,oe.morphTargetsCount=K.morphTargetsCount,oe.numClippingPlanes=K.numClippingPlanes,oe.numIntersection=K.numClipIntersection,oe.vertexAlphas=K.vertexAlphas,oe.vertexTangents=K.vertexTangents,oe.toneMapping=K.toneMapping}function yy(O,K,oe,ae,$){K.isScene!==!0&&(K=ht),B.resetTextureUnits();const Te=K.fog,Ne=ae.isMeshStandardMaterial?K.environment:null,Xe=L===null?b.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:ac,Ye=(ae.isMeshStandardMaterial?ne:k).get(ae.envMap||Ne),lt=ae.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,pt=!!oe.attributes.tangent&&(!!ae.normalMap||ae.anisotropy>0),qe=!!oe.morphAttributes.position,Mt=!!oe.morphAttributes.normal,Nt=!!oe.morphAttributes.color;let it=js;ae.toneMapped&&(L===null||L.isXRRenderTarget===!0)&&(it=b.toneMapping);const xt=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,Et=xt!==void 0?xt.length:0,ke=Ue.get(ae),rn=g.state.lights;if(pe===!0&&(be===!0||O!==C)){const sn=O===C&&ae.id===R;Me.setState(ae,O,sn)}let At=!1;ae.version===ke.__version?(ke.needsLights&&ke.lightsStateVersion!==rn.state.version||ke.outputColorSpace!==Xe||$.isBatchedMesh&&ke.batching===!1||!$.isBatchedMesh&&ke.batching===!0||$.isBatchedMesh&&ke.batchingColor===!0&&$.colorTexture===null||$.isBatchedMesh&&ke.batchingColor===!1&&$.colorTexture!==null||$.isInstancedMesh&&ke.instancing===!1||!$.isInstancedMesh&&ke.instancing===!0||$.isSkinnedMesh&&ke.skinning===!1||!$.isSkinnedMesh&&ke.skinning===!0||$.isInstancedMesh&&ke.instancingColor===!0&&$.instanceColor===null||$.isInstancedMesh&&ke.instancingColor===!1&&$.instanceColor!==null||$.isInstancedMesh&&ke.instancingMorph===!0&&$.morphTexture===null||$.isInstancedMesh&&ke.instancingMorph===!1&&$.morphTexture!==null||ke.envMap!==Ye||ae.fog===!0&&ke.fog!==Te||ke.numClippingPlanes!==void 0&&(ke.numClippingPlanes!==Me.numPlanes||ke.numIntersection!==Me.numIntersection)||ke.vertexAlphas!==lt||ke.vertexTangents!==pt||ke.morphTargets!==qe||ke.morphNormals!==Mt||ke.morphColors!==Nt||ke.toneMapping!==it||ke.morphTargetsCount!==Et)&&(At=!0):(At=!0,ke.__version=ae.version);let Wn=ke.currentProgram;At===!0&&(Wn=fc(ae,K,$));let bn=!1,Xn=!1,Uo=!1;const Xt=Wn.getUniforms(),Ti=ke.uniforms;if(Ae.useProgram(Wn.program)&&(bn=!0,Xn=!0,Uo=!0),ae.id!==R&&(R=ae.id,Xn=!0),bn||C!==O){Ae.buffers.depth.getReversed()?(_e.copy(O.projectionMatrix),bG(_e),TG(_e),Xt.setValue(H,"projectionMatrix",_e)):Xt.setValue(H,"projectionMatrix",O.projectionMatrix),Xt.setValue(H,"viewMatrix",O.matrixWorldInverse);const Ss=Xt.map.cameraPosition;Ss!==void 0&&Ss.setValue(H,at.setFromMatrixPosition(O.matrixWorld)),Ve.logarithmicDepthBuffer&&Xt.setValue(H,"logDepthBufFC",2/(Math.log(O.far+1)/Math.LN2)),(ae.isMeshPhongMaterial||ae.isMeshToonMaterial||ae.isMeshLambertMaterial||ae.isMeshBasicMaterial||ae.isMeshStandardMaterial||ae.isShaderMaterial)&&Xt.setValue(H,"isOrthographic",O.isOrthographicCamera===!0),C!==O&&(C=O,Xn=!0,Uo=!0)}if($.isSkinnedMesh){Xt.setOptional(H,$,"bindMatrix"),Xt.setOptional(H,$,"bindMatrixInverse");const sn=$.skeleton;sn&&(sn.boneTexture===null&&sn.computeBoneTexture(),Xt.setValue(H,"boneTexture",sn.boneTexture,B))}$.isBatchedMesh&&(Xt.setOptional(H,$,"batchingTexture"),Xt.setValue(H,"batchingTexture",$._matricesTexture,B),Xt.setOptional(H,$,"batchingIdTexture"),Xt.setValue(H,"batchingIdTexture",$._indirectTexture,B),Xt.setOptional(H,$,"batchingColorTexture"),$._colorsTexture!==null&&Xt.setValue(H,"batchingColorTexture",$._colorsTexture,B));const Oo=oe.morphAttributes;if((Oo.position!==void 0||Oo.normal!==void 0||Oo.color!==void 0)&&ut.update($,oe,Wn),(Xn||ke.receiveShadow!==$.receiveShadow)&&(ke.receiveShadow=$.receiveShadow,Xt.setValue(H,"receiveShadow",$.receiveShadow)),ae.isMeshGouraudMaterial&&ae.envMap!==null&&(Ti.envMap.value=Ye,Ti.flipEnvMap.value=Ye.isCubeTexture&&Ye.isRenderTargetTexture===!1?-1:1),ae.isMeshStandardMaterial&&ae.envMap===null&&K.environment!==null&&(Ti.envMapIntensity.value=K.environmentIntensity),Xn&&(Xt.setValue(H,"toneMappingExposure",b.toneMappingExposure),ke.needsLights&&xy(Ti,Uo),Te&&ae.fog===!0&&Pe.refreshFogUniforms(Ti,Te),Pe.refreshMaterialUniforms(Ti,ae,D,te,g.state.transmissionRenderTarget[O.id]),Og.upload(H,ap(ke),Ti,B)),ae.isShaderMaterial&&ae.uniformsNeedUpdate===!0&&(Og.upload(H,ap(ke),Ti,B),ae.uniformsNeedUpdate=!1),ae.isSpriteMaterial&&Xt.setValue(H,"center",$.center),Xt.setValue(H,"modelViewMatrix",$.modelViewMatrix),Xt.setValue(H,"normalMatrix",$.normalMatrix),Xt.setValue(H,"modelMatrix",$.matrixWorld),ae.isShaderMaterial||ae.isRawShaderMaterial){const sn=ae.uniformsGroups;for(let Ss=0,ws=sn.length;Ss<ws;Ss++){const up=sn[Ss];q.update(up,Wn),q.bind(up,Wn)}}return Wn}function xy(O,K){O.ambientLightColor.needsUpdate=K,O.lightProbe.needsUpdate=K,O.directionalLights.needsUpdate=K,O.directionalLightShadows.needsUpdate=K,O.pointLights.needsUpdate=K,O.pointLightShadows.needsUpdate=K,O.spotLights.needsUpdate=K,O.spotLightShadows.needsUpdate=K,O.rectAreaLights.needsUpdate=K,O.hemisphereLights.needsUpdate=K}function cp(O){return O.isMeshLambertMaterial||O.isMeshToonMaterial||O.isMeshPhongMaterial||O.isMeshStandardMaterial||O.isShadowMaterial||O.isShaderMaterial&&O.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(O,K,oe){Ue.get(O.texture).__webglTexture=K,Ue.get(O.depthTexture).__webglTexture=oe;const ae=Ue.get(O);ae.__hasExternalTextures=!0,ae.__autoAllocateDepthBuffer=oe===void 0,ae.__autoAllocateDepthBuffer||Se.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ae.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(O,K){const oe=Ue.get(O);oe.__webglFramebuffer=K,oe.__useDefaultFramebuffer=K===void 0},this.setRenderTarget=function(O,K=0,oe=0){L=O,P=K,I=oe;let ae=!0,$=null,Te=!1,Ne=!1;if(O){const Ye=Ue.get(O);if(Ye.__useDefaultFramebuffer!==void 0)Ae.bindFramebuffer(H.FRAMEBUFFER,null),ae=!1;else if(Ye.__webglFramebuffer===void 0)B.setupRenderTarget(O);else if(Ye.__hasExternalTextures)B.rebindTextures(O,Ue.get(O.texture).__webglTexture,Ue.get(O.depthTexture).__webglTexture);else if(O.depthBuffer){const qe=O.depthTexture;if(Ye.__boundDepthTexture!==qe){if(qe!==null&&Ue.has(qe)&&(O.width!==qe.image.width||O.height!==qe.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");B.setupDepthRenderbuffer(O)}}const lt=O.texture;(lt.isData3DTexture||lt.isDataArrayTexture||lt.isCompressedArrayTexture)&&(Ne=!0);const pt=Ue.get(O).__webglFramebuffer;O.isWebGLCubeRenderTarget?(Array.isArray(pt[K])?$=pt[K][oe]:$=pt[K],Te=!0):O.samples>0&&B.useMultisampledRTT(O)===!1?$=Ue.get(O).__webglMultisampledFramebuffer:Array.isArray(pt)?$=pt[oe]:$=pt,U.copy(O.viewport),j.copy(O.scissor),X=O.scissorTest}else U.copy(ee).multiplyScalar(D).floor(),j.copy(de).multiplyScalar(D).floor(),X=Le;if(Ae.bindFramebuffer(H.FRAMEBUFFER,$)&&ae&&Ae.drawBuffers(O,$),Ae.viewport(U),Ae.scissor(j),Ae.setScissorTest(X),Te){const Ye=Ue.get(O.texture);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_CUBE_MAP_POSITIVE_X+K,Ye.__webglTexture,oe)}else if(Ne){const Ye=Ue.get(O.texture),lt=K||0;H.framebufferTextureLayer(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,Ye.__webglTexture,oe||0,lt)}R=-1},this.readRenderTargetPixels=function(O,K,oe,ae,$,Te,Ne){if(!(O&&O.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Xe=Ue.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&Ne!==void 0&&(Xe=Xe[Ne]),Xe){Ae.bindFramebuffer(H.FRAMEBUFFER,Xe);try{const Ye=O.texture,lt=Ye.format,pt=Ye.type;if(!Ve.textureFormatReadable(lt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ve.textureTypeReadable(pt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}K>=0&&K<=O.width-ae&&oe>=0&&oe<=O.height-$&&H.readPixels(K,oe,ae,$,ft.convert(lt),ft.convert(pt),Te)}finally{const Ye=L!==null?Ue.get(L).__webglFramebuffer:null;Ae.bindFramebuffer(H.FRAMEBUFFER,Ye)}}},this.readRenderTargetPixelsAsync=async function(O,K,oe,ae,$,Te,Ne){if(!(O&&O.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Xe=Ue.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&Ne!==void 0&&(Xe=Xe[Ne]),Xe){const Ye=O.texture,lt=Ye.format,pt=Ye.type;if(!Ve.textureFormatReadable(lt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ve.textureTypeReadable(pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(K>=0&&K<=O.width-ae&&oe>=0&&oe<=O.height-$){Ae.bindFramebuffer(H.FRAMEBUFFER,Xe);const qe=H.createBuffer();H.bindBuffer(H.PIXEL_PACK_BUFFER,qe),H.bufferData(H.PIXEL_PACK_BUFFER,Te.byteLength,H.STREAM_READ),H.readPixels(K,oe,ae,$,ft.convert(lt),ft.convert(pt),0);const Mt=L!==null?Ue.get(L).__webglFramebuffer:null;Ae.bindFramebuffer(H.FRAMEBUFFER,Mt);const Nt=H.fenceSync(H.SYNC_GPU_COMMANDS_COMPLETE,0);return H.flush(),await EG(H,Nt,4),H.bindBuffer(H.PIXEL_PACK_BUFFER,qe),H.getBufferSubData(H.PIXEL_PACK_BUFFER,0,Te),H.deleteBuffer(qe),H.deleteSync(Nt),Te}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(O,K=null,oe=0){O.isTexture!==!0&&(ld("WebGLRenderer: copyFramebufferToTexture function signature has changed."),K=arguments[0]||null,O=arguments[1]);const ae=Math.pow(2,-oe),$=Math.floor(O.image.width*ae),Te=Math.floor(O.image.height*ae),Ne=K!==null?K.x:0,Xe=K!==null?K.y:0;B.setTexture2D(O,0),H.copyTexSubImage2D(H.TEXTURE_2D,oe,0,0,Ne,Xe,$,Te),Ae.unbindTexture()},this.copyTextureToTexture=function(O,K,oe=null,ae=null,$=0){O.isTexture!==!0&&(ld("WebGLRenderer: copyTextureToTexture function signature has changed."),ae=arguments[0]||null,O=arguments[1],K=arguments[2],$=arguments[3]||0,oe=null);let Te,Ne,Xe,Ye,lt,pt,qe,Mt,Nt;const it=O.isCompressedTexture?O.mipmaps[$]:O.image;oe!==null?(Te=oe.max.x-oe.min.x,Ne=oe.max.y-oe.min.y,Xe=oe.isBox3?oe.max.z-oe.min.z:1,Ye=oe.min.x,lt=oe.min.y,pt=oe.isBox3?oe.min.z:0):(Te=it.width,Ne=it.height,Xe=it.depth||1,Ye=0,lt=0,pt=0),ae!==null?(qe=ae.x,Mt=ae.y,Nt=ae.z):(qe=0,Mt=0,Nt=0);const xt=ft.convert(K.format),Et=ft.convert(K.type);let ke;K.isData3DTexture?(B.setTexture3D(K,0),ke=H.TEXTURE_3D):K.isDataArrayTexture||K.isCompressedArrayTexture?(B.setTexture2DArray(K,0),ke=H.TEXTURE_2D_ARRAY):(B.setTexture2D(K,0),ke=H.TEXTURE_2D),H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,K.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,K.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,K.unpackAlignment);const rn=H.getParameter(H.UNPACK_ROW_LENGTH),At=H.getParameter(H.UNPACK_IMAGE_HEIGHT),Wn=H.getParameter(H.UNPACK_SKIP_PIXELS),bn=H.getParameter(H.UNPACK_SKIP_ROWS),Xn=H.getParameter(H.UNPACK_SKIP_IMAGES);H.pixelStorei(H.UNPACK_ROW_LENGTH,it.width),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,it.height),H.pixelStorei(H.UNPACK_SKIP_PIXELS,Ye),H.pixelStorei(H.UNPACK_SKIP_ROWS,lt),H.pixelStorei(H.UNPACK_SKIP_IMAGES,pt);const Uo=O.isDataArrayTexture||O.isData3DTexture,Xt=K.isDataArrayTexture||K.isData3DTexture;if(O.isRenderTargetTexture||O.isDepthTexture){const Ti=Ue.get(O),Oo=Ue.get(K),sn=Ue.get(Ti.__renderTarget),Ss=Ue.get(Oo.__renderTarget);Ae.bindFramebuffer(H.READ_FRAMEBUFFER,sn.__webglFramebuffer),Ae.bindFramebuffer(H.DRAW_FRAMEBUFFER,Ss.__webglFramebuffer);for(let ws=0;ws<Xe;ws++)Uo&&H.framebufferTextureLayer(H.READ_FRAMEBUFFER,H.COLOR_ATTACHMENT0,Ue.get(O).__webglTexture,$,pt+ws),O.isDepthTexture?(Xt&&H.framebufferTextureLayer(H.DRAW_FRAMEBUFFER,H.COLOR_ATTACHMENT0,Ue.get(K).__webglTexture,$,Nt+ws),H.blitFramebuffer(Ye,lt,Te,Ne,qe,Mt,Te,Ne,H.DEPTH_BUFFER_BIT,H.NEAREST)):Xt?H.copyTexSubImage3D(ke,$,qe,Mt,Nt+ws,Ye,lt,Te,Ne):H.copyTexSubImage2D(ke,$,qe,Mt,Nt+ws,Ye,lt,Te,Ne);Ae.bindFramebuffer(H.READ_FRAMEBUFFER,null),Ae.bindFramebuffer(H.DRAW_FRAMEBUFFER,null)}else Xt?O.isDataTexture||O.isData3DTexture?H.texSubImage3D(ke,$,qe,Mt,Nt,Te,Ne,Xe,xt,Et,it.data):K.isCompressedArrayTexture?H.compressedTexSubImage3D(ke,$,qe,Mt,Nt,Te,Ne,Xe,xt,it.data):H.texSubImage3D(ke,$,qe,Mt,Nt,Te,Ne,Xe,xt,Et,it):O.isDataTexture?H.texSubImage2D(H.TEXTURE_2D,$,qe,Mt,Te,Ne,xt,Et,it.data):O.isCompressedTexture?H.compressedTexSubImage2D(H.TEXTURE_2D,$,qe,Mt,it.width,it.height,xt,it.data):H.texSubImage2D(H.TEXTURE_2D,$,qe,Mt,Te,Ne,xt,Et,it);H.pixelStorei(H.UNPACK_ROW_LENGTH,rn),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,At),H.pixelStorei(H.UNPACK_SKIP_PIXELS,Wn),H.pixelStorei(H.UNPACK_SKIP_ROWS,bn),H.pixelStorei(H.UNPACK_SKIP_IMAGES,Xn),$===0&&K.generateMipmaps&&H.generateMipmap(ke),Ae.unbindTexture()},this.copyTextureToTexture3D=function(O,K,oe=null,ae=null,$=0){return O.isTexture!==!0&&(ld("WebGLRenderer: copyTextureToTexture3D function signature has changed."),oe=arguments[0]||null,ae=arguments[1]||null,O=arguments[2],K=arguments[3],$=arguments[4]||0),ld('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(O,K,oe,ae,$)},this.initRenderTarget=function(O){Ue.get(O).__webglFramebuffer===void 0&&B.setupRenderTarget(O)},this.initTexture=function(O){O.isCubeTexture?B.setTextureCube(O,0):O.isData3DTexture?B.setTexture3D(O,0):O.isDataArrayTexture||O.isCompressedArrayTexture?B.setTexture2DArray(O,0):B.setTexture2D(O,0),Ae.unbindTexture()},this.resetState=function(){P=0,I=0,L=null,Ae.reset(),Wt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Fs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=It._getDrawingBufferColorSpace(e),t.unpackColorSpace=It._getUnpackColorSpace()}}class $v{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Be(e),this.density=t}clone(){return new $v(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Qv{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Be(e),this.near=t,this.far=i}clone(){return new Qv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class CE extends Ot{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Cr,this.environmentIntensity=1,this.environmentRotation=new Cr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Jv{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=wf,this.updateRanges=[],this.version=0,this.uuid=Mr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Pi=new z;class ec{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Pi.fromBufferAttribute(this,t),Pi.applyMatrix4(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Pi.fromBufferAttribute(this,t),Pi.applyNormalMatrix(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Pi.fromBufferAttribute(this,t),Pi.transformDirection(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Li(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=yt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=yt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=yt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=yt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=yt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Li(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Li(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Li(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Li(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=yt(t,this.array),i=yt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=yt(t,this.array),i=yt(i,this.array),r=yt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=yt(t,this.array),i=yt(i,this.array),r=yt(r,this.array),s=yt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Yt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ec(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class PE extends bi{static get type(){return"SpriteMaterial"}constructor(e){super(),this.isSpriteMaterial=!0,this.color=new Be(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Vc;const jh=new z,Hc=new z,jc=new z,Gc=new ve,Gh=new ve,Ok=new ct,Wm=new z,Wh=new z,Xm=new z,x2=new ve,X_=new ve,_2=new ve;class Fk extends Ot{constructor(e=new PE){if(super(),this.isSprite=!0,this.type="Sprite",Vc===void 0){Vc=new St;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Jv(t,5);Vc.setIndex([0,1,2,0,2,3]),Vc.setAttribute("position",new ec(i,3,0,!1)),Vc.setAttribute("uv",new ec(i,2,3,!1))}this.geometry=Vc,this.material=e,this.center=new ve(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Hc.setFromMatrixScale(this.matrixWorld),Ok.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),jc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Hc.multiplyScalar(-jc.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Ym(Wm.set(-.5,-.5,0),jc,o,Hc,r,s),Ym(Wh.set(.5,-.5,0),jc,o,Hc,r,s),Ym(Xm.set(.5,.5,0),jc,o,Hc,r,s),x2.set(0,0),X_.set(1,0),_2.set(1,1);let a=e.ray.intersectTriangle(Wm,Wh,Xm,!1,jh);if(a===null&&(Ym(Wh.set(-.5,.5,0),jc,o,Hc,r,s),X_.set(0,1),a=e.ray.intersectTriangle(Wm,Xm,Wh,!1,jh),a===null))return;const l=e.ray.origin.distanceTo(jh);l<e.near||l>e.far||t.push({distance:l,point:jh.clone(),uv:Ki.getInterpolation(jh,Wm,Wh,Xm,x2,X_,_2,new ve),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Ym(n,e,t,i,r,s){Gc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Gh.x=s*Gc.x-r*Gc.y,Gh.y=r*Gc.x+s*Gc.y):Gh.copy(Gc),n.copy(e),n.x+=Gh.x,n.y+=Gh.y,n.applyMatrix4(Ok)}const qm=new z,S2=new z;class Bk extends Ot{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){qm.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(qm);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){qm.setFromMatrixPosition(e.matrixWorld),S2.setFromMatrixPosition(this.matrixWorld);const i=qm.distanceTo(S2)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const w2=new z,M2=new kt,E2=new kt,BY=new z,b2=new ct,Km=new z,Y_=new Mi,T2=new ct,q_=new oh;class zk extends Un{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=ZS,this.bindMatrix=new ct,this.bindMatrixInverse=new ct,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ui),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Km),this.boundingBox.expandByPoint(Km)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Mi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Km),this.boundingSphere.expandByPoint(Km)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Y_.copy(this.boundingSphere),Y_.applyMatrix4(r),e.ray.intersectsSphere(Y_)!==!1&&(T2.copy(r).invert(),q_.copy(e.ray).applyMatrix4(T2),!(this.boundingBox!==null&&q_.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,q_)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new kt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===ZS?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===sk?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;M2.fromBufferAttribute(r.attributes.skinIndex,e),E2.fromBufferAttribute(r.attributes.skinWeight,e),w2.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=E2.getComponent(s);if(o!==0){const a=M2.getComponent(s);b2.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(BY.copy(w2).applyMatrix4(b2),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class RE extends Ot{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Gs extends En{constructor(e=null,t=1,i=1,r,s,o,a,l,c=oi,h=oi,f,p){super(null,o,a,l,c,h,r,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const A2=new ct,zY=new ct;class ey{constructor(e=[],t=[]){this.uuid=Mr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ct)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ct;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:zY;A2.multiplyMatrices(a,t[s]),A2.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new ey(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Gs(t,e,e,Si,$i);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new RE),this.bones.push(o),this.boneInverses.push(new ct().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Zu extends Yt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Wc=new ct,C2=new ct,Zm=[],P2=new Ui,VY=new ct,Xh=new Un,Yh=new Mi;class Vk extends Un{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Zu(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,VY)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ui),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Wc),P2.copy(e.boundingBox).applyMatrix4(Wc),this.boundingBox.union(P2)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Mi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Wc),Yh.copy(e.boundingSphere).applyMatrix4(Wc),this.boundingSphere.union(Yh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Xh.geometry=this.geometry,Xh.material=this.material,Xh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Yh.copy(this.boundingSphere),Yh.applyMatrix4(i),e.ray.intersectsSphere(Yh)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Wc),C2.multiplyMatrices(i,Wc),Xh.matrixWorld=C2,Xh.raycast(e,Zm);for(let o=0,a=Zm.length;o<a;o++){const l=Zm[o];l.instanceId=s,l.object=this,t.push(l)}Zm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Zu(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Gs(new Float32Array(r*this.count),r,this.count,Wv,$i));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function K_(n,e){return n-e}function HY(n,e){return n.z-e.z}function jY(n,e){return e.z-n.z}class GY{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=i,a.index=r}reset(){this.list.length=0,this.index=0}}const Gi=new ct,WY=new Be(1,1,1),Z_=new Kf,$m=new Ui,ul=new Mi,qh=new z,R2=new z,XY=new z,$_=new GY,gi=new Un,Qm=[];function YY(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function hl(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class Hk extends Un{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,i=t*2,r){super(new St,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Gs(t,e,e,Si,$i);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Gs(t,e,e,Wf,Io);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Gs(t,e,e,Si,$i);i.colorSpace=It.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,h=new a.constructor(i*l),f=new Yt(h,l,c);t.setAttribute(s,f)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Yt(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ui);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Gi),this.getBoundingBoxAt(s,$m).applyMatrix4(Gi),e.union($m)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Mi);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Gi),this.getBoundingSphereAt(s,ul).applyMatrix4(Gi),e.union(ul)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(K_),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;Gi.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(WY.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(K_),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(r&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const h in i.attributes){const f=t.getAttribute(h),p=i.getAttribute(h);YY(f,p,l);const m=f.itemSize;for(let v=f.count,x=c;v<x;v++){const _=l+v;for(let g=0;g<m;g++)p.setComponent(_,g,0)}p.needsUpdate=!0,p.addUpdateRange(l*m,c*m)}if(r){const h=a.indexStart,f=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let p=0;p<o.count;p++)s.setX(h+p,l+o.getX(p));for(let p=o.count,m=f;p<m;p++)s.setX(h+p,l);s.needsUpdate=!0,s.addUpdateRange(h,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){const t=this._instanceInfo;return e>=t.length||t[e].active===!1?this:(t[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,a)=>a).sort((o,a)=>i[o].vertexStart-i[a].vertexStart),s=this.geometry;for(let o=0,a=i.length;o<a;o++){const l=r[o],c=i[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==t){const{indexStart:h,vertexStart:f,reservedIndexCount:p}=c,m=s.index,v=m.array,x=e-f;for(let _=h;_<h+p;_++)v[_]=v[_]+x;m.array.copyWithin(t,h,h+p),m.addUpdateRange(t,p),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:h,reservedVertexCount:f}=c,p=s.attributes;for(const m in p){const v=p[m],{array:x,itemSize:_}=v;x.copyWithin(e*_,h*_,(h+f)*_),v.addUpdateRange(e*_,f*_)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Ui,o=i.index,a=i.attributes.position;for(let l=r.start,c=r.start+r.count;l<c;l++){let h=l;o&&(h=o.getX(h)),s.expandByPoint(qh.fromBufferAttribute(a,h))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new Mi;this.getBoundingBoxAt(e,$m),$m.getCenter(s.center);const o=i.index,a=i.attributes.position;let l=0;for(let c=r.start,h=r.start+r.count;c<h;c++){let f=c;o&&(f=o.getX(f)),qh.fromBufferAttribute(a,f),l=Math.max(l,s.center.distanceToSquared(qh))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){const i=this._instanceInfo,r=this._matricesTexture,s=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._instanceInfo,r=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?null:t.fromArray(r,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const i=this._colorsTexture,r=this._colorsTexture.image.data,s=this._instanceInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(r,e*4),i.needsUpdate=!0,this)}getColorAt(e,t){const i=this._colorsTexture.image.data,r=this._instanceInfo;return e>=r.length||r[e].active===!1?null:t.fromArray(i,e*4)}setVisibleAt(e,t){const i=this._instanceInfo;return e>=i.length||i[e].active===!1||i[e].visible===t?this:(i[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._instanceInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}setGeometryIdAt(e,t){const i=this._instanceInfo,r=this._geometryInfo;return e>=i.length||i[e].active===!1||t>=r.length||r[t].active===!1?null:(i[e].geometryIndex=t,this)}getGeometryIdAt(e){const t=this._instanceInfo;return e>=t.length||t[e].active===!1?-1:t[e].geometryIndex}getGeometryRangeAt(e,t={}){if(e<0||e>=this._geometryCount)return null;const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(K_);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);hl(this._multiDrawCounts,r),hl(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),hl(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),hl(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),hl(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...i.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new St,this._initializeGeometry(s));const o=this.geometry;s.index&&hl(s.index.array,o.index.array);for(const a in s.attributes)hl(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;gi.material=this.material,gi.geometry.index=o.index,gi.geometry.attributes=o.attributes,gi.geometry.boundingBox===null&&(gi.geometry.boundingBox=new Ui),gi.geometry.boundingSphere===null&&(gi.geometry.boundingSphere=new Mi);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const c=i[a].geometryIndex,h=r[c];gi.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(a,gi.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,gi.geometry.boundingBox),this.getBoundingSphereAt(c,gi.geometry.boundingSphere),gi.raycast(e,Qm);for(let f=0,p=Qm.length;f<p;f++){const m=Qm[f];m.object=this,m.batchId=a,t.push(m)}Qm.length=0}gi.material=null,gi.geometry.index=null,gi.geometry.attributes={},gi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,h=this._multiDrawCounts,f=this._geometryInfo,p=this.perObjectFrustumCulled,m=this._indirectTexture,v=m.image.data;p&&(Gi.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),Z_.setFromProjectionMatrix(Gi,e.coordinateSystem));let x=0;if(this.sortObjects){Gi.copy(this.matrixWorld).invert(),qh.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Gi),R2.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Gi);for(let S=0,w=l.length;S<w;S++)if(l[S].visible&&l[S].active){const b=l[S].geometryIndex;this.getMatrixAt(S,Gi),this.getBoundingSphereAt(b,ul).applyMatrix4(Gi);let A=!1;if(p&&(A=!Z_.intersectsSphere(ul)),!A){const P=f[b],I=XY.subVectors(ul.center,qh).dot(R2);$_.push(P.start,P.count,I,S)}}const _=$_.list,g=this.customSort;g===null?_.sort(s.transparent?jY:HY):g.call(this,_,i);for(let S=0,w=_.length;S<w;S++){const b=_[S];c[x]=b.start*a,h[x]=b.count,v[x]=b.index,x++}$_.reset()}else for(let _=0,g=l.length;_<g;_++)if(l[_].visible&&l[_].active){const S=l[_].geometryIndex;let w=!1;if(p&&(this.getMatrixAt(_,Gi),this.getBoundingSphereAt(S,ul).applyMatrix4(Gi),w=!Z_.intersectsSphere(ul)),!w){const b=f[S];c[x]=b.start*a,h[x]=b.count,v[x]=_,x++}}m.needsUpdate=!0,this._multiDrawCount=x,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Bi extends bi{static get type(){return"LineBasicMaterial"}constructor(e){super(),this.isLineBasicMaterial=!0,this.color=new Be(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const av=new z,lv=new z,N2=new ct,Kh=new oh,Jm=new Mi,Q_=new z,I2=new z;class La extends Ot{constructor(e=new St,t=new Bi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)av.fromBufferAttribute(t,r-1),lv.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=av.distanceTo(lv);e.setAttribute("lineDistance",new Ze(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Jm.copy(i.boundingSphere),Jm.applyMatrix4(r),Jm.radius+=s,e.ray.intersectsSphere(Jm)===!1)return;N2.copy(r).invert(),Kh.copy(e.ray).applyMatrix4(N2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,h=i.index,p=i.attributes.position;if(h!==null){const m=Math.max(0,o.start),v=Math.min(h.count,o.start+o.count);for(let x=m,_=v-1;x<_;x+=c){const g=h.getX(x),S=h.getX(x+1),w=eg(this,e,Kh,l,g,S);w&&t.push(w)}if(this.isLineLoop){const x=h.getX(v-1),_=h.getX(m),g=eg(this,e,Kh,l,x,_);g&&t.push(g)}}else{const m=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count);for(let x=m,_=v-1;x<_;x+=c){const g=eg(this,e,Kh,l,x,x+1);g&&t.push(g)}if(this.isLineLoop){const x=eg(this,e,Kh,l,v-1,m);x&&t.push(x)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function eg(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(av.fromBufferAttribute(o,r),lv.fromBufferAttribute(o,s),t.distanceSqToSegment(av,lv,Q_,I2)>i)return;Q_.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(Q_);if(!(l<e.near||l>e.far))return{distance:l,point:I2.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}const L2=new z,D2=new z;class qs extends La{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)L2.fromBufferAttribute(t,r),D2.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+L2.distanceTo(D2);e.setAttribute("lineDistance",new Ze(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class jk extends La{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class NE extends bi{static get type(){return"PointsMaterial"}constructor(e){super(),this.isPointsMaterial=!0,this.color=new Be(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const k2=new ct,nw=new oh,tg=new Mi,ng=new z;class Gk extends Ot{constructor(e=new St,t=new NE){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),tg.copy(i.boundingSphere),tg.applyMatrix4(r),tg.radius+=s,e.ray.intersectsSphere(tg)===!1)return;k2.copy(r).invert(),nw.copy(e.ray).applyMatrix4(k2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,f=i.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=p,x=m;v<x;v++){const _=c.getX(v);ng.fromBufferAttribute(f,_),U2(ng,_,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let v=p,x=m;v<x;v++)ng.fromBufferAttribute(f,v),U2(ng,v,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function U2(n,e,t,i,r,s,o){const a=nw.distanceSqToPoint(n);if(a<t){const l=new z;nw.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class qY extends En{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Hn,this.magFilter=s!==void 0?s:Hn,this.generateMipmaps=!1;const h=this;function f(){h.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class KY extends En{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=oi,this.minFilter=oi,this.generateMipmaps=!1,this.needsUpdate=!0}}class ty extends En{constructor(e,t,i,r,s,o,a,l,c,h,f,p){super(null,o,a,l,c,h,r,s,f,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class ZY extends ty{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=qr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class $Y extends ty{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,No),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class QY extends En{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ys{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const h=i[r],p=i[r+1]-h,m=(o-h)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new ve:new z);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new z,r=[],s=[],o=[],a=new z,l=new ct;for(let m=0;m<=e;m++){const v=m/e;r[m]=this.getTangentAt(v,new z)}s[0]=new z,o[0]=new z;let c=Number.MAX_VALUE;const h=Math.abs(r[0].x),f=Math.abs(r[0].y),p=Math.abs(r[0].z);h<=c&&(c=h,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),p<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(wn(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(wn(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(r[v],m*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class ny extends ys{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new ve){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*h-m*f+this.aX,c=p*f+m*h+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Wk extends ny{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function IE(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,h,f){let p=(o-s)/c-(a-s)/(c+h)+(a-o)/h,m=(a-o)/h-(l-o)/(h+f)+(l-a)/f;p*=h,m*=h,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const ig=new z,J_=new IE,e1=new IE,t1=new IE;class Xk extends ys{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new z){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,h;this.closed||a>0?c=r[(a-1)%s]:(ig.subVectors(r[0],r[1]).add(r[0]),c=ig);const f=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(ig.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=ig),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(f),m),x=Math.pow(f.distanceToSquared(p),m),_=Math.pow(p.distanceToSquared(h),m);x<1e-4&&(x=1),v<1e-4&&(v=x),_<1e-4&&(_=x),J_.initNonuniformCatmullRom(c.x,f.x,p.x,h.x,v,x,_),e1.initNonuniformCatmullRom(c.y,f.y,p.y,h.y,v,x,_),t1.initNonuniformCatmullRom(c.z,f.z,p.z,h.z,v,x,_)}else this.curveType==="catmullrom"&&(J_.initCatmullRom(c.x,f.x,p.x,h.x,this.tension),e1.initCatmullRom(c.y,f.y,p.y,h.y,this.tension),t1.initCatmullRom(c.z,f.z,p.z,h.z,this.tension));return i.set(J_.calc(l),e1.calc(l),t1.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new z().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function O2(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function JY(n,e){const t=1-n;return t*t*e}function eq(n,e){return 2*(1-n)*n*e}function tq(n,e){return n*n*e}function kd(n,e,t,i){return JY(n,e)+eq(n,t)+tq(n,i)}function nq(n,e){const t=1-n;return t*t*t*e}function iq(n,e){const t=1-n;return 3*t*t*n*e}function rq(n,e){return 3*(1-n)*n*n*e}function sq(n,e){return n*n*n*e}function Ud(n,e,t,i,r){return nq(n,e)+iq(n,t)+rq(n,i)+sq(n,r)}class LE extends ys{constructor(e=new ve,t=new ve,i=new ve,r=new ve){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ve){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ud(e,r.x,s.x,o.x,a.x),Ud(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Yk extends ys{constructor(e=new z,t=new z,i=new z,r=new z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new z){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ud(e,r.x,s.x,o.x,a.x),Ud(e,r.y,s.y,o.y,a.y),Ud(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class DE extends ys{constructor(e=new ve,t=new ve){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ve){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ve){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class qk extends ys{constructor(e=new z,t=new z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new z){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new z){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kE extends ys{constructor(e=new ve,t=new ve,i=new ve){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ve){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(kd(e,r.x,s.x,o.x),kd(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class UE extends ys{constructor(e=new z,t=new z,i=new z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new z){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(kd(e,r.x,s.x,o.x),kd(e,r.y,s.y,o.y),kd(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class OE extends ys{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ve){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],h=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(O2(a,l.x,c.x,h.x,f.x),O2(a,l.y,c.y,h.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ve().fromArray(r))}return this}}var cv=Object.freeze({__proto__:null,ArcCurve:Wk,CatmullRomCurve3:Xk,CubicBezierCurve:LE,CubicBezierCurve3:Yk,EllipseCurve:ny,LineCurve:DE,LineCurve3:qk,QuadraticBezierCurve:kE,QuadraticBezierCurve3:UE,SplineCurve:OE});class Kk extends ys{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new cv[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const h=l[c];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new cv[r.type]().fromJSON(r))}return this}}class bf extends Kk{constructor(e){super(),this.type="Path",this.currentPoint=new ve,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new DE(this.currentPoint.clone(),new ve(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new kE(this.currentPoint.clone(),new ve(e,t),new ve(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new LE(this.currentPoint.clone(),new ve(e,t),new ve(i,r),new ve(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new OE(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+c,t+h,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new ny(e,t,i,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const h=c.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class $f extends St{constructor(e=[new ve(0,-.5),new ve(.5,0),new ve(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=wn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],h=1/t,f=new z,p=new ve,m=new z,v=new z,x=new z;let _=0,g=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:_=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,m.x=g*1,m.y=-_,m.z=g*0,x.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:_=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,m.x=g*1,m.y=-_,m.z=g*0,v.copy(m),m.x+=x.x,m.y+=x.y,m.z+=x.z,m.normalize(),l.push(m.x,m.y,m.z),x.copy(v)}for(let S=0;S<=t;S++){const w=i+S*h*r,b=Math.sin(w),A=Math.cos(w);for(let P=0;P<=e.length-1;P++){f.x=e[P].x*b,f.y=e[P].y,f.z=e[P].x*A,o.push(f.x,f.y,f.z),p.x=S/t,p.y=P/(e.length-1),a.push(p.x,p.y);const I=l[3*P+0]*b,L=l[3*P+1],R=l[3*P+0]*A;c.push(I,L,R)}}for(let S=0;S<t;S++)for(let w=0;w<e.length-1;w++){const b=w+S*e.length,A=b,P=b+e.length,I=b+e.length+1,L=b+1;s.push(A,P,L),s.push(I,L,P)}this.setIndex(s),this.setAttribute("position",new Ze(o,3)),this.setAttribute("uv",new Ze(a,2)),this.setAttribute("normal",new Ze(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $f(e.points,e.segments,e.phiStart,e.phiLength)}}class iy extends $f{constructor(e=1,t=1,i=4,r=8){const s=new bf;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new iy(e.radius,e.length,e.capSegments,e.radialSegments)}}class ry extends St{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new z,h=new ve;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=t;f++,p+=3){const m=i+f/t*r;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new Ze(o,3)),this.setAttribute("normal",new Ze(a,3)),this.setAttribute("uv",new Ze(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ry(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ch extends St{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const h=[],f=[],p=[],m=[];let v=0;const x=[],_=i/2;let g=0;S(),o===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(h),this.setAttribute("position",new Ze(f,3)),this.setAttribute("normal",new Ze(p,3)),this.setAttribute("uv",new Ze(m,2));function S(){const b=new z,A=new z;let P=0;const I=(t-e)/i;for(let L=0;L<=s;L++){const R=[],C=L/s,U=C*(t-e)+e;for(let j=0;j<=r;j++){const X=j/r,J=X*l+a,se=Math.sin(J),Q=Math.cos(J);A.x=U*se,A.y=-C*i+_,A.z=U*Q,f.push(A.x,A.y,A.z),b.set(se,I,Q).normalize(),p.push(b.x,b.y,b.z),m.push(X,1-C),R.push(v++)}x.push(R)}for(let L=0;L<r;L++)for(let R=0;R<s;R++){const C=x[R][L],U=x[R+1][L],j=x[R+1][L+1],X=x[R][L+1];(e>0||R!==0)&&(h.push(C,U,X),P+=3),(t>0||R!==s-1)&&(h.push(U,j,X),P+=3)}c.addGroup(g,P,0),g+=P}function w(b){const A=v,P=new ve,I=new z;let L=0;const R=b===!0?e:t,C=b===!0?1:-1;for(let j=1;j<=r;j++)f.push(0,_*C,0),p.push(0,C,0),m.push(.5,.5),v++;const U=v;for(let j=0;j<=r;j++){const J=j/r*l+a,se=Math.cos(J),Q=Math.sin(J);I.x=R*Q,I.y=_*C,I.z=R*se,f.push(I.x,I.y,I.z),p.push(0,C,0),P.x=se*.5+.5,P.y=Q*.5*C+.5,m.push(P.x,P.y),v++}for(let j=0;j<r;j++){const X=A+j,J=U+j;b===!0?h.push(J,J+1,X):h.push(J+1,J,X),L+=3}c.addGroup(g,L,b===!0?1:2),g+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ch(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sy extends ch{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new sy(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ja extends St{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),h(),this.setAttribute("position",new Ze(s,3)),this.setAttribute("normal",new Ze(s.slice(),3)),this.setAttribute("uv",new Ze(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const w=new z,b=new z,A=new z;for(let P=0;P<t.length;P+=3)m(t[P+0],w),m(t[P+1],b),m(t[P+2],A),l(w,b,A,S)}function l(S,w,b,A){const P=A+1,I=[];for(let L=0;L<=P;L++){I[L]=[];const R=S.clone().lerp(b,L/P),C=w.clone().lerp(b,L/P),U=P-L;for(let j=0;j<=U;j++)j===0&&L===P?I[L][j]=R:I[L][j]=R.clone().lerp(C,j/U)}for(let L=0;L<P;L++)for(let R=0;R<2*(P-L)-1;R++){const C=Math.floor(R/2);R%2===0?(p(I[L][C+1]),p(I[L+1][C]),p(I[L][C])):(p(I[L][C+1]),p(I[L+1][C+1]),p(I[L+1][C]))}}function c(S){const w=new z;for(let b=0;b<s.length;b+=3)w.x=s[b+0],w.y=s[b+1],w.z=s[b+2],w.normalize().multiplyScalar(S),s[b+0]=w.x,s[b+1]=w.y,s[b+2]=w.z}function h(){const S=new z;for(let w=0;w<s.length;w+=3){S.x=s[w+0],S.y=s[w+1],S.z=s[w+2];const b=_(S)/2/Math.PI+.5,A=g(S)/Math.PI+.5;o.push(b,1-A)}v(),f()}function f(){for(let S=0;S<o.length;S+=6){const w=o[S+0],b=o[S+2],A=o[S+4],P=Math.max(w,b,A),I=Math.min(w,b,A);P>.9&&I<.1&&(w<.2&&(o[S+0]+=1),b<.2&&(o[S+2]+=1),A<.2&&(o[S+4]+=1))}}function p(S){s.push(S.x,S.y,S.z)}function m(S,w){const b=S*3;w.x=e[b+0],w.y=e[b+1],w.z=e[b+2]}function v(){const S=new z,w=new z,b=new z,A=new z,P=new ve,I=new ve,L=new ve;for(let R=0,C=0;R<s.length;R+=9,C+=6){S.set(s[R+0],s[R+1],s[R+2]),w.set(s[R+3],s[R+4],s[R+5]),b.set(s[R+6],s[R+7],s[R+8]),P.set(o[C+0],o[C+1]),I.set(o[C+2],o[C+3]),L.set(o[C+4],o[C+5]),A.copy(S).add(w).add(b).divideScalar(3);const U=_(A);x(P,C+0,S,U),x(I,C+2,w,U),x(L,C+4,b,U)}}function x(S,w,b,A){A<0&&S.x===1&&(o[w]=S.x-1),b.x===0&&b.z===0&&(o[w]=A/2/Math.PI+.5)}function _(S){return Math.atan2(S.z,-S.x)}function g(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ja(e.vertices,e.indices,e.radius,e.details)}}class oy extends ja{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new oy(e.radius,e.detail)}}const rg=new z,sg=new z,n1=new z,og=new Ki;class Zk extends St{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(jl*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],h=["a","b","c"],f=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:x,b:_,c:g}=og;if(x.fromBufferAttribute(a,c[0]),_.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),og.getNormal(n1),f[0]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,f[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,f[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let S=0;S<3;S++){const w=(S+1)%3,b=f[S],A=f[w],P=og[h[S]],I=og[h[w]],L=`${b}_${A}`,R=`${A}_${b}`;R in p&&p[R]?(n1.dot(p[R].normal)<=s&&(m.push(P.x,P.y,P.z),m.push(I.x,I.y,I.z)),p[R]=null):L in p||(p[L]={index0:c[S],index1:c[w],normal:n1.clone()})}}for(const v in p)if(p[v]){const{index0:x,index1:_}=p[v];rg.fromBufferAttribute(a,x),sg.fromBufferAttribute(a,_),m.push(rg.x,rg.y,rg.z),m.push(sg.x,sg.y,sg.z)}this.setAttribute("position",new Ze(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Wl extends bf{constructor(e){super(e),this.uuid=Mr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new bf().fromJSON(r))}return this}}const oq={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=$k(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,f,p,m;if(i&&(s=hq(n,e,s,t)),n.length>80*t){a=c=n[0],l=h=n[1];for(let v=t;v<r;v+=t)f=n[v],p=n[v+1],f<a&&(a=f),p<l&&(l=p),f>c&&(c=f),p>h&&(h=p);m=Math.max(c-a,h-l),m=m!==0?32767/m:0}return Tf(s,o,t,a,l,m,0),o}};function $k(n,e,t,i,r){let s,o;if(r===wq(n,e,t,i)>0)for(s=e;s<t;s+=i)o=F2(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=F2(s,n[s],n[s+1],o);return o&&ay(o,o.next)&&(Cf(o),o=o.next),o}function tc(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(ay(t,t.next)||mn(t.prev,t,t.next)===0)){if(Cf(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Tf(n,e,t,i,r,s,o){if(!n)return;!o&&s&&gq(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?lq(n,i,r,s):aq(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),Cf(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=cq(tc(n),e,t),Tf(n,e,t,i,r,s,2)):o===2&&uq(n,e,t,i,r,s):Tf(tc(n),e,t,i,r,s,1);break}}}function aq(n){const e=n.prev,t=n,i=n.next;if(mn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,h=r<s?r<o?r:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=i.next;for(;v!==e;){if(v.x>=h&&v.x<=p&&v.y>=f&&v.y<=m&&xu(r,a,s,l,o,c,v.x,v.y)&&mn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function lq(n,e,t,i){const r=n.prev,s=n,o=n.next;if(mn(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,h=r.y,f=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,v=h<f?h<p?h:p:f<p?f:p,x=a>l?a>c?a:c:l>c?l:c,_=h>f?h>p?h:p:f>p?f:p,g=iw(m,v,e,t,i),S=iw(x,_,e,t,i);let w=n.prevZ,b=n.nextZ;for(;w&&w.z>=g&&b&&b.z<=S;){if(w.x>=m&&w.x<=x&&w.y>=v&&w.y<=_&&w!==r&&w!==o&&xu(a,h,l,f,c,p,w.x,w.y)&&mn(w.prev,w,w.next)>=0||(w=w.prevZ,b.x>=m&&b.x<=x&&b.y>=v&&b.y<=_&&b!==r&&b!==o&&xu(a,h,l,f,c,p,b.x,b.y)&&mn(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;w&&w.z>=g;){if(w.x>=m&&w.x<=x&&w.y>=v&&w.y<=_&&w!==r&&w!==o&&xu(a,h,l,f,c,p,w.x,w.y)&&mn(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;b&&b.z<=S;){if(b.x>=m&&b.x<=x&&b.y>=v&&b.y<=_&&b!==r&&b!==o&&xu(a,h,l,f,c,p,b.x,b.y)&&mn(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function cq(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!ay(r,s)&&Qk(r,i,i.next,s)&&Af(r,s)&&Af(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Cf(i),Cf(i.next),i=n=s),i=i.next}while(i!==n);return tc(i)}function uq(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&xq(o,a)){let l=Jk(o,a);o=tc(o,o.next),l=tc(l,l.next),Tf(o,e,t,i,r,s,0),Tf(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function hq(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=$k(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(yq(c));for(r.sort(dq),s=0;s<r.length;s++)t=fq(r[s],t);return t}function dq(n,e){return n.x-e.x}function fq(n,e){const t=pq(n,e);if(!t)return e;const i=Jk(t,n);return tc(i,i.next),tc(t,t.next)}function pq(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let h=1/0,f;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&xu(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),Af(t,n)&&(f<h||f===h&&(t.x>r.x||t.x===r.x&&mq(r,t)))&&(r=t,h=f)),t=t.next;while(t!==a);return r}function mq(n,e){return mn(n.prev,n,e.prev)<0&&mn(e.next,n,n.next)<0}function gq(n,e,t,i){let r=n;do r.z===0&&(r.z=iw(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,vq(r)}function vq(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function iw(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function yq(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function xu(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function xq(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!_q(n,e)&&(Af(n,e)&&Af(e,n)&&Sq(n,e)&&(mn(n.prev,n,e.prev)||mn(n,e.prev,e))||ay(n,e)&&mn(n.prev,n,n.next)>0&&mn(e.prev,e,e.next)>0)}function mn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function ay(n,e){return n.x===e.x&&n.y===e.y}function Qk(n,e,t,i){const r=lg(mn(n,e,t)),s=lg(mn(n,e,i)),o=lg(mn(t,i,n)),a=lg(mn(t,i,e));return!!(r!==s&&o!==a||r===0&&ag(n,t,e)||s===0&&ag(n,i,e)||o===0&&ag(t,n,i)||a===0&&ag(t,e,i))}function ag(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function lg(n){return n>0?1:n<0?-1:0}function _q(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Qk(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Af(n,e){return mn(n.prev,n,n.next)<0?mn(n,e,n.next)>=0&&mn(n,n.prev,e)>=0:mn(n,e,n.prev)<0||mn(n,n.next,e)<0}function Sq(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function Jk(n,e){const t=new rw(n.i,n.x,n.y),i=new rw(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function F2(n,e,t,i){const r=new rw(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Cf(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function rw(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wq(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Ws{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Ws.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];B2(e),z2(i,e);let o=e.length;t.forEach(B2);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,z2(i,t[l]);const a=oq.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function B2(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function z2(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class ly extends St{constructor(e=new Wl([new ve(.5,.5),new ve(-.5,.5),new ve(-.5,-.5),new ve(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Ze(r,3)),this.setAttribute("uv",new Ze(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:Mq;let w,b=!1,A,P,I,L;g&&(w=g.getSpacedPoints(h),b=!0,p=!1,A=g.computeFrenetFrames(h,!1),P=new z,I=new z,L=new z),p||(_=0,m=0,v=0,x=0);const R=a.extractPoints(c);let C=R.shape;const U=R.holes;if(!Ws.isClockWise(C)){C=C.reverse();for(let me=0,xe=U.length;me<xe;me++){const H=U[me];Ws.isClockWise(H)&&(U[me]=H.reverse())}}const X=Ws.triangulateShape(C,U),J=C;for(let me=0,xe=U.length;me<xe;me++){const H=U[me];C=C.concat(H)}function se(me,xe,H){return xe||console.error("THREE.ExtrudeGeometry: vec does not exist"),me.clone().addScaledVector(xe,H)}const Q=C.length,te=X.length;function D(me,xe,H){let $e,Se,Ve;const Ae=me.x-xe.x,rt=me.y-xe.y,Ue=H.x-me.x,B=H.y-me.y,k=Ae*Ae+rt*rt,ne=Ae*B-rt*Ue;if(Math.abs(ne)>Number.EPSILON){const he=Math.sqrt(k),ye=Math.sqrt(Ue*Ue+B*B),fe=xe.x-rt/he,Ke=xe.y+Ae/he,Pe=H.x-B/ye,ze=H.y+Ue/ye,Tt=((Pe-fe)*B-(ze-Ke)*Ue)/(Ae*B-rt*Ue);$e=fe+Ae*Tt-me.x,Se=Ke+rt*Tt-me.y;const Me=$e*$e+Se*Se;if(Me<=2)return new ve($e,Se);Ve=Math.sqrt(Me/2)}else{let he=!1;Ae>Number.EPSILON?Ue>Number.EPSILON&&(he=!0):Ae<-Number.EPSILON?Ue<-Number.EPSILON&&(he=!0):Math.sign(rt)===Math.sign(B)&&(he=!0),he?($e=-rt,Se=Ae,Ve=Math.sqrt(k)):($e=Ae,Se=rt,Ve=Math.sqrt(k/2))}return new ve($e/Ve,Se/Ve)}const G=[];for(let me=0,xe=J.length,H=xe-1,$e=me+1;me<xe;me++,H++,$e++)H===xe&&(H=0),$e===xe&&($e=0),G[me]=D(J[me],J[H],J[$e]);const W=[];let ee,de=G.concat();for(let me=0,xe=U.length;me<xe;me++){const H=U[me];ee=[];for(let $e=0,Se=H.length,Ve=Se-1,Ae=$e+1;$e<Se;$e++,Ve++,Ae++)Ve===Se&&(Ve=0),Ae===Se&&(Ae=0),ee[$e]=D(H[$e],H[Ve],H[Ae]);W.push(ee),de=de.concat(ee)}for(let me=0;me<_;me++){const xe=me/_,H=m*Math.cos(xe*Math.PI/2),$e=v*Math.sin(xe*Math.PI/2)+x;for(let Se=0,Ve=J.length;Se<Ve;Se++){const Ae=se(J[Se],G[Se],$e);_e(Ae.x,Ae.y,-H)}for(let Se=0,Ve=U.length;Se<Ve;Se++){const Ae=U[Se];ee=W[Se];for(let rt=0,Ue=Ae.length;rt<Ue;rt++){const B=se(Ae[rt],ee[rt],$e);_e(B.x,B.y,-H)}}}const Le=v+x;for(let me=0;me<Q;me++){const xe=p?se(C[me],de[me],Le):C[me];b?(I.copy(A.normals[0]).multiplyScalar(xe.x),P.copy(A.binormals[0]).multiplyScalar(xe.y),L.copy(w[0]).add(I).add(P),_e(L.x,L.y,L.z)):_e(xe.x,xe.y,0)}for(let me=1;me<=h;me++)for(let xe=0;xe<Q;xe++){const H=p?se(C[xe],de[xe],Le):C[xe];b?(I.copy(A.normals[me]).multiplyScalar(H.x),P.copy(A.binormals[me]).multiplyScalar(H.y),L.copy(w[me]).add(I).add(P),_e(L.x,L.y,L.z)):_e(H.x,H.y,f/h*me)}for(let me=_-1;me>=0;me--){const xe=me/_,H=m*Math.cos(xe*Math.PI/2),$e=v*Math.sin(xe*Math.PI/2)+x;for(let Se=0,Ve=J.length;Se<Ve;Se++){const Ae=se(J[Se],G[Se],$e);_e(Ae.x,Ae.y,f+H)}for(let Se=0,Ve=U.length;Se<Ve;Se++){const Ae=U[Se];ee=W[Se];for(let rt=0,Ue=Ae.length;rt<Ue;rt++){const B=se(Ae[rt],ee[rt],$e);b?_e(B.x,B.y+w[h-1].y,w[h-1].x+H):_e(B.x,B.y,f+H)}}}ie(),pe();function ie(){const me=r.length/3;if(p){let xe=0,H=Q*xe;for(let $e=0;$e<te;$e++){const Se=X[$e];et(Se[2]+H,Se[1]+H,Se[0]+H)}xe=h+_*2,H=Q*xe;for(let $e=0;$e<te;$e++){const Se=X[$e];et(Se[0]+H,Se[1]+H,Se[2]+H)}}else{for(let xe=0;xe<te;xe++){const H=X[xe];et(H[2],H[1],H[0])}for(let xe=0;xe<te;xe++){const H=X[xe];et(H[0]+Q*h,H[1]+Q*h,H[2]+Q*h)}}i.addGroup(me,r.length/3-me,0)}function pe(){const me=r.length/3;let xe=0;be(J,xe),xe+=J.length;for(let H=0,$e=U.length;H<$e;H++){const Se=U[H];be(Se,xe),xe+=Se.length}i.addGroup(me,r.length/3-me,1)}function be(me,xe){let H=me.length;for(;--H>=0;){const $e=H;let Se=H-1;Se<0&&(Se=me.length-1);for(let Ve=0,Ae=h+_*2;Ve<Ae;Ve++){const rt=Q*Ve,Ue=Q*(Ve+1),B=xe+$e+rt,k=xe+Se+rt,ne=xe+Se+Ue,he=xe+$e+Ue;at(B,k,ne,he)}}}function _e(me,xe,H){l.push(me),l.push(xe),l.push(H)}function et(me,xe,H){tt(me),tt(xe),tt(H);const $e=r.length/3,Se=S.generateTopUV(i,r,$e-3,$e-2,$e-1);ht(Se[0]),ht(Se[1]),ht(Se[2])}function at(me,xe,H,$e){tt(me),tt(xe),tt($e),tt(xe),tt(H),tt($e);const Se=r.length/3,Ve=S.generateSideWallUV(i,r,Se-6,Se-3,Se-2,Se-1);ht(Ve[0]),ht(Ve[1]),ht(Ve[3]),ht(Ve[1]),ht(Ve[2]),ht(Ve[3])}function tt(me){r.push(l[me*3+0]),r.push(l[me*3+1]),r.push(l[me*3+2])}function ht(me){s.push(me.x),s.push(me.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return Eq(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new cv[r.type]().fromJSON(r)),new ly(i,e.options)}}const Mq={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],h=e[r*3+1];return[new ve(s,o),new ve(a,l),new ve(c,h)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],h=e[i*3+1],f=e[i*3+2],p=e[r*3],m=e[r*3+1],v=e[r*3+2],x=e[s*3],_=e[s*3+1],g=e[s*3+2];return Math.abs(a-h)<Math.abs(o-c)?[new ve(o,1-l),new ve(c,1-f),new ve(p,1-v),new ve(x,1-g)]:[new ve(a,1-l),new ve(h,1-f),new ve(m,1-v),new ve(_,1-g)]}};function Eq(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class cy extends ja{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new cy(e.radius,e.detail)}}class Qf extends ja{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Qf(e.radius,e.detail)}}class uy extends St{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],h=[];let f=e;const p=(t-e)/r,m=new z,v=new ve;for(let x=0;x<=r;x++){for(let _=0;_<=i;_++){const g=s+_/i*o;m.x=f*Math.cos(g),m.y=f*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,h.push(v.x,v.y)}f+=p}for(let x=0;x<r;x++){const _=x*(i+1);for(let g=0;g<i;g++){const S=g+_,w=S,b=S+i+1,A=S+i+2,P=S+1;a.push(w,b,P),a.push(b,A,P)}}this.setIndex(a),this.setAttribute("position",new Ze(l,3)),this.setAttribute("normal",new Ze(c,3)),this.setAttribute("uv",new Ze(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uy(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class hy extends St{constructor(e=new Wl([new ve(0,.5),new ve(-.5,-.5),new ve(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let h=0;h<e.length;h++)c(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Ze(r,3)),this.setAttribute("normal",new Ze(s,3)),this.setAttribute("uv",new Ze(o,2));function c(h){const f=r.length/3,p=h.extractPoints(t);let m=p.shape;const v=p.holes;Ws.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,g=v.length;_<g;_++){const S=v[_];Ws.isClockWise(S)===!0&&(v[_]=S.reverse())}const x=Ws.triangulateShape(m,v);for(let _=0,g=v.length;_<g;_++){const S=v[_];m=m.concat(S)}for(let _=0,g=m.length;_<g;_++){const S=m[_];r.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let _=0,g=x.length;_<g;_++){const S=x[_],w=S[0]+f,b=S[1]+f,A=S[2]+f;i.push(w,b,A),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return bq(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new hy(i,e.curveSegments)}}function bq(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Jf extends St{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const h=[],f=new z,p=new z,m=[],v=[],x=[],_=[];for(let g=0;g<=i;g++){const S=[],w=g/i;let b=0;g===0&&o===0?b=.5/t:g===i&&l===Math.PI&&(b=-.5/t);for(let A=0;A<=t;A++){const P=A/t;f.x=-e*Math.cos(r+P*s)*Math.sin(o+w*a),f.y=e*Math.cos(o+w*a),f.z=e*Math.sin(r+P*s)*Math.sin(o+w*a),v.push(f.x,f.y,f.z),p.copy(f).normalize(),x.push(p.x,p.y,p.z),_.push(P+b,1-w),S.push(c++)}h.push(S)}for(let g=0;g<i;g++)for(let S=0;S<t;S++){const w=h[g][S+1],b=h[g][S],A=h[g+1][S],P=h[g+1][S+1];(g!==0||o>0)&&m.push(w,b,P),(g!==i-1||l<Math.PI)&&m.push(b,A,P)}this.setIndex(m),this.setAttribute("position",new Ze(v,3)),this.setAttribute("normal",new Ze(x,3)),this.setAttribute("uv",new Ze(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class dy extends ja{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new dy(e.radius,e.detail)}}class fy extends St{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],h=new z,f=new z,p=new z;for(let m=0;m<=i;m++)for(let v=0;v<=r;v++){const x=v/r*s,_=m/i*Math.PI*2;f.x=(e+t*Math.cos(_))*Math.cos(x),f.y=(e+t*Math.cos(_))*Math.sin(x),f.z=t*Math.sin(_),a.push(f.x,f.y,f.z),h.x=e*Math.cos(x),h.y=e*Math.sin(x),p.subVectors(f,h).normalize(),l.push(p.x,p.y,p.z),c.push(v/r),c.push(m/i)}for(let m=1;m<=i;m++)for(let v=1;v<=r;v++){const x=(r+1)*m+v-1,_=(r+1)*(m-1)+v-1,g=(r+1)*(m-1)+v,S=(r+1)*m+v;o.push(x,_,S),o.push(_,g,S)}this.setIndex(o),this.setAttribute("position",new Ze(a,3)),this.setAttribute("normal",new Ze(l,3)),this.setAttribute("uv",new Ze(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fy(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class py extends St{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],h=[],f=new z,p=new z,m=new z,v=new z,x=new z,_=new z,g=new z;for(let w=0;w<=i;++w){const b=w/i*s*Math.PI*2;S(b,s,o,e,m),S(b+.01,s,o,e,v),_.subVectors(v,m),g.addVectors(v,m),x.crossVectors(_,g),g.crossVectors(x,_),x.normalize(),g.normalize();for(let A=0;A<=r;++A){const P=A/r*Math.PI*2,I=-t*Math.cos(P),L=t*Math.sin(P);f.x=m.x+(I*g.x+L*x.x),f.y=m.y+(I*g.y+L*x.y),f.z=m.z+(I*g.z+L*x.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),c.push(p.x,p.y,p.z),h.push(w/i),h.push(A/r)}}for(let w=1;w<=i;w++)for(let b=1;b<=r;b++){const A=(r+1)*(w-1)+(b-1),P=(r+1)*w+(b-1),I=(r+1)*w+b,L=(r+1)*(w-1)+b;a.push(A,P,L),a.push(P,I,L)}this.setIndex(a),this.setAttribute("position",new Ze(l,3)),this.setAttribute("normal",new Ze(c,3)),this.setAttribute("uv",new Ze(h,2));function S(w,b,A,P,I){const L=Math.cos(w),R=Math.sin(w),C=A/b*w,U=Math.cos(C);I.x=P*(2+U)*.5*L,I.y=P*(2+U)*R*.5,I.z=P*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new py(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class my extends St{constructor(e=new UE(new z(-1,-1,0),new z(-1,1,0),new z(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new z,l=new z,c=new ve;let h=new z;const f=[],p=[],m=[],v=[];x(),this.setIndex(v),this.setAttribute("position",new Ze(f,3)),this.setAttribute("normal",new Ze(p,3)),this.setAttribute("uv",new Ze(m,2));function x(){for(let w=0;w<t;w++)_(w);_(s===!1?t:0),S(),g()}function _(w){h=e.getPointAt(w/t,h);const b=o.normals[w],A=o.binormals[w];for(let P=0;P<=r;P++){const I=P/r*Math.PI*2,L=Math.sin(I),R=-Math.cos(I);l.x=R*b.x+L*A.x,l.y=R*b.y+L*A.y,l.z=R*b.z+L*A.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,f.push(a.x,a.y,a.z)}}function g(){for(let w=1;w<=t;w++)for(let b=1;b<=r;b++){const A=(r+1)*(w-1)+(b-1),P=(r+1)*w+(b-1),I=(r+1)*w+b,L=(r+1)*(w-1)+b;v.push(A,P,L),v.push(P,I,L)}}function S(){for(let w=0;w<=t;w++)for(let b=0;b<=r;b++)c.x=w/t,c.y=b/r,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new my(new cv[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class eU extends St{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new z,s=new z;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,h=l.length;c<h;++c){const f=l[c],p=f.start,m=f.count;for(let v=p,x=p+m;v<x;v+=3)for(let _=0;_<3;_++){const g=a.getX(v+_),S=a.getX(v+(_+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,S),V2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const h=3*a+c,f=3*a+(c+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,f),V2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ze(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function V2(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var H2=Object.freeze({__proto__:null,BoxGeometry:lc,CapsuleGeometry:iy,CircleGeometry:ry,ConeGeometry:sy,CylinderGeometry:ch,DodecahedronGeometry:oy,EdgesGeometry:Zk,ExtrudeGeometry:ly,IcosahedronGeometry:cy,LatheGeometry:$f,OctahedronGeometry:Qf,PlaneGeometry:ah,PolyhedronGeometry:ja,RingGeometry:uy,ShapeGeometry:hy,SphereGeometry:Jf,TetrahedronGeometry:dy,TorusGeometry:fy,TorusKnotGeometry:py,TubeGeometry:my,WireframeGeometry:eU});class tU extends bi{static get type(){return"ShadowMaterial"}constructor(e){super(),this.isShadowMaterial=!0,this.color=new Be(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class nU extends gs{static get type(){return"RawShaderMaterial"}constructor(e){super(e),this.isRawShaderMaterial=!0}}class FE extends bi{static get type(){return"MeshStandardMaterial"}constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.color=new Be(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Va,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class BE extends FE{static get type(){return"MeshPhysicalMaterial"}constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ve(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return wn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Be(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Be(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Be(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class iU extends bi{static get type(){return"MeshPhongMaterial"}constructor(e){super(),this.isMeshPhongMaterial=!0,this.color=new Be(16777215),this.specular=new Be(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Va,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cr,this.combine=Gf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rU extends bi{static get type(){return"MeshToonMaterial"}constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.color=new Be(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Va,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class sU extends bi{static get type(){return"MeshNormalMaterial"}constructor(e){super(),this.isMeshNormalMaterial=!0,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Va,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class oU extends bi{static get type(){return"MeshLambertMaterial"}constructor(e){super(),this.isMeshLambertMaterial=!0,this.color=new Be(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Va,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cr,this.combine=Gf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class aU extends bi{static get type(){return"MeshMatcapMaterial"}constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.color=new Be(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Va,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lU extends Bi{static get type(){return"LineDashedMaterial"}constructor(e){super(),this.isLineDashedMaterial=!0,this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ll(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function cU(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function uU(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function sw(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function zE(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function Tq(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],h=c.getValueSize(),f=[],p=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*r;if(!(v<t||v>=i)){f.push(c.times[m]);for(let x=0;x<h;++x)p.push(c.values[m*h+x])}}f.length!==0&&(c.times=Ll(f,c.times.constructor),c.values=Ll(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Aq(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let h=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let x;if(s<=a.times[0]){const g=h,S=f-h;x=a.values.slice(g,S)}else if(s>=a.times[v]){const g=v*f+h,S=g+f-h;x=a.values.slice(g,S)}else{const g=a.createInterpolant(),S=h,w=f-h;g.evaluate(s),x=g.resultBuffer.slice(S,w)}l==="quaternion"&&new sr().fromArray(x).normalize().conjugate().toArray(x);const _=c.times.length;for(let g=0;g<_;++g){const S=g*m+p;if(l==="quaternion")sr.multiplyQuaternionsFlat(c.values,S,x,0,c.values,S);else{const w=m-p*2;for(let b=0;b<w;++b)c.values[S+b]-=x[b]}}}return n.blendMode=yE,n}const Cq={convertArray:Ll,isTypedArray:cU,getKeyframeOrder:uU,sortedArray:sw,flattenJSON:zE,subclip:Tq,makeClipAdditive:Aq};class ep{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class hU extends ep{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Rl,endingEnd:Rl}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Nl:s=e,a=2*t-i;break;case Sf:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Nl:o=e,l=2*i-t;break;case Sf:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,h=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(i-t)/(r-t),x=v*v,_=x*v,g=-p*_+2*p*x-p*v,S=(1+p)*_+(-1.5-2*p)*x+(-.5+p)*v+1,w=(-1-m)*_+(1.5+m)*x+.5*v,b=m*_-m*x;for(let A=0;A!==a;++A)s[A]=g*o[h+A]+S*o[c+A]+w*o[l+A]+b*o[f+A];return s}}class VE extends ep{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=(i-t)/(r-t),f=1-h;for(let p=0;p!==a;++p)s[p]=o[c+p]*f+o[l+p]*h;return s}}class dU extends ep{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class xs{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ll(t,this.TimeBufferType),this.values=Ll(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Ll(e.times,Array),values:Ll(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new dU(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new VE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new hU(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case _f:t=this.InterpolantFactoryMethodDiscrete;break;case ov:t=this.InterpolantFactoryMethodLinear;break;case Ug:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return _f;case this.InterpolantFactoryMethodLinear:return ov;case this.InterpolantFactoryMethodSmooth:return Ug}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&cU(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Ug,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],h=e[a+1];if(c!==h&&(a!==1||c!==e[0]))if(r)l=!0;else{const f=a*i,p=f-i,m=f+i;for(let v=0;v!==i;++v){const x=t[f+v];if(x!==t[p+v]||x!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}xs.prototype.TimeBufferType=Float32Array;xs.prototype.ValueBufferType=Float32Array;xs.prototype.DefaultInterpolation=ov;class cc extends xs{constructor(e,t,i){super(e,t,i)}}cc.prototype.ValueTypeName="bool";cc.prototype.ValueBufferType=Array;cc.prototype.DefaultInterpolation=_f;cc.prototype.InterpolantFactoryMethodLinear=void 0;cc.prototype.InterpolantFactoryMethodSmooth=void 0;class HE extends xs{}HE.prototype.ValueTypeName="color";class Pf extends xs{}Pf.prototype.ValueTypeName="number";class fU extends ep{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let h=c+a;c!==h;c+=4)sr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class tp extends xs{InterpolantFactoryMethodLinear(e){return new fU(this.times,this.values,this.getValueSize(),e)}}tp.prototype.ValueTypeName="quaternion";tp.prototype.InterpolantFactoryMethodSmooth=void 0;class uc extends xs{constructor(e,t,i){super(e,t,i)}}uc.prototype.ValueTypeName="string";uc.prototype.ValueBufferType=Array;uc.prototype.DefaultInterpolation=_f;uc.prototype.InterpolantFactoryMethodLinear=void 0;uc.prototype.InterpolantFactoryMethodSmooth=void 0;class Rf extends xs{}Rf.prototype.ValueTypeName="vector";class Nf{constructor(e="",t=-1,i=[],r=qv){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Mr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Rq(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(xs.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const h=uU(l);l=sw(l,1,h),c=sw(c,1,h),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Pf(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],h=c.name.match(s);if(h&&h.length>1){const f=h[1];let p=r[f];p||(r[f]=p=[]),p.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,p,m,v,x){if(m.length!==0){const _=[],g=[];zE(m,_,g,v),_.length!==0&&x.push(new f(p,_,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const p=c[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let x=0;x<p[v].morphTargets.length;x++)m[p[v].morphTargets[x]]=-1;for(const x in m){const _=[],g=[];for(let S=0;S!==p[v].morphTargets.length;++S){const w=p[v];_.push(w.time),g.push(w.morphTarget===x?1:0)}r.push(new Pf(".morphTargetInfluence["+x+"]",_,g))}l=m.length*o}else{const m=".bones["+t[f].name+"]";i(Rf,m+".position",p,"pos",r),i(tp,m+".quaternion",p,"rot",r),i(Rf,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Pq(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Pf;case"vector":case"vector2":case"vector3":case"vector4":return Rf;case"color":return HE;case"quaternion":return tp;case"bool":case"boolean":return cc;case"string":return uc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Rq(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Pq(n.type);if(n.times===void 0){const t=[],i=[];zE(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const vo={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class jE{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,f){return c.push(h,f),this},this.removeHandler=function(h){const f=c.indexOf(h);return f!==-1&&c.splice(f,2),this},this.getHandler=function(h){for(let f=0,p=c.length;f<p;f+=2){const m=c[f],v=c[f+1];if(m.global&&(m.lastIndex=0),m.test(h))return v}return null}}}const pU=new jE;class ar{constructor(e){this.manager=e!==void 0?e:pU,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ar.DEFAULT_MATERIAL_NAME="__DEFAULT";const oo={};class Nq extends Error{constructor(e,t){super(e),this.response=t}}class Lo extends ar{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=vo.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(oo[e]!==void 0){oo[e].push({onLoad:t,onProgress:i,onError:r});return}oo[e]=[],oo[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const h=oo[e],f=c.body.getReader(),p=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=p?parseInt(p):0,v=m!==0;let x=0;const _=new ReadableStream({start(g){S();function S(){f.read().then(({done:w,value:b})=>{if(w)g.close();else{x+=b.byteLength;const A=new ProgressEvent("progress",{lengthComputable:v,loaded:x,total:m});for(let P=0,I=h.length;P<I;P++){const L=h[P];L.onProgress&&L.onProgress(A)}g.enqueue(b),S()}},w=>{g.error(w)})}}});return new Response(_)}else throw new Nq(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{vo.add(e,c);const h=oo[e];delete oo[e];for(let f=0,p=h.length;f<p;f++){const m=h[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const h=oo[e];if(h===void 0)throw this.manager.itemError(e),c;delete oo[e];for(let f=0,p=h.length;f<p;f++){const m=h[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Iq extends ar{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Lo(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Nf.parse(e[i]);t.push(r)}return t}}class Lq extends ar{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new ty,l=new Lo(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function h(f){l.load(e[f],function(p){const m=s.parse(p,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Hn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)h(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let x=0;x<p.mipmapCount;x++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+x]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Hn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class If extends ar{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=vo.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Ef("img");function l(){h(),vo.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){h(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Dq extends ar{constructor(e){super(e)}load(e,t,i,r){const s=new qf;s.colorSpace=Xi;const o=new If(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(h){s.images[c]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class kq extends ar{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Gs,a=new Lo(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(h){if(r!==void 0)r(h);else{console.error(h);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:qr,o.wrapT=c.wrapT!==void 0?c.wrapT:qr,o.magFilter=c.magFilter!==void 0?c.magFilter:Hn,o.minFilter=c.minFilter!==void 0?c.minFilter:Hn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Os),c.mipmapCount===1&&(o.minFilter=Hn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class Uq extends ar{constructor(e){super(e)}load(e,t,i,r){const s=new En,o=new If(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Ga extends Ot{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Be(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class mU extends Ga{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ot.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Be(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const i1=new ct,j2=new z,G2=new z;class GE{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ve(512,512),this.map=null,this.mapPass=null,this.matrix=new ct,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Kf,this._frameExtents=new ve(1,1),this._viewportCount=1,this._viewports=[new kt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;j2.setFromMatrixPosition(e.matrixWorld),t.position.copy(j2),G2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(G2),t.updateMatrixWorld(),i1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i1),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(i1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Oq extends GE{constructor(){super(new Qn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=qu*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class gU extends Ga{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ot.DEFAULT_UP),this.updateMatrix(),this.target=new Ot,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Oq}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const W2=new ct,Zh=new z,r1=new z;class Fq extends GE{constructor(){super(new Qn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ve(4,2),this._viewportCount=6,this._viewports=[new kt(2,1,1,1),new kt(0,1,1,1),new kt(3,1,1,1),new kt(1,1,1,1),new kt(3,0,1,1),new kt(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Zh.setFromMatrixPosition(e.matrixWorld),i.position.copy(Zh),r1.copy(i.position),r1.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(r1),i.updateMatrixWorld(),r.makeTranslation(-Zh.x,-Zh.y,-Zh.z),W2.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(W2)}}class vU extends Ga{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Fq}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Bq extends GE{constructor(){super(new Zf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class yU extends Ga{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ot.DEFAULT_UP),this.updateMatrix(),this.target=new Ot,this.shadow=new Bq}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class xU extends Ga{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class _U extends Ga{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class SU{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new z)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class wU extends Ga{constructor(e=new SU,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class gy extends ar{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Lo(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Be().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Be().setHex(o.value);break;case"v2":r.uniforms[s].value=new ve().fromArray(o.value);break;case"v3":r.uniforms[s].value=new z().fromArray(o.value);break;case"v4":r.uniforms[s].value=new kt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new vt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new ct().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ve().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ve().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return gy.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:tU,SpriteMaterial:PE,RawShaderMaterial:nU,ShaderMaterial:gs,PointsMaterial:NE,MeshPhysicalMaterial:BE,MeshStandardMaterial:FE,MeshPhongMaterial:iU,MeshToonMaterial:rU,MeshNormalMaterial:sU,MeshLambertMaterial:oU,MeshDepthMaterial:TE,MeshDistanceMaterial:AE,MeshBasicMaterial:Ha,MeshMatcapMaterial:aU,LineDashedMaterial:lU,LineBasicMaterial:Bi,Material:bi};return new t[e]}}class ow{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class MU extends St{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class EU extends ar{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Lo(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,v){if(t[v]!==void 0)return t[v];const _=m.interleavedBuffers[v],g=s(m,_.buffer),S=gu(_.type,g),w=new Jv(S,_.stride);return w.uuid=_.uuid,t[v]=w,w}function s(m,v){if(i[v]!==void 0)return i[v];const _=m.arrayBuffers[v],g=new Uint32Array(_).buffer;return i[v]=g,g}const o=e.isInstancedBufferGeometry?new MU:new St,a=e.data.index;if(a!==void 0){const m=gu(a.type,a.array);o.setIndex(new Yt(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let x;if(v.isInterleavedBufferAttribute){const _=r(e.data,v.data);x=new ec(_,v.itemSize,v.offset,v.normalized)}else{const _=gu(v.type,v.array),g=v.isInstancedBufferAttribute?Zu:Yt;x=new g(_,v.itemSize,v.normalized)}v.name!==void 0&&(x.name=v.name),v.usage!==void 0&&x.setUsage(v.usage),o.setAttribute(m,x)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],x=[];for(let _=0,g=v.length;_<g;_++){const S=v[_];let w;if(S.isInterleavedBufferAttribute){const b=r(e.data,S.data);w=new ec(b,S.itemSize,S.offset,S.normalized)}else{const b=gu(S.type,S.array);w=new Yt(b,S.itemSize,S.normalized)}S.name!==void 0&&(w.name=S.name),x.push(w)}o.morphAttributes[m]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,v=f.length;m!==v;++m){const x=f[m];o.addGroup(x.start,x.count,x.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new z;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new Mi(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class zq extends ar{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?ow.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Lo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const h=c.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?ow.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Lo(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),h=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,h),this.bindLightTargets(c),t!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Wl().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new ey().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new EU;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in H2?a=H2[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new gy;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Nf.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(h)}else return l.data?{data:gu(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new jE(t);s=new If(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,h=e.length;c<h;c++){const f=e[c],p=f.url;if(Array.isArray(p)){const m=[];for(let v=0,x=p.length;v<x;v++){const _=p[v],g=a(_);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Gs(g.data,g.width,g.height)))}r[f.uuid]=new Il(m)}else{const m=a(f.url);r[f.uuid]=new Il(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:gu(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new If(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const h=[];for(let f=0,p=c.length;f<p;f++){const m=c[f],v=await s(m);v!==null&&(v instanceof HTMLImageElement?h.push(v):h.push(new Gs(v.data,v.width,v.height)))}i[l.uuid]=new Il(h)}else{const h=await s(l.url);i[l.uuid]=new Il(h)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let h;Array.isArray(c)?(h=new qf,c.length===6&&(h.needsUpdate=!0)):(c&&c.data?h=new Gs:h=new En,c&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=i(a.mapping,Vq)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=i(a.wrap[0],X2),h.wrapT=i(a.wrap[1],X2)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.minFilter!==void 0&&(h.minFilter=i(a.minFilter,Y2)),a.magFilter!==void 0&&(h.magFilter=i(a.magFilter,Y2)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),r[a.uuid]=h}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,x=p.length;v<x;v++){const _=p[v];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(i[_])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function c(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let h,f;switch(e.type){case"Scene":o=new CE,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Be(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Qv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new $v(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Qn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Zf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new xU(e.color,e.intensity);break;case"DirectionalLight":o=new yU(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new vU(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new _U(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new gU(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new mU(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new wU().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),f=l(e.material),o=new zk(h,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),f=l(e.material),o=new Un(h,f);break;case"InstancedMesh":h=a(e.geometry),f=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new Vk(h,f,p),o.instanceMatrix=new Zu(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new Zu(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":h=a(e.geometry),f=l(e.material),o=new Hk(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=h,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(x=>{const _=new Ui;_.min.fromArray(x.boxMin),_.max.fromArray(x.boxMax);const g=new Mi;return g.radius=x.sphereRadius,g.center.fromArray(x.sphereCenter),{boxInitialized:x.boxInitialized,box:_,sphereInitialized:x.sphereInitialized,sphere:g}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new Bk;break;case"Line":o=new La(a(e.geometry),l(e.material));break;case"LineLoop":o=new jk(a(e.geometry),l(e.material));break;case"LineSegments":o=new qs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new Gk(a(e.geometry),l(e.material));break;case"Sprite":o=new Fk(l(e.material));break;case"Group":o=new yu;break;case"Bone":o=new RE;break;default:o=new Ot}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],x=o.getObjectByProperty("uuid",v.object);x!==void 0&&o.addLevel(x,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new Ot}})}}const Vq={UVMapping:Vv,CubeReflectionMapping:No,CubeRefractionMapping:Ia,EquirectangularReflectionMapping:gf,EquirectangularRefractionMapping:vf,CubeUVReflectionMapping:rh},X2={RepeatWrapping:yf,ClampToEdgeWrapping:qr,MirroredRepeatWrapping:xf},Y2={NearestFilter:oi,NearestMipmapNearestFilter:lE,NearestMipmapLinearFilter:mu,LinearFilter:Hn,LinearMipmapNearestFilter:Cd,LinearMipmapLinearFilter:Os};class Hq extends ar{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=vo.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return vo.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),vo.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});vo.add(e,l),s.manager.itemStart(e)}}let cg;class WE{static getContext(){return cg===void 0&&(cg=new(window.AudioContext||window.webkitAudioContext)),cg}static setContext(e){cg=e}}class jq extends ar{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Lo(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);WE.getContext().decodeAudioData(c,function(f){t(f)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const q2=new ct,K2=new ct,dl=new ct;class Gq{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Qn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Qn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,dl.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(jl*t.fov*.5)/t.zoom;let a,l;K2.elements[12]=-r,q2.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,dl.elements[0]=2*t.near/(l-a),dl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(dl),a=-o*t.aspect-s,l=o*t.aspect-s,dl.elements[0]=2*t.near/(l-a),dl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(dl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(K2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(q2)}}class XE{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Z2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Z2();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Z2(){return performance.now()}const fl=new z,$2=new sr,Wq=new z,pl=new z;class Xq extends Ot{constructor(){super(),this.type="AudioListener",this.context=WE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new XE}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(fl,$2,Wq),pl.set(0,0,-1).applyQuaternion($2),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(fl.x,r),t.positionY.linearRampToValueAtTime(fl.y,r),t.positionZ.linearRampToValueAtTime(fl.z,r),t.forwardX.linearRampToValueAtTime(pl.x,r),t.forwardY.linearRampToValueAtTime(pl.y,r),t.forwardZ.linearRampToValueAtTime(pl.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(fl.x,fl.y,fl.z),t.setOrientation(pl.x,pl.y,pl.z,i.x,i.y,i.z)}}class bU extends Ot{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ml=new z,Q2=new sr,Yq=new z,gl=new z;class qq extends bU{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ml,Q2,Yq),gl.set(0,0,1).applyQuaternion(Q2);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ml.x,i),t.positionY.linearRampToValueAtTime(ml.y,i),t.positionZ.linearRampToValueAtTime(ml.z,i),t.orientationX.linearRampToValueAtTime(gl.x,i),t.orientationY.linearRampToValueAtTime(gl.y,i),t.orientationZ.linearRampToValueAtTime(gl.z,i)}else t.setPosition(ml.x,ml.y,ml.z),t.setOrientation(gl.x,gl.y,gl.z)}}class Kq{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class TU{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){sr.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;sr.multiplyQuaternionsFlat(e,o,e,t,e,i),sr.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const YE="\\[\\]\\.:\\/",Zq=new RegExp("["+YE+"]","g"),qE="[^"+YE+"]",$q="[^"+YE.replace("\\.","")+"]",Qq=/((?:WC+[\/:])*)/.source.replace("WC",qE),Jq=/(WCOD+)?/.source.replace("WCOD",$q),eK=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",qE),tK=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",qE),nK=new RegExp("^"+Qq+Jq+eK+tK+"$"),iK=["material","materials","bones","map"];class rK{constructor(e,t,i){const r=i||Dt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Dt{constructor(e,t,i){this.path=t,this.parsedPath=i||Dt.parseTrackName(t),this.node=Dt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Dt.Composite(e,t,i):new Dt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Zq,"")}static parseTrackName(e){const t=nK.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);iK.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Dt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===c){c=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Dt.Composite=rK;Dt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Dt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Dt.prototype.GetterByBindingType=[Dt.prototype._getValue_direct,Dt.prototype._getValue_array,Dt.prototype._getValue_arrayElement,Dt.prototype._getValue_toArray];Dt.prototype.SetterByBindingTypeAndVersioning=[[Dt.prototype._setValue_direct,Dt.prototype._setValue_direct_setNeedsUpdate,Dt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Dt.prototype._setValue_array,Dt.prototype._setValue_array_setNeedsUpdate,Dt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Dt.prototype._setValue_arrayElement,Dt.prototype._setValue_arrayElement_setNeedsUpdate,Dt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Dt.prototype._setValue_fromArray,Dt.prototype._setValue_fromArray_setNeedsUpdate,Dt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class sK{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Mr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let h=0,f=arguments.length;h!==f;++h){const p=arguments[h],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let x=0,_=o;x!==_;++x)s[x].push(new Dt(p,i[x],r[x]))}else if(v<c){a=e[v];const x=--c,_=e[x];t[_.uuid]=v,e[v]=_,t[m]=x,e[x]=p;for(let g=0,S=o;g!==S;++g){const w=s[g],b=w[x];let A=w[v];w[v]=b,A===void 0&&(A=new Dt(p,i[g],r[g])),w[x]=A}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,h=t[c];if(h!==void 0&&h>=s){const f=s++,p=e[f];t[p.uuid]=h,e[h]=p,t[c]=f,e[f]=l;for(let m=0,v=r;m!==v;++m){const x=i[m],_=x[f],g=x[h];x[h]=_,x[f]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],h=c.uuid,f=t[h];if(f!==void 0)if(delete t[h],f<s){const p=--s,m=e[p],v=--o,x=e[v];t[m.uuid]=f,e[f]=m,t[x.uuid]=p,e[p]=x,e.pop();for(let _=0,g=r;_!==g;++_){const S=i[_],w=S[p],b=S[v];S[f]=w,S[p]=b,S.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let v=0,x=r;v!==x;++v){const _=i[v];_[f]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,h=this.nCachedObjects_,f=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(f);for(let p=h,m=l.length;p!==m;++p){const v=l[p];f[p]=new Dt(v,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class AU{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Rl,endingEnd:Rl};for(let c=0;c!==o;++c){const h=s[c].createInterpolant(null);a[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ak,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case yE:for(let h=0,f=l.length;h!==f;++h)l[h].evaluate(o),c[h].accumulateAdditive(a);break;case qv:default:for(let h=0,f=l.length;h!==f;++h)l[h].evaluate(o),c[h].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===lk;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===ok){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Nl,r.endingEnd=Nl):(e?r.endingStart=this.zeroSlopeAtStart?Nl:Rl:r.endingStart=Sf,t?r.endingEnd=this.zeroSlopeAtEnd?Nl:Rl:r.endingEnd=Sf)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const oK=new Float32Array(1);class aK extends Ys{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let h=c[l];h===void 0&&(h={},c[l]=h);for(let f=0;f!==s;++f){const p=r[f],m=p.name;let v=h[m];if(v!==void 0)++v.referenceCount,o[f]=v;else{if(v=o[f],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const x=t&&t._propertyBindings[f].binding.parsedPath;v=new TU(Dt.create(i,m,x),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[f]=v}a[f].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],h=e._byClipCacheIndex;c._byClipCacheIndex=h,l[h]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new VE(new Float32Array(2),new Float32Array(2),1,oK),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Nf.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=qv),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const h=new AU(this,o,t,i);return this._bindAction(h,c),this._addInactiveAction(h,a,s),h}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Nf.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const h=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=h,t[h]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class KE{constructor(e){this.value=e}clone(){return new KE(this.value.clone===void 0?this.value:this.value.clone())}}let lK=0;class cK extends Ys{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:lK++}),this.name="",this.usage=wf,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class uK extends Jv{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class hK{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const J2=new ct;class CU{constructor(e,t,i=0,r=1/0){this.ray=new oh(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Gl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return J2.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(J2),this}intersectObject(e,t=!0,i=[]){return aw(e,this,i,t),i.sort(eR),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)aw(e[r],this,i,t);return i.sort(eR),i}}function eR(n,e){return n.distance-e.distance}function aw(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)aw(s[o],e,t,!0)}}class dK{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(wn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class fK{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class ZE{constructor(e,t,i,r){ZE.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const tR=new ve;class pK{constructor(e=new ve(1/0,1/0),t=new ve(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=tR.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,tR).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const nR=new z,ug=new z;class mK{constructor(e=new z,t=new z){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){nR.subVectors(e,this.start),ug.subVectors(this.end,this.start);const i=ug.dot(ug);let s=ug.dot(nR)/i;return t&&(s=wn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const iR=new z;class gK extends Ot{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new St,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new Ze(r,3));const s=new Bi({fog:!1,toneMapped:!1});this.cone=new qs(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),iR.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(iR),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Jo=new z,hg=new ct,s1=new ct;class vK extends qs{constructor(e){const t=PU(e),i=new St,r=[],s=[],o=new Be(0,0,1),a=new Be(0,1,0);for(let c=0;c<t.length;c++){const h=t[c];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Ze(r,3)),i.setAttribute("color",new Ze(s,3));const l=new Bi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");s1.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(hg.multiplyMatrices(s1,a.matrixWorld),Jo.setFromMatrixPosition(hg),r.setXYZ(o,Jo.x,Jo.y,Jo.z),hg.multiplyMatrices(s1,a.parent.matrixWorld),Jo.setFromMatrixPosition(hg),r.setXYZ(o+1,Jo.x,Jo.y,Jo.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function PU(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,PU(n.children[t]));return e}class yK extends Un{constructor(e,t,i){const r=new Jf(t,4,2),s=new Ha({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const xK=new z,rR=new Be,sR=new Be;class _K extends Ot{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Qf(t);r.rotateY(Math.PI*.5),this.material=new Ha({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Yt(o,3)),this.add(new Un(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");rR.copy(this.light.color),sR.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?rR:sR;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(xK.setFromMatrixPosition(this.light.matrixWorld).negate())}}class SK extends qs{constructor(e=10,t=10,i=4473924,r=8947848){i=new Be(i),r=new Be(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const x=p===s?i:r;x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3}const h=new St;h.setAttribute("position",new Ze(l,3)),h.setAttribute("color",new Ze(c,3));const f=new Bi({vertexColors:!0,toneMapped:!1});super(h,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class wK extends qs{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Be(s),o=new Be(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const p=f/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const x=f&1?s:o;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let f=0;f<i;f++){const p=f&1?s:o,m=e-e/i*f;for(let v=0;v<r;v++){let x=v/r*(Math.PI*2),_=Math.sin(x)*m,g=Math.cos(x)*m;a.push(_,0,g),l.push(p.r,p.g,p.b),x=(v+1)/r*(Math.PI*2),_=Math.sin(x)*m,g=Math.cos(x)*m,a.push(_,0,g),l.push(p.r,p.g,p.b)}}const c=new St;c.setAttribute("position",new Ze(a,3)),c.setAttribute("color",new Ze(l,3));const h=new Bi({vertexColors:!0,toneMapped:!1});super(c,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const oR=new z,dg=new z,aR=new z;class MK extends Ot{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new St;r.setAttribute("position",new Ze([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Bi({fog:!1,toneMapped:!1});this.lightPlane=new La(r,s),this.add(this.lightPlane),r=new St,r.setAttribute("position",new Ze([0,0,0,0,0,1],3)),this.targetLine=new La(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),oR.setFromMatrixPosition(this.light.matrixWorld),dg.setFromMatrixPosition(this.light.target.matrixWorld),aR.subVectors(dg,oR),this.lightPlane.lookAt(dg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(dg),this.targetLine.scale.z=aR.length()}}const fg=new z,xn=new Yf;class EK extends qs{constructor(e){const t=new St,i=new Bi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,x){l(v),l(x)}function l(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute("position",new Ze(r,3)),t.setAttribute("color",new Ze(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Be(16755200),h=new Be(16711680),f=new Be(43775),p=new Be(16777215),m=new Be(3355443);this.setColors(c,h,f,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;xn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),An("c",t,e,xn,0,0,-1),An("t",t,e,xn,0,0,1),An("n1",t,e,xn,-i,-r,-1),An("n2",t,e,xn,i,-r,-1),An("n3",t,e,xn,-i,r,-1),An("n4",t,e,xn,i,r,-1),An("f1",t,e,xn,-i,-r,1),An("f2",t,e,xn,i,-r,1),An("f3",t,e,xn,-i,r,1),An("f4",t,e,xn,i,r,1),An("u1",t,e,xn,i*.7,r*1.1,-1),An("u2",t,e,xn,-i*.7,r*1.1,-1),An("u3",t,e,xn,0,r*2,-1),An("cf1",t,e,xn,-i,0,1),An("cf2",t,e,xn,i,0,1),An("cf3",t,e,xn,0,-r,1),An("cf4",t,e,xn,0,r,1),An("cn1",t,e,xn,-i,0,-1),An("cn2",t,e,xn,i,0,-1),An("cn3",t,e,xn,0,-r,-1),An("cn4",t,e,xn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function An(n,e,t,i,r,s,o){fg.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],fg.x,fg.y,fg.z)}}const pg=new Ui;class bK extends qs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new St;s.setIndex(new Yt(i,1)),s.setAttribute("position",new Yt(r,3)),super(s,new Bi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&pg.setFromObject(this.object),pg.isEmpty())return;const t=pg.min,i=pg.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class TK extends qs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new St;s.setIndex(new Yt(i,1)),s.setAttribute("position",new Ze(r,3)),super(s,new Bi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class AK extends La{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new St;o.setAttribute("position",new Ze(s,3)),o.computeBoundingSphere(),super(o,new Bi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new St;l.setAttribute("position",new Ze(a,3)),l.computeBoundingSphere(),this.add(new Un(l,new Ha({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const lR=new z;let mg,o1;class CK extends Ot{constructor(e=new z(0,0,1),t=new z(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",mg===void 0&&(mg=new St,mg.setAttribute("position",new Ze([0,0,0,0,1,0],3)),o1=new ch(0,.5,1,5,1),o1.translate(0,-.5,0)),this.position.copy(t),this.line=new La(mg,new Bi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Un(o1,new Ha({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{lR.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(lR,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class PK extends qs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new St;r.setAttribute("position",new Ze(t,3)),r.setAttribute("color",new Ze(i,3));const s=new Bi({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Be,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class RK{constructor(){this.type="ShapePath",this.color=new Be,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new bf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const S=[];for(let w=0,b=g.length;w<b;w++){const A=g[w],P=new Wl;P.curves=A.curves,S.push(P)}return S}function i(g,S){const w=S.length;let b=!1;for(let A=w-1,P=0;P<w;A=P++){let I=S[A],L=S[P],R=L.x-I.x,C=L.y-I.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(I=S[P],R=-R,L=S[A],C=-C),g.y<I.y||g.y>L.y)continue;if(g.y===I.y){if(g.x===I.x)return!0}else{const U=C*(g.x-I.x)-R*(g.y-I.y);if(U===0)return!0;if(U<0)continue;b=!b}}else{if(g.y!==I.y)continue;if(L.x<=g.x&&g.x<=I.x||I.x<=g.x&&g.x<=L.x)return!0}}return b}const r=Ws.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Wl,l.curves=a.curves,c.push(l),c;let h=!r(s[0].getPoints());h=e?!h:h;const f=[],p=[];let m=[],v=0,x;p[v]=void 0,m[v]=[];for(let g=0,S=s.length;g<S;g++)a=s[g],x=a.getPoints(),o=r(x),o=e?!o:o,o?(!h&&p[v]&&v++,p[v]={s:new Wl,p:x},p[v].s.curves=a.curves,h&&v++,m[v]=[]):m[v].push({h:a,p:x[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,S=0;for(let w=0,b=p.length;w<b;w++)f[w]=[];for(let w=0,b=p.length;w<b;w++){const A=m[w];for(let P=0;P<A.length;P++){const I=A[P];let L=!0;for(let R=0;R<p.length;R++)i(I.p,p[R].p)&&(w!==R&&S++,L?(L=!1,f[R].push(I)):g=!0);L&&f[w].push(I)}}S>0&&g===!1&&(m=f)}let _;for(let g=0,S=p.length;g<S;g++){l=p[g].s,c.push(l),_=m[g];for(let w=0,b=_.length;w<b;w++)l.holes.push(_[w].h)}return c}}class NK extends Ys{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class IK extends ms{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Bv}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Bv);const LK=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:aE,AddEquation:oa,AddOperation:QD,AdditiveAnimationBlendMode:yE,AdditiveBlending:YS,AgXToneMapping:ik,AlphaFormat:dE,AlwaysCompare:yk,AlwaysDepth:C0,AlwaysStencilFunc:$S,AmbientLight:xU,AnimationAction:AU,AnimationClip:Nf,AnimationLoader:Iq,AnimationMixer:aK,AnimationObjectGroup:sK,AnimationUtils:Cq,ArcCurve:Wk,ArrayCamera:kk,ArrowHelper:CK,AttachedBindMode:ZS,Audio:bU,AudioAnalyser:Kq,AudioContext:WE,AudioListener:Xq,AudioLoader:jq,AxesHelper:PK,BackSide:ki,BasicDepthPacking:ck,BasicShadowMap:ID,BatchedMesh:Hk,Bone:RE,BooleanKeyframeTrack:cc,Box2:pK,Box3:Ui,Box3Helper:TK,BoxGeometry:lc,BoxHelper:bK,BufferAttribute:Yt,BufferGeometry:St,BufferGeometryLoader:EU,ByteType:cE,Cache:vo,Camera:Yf,CameraHelper:EK,CanvasTexture:QY,CapsuleGeometry:iy,CatmullRomCurve3:Xk,CineonToneMapping:tk,CircleGeometry:ry,ClampToEdgeWrapping:qr,Clock:XE,Color:Be,ColorKeyframeTrack:HE,ColorManagement:It,CompressedArrayTexture:ZY,CompressedCubeTexture:$Y,CompressedTexture:ty,CompressedTextureLoader:Lq,ConeGeometry:sy,ConstantAlphaFactor:KD,ConstantColorFactor:YD,Controls:NK,CubeCamera:Ak,CubeReflectionMapping:No,CubeRefractionMapping:Ia,CubeTexture:qf,CubeTextureLoader:Dq,CubeUVReflectionMapping:rh,CubicBezierCurve:LE,CubicBezierCurve3:Yk,CubicInterpolant:hU,CullFaceBack:XS,CullFaceFront:ND,CullFaceFrontBack:A6,CullFaceNone:RD,Curve:ys,CurvePath:Kk,CustomBlending:LD,CustomToneMapping:nk,CylinderGeometry:ch,Cylindrical:fK,Data3DTexture:SE,DataArrayTexture:Kv,DataTexture:Gs,DataTextureLoader:kq,DataUtils:zG,DecrementStencilOp:V6,DecrementWrapStencilOp:j6,DefaultLoadingManager:pU,DepthFormat:Hl,DepthStencilFormat:Jl,DepthTexture:bE,DetachedBindMode:sk,DirectionalLight:yU,DirectionalLightHelper:MK,DiscreteInterpolant:dU,DodecahedronGeometry:oy,DoubleSide:ks,DstAlphaFactor:HD,DstColorFactor:GD,DynamicCopyUsage:rG,DynamicDrawUsage:Q6,DynamicReadUsage:tG,EdgesGeometry:Zk,EllipseCurve:ny,EqualCompare:pk,EqualDepth:R0,EqualStencilFunc:Y6,EquirectangularReflectionMapping:gf,EquirectangularRefractionMapping:vf,Euler:Cr,EventDispatcher:Ys,ExtrudeGeometry:ly,FileLoader:Lo,Float16BufferAttribute:XG,Float32BufferAttribute:Ze,FloatType:$i,Fog:Qv,FogExp2:$v,FramebufferTexture:KY,FrontSide:Ro,Frustum:Kf,GLBufferAttribute:hK,GLSL1:oG,GLSL3:QS,GreaterCompare:mk,GreaterDepth:I0,GreaterEqualCompare:vk,GreaterEqualDepth:N0,GreaterEqualStencilFunc:$6,GreaterStencilFunc:K6,GridHelper:SK,Group:yu,HalfFloatType:sh,HemisphereLight:mU,HemisphereLightHelper:_K,IcosahedronGeometry:cy,ImageBitmapLoader:Hq,ImageLoader:If,ImageUtils:wk,IncrementStencilOp:z6,IncrementWrapStencilOp:H6,InstancedBufferAttribute:Zu,InstancedBufferGeometry:MU,InstancedInterleavedBuffer:uK,InstancedMesh:Vk,Int16BufferAttribute:GG,Int32BufferAttribute:WG,Int8BufferAttribute:VG,IntType:Hv,InterleavedBuffer:Jv,InterleavedBufferAttribute:ec,Interpolant:ep,InterpolateDiscrete:_f,InterpolateLinear:ov,InterpolateSmooth:Ug,InvertStencilOp:G6,KeepStencilOp:wl,KeyframeTrack:xs,LOD:Bk,LatheGeometry:$f,Layers:Gl,LessCompare:fk,LessDepth:P0,LessEqualCompare:xE,LessEqualDepth:$l,LessEqualStencilFunc:q6,LessStencilFunc:X6,Light:Ga,LightProbe:wU,Line:La,Line3:mK,LineBasicMaterial:Bi,LineCurve:DE,LineCurve3:qk,LineDashedMaterial:lU,LineLoop:jk,LineSegments:qs,LinearFilter:Hn,LinearInterpolant:VE,LinearMipMapLinearFilter:N6,LinearMipMapNearestFilter:R6,LinearMipmapLinearFilter:Os,LinearMipmapNearestFilter:Cd,LinearSRGBColorSpace:ac,LinearToneMapping:JD,LinearTransfer:Xf,Loader:ar,LoaderUtils:ow,LoadingManager:jE,LoopOnce:ok,LoopPingPong:lk,LoopRepeat:ak,LuminanceAlphaFormat:mE,LuminanceFormat:pE,MOUSE:b6,Material:bi,MaterialLoader:gy,MathUtils:xk,Matrix2:ZE,Matrix3:vt,Matrix4:ct,MaxEquation:OD,Mesh:Un,MeshBasicMaterial:Ha,MeshDepthMaterial:TE,MeshDistanceMaterial:AE,MeshLambertMaterial:oU,MeshMatcapMaterial:aU,MeshNormalMaterial:sU,MeshPhongMaterial:iU,MeshPhysicalMaterial:BE,MeshStandardMaterial:FE,MeshToonMaterial:rU,MinEquation:UD,MirroredRepeatWrapping:xf,MixOperation:$D,MultiplyBlending:KS,MultiplyOperation:Gf,NearestFilter:oi,NearestMipMapLinearFilter:P6,NearestMipMapNearestFilter:C6,NearestMipmapLinearFilter:mu,NearestMipmapNearestFilter:lE,NeutralToneMapping:rk,NeverCompare:dk,NeverDepth:A0,NeverStencilFunc:W6,NoBlending:So,NoColorSpace:fo,NoToneMapping:js,NormalAnimationBlendMode:qv,NormalBlending:Vl,NotEqualCompare:gk,NotEqualDepth:L0,NotEqualStencilFunc:Z6,NumberKeyframeTrack:Pf,Object3D:Ot,ObjectLoader:zq,ObjectSpaceNormalMap:hk,OctahedronGeometry:Qf,OneFactor:BD,OneMinusConstantAlphaFactor:ZD,OneMinusConstantColorFactor:qD,OneMinusDstAlphaFactor:jD,OneMinusDstColorFactor:WD,OneMinusSrcAlphaFactor:T0,OneMinusSrcColorFactor:VD,OrthographicCamera:Zf,PCFShadowMap:zv,PCFSoftShadowMap:Ad,PMREMGenerator:JS,Path:bf,PerspectiveCamera:Qn,Plane:ia,PlaneGeometry:ah,PlaneHelper:AK,PointLight:vU,PointLightHelper:yK,Points:Gk,PointsMaterial:NE,PolarGridHelper:wK,PolyhedronGeometry:ja,PositionalAudio:qq,PropertyBinding:Dt,PropertyMixer:TU,QuadraticBezierCurve:kE,QuadraticBezierCurve3:UE,Quaternion:sr,QuaternionKeyframeTrack:tp,QuaternionLinearInterpolant:fU,RED_GREEN_RGTC2_Format:rv,RED_RGTC1_Format:vE,REVISION:Bv,RGBADepthPacking:uk,RGBAFormat:Si,RGBAIntegerFormat:Yv,RGBA_ASTC_10x10_Format:Q0,RGBA_ASTC_10x5_Format:K0,RGBA_ASTC_10x6_Format:Z0,RGBA_ASTC_10x8_Format:$0,RGBA_ASTC_12x10_Format:J0,RGBA_ASTC_12x12_Format:ev,RGBA_ASTC_4x4_Format:V0,RGBA_ASTC_5x4_Format:H0,RGBA_ASTC_5x5_Format:j0,RGBA_ASTC_6x5_Format:G0,RGBA_ASTC_6x6_Format:W0,RGBA_ASTC_8x5_Format:X0,RGBA_ASTC_8x6_Format:Y0,RGBA_ASTC_8x8_Format:q0,RGBA_BPTC_Format:Ld,RGBA_ETC2_EAC_Format:z0,RGBA_PVRTC_2BPPV1_Format:O0,RGBA_PVRTC_4BPPV1_Format:U0,RGBA_S3TC_DXT1_Format:Rd,RGBA_S3TC_DXT3_Format:Nd,RGBA_S3TC_DXT5_Format:Id,RGBDepthPacking:U6,RGBFormat:fE,RGBIntegerFormat:I6,RGB_BPTC_SIGNED_Format:tv,RGB_BPTC_UNSIGNED_Format:nv,RGB_ETC1_Format:F0,RGB_ETC2_Format:B0,RGB_PVRTC_2BPPV1_Format:k0,RGB_PVRTC_4BPPV1_Format:D0,RGB_S3TC_DXT1_Format:Pd,RGDepthPacking:O6,RGFormat:gE,RGIntegerFormat:Xv,RawShaderMaterial:nU,Ray:oh,Raycaster:CU,RectAreaLight:_U,RedFormat:Wv,RedIntegerFormat:Wf,ReinhardToneMapping:ek,RenderTarget:Mk,RepeatWrapping:yf,ReplaceStencilOp:B6,ReverseSubtractEquation:kD,RingGeometry:uy,SIGNED_RED_GREEN_RGTC2_Format:sv,SIGNED_RED_RGTC1_Format:iv,SRGBColorSpace:Xi,SRGBTransfer:Ht,Scene:CE,ShaderChunk:_t,ShaderLib:us,ShaderMaterial:gs,ShadowMaterial:tU,Shape:Wl,ShapeGeometry:hy,ShapePath:RK,ShapeUtils:Ws,ShortType:uE,Skeleton:ey,SkeletonHelper:vK,SkinnedMesh:zk,Source:Il,Sphere:Mi,SphereGeometry:Jf,Spherical:dK,SphericalHarmonics3:SU,SplineCurve:OE,SpotLight:gU,SpotLightHelper:gK,Sprite:Fk,SpriteMaterial:PE,SrcAlphaFactor:b0,SrcAlphaSaturateFactor:XD,SrcColorFactor:zD,StaticCopyUsage:iG,StaticDrawUsage:wf,StaticReadUsage:eG,StereoCamera:Gq,StreamCopyUsage:sG,StreamDrawUsage:J6,StreamReadUsage:nG,StringKeyframeTrack:uc,SubtractEquation:DD,SubtractiveBlending:qS,TOUCH:T6,TangentSpaceNormalMap:Va,TetrahedronGeometry:dy,Texture:En,TextureLoader:Uq,TextureUtils:PY,TorusGeometry:fy,TorusKnotGeometry:py,Triangle:Ki,TriangleFanDrawMode:k6,TriangleStripDrawMode:D6,TrianglesDrawMode:L6,TubeGeometry:my,UVMapping:Vv,Uint16BufferAttribute:wE,Uint32BufferAttribute:ME,Uint8BufferAttribute:HG,Uint8ClampedBufferAttribute:jG,Uniform:KE,UniformsGroup:cK,UniformsLib:Ce,UniformsUtils:Tk,UnsignedByteType:ps,UnsignedInt248Type:Ql,UnsignedInt5999Type:hE,UnsignedIntType:Io,UnsignedShort4444Type:jv,UnsignedShort5551Type:Gv,UnsignedShortType:Yu,VSMShadowMap:as,Vector2:ve,Vector3:z,Vector4:kt,VectorKeyframeTrack:Rf,VideoTexture:qY,WebGL3DRenderTarget:RG,WebGLArrayRenderTarget:PG,WebGLCoordinateSystem:Fs,WebGLCubeRenderTarget:Ck,WebGLMultipleRenderTargets:IK,WebGLRenderTarget:ms,WebGLRenderer:Uk,WebGLUtils:Dk,WebGPUCoordinateSystem:Mf,WireframeGeometry:eU,WrapAroundEnding:Sf,ZeroCurvatureEnding:Rl,ZeroFactor:FD,ZeroSlopeEnding:Nl,ZeroStencilOp:F6,createCanvasElement:Sk},Symbol.toStringTag,{value:"Module"}));var RU={exports:{}},hc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */hc.ConcurrentRoot=1;hc.ContinuousEventPriority=4;hc.DefaultEventPriority=16;hc.DiscreteEventPriority=1;hc.IdleEventPriority=536870912;hc.LegacyRoot=0;RU.exports=hc;var _u=RU.exports;function DK(n){let e;const t=new Set,i=(c,h)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const p=e;e=h?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},r=()=>e,s=(c,h=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function m(){const v=h(e);if(!f(p,v)){const x=p;c(p=v,x)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(c,h,f)=>h||f?s(c,h,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const kK=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),cR=kK?F.useEffect:F.useLayoutEffect;function UK(n){const e=typeof n=="function"?DK(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=F.useReducer(_=>_+1,0),o=e.getState(),a=F.useRef(o),l=F.useRef(i),c=F.useRef(r),h=F.useRef(!1),f=F.useRef();f.current===void 0&&(f.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||c.current!==r||h.current)&&(p=i(o),m=!r(f.current,p)),cR(()=>{m&&(f.current=p),a.current=o,l.current=i,c.current=r,h.current=!1});const v=F.useRef(o);cR(()=>{const _=()=>{try{const S=e.getState(),w=l.current(S);c.current(f.current,w)||(a.current=S,f.current=w,s())}catch{h.current=!0,s()}},g=e.subscribe(_);return e.getState()!==v.current&&_(),g},[]);const x=m?p:f.current;return F.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var NU={exports:{}},a1={exports:{}},l1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uR;function OK(){return uR||(uR=1,function(n){function e(D,G){var W=D.length;D.push(G);e:for(;0<W;){var ee=W-1>>>1,de=D[ee];if(0<r(de,G))D[ee]=G,D[W]=de,W=ee;else break e}}function t(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var G=D[0],W=D.pop();if(W!==G){D[0]=W;e:for(var ee=0,de=D.length,Le=de>>>1;ee<Le;){var ie=2*(ee+1)-1,pe=D[ie],be=ie+1,_e=D[be];if(0>r(pe,W))be<de&&0>r(_e,pe)?(D[ee]=_e,D[be]=W,ee=be):(D[ee]=pe,D[ie]=W,ee=ie);else if(be<de&&0>r(_e,W))D[ee]=_e,D[be]=W,ee=be;else break e}}return G}function r(D,G){var W=D.sortIndex-G.sortIndex;return W!==0?W:D.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,m=!1,v=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var G=t(c);G!==null;){if(G.callback===null)i(c);else if(G.startTime<=D)i(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(c)}}function b(D){if(x=!1,w(D),!v)if(t(l)!==null)v=!0,Q(A);else{var G=t(c);G!==null&&te(b,G.startTime-D)}}function A(D,G){v=!1,x&&(x=!1,g(L),L=-1),m=!0;var W=p;try{for(w(G),f=t(l);f!==null&&(!(f.expirationTime>G)||D&&!U());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,p=f.priorityLevel;var de=ee(f.expirationTime<=G);G=n.unstable_now(),typeof de=="function"?f.callback=de:f===t(l)&&i(l),w(G)}else i(l);f=t(l)}if(f!==null)var Le=!0;else{var ie=t(c);ie!==null&&te(b,ie.startTime-G),Le=!1}return Le}finally{f=null,p=W,m=!1}}var P=!1,I=null,L=-1,R=5,C=-1;function U(){return!(n.unstable_now()-C<R)}function j(){if(I!==null){var D=n.unstable_now();C=D;var G=!0;try{G=I(!0,D)}finally{G?X():(P=!1,I=null)}}else P=!1}var X;if(typeof S=="function")X=function(){S(j)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,se=J.port2;J.port1.onmessage=j,X=function(){se.postMessage(null)}}else X=function(){_(j,0)};function Q(D){I=D,P||(P=!0,X())}function te(D,G){L=_(function(){D(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,Q(A))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var W=p;p=G;try{return D()}finally{p=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,G){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var W=p;p=D;try{return G()}finally{p=W}},n.unstable_scheduleCallback=function(D,G,W){var ee=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ee+W:ee):W=ee,D){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=W+de,D={id:h++,callback:G,priorityLevel:D,startTime:W,expirationTime:de,sortIndex:-1},W>ee?(D.sortIndex=W,e(c,D),t(l)===null&&D===t(c)&&(x?(g(L),L=-1):x=!0,te(b,W-ee))):(D.sortIndex=de,e(l,D),v||m||(v=!0,Q(A))),D},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(D){var G=p;return function(){var W=p;p=G;try{return D.apply(this,arguments)}finally{p=W}}}}(l1)),l1}var hR;function FK(){return hR||(hR=1,a1.exports=OK()),a1.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BK=function(e){var t={},i=F,r=FK(),s=Object.assign;function o(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,y=1;y<arguments.length;y++)d+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),A=Symbol.iterator;function P(u){return u===null||typeof u!="object"?null:(u=A&&u[A]||u["@@iterator"],typeof u=="function"?u:null)}function I(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case h:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case _:return"Suspense";case g:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case v:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case x:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case S:return d=u.displayName||null,d!==null?d:I(u.type)||"Memo";case w:d=u._payload,u=u._init;try{return I(u(d))}catch{}}return null}function L(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I(d);case 8:return d===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function R(u){var d=u,y=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,d.flags&4098&&(y=d.return),u=d.return;while(u)}return d.tag===3?y:null}function C(u){if(R(u)!==u)throw Error(o(188))}function U(u){var d=u.alternate;if(!d){if(d=R(u),d===null)throw Error(o(188));return d!==u?null:u}for(var y=u,M=d;;){var T=y.return;if(T===null)break;var N=T.alternate;if(N===null){if(M=T.return,M!==null){y=M;continue}break}if(T.child===N.child){for(N=T.child;N;){if(N===y)return C(T),u;if(N===M)return C(T),d;N=N.sibling}throw Error(o(188))}if(y.return!==M.return)y=T,M=N;else{for(var V=!1,Y=T.child;Y;){if(Y===y){V=!0,y=T,M=N;break}if(Y===M){V=!0,M=T,y=N;break}Y=Y.sibling}if(!V){for(Y=N.child;Y;){if(Y===y){V=!0,y=N,M=T;break}if(Y===M){V=!0,M=N,y=T;break}Y=Y.sibling}if(!V)throw Error(o(189))}}if(y.alternate!==M)throw Error(o(190))}if(y.tag!==3)throw Error(o(188));return y.stateNode.current===y?u:d}function j(u){return u=U(u),u!==null?X(u):null}function X(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=X(u);if(d!==null)return d;u=u.sibling}return null}function J(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var d=J(u);if(d!==null)return d}u=u.sibling}return null}var se=Array.isArray,Q=e.getPublicInstance,te=e.getRootHostContext,D=e.getChildHostContext,G=e.prepareForCommit,W=e.resetAfterCommit,ee=e.createInstance,de=e.appendInitialChild,Le=e.finalizeInitialChildren,ie=e.prepareUpdate,pe=e.shouldSetTextContent,be=e.createTextInstance,_e=e.scheduleTimeout,et=e.cancelTimeout,at=e.noTimeout,tt=e.isPrimaryRenderer,ht=e.supportsMutation,me=e.supportsPersistence,xe=e.supportsHydration,H=e.getInstanceFromNode,$e=e.preparePortalMount,Se=e.getCurrentEventPriority,Ve=e.detachDeletedInstance,Ae=e.supportsMicrotasks,rt=e.scheduleMicrotask,Ue=e.supportsTestSelectors,B=e.findFiberRoot,k=e.getBoundingRect,ne=e.getTextContent,he=e.isHiddenSubtree,ye=e.matchAccessibilityRole,fe=e.setFocusIfFocusable,Ke=e.setupIntersectionObserver,Pe=e.appendChild,ze=e.appendChildToContainer,Tt=e.commitTextUpdate,Me=e.commitMount,je=e.commitUpdate,st=e.insertBefore,ut=e.insertInContainerBefore,Ge=e.removeChild,Rt=e.removeChildFromContainer,ft=e.resetTextContent,Wt=e.hideInstance,q=e.hideTextInstance,Re=e.unhideInstance,ue=e.unhideTextInstance,ge=e.clearContainer,Fe=e.cloneInstance,De=e.createContainerChildSet,dt=e.appendChildToContainerChildSet,nn=e.finalizeContainerChildren,Fn=e.replaceContainerChildren,Ft=e.cloneHiddenInstance,zi=e.cloneHiddenTextInstance,Qr=e.canHydrateInstance,ip=e.canHydrateTextInstance,rp=e.canHydrateSuspenseInstance,_s=e.isSuspenseInstancePending,Wa=e.isSuspenseInstanceFallback,sp=e.registerSuspenseInstanceRetry,ko=e.getNextHydratableSibling,dc=e.getFirstHydratableChild,op=e.getFirstHydratableChildWithinContainer,fc=e.getFirstHydratableChildWithinSuspenseInstance,ap=e.hydrateInstance,lp=e.hydrateTextInstance,yy=e.hydrateSuspenseInstance,xy=e.getNextHydratableInstanceAfterSuspenseInstance,cp=e.commitHydratedContainer,O=e.commitHydratedSuspenseInstance,K=e.clearSuspenseBoundary,oe=e.clearSuspenseBoundaryFromContainer,ae=e.shouldDeleteUnhydratedTailInstances,$=e.didNotMatchHydratedContainerTextInstance,Te=e.didNotMatchHydratedTextInstance,Ne;function Xe(u){if(Ne===void 0)try{throw Error()}catch(y){var d=y.stack.trim().match(/\n( *(at )?)/);Ne=d&&d[1]||""}return`
`+Ne+u}var Ye=!1;function lt(u,d){if(!u||Ye)return"";Ye=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Ee){var M=Ee}Reflect.construct(u,[],d)}else{try{d.call()}catch(Ee){M=Ee}u.call(d.prototype)}else{try{throw Error()}catch(Ee){M=Ee}u()}}catch(Ee){if(Ee&&M&&typeof Ee.stack=="string"){for(var T=Ee.stack.split(`
`),N=M.stack.split(`
`),V=T.length-1,Y=N.length-1;1<=V&&0<=Y&&T[V]!==N[Y];)Y--;for(;1<=V&&0<=Y;V--,Y--)if(T[V]!==N[Y]){if(V!==1||Y!==1)do if(V--,Y--,0>Y||T[V]!==N[Y]){var ce=`
`+T[V].replace(" at new "," at ");return u.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",u.displayName)),ce}while(1<=V&&0<=Y);break}}}finally{Ye=!1,Error.prepareStackTrace=y}return(u=u?u.displayName||u.name:"")?Xe(u):""}var pt=Object.prototype.hasOwnProperty,qe=[],Mt=-1;function Nt(u){return{current:u}}function it(u){0>Mt||(u.current=qe[Mt],qe[Mt]=null,Mt--)}function xt(u,d){Mt++,qe[Mt]=u.current,u.current=d}var Et={},ke=Nt(Et),rn=Nt(!1),At=Et;function Wn(u,d){var y=u.type.contextTypes;if(!y)return Et;var M=u.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===d)return M.__reactInternalMemoizedMaskedChildContext;var T={},N;for(N in y)T[N]=d[N];return M&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=T),T}function bn(u){return u=u.childContextTypes,u!=null}function Xn(){it(rn),it(ke)}function Uo(u,d,y){if(ke.current!==Et)throw Error(o(168));xt(ke,d),xt(rn,y)}function Xt(u,d,y){var M=u.stateNode;if(d=d.childContextTypes,typeof M.getChildContext!="function")return y;M=M.getChildContext();for(var T in M)if(!(T in d))throw Error(o(108,L(u)||"Unknown",T));return s({},y,M)}function Ti(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Et,At=ke.current,xt(ke,u),xt(rn,rn.current),!0}function Oo(u,d,y){var M=u.stateNode;if(!M)throw Error(o(169));y?(u=Xt(u,d,At),M.__reactInternalMemoizedMergedChildContext=u,it(rn),it(ke),xt(ke,u)):it(rn),xt(rn,y)}var sn=Math.clz32?Math.clz32:up,Ss=Math.log,ws=Math.LN2;function up(u){return u>>>=0,u===0?32:31-(Ss(u)/ws|0)|0}var hp=64,dp=4194304;function uh(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function fp(u,d){var y=u.pendingLanes;if(y===0)return 0;var M=0,T=u.suspendedLanes,N=u.pingedLanes,V=y&268435455;if(V!==0){var Y=V&~T;Y!==0?M=uh(Y):(N&=V,N!==0&&(M=uh(N)))}else V=y&~T,V!==0?M=uh(V):N!==0&&(M=uh(N));if(M===0)return 0;if(d!==0&&d!==M&&!(d&T)&&(T=M&-M,N=d&-d,T>=N||T===16&&(N&4194240)!==0))return d;if(M&4&&(M|=y&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=M;0<d;)y=31-sn(d),T=1<<y,M|=u[y],d&=~T;return M}function KU(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZU(u,d){for(var y=u.suspendedLanes,M=u.pingedLanes,T=u.expirationTimes,N=u.pendingLanes;0<N;){var V=31-sn(N),Y=1<<V,ce=T[V];ce===-1?(!(Y&y)||Y&M)&&(T[V]=KU(Y,d)):ce<=d&&(u.expiredLanes|=Y),N&=~Y}}function _y(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function Sy(u){for(var d=[],y=0;31>y;y++)d.push(u);return d}function hh(u,d,y){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-sn(d),u[d]=y}function $U(u,d){var y=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var M=u.eventTimes;for(u=u.expirationTimes;0<y;){var T=31-sn(y),N=1<<T;d[T]=0,M[T]=-1,u[T]=-1,y&=~N}}function wy(u,d){var y=u.entangledLanes|=d;for(u=u.entanglements;y;){var M=31-sn(y),T=1<<M;T&d|u[M]&d&&(u[M]|=d),y&=~T}}var Bt=0;function JE(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var My=r.unstable_scheduleCallback,eb=r.unstable_cancelCallback,QU=r.unstable_shouldYield,JU=r.unstable_requestPaint,Yn=r.unstable_now,Ey=r.unstable_ImmediatePriority,eO=r.unstable_UserBlockingPriority,by=r.unstable_NormalPriority,tO=r.unstable_IdlePriority,pp=null,Ms=null;function nO(u){if(Ms&&typeof Ms.onCommitFiberRoot=="function")try{Ms.onCommitFiberRoot(pp,u,void 0,(u.current.flags&128)===128)}catch{}}function iO(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var Es=typeof Object.is=="function"?Object.is:iO,Ks=null,mp=!1,Ty=!1;function tb(u){Ks===null?Ks=[u]:Ks.push(u)}function rO(u){mp=!0,tb(u)}function bs(){if(!Ty&&Ks!==null){Ty=!0;var u=0,d=Bt;try{var y=Ks;for(Bt=1;u<y.length;u++){var M=y[u];do M=M(!0);while(M!==null)}Ks=null,mp=!1}catch(T){throw Ks!==null&&(Ks=Ks.slice(u+1)),My(Ey,bs),T}finally{Bt=d,Ty=!1}}return null}var sO=a.ReactCurrentBatchConfig;function gp(u,d){if(Es(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var y=Object.keys(u),M=Object.keys(d);if(y.length!==M.length)return!1;for(M=0;M<y.length;M++){var T=y[M];if(!pt.call(d,T)||!Es(u[T],d[T]))return!1}return!0}function oO(u){switch(u.tag){case 5:return Xe(u.type);case 16:return Xe("Lazy");case 13:return Xe("Suspense");case 19:return Xe("SuspenseList");case 0:case 2:case 15:return u=lt(u.type,!1),u;case 11:return u=lt(u.type.render,!1),u;case 1:return u=lt(u.type,!0),u;default:return""}}function Jr(u,d){if(u&&u.defaultProps){d=s({},d),u=u.defaultProps;for(var y in u)d[y]===void 0&&(d[y]=u[y]);return d}return d}var vp=Nt(null),yp=null,pc=null,Ay=null;function Cy(){Ay=pc=yp=null}function nb(u,d,y){tt?(xt(vp,d._currentValue),d._currentValue=y):(xt(vp,d._currentValue2),d._currentValue2=y)}function Py(u){var d=vp.current;it(vp),tt?u._currentValue=d:u._currentValue2=d}function Ry(u,d,y){for(;u!==null;){var M=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,M!==null&&(M.childLanes|=d)):M!==null&&(M.childLanes&d)!==d&&(M.childLanes|=d),u===y)break;u=u.return}}function mc(u,d){yp=u,Ay=pc=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&d&&(ur=!0),u.firstContext=null)}function Nr(u){var d=tt?u._currentValue:u._currentValue2;if(Ay!==u)if(u={context:u,memoizedValue:d,next:null},pc===null){if(yp===null)throw Error(o(308));pc=u,yp.dependencies={lanes:0,firstContext:u}}else pc=pc.next=u;return d}var Ts=null,Fo=!1;function Ny(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ib(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Zs(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function Bo(u,d){var y=u.updateQueue;y!==null&&(y=y.shared,Nn!==null&&u.mode&1&&!(bt&2)?(u=y.interleaved,u===null?(d.next=d,Ts===null?Ts=[y]:Ts.push(y)):(d.next=u.next,u.next=d),y.interleaved=d):(u=y.pending,u===null?d.next=d:(d.next=u.next,u.next=d),y.pending=d))}function xp(u,d,y){if(d=d.updateQueue,d!==null&&(d=d.shared,(y&4194240)!==0)){var M=d.lanes;M&=u.pendingLanes,y|=M,d.lanes=y,wy(u,y)}}function rb(u,d){var y=u.updateQueue,M=u.alternate;if(M!==null&&(M=M.updateQueue,y===M)){var T=null,N=null;if(y=y.firstBaseUpdate,y!==null){do{var V={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};N===null?T=N=V:N=N.next=V,y=y.next}while(y!==null);N===null?T=N=d:N=N.next=d}else T=N=d;y={baseState:M.baseState,firstBaseUpdate:T,lastBaseUpdate:N,shared:M.shared,effects:M.effects},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=d:u.next=d,y.lastBaseUpdate=d}function _p(u,d,y,M){var T=u.updateQueue;Fo=!1;var N=T.firstBaseUpdate,V=T.lastBaseUpdate,Y=T.shared.pending;if(Y!==null){T.shared.pending=null;var ce=Y,Ee=ce.next;ce.next=null,V===null?N=Ee:V.next=Ee,V=ce;var We=u.alternate;We!==null&&(We=We.updateQueue,Y=We.lastBaseUpdate,Y!==V&&(Y===null?We.firstBaseUpdate=Ee:Y.next=Ee,We.lastBaseUpdate=ce))}if(N!==null){var mt=T.baseState;V=0,We=Ee=ce=null,Y=N;do{var nt=Y.lane,qt=Y.eventTime;if((M&nt)===nt){We!==null&&(We=We.next={eventTime:qt,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var Je=u,hi=Y;switch(nt=d,qt=y,hi.tag){case 1:if(Je=hi.payload,typeof Je=="function"){mt=Je.call(qt,mt,nt);break e}mt=Je;break e;case 3:Je.flags=Je.flags&-65537|128;case 0:if(Je=hi.payload,nt=typeof Je=="function"?Je.call(qt,mt,nt):Je,nt==null)break e;mt=s({},mt,nt);break e;case 2:Fo=!0}}Y.callback!==null&&Y.lane!==0&&(u.flags|=64,nt=T.effects,nt===null?T.effects=[Y]:nt.push(Y))}else qt={eventTime:qt,lane:nt,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},We===null?(Ee=We=qt,ce=mt):We=We.next=qt,V|=nt;if(Y=Y.next,Y===null){if(Y=T.shared.pending,Y===null)break;nt=Y,Y=nt.next,nt.next=null,T.lastBaseUpdate=nt,T.shared.pending=null}}while(!0);if(We===null&&(ce=mt),T.baseState=ce,T.firstBaseUpdate=Ee,T.lastBaseUpdate=We,d=T.shared.interleaved,d!==null){T=d;do V|=T.lane,T=T.next;while(T!==d)}else N===null&&(T.shared.lanes=0);Ec|=V,u.lanes=V,u.memoizedState=mt}}function sb(u,d,y){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var M=u[d],T=M.callback;if(T!==null){if(M.callback=null,M=y,typeof T!="function")throw Error(o(191,T));T.call(M)}}}var ob=new i.Component().refs;function Iy(u,d,y,M){d=u.memoizedState,y=y(M,d),y=y==null?d:s({},d,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}var Sp={isMounted:function(u){return(u=u._reactInternals)?R(u)===u:!1},enqueueSetState:function(u,d,y){u=u._reactInternals;var M=Ci(),T=Ho(u),N=Zs(M,T);N.payload=d,y!=null&&(N.callback=y),Bo(u,N),d=Ur(u,T,M),d!==null&&xp(d,u,T)},enqueueReplaceState:function(u,d,y){u=u._reactInternals;var M=Ci(),T=Ho(u),N=Zs(M,T);N.tag=1,N.payload=d,y!=null&&(N.callback=y),Bo(u,N),d=Ur(u,T,M),d!==null&&xp(d,u,T)},enqueueForceUpdate:function(u,d){u=u._reactInternals;var y=Ci(),M=Ho(u),T=Zs(y,M);T.tag=2,d!=null&&(T.callback=d),Bo(u,T),d=Ur(u,M,y),d!==null&&xp(d,u,M)}};function ab(u,d,y,M,T,N,V){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(M,N,V):d.prototype&&d.prototype.isPureReactComponent?!gp(y,M)||!gp(T,N):!0}function lb(u,d,y){var M=!1,T=Et,N=d.contextType;return typeof N=="object"&&N!==null?N=Nr(N):(T=bn(d)?At:ke.current,M=d.contextTypes,N=(M=M!=null)?Wn(u,T):Et),d=new d(y,N),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Sp,u.stateNode=d,d._reactInternals=u,M&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=T,u.__reactInternalMemoizedMaskedChildContext=N),d}function cb(u,d,y,M){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(y,M),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(y,M),d.state!==u&&Sp.enqueueReplaceState(d,d.state,null)}function Ly(u,d,y,M){var T=u.stateNode;T.props=y,T.state=u.memoizedState,T.refs=ob,Ny(u);var N=d.contextType;typeof N=="object"&&N!==null?T.context=Nr(N):(N=bn(d)?At:ke.current,T.context=Wn(u,N)),T.state=u.memoizedState,N=d.getDerivedStateFromProps,typeof N=="function"&&(Iy(u,d,N,y),T.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(d=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),d!==T.state&&Sp.enqueueReplaceState(T,T.state,null),_p(u,y,T,M),T.state=u.memoizedState),typeof T.componentDidMount=="function"&&(u.flags|=4194308)}var gc=[],vc=0,wp=null,Mp=0,Ir=[],Lr=0,Xa=null,$s=1,Qs="";function Ya(u,d){gc[vc++]=Mp,gc[vc++]=wp,wp=u,Mp=d}function ub(u,d,y){Ir[Lr++]=$s,Ir[Lr++]=Qs,Ir[Lr++]=Xa,Xa=u;var M=$s;u=Qs;var T=32-sn(M)-1;M&=~(1<<T),y+=1;var N=32-sn(d)+T;if(30<N){var V=T-T%5;N=(M&(1<<V)-1).toString(32),M>>=V,T-=V,$s=1<<32-sn(d)+T|y<<T|M,Qs=N+u}else $s=1<<N|y<<T|M,Qs=u}function Dy(u){u.return!==null&&(Ya(u,1),ub(u,1,0))}function ky(u){for(;u===wp;)wp=gc[--vc],gc[vc]=null,Mp=gc[--vc],gc[vc]=null;for(;u===Xa;)Xa=Ir[--Lr],Ir[Lr]=null,Qs=Ir[--Lr],Ir[Lr]=null,$s=Ir[--Lr],Ir[Lr]=null}var lr=null,cr=null,on=!1,dh=!1,es=null;function hb(u,d){var y=Or(5,null,null,0);y.elementType="DELETED",y.stateNode=d,y.return=u,d=u.deletions,d===null?(u.deletions=[y],u.flags|=16):d.push(y)}function db(u,d){switch(u.tag){case 5:return d=Qr(d,u.type,u.pendingProps),d!==null?(u.stateNode=d,lr=u,cr=dc(d),!0):!1;case 6:return d=ip(d,u.pendingProps),d!==null?(u.stateNode=d,lr=u,cr=null,!0):!1;case 13:if(d=rp(d),d!==null){var y=Xa!==null?{id:$s,overflow:Qs}:null;return u.memoizedState={dehydrated:d,treeContext:y,retryLane:1073741824},y=Or(18,null,null,0),y.stateNode=d,y.return=u,u.child=y,lr=u,cr=null,!0}return!1;default:return!1}}function Uy(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Oy(u){if(on){var d=cr;if(d){var y=d;if(!db(u,d)){if(Uy(u))throw Error(o(418));d=ko(y);var M=lr;d&&db(u,d)?hb(M,y):(u.flags=u.flags&-4097|2,on=!1,lr=u)}}else{if(Uy(u))throw Error(o(418));u.flags=u.flags&-4097|2,on=!1,lr=u}}}function fb(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;lr=u}function fh(u){if(!xe||u!==lr)return!1;if(!on)return fb(u),on=!0,!1;if(u.tag!==3&&(u.tag!==5||ae(u.type)&&!pe(u.type,u.memoizedProps))){var d=cr;if(d){if(Uy(u)){for(u=cr;u;)u=ko(u);throw Error(o(418))}for(;d;)hb(u,d),d=ko(d)}}if(fb(u),u.tag===13){if(!xe)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));cr=xy(u)}else cr=lr?ko(u.stateNode):null;return!0}function yc(){xe&&(cr=lr=null,dh=on=!1)}function Fy(u){es===null?es=[u]:es.push(u)}function ph(u,d,y){if(u=y.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(o(309));var M=y.stateNode}if(!M)throw Error(o(147,u));var T=M,N=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===N?d.ref:(d=function(V){var Y=T.refs;Y===ob&&(Y=T.refs={}),V===null?delete Y[N]:Y[N]=V},d._stringRef=N,d)}if(typeof u!="string")throw Error(o(284));if(!y._owner)throw Error(o(290,u))}return u}function Ep(u,d){throw u=Object.prototype.toString.call(d),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function pb(u){var d=u._init;return d(u._payload)}function mb(u){function d(re,Z){if(u){var le=re.deletions;le===null?(re.deletions=[Z],re.flags|=16):le.push(Z)}}function y(re,Z){if(!u)return null;for(;Z!==null;)d(re,Z),Z=Z.sibling;return null}function M(re,Z){for(re=new Map;Z!==null;)Z.key!==null?re.set(Z.key,Z):re.set(Z.index,Z),Z=Z.sibling;return re}function T(re,Z){return re=Go(re,Z),re.index=0,re.sibling=null,re}function N(re,Z,le){return re.index=le,u?(le=re.alternate,le!==null?(le=le.index,le<Z?(re.flags|=2,Z):le):(re.flags|=2,Z)):(re.flags|=1048576,Z)}function V(re){return u&&re.alternate===null&&(re.flags|=2),re}function Y(re,Z,le,Oe){return Z===null||Z.tag!==6?(Z=Sx(le,re.mode,Oe),Z.return=re,Z):(Z=T(Z,le),Z.return=re,Z)}function ce(re,Z,le,Oe){var Qe=le.type;return Qe===h?We(re,Z,le.props.children,Oe,le.key):Z!==null&&(Z.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===w&&pb(Qe)===Z.type)?(Oe=T(Z,le.props),Oe.ref=ph(re,Z,le),Oe.return=re,Oe):(Oe=tm(le.type,le.key,le.props,null,re.mode,Oe),Oe.ref=ph(re,Z,le),Oe.return=re,Oe)}function Ee(re,Z,le,Oe){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==le.containerInfo||Z.stateNode.implementation!==le.implementation?(Z=wx(le,re.mode,Oe),Z.return=re,Z):(Z=T(Z,le.children||[]),Z.return=re,Z)}function We(re,Z,le,Oe,Qe){return Z===null||Z.tag!==7?(Z=el(le,re.mode,Oe,Qe),Z.return=re,Z):(Z=T(Z,le),Z.return=re,Z)}function mt(re,Z,le){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=Sx(""+Z,re.mode,le),Z.return=re,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case l:return le=tm(Z.type,Z.key,Z.props,null,re.mode,le),le.ref=ph(re,null,Z),le.return=re,le;case c:return Z=wx(Z,re.mode,le),Z.return=re,Z;case w:var Oe=Z._init;return mt(re,Oe(Z._payload),le)}if(se(Z)||P(Z))return Z=el(Z,re.mode,le,null),Z.return=re,Z;Ep(re,Z)}return null}function nt(re,Z,le,Oe){var Qe=Z!==null?Z.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return Qe!==null?null:Y(re,Z,""+le,Oe);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case l:return le.key===Qe?ce(re,Z,le,Oe):null;case c:return le.key===Qe?Ee(re,Z,le,Oe):null;case w:return Qe=le._init,nt(re,Z,Qe(le._payload),Oe)}if(se(le)||P(le))return Qe!==null?null:We(re,Z,le,Oe,null);Ep(re,le)}return null}function qt(re,Z,le,Oe,Qe){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return re=re.get(le)||null,Y(Z,re,""+Oe,Qe);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case l:return re=re.get(Oe.key===null?le:Oe.key)||null,ce(Z,re,Oe,Qe);case c:return re=re.get(Oe.key===null?le:Oe.key)||null,Ee(Z,re,Oe,Qe);case w:var wt=Oe._init;return qt(re,Z,le,wt(Oe._payload),Qe)}if(se(Oe)||P(Oe))return re=re.get(le)||null,We(Z,re,Oe,Qe,null);Ep(Z,Oe)}return null}function Je(re,Z,le,Oe){for(var Qe=null,wt=null,gt=Z,zt=Z=0,Kn=null;gt!==null&&zt<le.length;zt++){gt.index>zt?(Kn=gt,gt=null):Kn=gt.sibling;var Vt=nt(re,gt,le[zt],Oe);if(Vt===null){gt===null&&(gt=Kn);break}u&&gt&&Vt.alternate===null&&d(re,gt),Z=N(Vt,Z,zt),wt===null?Qe=Vt:wt.sibling=Vt,wt=Vt,gt=Kn}if(zt===le.length)return y(re,gt),on&&Ya(re,zt),Qe;if(gt===null){for(;zt<le.length;zt++)gt=mt(re,le[zt],Oe),gt!==null&&(Z=N(gt,Z,zt),wt===null?Qe=gt:wt.sibling=gt,wt=gt);return on&&Ya(re,zt),Qe}for(gt=M(re,gt);zt<le.length;zt++)Kn=qt(gt,re,zt,le[zt],Oe),Kn!==null&&(u&&Kn.alternate!==null&&gt.delete(Kn.key===null?zt:Kn.key),Z=N(Kn,Z,zt),wt===null?Qe=Kn:wt.sibling=Kn,wt=Kn);return u&&gt.forEach(function(Wo){return d(re,Wo)}),on&&Ya(re,zt),Qe}function hi(re,Z,le,Oe){var Qe=P(le);if(typeof Qe!="function")throw Error(o(150));if(le=Qe.call(le),le==null)throw Error(o(151));for(var wt=Qe=null,gt=Z,zt=Z=0,Kn=null,Vt=le.next();gt!==null&&!Vt.done;zt++,Vt=le.next()){gt.index>zt?(Kn=gt,gt=null):Kn=gt.sibling;var Wo=nt(re,gt,Vt.value,Oe);if(Wo===null){gt===null&&(gt=Kn);break}u&&gt&&Wo.alternate===null&&d(re,gt),Z=N(Wo,Z,zt),wt===null?Qe=Wo:wt.sibling=Wo,wt=Wo,gt=Kn}if(Vt.done)return y(re,gt),on&&Ya(re,zt),Qe;if(gt===null){for(;!Vt.done;zt++,Vt=le.next())Vt=mt(re,Vt.value,Oe),Vt!==null&&(Z=N(Vt,Z,zt),wt===null?Qe=Vt:wt.sibling=Vt,wt=Vt);return on&&Ya(re,zt),Qe}for(gt=M(re,gt);!Vt.done;zt++,Vt=le.next())Vt=qt(gt,re,zt,Vt.value,Oe),Vt!==null&&(u&&Vt.alternate!==null&&gt.delete(Vt.key===null?zt:Vt.key),Z=N(Vt,Z,zt),wt===null?Qe=Vt:wt.sibling=Vt,wt=Vt);return u&&gt.forEach(function(UO){return d(re,UO)}),on&&Ya(re,zt),Qe}function Fr(re,Z,le,Oe){if(typeof le=="object"&&le!==null&&le.type===h&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case l:e:{for(var Qe=le.key,wt=Z;wt!==null;){if(wt.key===Qe){if(Qe=le.type,Qe===h){if(wt.tag===7){y(re,wt.sibling),Z=T(wt,le.props.children),Z.return=re,re=Z;break e}}else if(wt.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===w&&pb(Qe)===wt.type){y(re,wt.sibling),Z=T(wt,le.props),Z.ref=ph(re,wt,le),Z.return=re,re=Z;break e}y(re,wt);break}else d(re,wt);wt=wt.sibling}le.type===h?(Z=el(le.props.children,re.mode,Oe,le.key),Z.return=re,re=Z):(Oe=tm(le.type,le.key,le.props,null,re.mode,Oe),Oe.ref=ph(re,Z,le),Oe.return=re,re=Oe)}return V(re);case c:e:{for(wt=le.key;Z!==null;){if(Z.key===wt)if(Z.tag===4&&Z.stateNode.containerInfo===le.containerInfo&&Z.stateNode.implementation===le.implementation){y(re,Z.sibling),Z=T(Z,le.children||[]),Z.return=re,re=Z;break e}else{y(re,Z);break}else d(re,Z);Z=Z.sibling}Z=wx(le,re.mode,Oe),Z.return=re,re=Z}return V(re);case w:return wt=le._init,Fr(re,Z,wt(le._payload),Oe)}if(se(le))return Je(re,Z,le,Oe);if(P(le))return hi(re,Z,le,Oe);Ep(re,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,Z!==null&&Z.tag===6?(y(re,Z.sibling),Z=T(Z,le),Z.return=re,re=Z):(y(re,Z),Z=Sx(le,re.mode,Oe),Z.return=re,re=Z),V(re)):y(re,Z)}return Fr}var xc=mb(!0),gb=mb(!1),mh={},Dr=Nt(mh),gh=Nt(mh),_c=Nt(mh);function As(u){if(u===mh)throw Error(o(174));return u}function By(u,d){xt(_c,d),xt(gh,u),xt(Dr,mh),u=te(d),it(Dr),xt(Dr,u)}function Sc(){it(Dr),it(gh),it(_c)}function vb(u){var d=As(_c.current),y=As(Dr.current);d=D(y,u.type,d),y!==d&&(xt(gh,u),xt(Dr,d))}function zy(u){gh.current===u&&(it(Dr),it(gh))}var cn=Nt(0);function bp(u){for(var d=u;d!==null;){if(d.tag===13){var y=d.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||_s(y)||Wa(y)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Vy=[];function Hy(){for(var u=0;u<Vy.length;u++){var d=Vy[u];tt?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}Vy.length=0}var Tp=a.ReactCurrentDispatcher,kr=a.ReactCurrentBatchConfig,wc=0,yn=null,li=null,qn=null,Ap=!1,vh=!1,yh=0,aO=0;function ci(){throw Error(o(321))}function jy(u,d){if(d===null)return!1;for(var y=0;y<d.length&&y<u.length;y++)if(!Es(u[y],d[y]))return!1;return!0}function Gy(u,d,y,M,T,N){if(wc=N,yn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Tp.current=u===null||u.memoizedState===null?hO:dO,u=y(M,T),vh){N=0;do{if(vh=!1,yh=0,25<=N)throw Error(o(301));N+=1,qn=li=null,d.updateQueue=null,Tp.current=fO,u=y(M,T)}while(vh)}if(Tp.current=Ip,d=li!==null&&li.next!==null,wc=0,qn=li=yn=null,Ap=!1,d)throw Error(o(300));return u}function Wy(){var u=yh!==0;return yh=0,u}function Js(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?yn.memoizedState=qn=u:qn=qn.next=u,qn}function Cs(){if(li===null){var u=yn.alternate;u=u!==null?u.memoizedState:null}else u=li.next;var d=qn===null?yn.memoizedState:qn.next;if(d!==null)qn=d,li=u;else{if(u===null)throw Error(o(310));li=u,u={memoizedState:li.memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},qn===null?yn.memoizedState=qn=u:qn=qn.next=u}return qn}function qa(u,d){return typeof d=="function"?d(u):d}function Cp(u){var d=Cs(),y=d.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=u;var M=li,T=M.baseQueue,N=y.pending;if(N!==null){if(T!==null){var V=T.next;T.next=N.next,N.next=V}M.baseQueue=T=N,y.pending=null}if(T!==null){N=T.next,M=M.baseState;var Y=V=null,ce=null,Ee=N;do{var We=Ee.lane;if((wc&We)===We)ce!==null&&(ce=ce.next={lane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),M=Ee.hasEagerState?Ee.eagerState:u(M,Ee.action);else{var mt={lane:We,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null};ce===null?(Y=ce=mt,V=M):ce=ce.next=mt,yn.lanes|=We,Ec|=We}Ee=Ee.next}while(Ee!==null&&Ee!==N);ce===null?V=M:ce.next=Y,Es(M,d.memoizedState)||(ur=!0),d.memoizedState=M,d.baseState=V,d.baseQueue=ce,y.lastRenderedState=M}if(u=y.interleaved,u!==null){T=u;do N=T.lane,yn.lanes|=N,Ec|=N,T=T.next;while(T!==u)}else T===null&&(y.lanes=0);return[d.memoizedState,y.dispatch]}function Pp(u){var d=Cs(),y=d.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=u;var M=y.dispatch,T=y.pending,N=d.memoizedState;if(T!==null){y.pending=null;var V=T=T.next;do N=u(N,V.action),V=V.next;while(V!==T);Es(N,d.memoizedState)||(ur=!0),d.memoizedState=N,d.baseQueue===null&&(d.baseState=N),y.lastRenderedState=N}return[N,M]}function yb(){}function xb(u,d){var y=yn,M=Cs(),T=d(),N=!Es(M.memoizedState,T);if(N&&(M.memoizedState=T,ur=!0),M=M.queue,_h(wb.bind(null,y,M,u),[u]),M.getSnapshot!==d||N||qn!==null&&qn.memoizedState.tag&1){if(y.flags|=2048,xh(9,Sb.bind(null,y,M,T,d),void 0,null),Nn===null)throw Error(o(349));wc&30||_b(y,d,T)}return T}function _b(u,d,y){u.flags|=16384,u={getSnapshot:d,value:y},d=yn.updateQueue,d===null?(d={lastEffect:null,stores:null},yn.updateQueue=d,d.stores=[u]):(y=d.stores,y===null?d.stores=[u]:y.push(u))}function Sb(u,d,y,M){d.value=y,d.getSnapshot=M,Mb(d)&&Ur(u,1,-1)}function wb(u,d,y){return y(function(){Mb(d)&&Ur(u,1,-1)})}function Mb(u){var d=u.getSnapshot;u=u.value;try{var y=d();return!Es(u,y)}catch{return!0}}function Xy(u){var d=Js();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:u},d.queue=u,u=u.dispatch=uO.bind(null,yn,u),[d.memoizedState,u]}function xh(u,d,y,M){return u={tag:u,create:d,destroy:y,deps:M,next:null},d=yn.updateQueue,d===null?(d={lastEffect:null,stores:null},yn.updateQueue=d,d.lastEffect=u.next=u):(y=d.lastEffect,y===null?d.lastEffect=u.next=u:(M=y.next,y.next=u,u.next=M,d.lastEffect=u)),u}function Eb(){return Cs().memoizedState}function Rp(u,d,y,M){var T=Js();yn.flags|=u,T.memoizedState=xh(1|d,y,void 0,M===void 0?null:M)}function Np(u,d,y,M){var T=Cs();M=M===void 0?null:M;var N=void 0;if(li!==null){var V=li.memoizedState;if(N=V.destroy,M!==null&&jy(M,V.deps)){T.memoizedState=xh(d,y,N,M);return}}yn.flags|=u,T.memoizedState=xh(1|d,y,N,M)}function Yy(u,d){return Rp(8390656,8,u,d)}function _h(u,d){return Np(2048,8,u,d)}function bb(u,d){return Np(4,2,u,d)}function Tb(u,d){return Np(4,4,u,d)}function Ab(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function Cb(u,d,y){return y=y!=null?y.concat([u]):null,Np(4,4,Ab.bind(null,d,u),y)}function qy(){}function Pb(u,d){var y=Cs();d=d===void 0?null:d;var M=y.memoizedState;return M!==null&&d!==null&&jy(d,M[1])?M[0]:(y.memoizedState=[u,d],u)}function Rb(u,d){var y=Cs();d=d===void 0?null:d;var M=y.memoizedState;return M!==null&&d!==null&&jy(d,M[1])?M[0]:(u=u(),y.memoizedState=[u,d],u)}function lO(u,d){var y=Bt;Bt=y!==0&&4>y?y:4,u(!0);var M=kr.transition;kr.transition={};try{u(!1),d()}finally{Bt=y,kr.transition=M}}function Nb(){return Cs().memoizedState}function cO(u,d,y){var M=Ho(u);y={lane:M,action:y,hasEagerState:!1,eagerState:null,next:null},Ib(u)?Lb(d,y):(Db(u,d,y),y=Ci(),u=Ur(u,M,y),u!==null&&kb(u,d,M))}function uO(u,d,y){var M=Ho(u),T={lane:M,action:y,hasEagerState:!1,eagerState:null,next:null};if(Ib(u))Lb(d,T);else{Db(u,d,T);var N=u.alternate;if(u.lanes===0&&(N===null||N.lanes===0)&&(N=d.lastRenderedReducer,N!==null))try{var V=d.lastRenderedState,Y=N(V,y);if(T.hasEagerState=!0,T.eagerState=Y,Es(Y,V))return}catch{}finally{}y=Ci(),u=Ur(u,M,y),u!==null&&kb(u,d,M)}}function Ib(u){var d=u.alternate;return u===yn||d!==null&&d===yn}function Lb(u,d){vh=Ap=!0;var y=u.pending;y===null?d.next=d:(d.next=y.next,y.next=d),u.pending=d}function Db(u,d,y){Nn!==null&&u.mode&1&&!(bt&2)?(u=d.interleaved,u===null?(y.next=y,Ts===null?Ts=[d]:Ts.push(d)):(y.next=u.next,u.next=y),d.interleaved=y):(u=d.pending,u===null?y.next=y:(y.next=u.next,u.next=y),d.pending=y)}function kb(u,d,y){if(y&4194240){var M=d.lanes;M&=u.pendingLanes,y|=M,d.lanes=y,wy(u,y)}}var Ip={readContext:Nr,useCallback:ci,useContext:ci,useEffect:ci,useImperativeHandle:ci,useInsertionEffect:ci,useLayoutEffect:ci,useMemo:ci,useReducer:ci,useRef:ci,useState:ci,useDebugValue:ci,useDeferredValue:ci,useTransition:ci,useMutableSource:ci,useSyncExternalStore:ci,useId:ci,unstable_isNewReconciler:!1},hO={readContext:Nr,useCallback:function(u,d){return Js().memoizedState=[u,d===void 0?null:d],u},useContext:Nr,useEffect:Yy,useImperativeHandle:function(u,d,y){return y=y!=null?y.concat([u]):null,Rp(4194308,4,Ab.bind(null,d,u),y)},useLayoutEffect:function(u,d){return Rp(4194308,4,u,d)},useInsertionEffect:function(u,d){return Rp(4,2,u,d)},useMemo:function(u,d){var y=Js();return d=d===void 0?null:d,u=u(),y.memoizedState=[u,d],u},useReducer:function(u,d,y){var M=Js();return d=y!==void 0?y(d):d,M.memoizedState=M.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},M.queue=u,u=u.dispatch=cO.bind(null,yn,u),[M.memoizedState,u]},useRef:function(u){var d=Js();return u={current:u},d.memoizedState=u},useState:Xy,useDebugValue:qy,useDeferredValue:function(u){var d=Xy(u),y=d[0],M=d[1];return Yy(function(){var T=kr.transition;kr.transition={};try{M(u)}finally{kr.transition=T}},[u]),y},useTransition:function(){var u=Xy(!1),d=u[0];return u=lO.bind(null,u[1]),Js().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,y){var M=yn,T=Js();if(on){if(y===void 0)throw Error(o(407));y=y()}else{if(y=d(),Nn===null)throw Error(o(349));wc&30||_b(M,d,y)}T.memoizedState=y;var N={value:y,getSnapshot:d};return T.queue=N,Yy(wb.bind(null,M,N,u),[u]),M.flags|=2048,xh(9,Sb.bind(null,M,N,y,d),void 0,null),y},useId:function(){var u=Js(),d=Nn.identifierPrefix;if(on){var y=Qs,M=$s;y=(M&~(1<<32-sn(M)-1)).toString(32)+y,d=":"+d+"R"+y,y=yh++,0<y&&(d+="H"+y.toString(32)),d+=":"}else y=aO++,d=":"+d+"r"+y.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},dO={readContext:Nr,useCallback:Pb,useContext:Nr,useEffect:_h,useImperativeHandle:Cb,useInsertionEffect:bb,useLayoutEffect:Tb,useMemo:Rb,useReducer:Cp,useRef:Eb,useState:function(){return Cp(qa)},useDebugValue:qy,useDeferredValue:function(u){var d=Cp(qa),y=d[0],M=d[1];return _h(function(){var T=kr.transition;kr.transition={};try{M(u)}finally{kr.transition=T}},[u]),y},useTransition:function(){var u=Cp(qa)[0],d=Cs().memoizedState;return[u,d]},useMutableSource:yb,useSyncExternalStore:xb,useId:Nb,unstable_isNewReconciler:!1},fO={readContext:Nr,useCallback:Pb,useContext:Nr,useEffect:_h,useImperativeHandle:Cb,useInsertionEffect:bb,useLayoutEffect:Tb,useMemo:Rb,useReducer:Pp,useRef:Eb,useState:function(){return Pp(qa)},useDebugValue:qy,useDeferredValue:function(u){var d=Pp(qa),y=d[0],M=d[1];return _h(function(){var T=kr.transition;kr.transition={};try{M(u)}finally{kr.transition=T}},[u]),y},useTransition:function(){var u=Pp(qa)[0],d=Cs().memoizedState;return[u,d]},useMutableSource:yb,useSyncExternalStore:xb,useId:Nb,unstable_isNewReconciler:!1};function Ky(u,d){try{var y="",M=d;do y+=oO(M),M=M.return;while(M);var T=y}catch(N){T=`
Error generating stack: `+N.message+`
`+N.stack}return{value:u,source:d,stack:T}}function Zy(u,d){try{console.error(d.value)}catch(y){setTimeout(function(){throw y})}}var pO=typeof WeakMap=="function"?WeakMap:Map;function Ub(u,d,y){y=Zs(-1,y),y.tag=3,y.payload={element:null};var M=d.value;return y.callback=function(){qp||(qp=!0,px=M),Zy(u,d)},y}function Ob(u,d,y){y=Zs(-1,y),y.tag=3;var M=u.type.getDerivedStateFromError;if(typeof M=="function"){var T=d.value;y.payload=function(){return M(T)},y.callback=function(){Zy(u,d)}}var N=u.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(y.callback=function(){Zy(u,d),typeof M!="function"&&(zo===null?zo=new Set([this]):zo.add(this));var V=d.stack;this.componentDidCatch(d.value,{componentStack:V!==null?V:""})}),y}function Fb(u,d,y){var M=u.pingCache;if(M===null){M=u.pingCache=new pO;var T=new Set;M.set(d,T)}else T=M.get(d),T===void 0&&(T=new Set,M.set(d,T));T.has(y)||(T.add(y),u=CO.bind(null,u,d,y),d.then(u,u))}function Bb(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function zb(u,d,y,M,T){return u.mode&1?(u.flags|=65536,u.lanes=T,u):(u===d?u.flags|=65536:(u.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(d=Zs(-1,1),d.tag=2,Bo(y,d))),y.lanes|=1),u)}function Ps(u){u.flags|=4}function Vb(u,d){if(u!==null&&u.child===d.child)return!0;if(d.flags&16)return!1;for(u=d.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var Sh,wh,Lp,Dp;if(ht)Sh=function(u,d){for(var y=d.child;y!==null;){if(y.tag===5||y.tag===6)de(u,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},wh=function(){},Lp=function(u,d,y,M,T){if(u=u.memoizedProps,u!==M){var N=d.stateNode,V=As(Dr.current);y=ie(N,y,u,M,T,V),(d.updateQueue=y)&&Ps(d)}},Dp=function(u,d,y,M){y!==M&&Ps(d)};else if(me){Sh=function(u,d,y,M){for(var T=d.child;T!==null;){if(T.tag===5){var N=T.stateNode;y&&M&&(N=Ft(N,T.type,T.memoizedProps,T)),de(u,N)}else if(T.tag===6)N=T.stateNode,y&&M&&(N=zi(N,T.memoizedProps,T)),de(u,N);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)N=T.child,N!==null&&(N.return=T),Sh(u,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===d)break;for(;T.sibling===null;){if(T.return===null||T.return===d)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var Hb=function(u,d,y,M){for(var T=d.child;T!==null;){if(T.tag===5){var N=T.stateNode;y&&M&&(N=Ft(N,T.type,T.memoizedProps,T)),dt(u,N)}else if(T.tag===6)N=T.stateNode,y&&M&&(N=zi(N,T.memoizedProps,T)),dt(u,N);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)N=T.child,N!==null&&(N.return=T),Hb(u,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===d)break;for(;T.sibling===null;){if(T.return===null||T.return===d)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};wh=function(u,d){var y=d.stateNode;if(!Vb(u,d)){u=y.containerInfo;var M=De(u);Hb(M,d,!1,!1),y.pendingChildren=M,Ps(d),nn(u,M)}},Lp=function(u,d,y,M,T){var N=u.stateNode,V=u.memoizedProps;if((u=Vb(u,d))&&V===M)d.stateNode=N;else{var Y=d.stateNode,ce=As(Dr.current),Ee=null;V!==M&&(Ee=ie(Y,y,V,M,T,ce)),u&&Ee===null?d.stateNode=N:(N=Fe(N,Ee,y,V,M,d,u,Y),Le(N,y,M,T,ce)&&Ps(d),d.stateNode=N,u?Ps(d):Sh(N,d,!1,!1))}},Dp=function(u,d,y,M){y!==M?(u=As(_c.current),y=As(Dr.current),d.stateNode=be(M,u,y,d),Ps(d)):d.stateNode=u.stateNode}}else wh=function(){},Lp=function(){},Dp=function(){};function Mh(u,d){if(!on)switch(u.tailMode){case"hidden":d=u.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var M=null;y!==null;)y.alternate!==null&&(M=y),y=y.sibling;M===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:M.sibling=null}}function ui(u){var d=u.alternate!==null&&u.alternate.child===u.child,y=0,M=0;if(d)for(var T=u.child;T!==null;)y|=T.lanes|T.childLanes,M|=T.subtreeFlags&14680064,M|=T.flags&14680064,T.return=u,T=T.sibling;else for(T=u.child;T!==null;)y|=T.lanes|T.childLanes,M|=T.subtreeFlags,M|=T.flags,T.return=u,T=T.sibling;return u.subtreeFlags|=M,u.childLanes=y,d}function mO(u,d,y){var M=d.pendingProps;switch(ky(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ui(d),null;case 1:return bn(d.type)&&Xn(),ui(d),null;case 3:return M=d.stateNode,Sc(),it(rn),it(ke),Hy(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(u===null||u.child===null)&&(fh(d)?Ps(d):u===null||u.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,es!==null&&(vx(es),es=null))),wh(u,d),ui(d),null;case 5:zy(d),y=As(_c.current);var T=d.type;if(u!==null&&d.stateNode!=null)Lp(u,d,T,M,y),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!M){if(d.stateNode===null)throw Error(o(166));return ui(d),null}if(u=As(Dr.current),fh(d)){if(!xe)throw Error(o(175));u=ap(d.stateNode,d.type,d.memoizedProps,y,u,d,!dh),d.updateQueue=u,u!==null&&Ps(d)}else{var N=ee(T,M,y,u,d);Sh(N,d,!1,!1),d.stateNode=N,Le(N,T,M,y,u)&&Ps(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return ui(d),null;case 6:if(u&&d.stateNode!=null)Dp(u,d,u.memoizedProps,M);else{if(typeof M!="string"&&d.stateNode===null)throw Error(o(166));if(u=As(_c.current),y=As(Dr.current),fh(d)){if(!xe)throw Error(o(176));if(u=d.stateNode,M=d.memoizedProps,(y=lp(u,M,d,!dh))&&(T=lr,T!==null))switch(N=(T.mode&1)!==0,T.tag){case 3:$(T.stateNode.containerInfo,u,M,N);break;case 5:Te(T.type,T.memoizedProps,T.stateNode,u,M,N)}y&&Ps(d)}else d.stateNode=be(M,u,y,d)}return ui(d),null;case 13:if(it(cn),M=d.memoizedState,on&&cr!==null&&d.mode&1&&!(d.flags&128)){for(u=cr;u;)u=ko(u);return yc(),d.flags|=98560,d}if(M!==null&&M.dehydrated!==null){if(M=fh(d),u===null){if(!M)throw Error(o(318));if(!xe)throw Error(o(344));if(u=d.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));yy(u,d)}else yc(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return ui(d),null}return es!==null&&(vx(es),es=null),d.flags&128?(d.lanes=y,d):(M=M!==null,y=!1,u===null?fh(d):y=u.memoizedState!==null,M&&!y&&(d.child.flags|=8192,d.mode&1&&(u===null||cn.current&1?Bn===0&&(Bn=3):xx())),d.updateQueue!==null&&(d.flags|=4),ui(d),null);case 4:return Sc(),wh(u,d),u===null&&$e(d.stateNode.containerInfo),ui(d),null;case 10:return Py(d.type._context),ui(d),null;case 17:return bn(d.type)&&Xn(),ui(d),null;case 19:if(it(cn),T=d.memoizedState,T===null)return ui(d),null;if(M=(d.flags&128)!==0,N=T.rendering,N===null)if(M)Mh(T,!1);else{if(Bn!==0||u!==null&&u.flags&128)for(u=d.child;u!==null;){if(N=bp(u),N!==null){for(d.flags|=128,Mh(T,!1),u=N.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),d.subtreeFlags=0,u=y,M=d.child;M!==null;)y=M,T=u,y.flags&=14680066,N=y.alternate,N===null?(y.childLanes=0,y.lanes=T,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=N.childLanes,y.lanes=N.lanes,y.child=N.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=N.memoizedProps,y.memoizedState=N.memoizedState,y.updateQueue=N.updateQueue,y.type=N.type,T=N.dependencies,y.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),M=M.sibling;return xt(cn,cn.current&1|2),d.child}u=u.sibling}T.tail!==null&&Yn()>fx&&(d.flags|=128,M=!0,Mh(T,!1),d.lanes=4194304)}else{if(!M)if(u=bp(N),u!==null){if(d.flags|=128,M=!0,u=u.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),Mh(T,!0),T.tail===null&&T.tailMode==="hidden"&&!N.alternate&&!on)return ui(d),null}else 2*Yn()-T.renderingStartTime>fx&&y!==1073741824&&(d.flags|=128,M=!0,Mh(T,!1),d.lanes=4194304);T.isBackwards?(N.sibling=d.child,d.child=N):(u=T.last,u!==null?u.sibling=N:d.child=N,T.last=N)}return T.tail!==null?(d=T.tail,T.rendering=d,T.tail=d.sibling,T.renderingStartTime=Yn(),d.sibling=null,u=cn.current,xt(cn,M?u&1|2:u&1),d):(ui(d),null);case 22:case 23:return yx(),M=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==M&&(d.flags|=8192),M&&d.mode&1?hr&1073741824&&(ui(d),ht&&d.subtreeFlags&6&&(d.flags|=8192)):ui(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}var gO=a.ReactCurrentOwner,ur=!1;function Ai(u,d,y,M){d.child=u===null?gb(d,null,y,M):xc(d,u.child,y,M)}function jb(u,d,y,M,T){y=y.render;var N=d.ref;return mc(d,T),M=Gy(u,d,y,M,N,T),y=Wy(),u!==null&&!ur?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~T,eo(u,d,T)):(on&&y&&Dy(d),d.flags|=1,Ai(u,d,M,T),d.child)}function Gb(u,d,y,M,T){if(u===null){var N=y.type;return typeof N=="function"&&!_x(N)&&N.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(d.tag=15,d.type=N,Wb(u,d,N,M,T)):(u=tm(y.type,null,M,d,d.mode,T),u.ref=d.ref,u.return=d,d.child=u)}if(N=u.child,!(u.lanes&T)){var V=N.memoizedProps;if(y=y.compare,y=y!==null?y:gp,y(V,M)&&u.ref===d.ref)return eo(u,d,T)}return d.flags|=1,u=Go(N,M),u.ref=d.ref,u.return=d,d.child=u}function Wb(u,d,y,M,T){if(u!==null&&gp(u.memoizedProps,M)&&u.ref===d.ref)if(ur=!1,(u.lanes&T)!==0)u.flags&131072&&(ur=!0);else return d.lanes=u.lanes,eo(u,d,T);return $y(u,d,y,M,T)}function Xb(u,d,y){var M=d.pendingProps,T=M.children,N=u!==null?u.memoizedState:null;if(M.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},xt(Mc,hr),hr|=y;else if(y&1073741824)d.memoizedState={baseLanes:0,cachePool:null},M=N!==null?N.baseLanes:y,xt(Mc,hr),hr|=M;else return u=N!==null?N.baseLanes|y:y,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null},d.updateQueue=null,xt(Mc,hr),hr|=u,null;else N!==null?(M=N.baseLanes|y,d.memoizedState=null):M=y,xt(Mc,hr),hr|=M;return Ai(u,d,T,y),d.child}function Yb(u,d){var y=d.ref;(u===null&&y!==null||u!==null&&u.ref!==y)&&(d.flags|=512,d.flags|=2097152)}function $y(u,d,y,M,T){var N=bn(y)?At:ke.current;return N=Wn(d,N),mc(d,T),y=Gy(u,d,y,M,N,T),M=Wy(),u!==null&&!ur?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~T,eo(u,d,T)):(on&&M&&Dy(d),d.flags|=1,Ai(u,d,y,T),d.child)}function qb(u,d,y,M,T){if(bn(y)){var N=!0;Ti(d)}else N=!1;if(mc(d,T),d.stateNode===null)u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),lb(d,y,M),Ly(d,y,M,T),M=!0;else if(u===null){var V=d.stateNode,Y=d.memoizedProps;V.props=Y;var ce=V.context,Ee=y.contextType;typeof Ee=="object"&&Ee!==null?Ee=Nr(Ee):(Ee=bn(y)?At:ke.current,Ee=Wn(d,Ee));var We=y.getDerivedStateFromProps,mt=typeof We=="function"||typeof V.getSnapshotBeforeUpdate=="function";mt||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Y!==M||ce!==Ee)&&cb(d,V,M,Ee),Fo=!1;var nt=d.memoizedState;V.state=nt,_p(d,M,V,T),ce=d.memoizedState,Y!==M||nt!==ce||rn.current||Fo?(typeof We=="function"&&(Iy(d,y,We,M),ce=d.memoizedState),(Y=Fo||ab(d,y,Y,M,nt,ce,Ee))?(mt||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(d.flags|=4194308)):(typeof V.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=M,d.memoizedState=ce),V.props=M,V.state=ce,V.context=Ee,M=Y):(typeof V.componentDidMount=="function"&&(d.flags|=4194308),M=!1)}else{V=d.stateNode,ib(u,d),Y=d.memoizedProps,Ee=d.type===d.elementType?Y:Jr(d.type,Y),V.props=Ee,mt=d.pendingProps,nt=V.context,ce=y.contextType,typeof ce=="object"&&ce!==null?ce=Nr(ce):(ce=bn(y)?At:ke.current,ce=Wn(d,ce));var qt=y.getDerivedStateFromProps;(We=typeof qt=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Y!==mt||nt!==ce)&&cb(d,V,M,ce),Fo=!1,nt=d.memoizedState,V.state=nt,_p(d,M,V,T);var Je=d.memoizedState;Y!==mt||nt!==Je||rn.current||Fo?(typeof qt=="function"&&(Iy(d,y,qt,M),Je=d.memoizedState),(Ee=Fo||ab(d,y,Ee,M,nt,Je,ce)||!1)?(We||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(M,Je,ce),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(M,Je,ce)),typeof V.componentDidUpdate=="function"&&(d.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof V.componentDidUpdate!="function"||Y===u.memoizedProps&&nt===u.memoizedState||(d.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Y===u.memoizedProps&&nt===u.memoizedState||(d.flags|=1024),d.memoizedProps=M,d.memoizedState=Je),V.props=M,V.state=Je,V.context=ce,M=Ee):(typeof V.componentDidUpdate!="function"||Y===u.memoizedProps&&nt===u.memoizedState||(d.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Y===u.memoizedProps&&nt===u.memoizedState||(d.flags|=1024),M=!1)}return Qy(u,d,y,M,N,T)}function Qy(u,d,y,M,T,N){Yb(u,d);var V=(d.flags&128)!==0;if(!M&&!V)return T&&Oo(d,y,!1),eo(u,d,N);M=d.stateNode,gO.current=d;var Y=V&&typeof y.getDerivedStateFromError!="function"?null:M.render();return d.flags|=1,u!==null&&V?(d.child=xc(d,u.child,null,N),d.child=xc(d,null,Y,N)):Ai(u,d,Y,N),d.memoizedState=M.state,T&&Oo(d,y,!0),d.child}function Kb(u){var d=u.stateNode;d.pendingContext?Uo(u,d.pendingContext,d.pendingContext!==d.context):d.context&&Uo(u,d.context,!1),By(u,d.containerInfo)}function Zb(u,d,y,M,T){return yc(),Fy(T),d.flags|=256,Ai(u,d,y,M),d.child}var kp={dehydrated:null,treeContext:null,retryLane:0};function Up(u){return{baseLanes:u,cachePool:null}}function $b(u,d,y){var M=d.pendingProps,T=cn.current,N=!1,V=(d.flags&128)!==0,Y;if((Y=V)||(Y=u!==null&&u.memoizedState===null?!1:(T&2)!==0),Y?(N=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(T|=1),xt(cn,T&1),u===null)return Oy(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(d.mode&1?Wa(u)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(T=M.children,u=M.fallback,N?(M=d.mode,N=d.child,T={mode:"hidden",children:T},!(M&1)&&N!==null?(N.childLanes=0,N.pendingProps=T):N=nm(T,M,0,null),u=el(u,M,y,null),N.return=d,u.return=d,N.sibling=u,d.child=N,d.child.memoizedState=Up(y),d.memoizedState=kp,u):Jy(d,T));if(T=u.memoizedState,T!==null){if(Y=T.dehydrated,Y!==null){if(V)return d.flags&256?(d.flags&=-257,Op(u,d,y,Error(o(422)))):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):(N=M.fallback,T=d.mode,M=nm({mode:"visible",children:M.children},T,0,null),N=el(N,T,y,null),N.flags|=2,M.return=d,N.return=d,M.sibling=N,d.child=M,d.mode&1&&xc(d,u.child,null,y),d.child.memoizedState=Up(y),d.memoizedState=kp,N);if(!(d.mode&1))d=Op(u,d,y,null);else if(Wa(Y))d=Op(u,d,y,Error(o(419)));else if(M=(y&u.childLanes)!==0,ur||M){if(M=Nn,M!==null){switch(y&-y){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}M=N&(M.suspendedLanes|y)?0:N,M!==0&&M!==T.retryLane&&(T.retryLane=M,Ur(u,M,-1))}xx(),d=Op(u,d,y,Error(o(421)))}else _s(Y)?(d.flags|=128,d.child=u.child,d=PO.bind(null,u),sp(Y,d),d=null):(y=T.treeContext,xe&&(cr=fc(Y),lr=d,on=!0,es=null,dh=!1,y!==null&&(Ir[Lr++]=$s,Ir[Lr++]=Qs,Ir[Lr++]=Xa,$s=y.id,Qs=y.overflow,Xa=d)),d=Jy(d,d.pendingProps.children),d.flags|=4096);return d}return N?(M=Jb(u,d,M.children,M.fallback,y),N=d.child,T=u.child.memoizedState,N.memoizedState=T===null?Up(y):{baseLanes:T.baseLanes|y,cachePool:null},N.childLanes=u.childLanes&~y,d.memoizedState=kp,M):(y=Qb(u,d,M.children,y),d.memoizedState=null,y)}return N?(M=Jb(u,d,M.children,M.fallback,y),N=d.child,T=u.child.memoizedState,N.memoizedState=T===null?Up(y):{baseLanes:T.baseLanes|y,cachePool:null},N.childLanes=u.childLanes&~y,d.memoizedState=kp,M):(y=Qb(u,d,M.children,y),d.memoizedState=null,y)}function Jy(u,d){return d=nm({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function Qb(u,d,y,M){var T=u.child;return u=T.sibling,y=Go(T,{mode:"visible",children:y}),!(d.mode&1)&&(y.lanes=M),y.return=d,y.sibling=null,u!==null&&(M=d.deletions,M===null?(d.deletions=[u],d.flags|=16):M.push(u)),d.child=y}function Jb(u,d,y,M,T){var N=d.mode;u=u.child;var V=u.sibling,Y={mode:"hidden",children:y};return!(N&1)&&d.child!==u?(y=d.child,y.childLanes=0,y.pendingProps=Y,d.deletions=null):(y=Go(u,Y),y.subtreeFlags=u.subtreeFlags&14680064),V!==null?M=Go(V,M):(M=el(M,N,T,null),M.flags|=2),M.return=d,y.return=d,y.sibling=M,d.child=y,M}function Op(u,d,y,M){return M!==null&&Fy(M),xc(d,u.child,null,y),u=Jy(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function eT(u,d,y){u.lanes|=d;var M=u.alternate;M!==null&&(M.lanes|=d),Ry(u.return,d,y)}function ex(u,d,y,M,T){var N=u.memoizedState;N===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:M,tail:y,tailMode:T}:(N.isBackwards=d,N.rendering=null,N.renderingStartTime=0,N.last=M,N.tail=y,N.tailMode=T)}function tT(u,d,y){var M=d.pendingProps,T=M.revealOrder,N=M.tail;if(Ai(u,d,M.children,y),M=cn.current,M&2)M=M&1|2,d.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&eT(u,y,d);else if(u.tag===19)eT(u,y,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}M&=1}if(xt(cn,M),!(d.mode&1))d.memoizedState=null;else switch(T){case"forwards":for(y=d.child,T=null;y!==null;)u=y.alternate,u!==null&&bp(u)===null&&(T=y),y=y.sibling;y=T,y===null?(T=d.child,d.child=null):(T=y.sibling,y.sibling=null),ex(d,!1,T,y,N);break;case"backwards":for(y=null,T=d.child,d.child=null;T!==null;){if(u=T.alternate,u!==null&&bp(u)===null){d.child=T;break}u=T.sibling,T.sibling=y,y=T,T=u}ex(d,!0,y,null,N);break;case"together":ex(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function eo(u,d,y){if(u!==null&&(d.dependencies=u.dependencies),Ec|=d.lanes,!(y&d.childLanes))return null;if(u!==null&&d.child!==u.child)throw Error(o(153));if(d.child!==null){for(u=d.child,y=Go(u,u.pendingProps),d.child=y,y.return=d;u.sibling!==null;)u=u.sibling,y=y.sibling=Go(u,u.pendingProps),y.return=d;y.sibling=null}return d.child}function vO(u,d,y){switch(d.tag){case 3:Kb(d),yc();break;case 5:vb(d);break;case 1:bn(d.type)&&Ti(d);break;case 4:By(d,d.stateNode.containerInfo);break;case 10:nb(d,d.type._context,d.memoizedProps.value);break;case 13:var M=d.memoizedState;if(M!==null)return M.dehydrated!==null?(xt(cn,cn.current&1),d.flags|=128,null):y&d.child.childLanes?$b(u,d,y):(xt(cn,cn.current&1),u=eo(u,d,y),u!==null?u.sibling:null);xt(cn,cn.current&1);break;case 19:if(M=(y&d.childLanes)!==0,u.flags&128){if(M)return tT(u,d,y);d.flags|=128}var T=d.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),xt(cn,cn.current),M)break;return null;case 22:case 23:return d.lanes=0,Xb(u,d,y)}return eo(u,d,y)}function yO(u,d){switch(ky(d),d.tag){case 1:return bn(d.type)&&Xn(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return Sc(),it(rn),it(ke),Hy(),u=d.flags,u&65536&&!(u&128)?(d.flags=u&-65537|128,d):null;case 5:return zy(d),null;case 13:if(it(cn),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(o(340));yc()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return it(cn),null;case 4:return Sc(),null;case 10:return Py(d.type._context),null;case 22:case 23:return yx(),null;case 24:return null;default:return null}}var Fp=!1,Ka=!1,xO=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Bp(u,d){var y=u.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(M){ji(u,d,M)}else y.current=null}function tx(u,d,y){try{y()}catch(M){ji(u,d,M)}}var nT=!1;function _O(u,d){for(G(u.containerInfo),Ie=d;Ie!==null;)if(u=Ie,d=u.child,(u.subtreeFlags&1028)!==0&&d!==null)d.return=u,Ie=d;else for(;Ie!==null;){u=Ie;try{var y=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var M=y.memoizedProps,T=y.memoizedState,N=u.stateNode,V=N.getSnapshotBeforeUpdate(u.elementType===u.type?M:Jr(u.type,M),T);N.__reactInternalSnapshotBeforeUpdate=V}break;case 3:ht&&ge(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Y){ji(u,u.return,Y)}if(d=u.sibling,d!==null){d.return=u.return,Ie=d;break}Ie=u.return}return y=nT,nT=!1,y}function Za(u,d,y){var M=d.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var T=M=M.next;do{if((T.tag&u)===u){var N=T.destroy;T.destroy=void 0,N!==void 0&&tx(d,y,N)}T=T.next}while(T!==M)}}function Eh(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var y=d=d.next;do{if((y.tag&u)===u){var M=y.create;y.destroy=M()}y=y.next}while(y!==d)}}function nx(u){var d=u.ref;if(d!==null){var y=u.stateNode;switch(u.tag){case 5:u=Q(y);break;default:u=y}typeof d=="function"?d(u):d.current=u}}function iT(u,d,y){if(Ms&&typeof Ms.onCommitFiberUnmount=="function")try{Ms.onCommitFiberUnmount(pp,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(u=d.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var M=u=u.next;do{var T=M,N=T.destroy;T=T.tag,N!==void 0&&(T&2||T&4)&&tx(d,y,N),M=M.next}while(M!==u)}break;case 1:if(Bp(d,y),u=d.stateNode,typeof u.componentWillUnmount=="function")try{u.props=d.memoizedProps,u.state=d.memoizedState,u.componentWillUnmount()}catch(V){ji(d,y,V)}break;case 5:Bp(d,y);break;case 4:ht?cT(u,d,y):me&&me&&(d=d.stateNode.containerInfo,y=De(d),Fn(d,y))}}function rT(u,d,y){for(var M=d;;)if(iT(u,M,y),M.child===null||ht&&M.tag===4){if(M===d)break;for(;M.sibling===null;){if(M.return===null||M.return===d)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function sT(u){var d=u.alternate;d!==null&&(u.alternate=null,sT(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&Ve(d)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function oT(u){return u.tag===5||u.tag===3||u.tag===4}function aT(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||oT(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function lT(u){if(ht){e:{for(var d=u.return;d!==null;){if(oT(d))break e;d=d.return}throw Error(o(160))}var y=d;switch(y.tag){case 5:d=y.stateNode,y.flags&32&&(ft(d),y.flags&=-33),y=aT(u),rx(u,y,d);break;case 3:case 4:d=y.stateNode.containerInfo,y=aT(u),ix(u,y,d);break;default:throw Error(o(161))}}}function ix(u,d,y){var M=u.tag;if(M===5||M===6)u=u.stateNode,d?ut(y,u,d):ze(y,u);else if(M!==4&&(u=u.child,u!==null))for(ix(u,d,y),u=u.sibling;u!==null;)ix(u,d,y),u=u.sibling}function rx(u,d,y){var M=u.tag;if(M===5||M===6)u=u.stateNode,d?st(y,u,d):Pe(y,u);else if(M!==4&&(u=u.child,u!==null))for(rx(u,d,y),u=u.sibling;u!==null;)rx(u,d,y),u=u.sibling}function cT(u,d,y){for(var M=d,T=!1,N,V;;){if(!T){T=M.return;e:for(;;){if(T===null)throw Error(o(160));switch(N=T.stateNode,T.tag){case 5:V=!1;break e;case 3:N=N.containerInfo,V=!0;break e;case 4:N=N.containerInfo,V=!0;break e}T=T.return}T=!0}if(M.tag===5||M.tag===6)rT(u,M,y),V?Rt(N,M.stateNode):Ge(N,M.stateNode);else if(M.tag===18)V?oe(N,M.stateNode):K(N,M.stateNode);else if(M.tag===4){if(M.child!==null){N=M.stateNode.containerInfo,V=!0,M.child.return=M,M=M.child;continue}}else if(iT(u,M,y),M.child!==null){M.child.return=M,M=M.child;continue}if(M===d)break;for(;M.sibling===null;){if(M.return===null||M.return===d)return;M=M.return,M.tag===4&&(T=!1)}M.sibling.return=M.return,M=M.sibling}}function sx(u,d){if(ht){switch(d.tag){case 0:case 11:case 14:case 15:Za(3,d,d.return),Eh(3,d),Za(5,d,d.return);return;case 1:return;case 5:var y=d.stateNode;if(y!=null){var M=d.memoizedProps;u=u!==null?u.memoizedProps:M;var T=d.type,N=d.updateQueue;d.updateQueue=null,N!==null&&je(y,N,T,u,M,d)}return;case 6:if(d.stateNode===null)throw Error(o(162));y=d.memoizedProps,Tt(d.stateNode,u!==null?u.memoizedProps:y,y);return;case 3:xe&&u!==null&&u.memoizedState.isDehydrated&&cp(d.stateNode.containerInfo);return;case 12:return;case 13:zp(d);return;case 19:zp(d);return;case 17:return}throw Error(o(163))}switch(d.tag){case 0:case 11:case 14:case 15:Za(3,d,d.return),Eh(3,d),Za(5,d,d.return);return;case 12:return;case 13:zp(d);return;case 19:zp(d);return;case 3:xe&&u!==null&&u.memoizedState.isDehydrated&&cp(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(me){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,Fn(d.containerInfo,d.pendingChildren);break e}throw Error(o(163))}}function zp(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var y=u.stateNode;y===null&&(y=u.stateNode=new xO),d.forEach(function(M){var T=RO.bind(null,u,M);y.has(M)||(y.add(M),M.then(T,T))})}}function SO(u,d){for(Ie=d;Ie!==null;){d=Ie;var y=d.deletions;if(y!==null)for(var M=0;M<y.length;M++){var T=y[M];try{var N=u;ht?cT(N,T,d):rT(N,T,d);var V=T.alternate;V!==null&&(V.return=null),T.return=null}catch(Qe){ji(T,d,Qe)}}if(y=d.child,d.subtreeFlags&12854&&y!==null)y.return=d,Ie=y;else for(;Ie!==null;){d=Ie;try{var Y=d.flags;if(Y&32&&ht&&ft(d.stateNode),Y&512){var ce=d.alternate;if(ce!==null){var Ee=ce.ref;Ee!==null&&(typeof Ee=="function"?Ee(null):Ee.current=null)}}if(Y&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var We=d.alternate;(We===null||We.memoizedState===null)&&(dx=Yn())}break;case 22:var mt=d.memoizedState!==null,nt=d.alternate,qt=nt!==null&&nt.memoizedState!==null;if(y=d,ht){e:if(M=y,T=mt,N=null,ht)for(var Je=M;;){if(Je.tag===5){if(N===null){N=Je;var hi=Je.stateNode;T?Wt(hi):Re(Je.stateNode,Je.memoizedProps)}}else if(Je.tag===6){if(N===null){var Fr=Je.stateNode;T?q(Fr):ue(Fr,Je.memoizedProps)}}else if((Je.tag!==22&&Je.tag!==23||Je.memoizedState===null||Je===M)&&Je.child!==null){Je.child.return=Je,Je=Je.child;continue}if(Je===M)break;for(;Je.sibling===null;){if(Je.return===null||Je.return===M)break e;N===Je&&(N=null),Je=Je.return}N===Je&&(N=null),Je.sibling.return=Je.return,Je=Je.sibling}}if(mt&&!qt&&y.mode&1){Ie=y;for(var re=y.child;re!==null;){for(y=Ie=re;Ie!==null;){M=Ie;var Z=M.child;switch(M.tag){case 0:case 11:case 14:case 15:Za(4,M,M.return);break;case 1:Bp(M,M.return);var le=M.stateNode;if(typeof le.componentWillUnmount=="function"){var Oe=M.return;try{le.props=M.memoizedProps,le.state=M.memoizedState,le.componentWillUnmount()}catch(Qe){ji(M,Oe,Qe)}}break;case 5:Bp(M,M.return);break;case 22:if(M.memoizedState!==null){dT(y);continue}}Z!==null?(Z.return=M,Ie=Z):dT(y)}re=re.sibling}}}switch(Y&4102){case 2:lT(d),d.flags&=-3;break;case 6:lT(d),d.flags&=-3,sx(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,sx(d.alternate,d);break;case 4:sx(d.alternate,d)}}catch(Qe){ji(d,d.return,Qe)}if(y=d.sibling,y!==null){y.return=d.return,Ie=y;break}Ie=d.return}}}function wO(u,d,y){Ie=u,uT(u)}function uT(u,d,y){for(var M=(u.mode&1)!==0;Ie!==null;){var T=Ie,N=T.child;if(T.tag===22&&M){var V=T.memoizedState!==null||Fp;if(!V){var Y=T.alternate,ce=Y!==null&&Y.memoizedState!==null||Ka;Y=Fp;var Ee=Ka;if(Fp=V,(Ka=ce)&&!Ee)for(Ie=T;Ie!==null;)V=Ie,ce=V.child,V.tag===22&&V.memoizedState!==null?fT(T):ce!==null?(ce.return=V,Ie=ce):fT(T);for(;N!==null;)Ie=N,uT(N),N=N.sibling;Ie=T,Fp=Y,Ka=Ee}hT(u)}else T.subtreeFlags&8772&&N!==null?(N.return=T,Ie=N):hT(u)}}function hT(u){for(;Ie!==null;){var d=Ie;if(d.flags&8772){var y=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:Ka||Eh(5,d);break;case 1:var M=d.stateNode;if(d.flags&4&&!Ka)if(y===null)M.componentDidMount();else{var T=d.elementType===d.type?y.memoizedProps:Jr(d.type,y.memoizedProps);M.componentDidUpdate(T,y.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var N=d.updateQueue;N!==null&&sb(d,N,M);break;case 3:var V=d.updateQueue;if(V!==null){if(y=null,d.child!==null)switch(d.child.tag){case 5:y=Q(d.child.stateNode);break;case 1:y=d.child.stateNode}sb(d,V,y)}break;case 5:var Y=d.stateNode;y===null&&d.flags&4&&Me(Y,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(xe&&d.memoizedState===null){var ce=d.alternate;if(ce!==null){var Ee=ce.memoizedState;if(Ee!==null){var We=Ee.dehydrated;We!==null&&O(We)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Ka||d.flags&512&&nx(d)}catch(mt){ji(d,d.return,mt)}}if(d===u){Ie=null;break}if(y=d.sibling,y!==null){y.return=d.return,Ie=y;break}Ie=d.return}}function dT(u){for(;Ie!==null;){var d=Ie;if(d===u){Ie=null;break}var y=d.sibling;if(y!==null){y.return=d.return,Ie=y;break}Ie=d.return}}function fT(u){for(;Ie!==null;){var d=Ie;try{switch(d.tag){case 0:case 11:case 15:var y=d.return;try{Eh(4,d)}catch(ce){ji(d,y,ce)}break;case 1:var M=d.stateNode;if(typeof M.componentDidMount=="function"){var T=d.return;try{M.componentDidMount()}catch(ce){ji(d,T,ce)}}var N=d.return;try{nx(d)}catch(ce){ji(d,N,ce)}break;case 5:var V=d.return;try{nx(d)}catch(ce){ji(d,V,ce)}}}catch(ce){ji(d,d.return,ce)}if(d===u){Ie=null;break}var Y=d.sibling;if(Y!==null){Y.return=d.return,Ie=Y;break}Ie=d.return}}var Vp=0,Hp=1,jp=2,Gp=3,Wp=4;if(typeof Symbol=="function"&&Symbol.for){var bh=Symbol.for;Vp=bh("selector.component"),Hp=bh("selector.has_pseudo_class"),jp=bh("selector.role"),Gp=bh("selector.test_id"),Wp=bh("selector.text")}function ox(u){var d=H(u);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(u=B(u),u===null)throw Error(o(362));return u.stateNode.current}function ax(u,d){switch(d.$$typeof){case Vp:if(u.type===d.value)return!0;break;case Hp:e:{d=d.value,u=[u,0];for(var y=0;y<u.length;){var M=u[y++],T=u[y++],N=d[T];if(M.tag!==5||!he(M)){for(;N!=null&&ax(M,N);)T++,N=d[T];if(T===d.length){d=!0;break e}else for(M=M.child;M!==null;)u.push(M,T),M=M.sibling}}d=!1}return d;case jp:if(u.tag===5&&ye(u.stateNode,d.value))return!0;break;case Wp:if((u.tag===5||u.tag===6)&&(u=ne(u),u!==null&&0<=u.indexOf(d.value)))return!0;break;case Gp:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function lx(u){switch(u.$$typeof){case Vp:return"<"+(I(u.value)||"Unknown")+">";case Hp:return":has("+(lx(u)||"")+")";case jp:return'[role="'+u.value+'"]';case Wp:return'"'+u.value+'"';case Gp:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function pT(u,d){var y=[];u=[u,0];for(var M=0;M<u.length;){var T=u[M++],N=u[M++],V=d[N];if(T.tag!==5||!he(T)){for(;V!=null&&ax(T,V);)N++,V=d[N];if(N===d.length)y.push(T);else for(T=T.child;T!==null;)u.push(T,N),T=T.sibling}}return y}function cx(u,d){if(!Ue)throw Error(o(363));u=ox(u),u=pT(u,d),d=[],u=Array.from(u);for(var y=0;y<u.length;){var M=u[y++];if(M.tag===5)he(M)||d.push(M.stateNode);else for(M=M.child;M!==null;)u.push(M),M=M.sibling}return d}var MO=Math.ceil,Xp=a.ReactCurrentDispatcher,ux=a.ReactCurrentOwner,Tn=a.ReactCurrentBatchConfig,bt=0,Nn=null,In=null,ti=0,hr=0,Mc=Nt(0),Bn=0,Th=null,Ec=0,Yp=0,hx=0,Ah=null,Vi=null,dx=0,fx=1/0;function bc(){fx=Yn()+500}var qp=!1,px=null,zo=null,Kp=!1,Vo=null,Zp=0,Ch=0,mx=null,$p=-1,Qp=0;function Ci(){return bt&6?Yn():$p!==-1?$p:$p=Yn()}function Ho(u){return u.mode&1?bt&2&&ti!==0?ti&-ti:sO.transition!==null?(Qp===0&&(u=hp,hp<<=1,!(hp&4194240)&&(hp=64),Qp=u),Qp):(u=Bt,u!==0?u:Se()):1}function Ur(u,d,y){if(50<Ch)throw Ch=0,mx=null,Error(o(185));var M=Jp(u,d);return M===null?null:(hh(M,d,y),(!(bt&2)||M!==Nn)&&(M===Nn&&(!(bt&2)&&(Yp|=d),Bn===4&&jo(M,ti)),Hi(M,y),d===1&&bt===0&&!(u.mode&1)&&(bc(),mp&&bs())),M)}function Jp(u,d){u.lanes|=d;var y=u.alternate;for(y!==null&&(y.lanes|=d),y=u,u=u.return;u!==null;)u.childLanes|=d,y=u.alternate,y!==null&&(y.childLanes|=d),y=u,u=u.return;return y.tag===3?y.stateNode:null}function Hi(u,d){var y=u.callbackNode;ZU(u,d);var M=fp(u,u===Nn?ti:0);if(M===0)y!==null&&eb(y),u.callbackNode=null,u.callbackPriority=0;else if(d=M&-M,u.callbackPriority!==d){if(y!=null&&eb(y),d===1)u.tag===0?rO(gT.bind(null,u)):tb(gT.bind(null,u)),Ae?rt(function(){bt===0&&bs()}):My(Ey,bs),y=null;else{switch(JE(M)){case 1:y=Ey;break;case 4:y=eO;break;case 16:y=by;break;case 536870912:y=tO;break;default:y=by}y=bT(y,mT.bind(null,u))}u.callbackPriority=d,u.callbackNode=y}}function mT(u,d){if($p=-1,Qp=0,bt&6)throw Error(o(327));var y=u.callbackNode;if(Ja()&&u.callbackNode!==y)return null;var M=fp(u,u===Nn?ti:0);if(M===0)return null;if(M&30||M&u.expiredLanes||d)d=em(u,M);else{d=M;var T=bt;bt|=2;var N=xT();(Nn!==u||ti!==d)&&(bc(),$a(u,d));do try{TO();break}catch(Y){yT(u,Y)}while(!0);Cy(),Xp.current=N,bt=T,In!==null?d=0:(Nn=null,ti=0,d=Bn)}if(d!==0){if(d===2&&(T=_y(u),T!==0&&(M=T,d=gx(u,T))),d===1)throw y=Th,$a(u,0),jo(u,M),Hi(u,Yn()),y;if(d===6)jo(u,M);else{if(T=u.current.alternate,!(M&30)&&!EO(T)&&(d=em(u,M),d===2&&(N=_y(u),N!==0&&(M=N,d=gx(u,N))),d===1))throw y=Th,$a(u,0),jo(u,M),Hi(u,Yn()),y;switch(u.finishedWork=T,u.finishedLanes=M,d){case 0:case 1:throw Error(o(345));case 2:Qa(u,Vi);break;case 3:if(jo(u,M),(M&130023424)===M&&(d=dx+500-Yn(),10<d)){if(fp(u,0)!==0)break;if(T=u.suspendedLanes,(T&M)!==M){Ci(),u.pingedLanes|=u.suspendedLanes&T;break}u.timeoutHandle=_e(Qa.bind(null,u,Vi),d);break}Qa(u,Vi);break;case 4:if(jo(u,M),(M&4194240)===M)break;for(d=u.eventTimes,T=-1;0<M;){var V=31-sn(M);N=1<<V,V=d[V],V>T&&(T=V),M&=~N}if(M=T,M=Yn()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*MO(M/1960))-M,10<M){u.timeoutHandle=_e(Qa.bind(null,u,Vi),M);break}Qa(u,Vi);break;case 5:Qa(u,Vi);break;default:throw Error(o(329))}}}return Hi(u,Yn()),u.callbackNode===y?mT.bind(null,u):null}function gx(u,d){var y=Ah;return u.current.memoizedState.isDehydrated&&($a(u,d).flags|=256),u=em(u,d),u!==2&&(d=Vi,Vi=y,d!==null&&vx(d)),u}function vx(u){Vi===null?Vi=u:Vi.push.apply(Vi,u)}function EO(u){for(var d=u;;){if(d.flags&16384){var y=d.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var M=0;M<y.length;M++){var T=y[M],N=T.getSnapshot;T=T.value;try{if(!Es(N(),T))return!1}catch{return!1}}}if(y=d.child,d.subtreeFlags&16384&&y!==null)y.return=d,d=y;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function jo(u,d){for(d&=~hx,d&=~Yp,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var y=31-sn(d),M=1<<y;u[y]=-1,d&=~M}}function gT(u){if(bt&6)throw Error(o(327));Ja();var d=fp(u,0);if(!(d&1))return Hi(u,Yn()),null;var y=em(u,d);if(u.tag!==0&&y===2){var M=_y(u);M!==0&&(d=M,y=gx(u,M))}if(y===1)throw y=Th,$a(u,0),jo(u,d),Hi(u,Yn()),y;if(y===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,Qa(u,Vi),Hi(u,Yn()),null}function vT(u){Vo!==null&&Vo.tag===0&&!(bt&6)&&Ja();var d=bt;bt|=1;var y=Tn.transition,M=Bt;try{if(Tn.transition=null,Bt=1,u)return u()}finally{Bt=M,Tn.transition=y,bt=d,!(bt&6)&&bs()}}function yx(){hr=Mc.current,it(Mc)}function $a(u,d){u.finishedWork=null,u.finishedLanes=0;var y=u.timeoutHandle;if(y!==at&&(u.timeoutHandle=at,et(y)),In!==null)for(y=In.return;y!==null;){var M=y;switch(ky(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Xn();break;case 3:Sc(),it(rn),it(ke),Hy();break;case 5:zy(M);break;case 4:Sc();break;case 13:it(cn);break;case 19:it(cn);break;case 10:Py(M.type._context);break;case 22:case 23:yx()}y=y.return}if(Nn=u,In=u=Go(u.current,null),ti=hr=d,Bn=0,Th=null,hx=Yp=Ec=0,Vi=Ah=null,Ts!==null){for(d=0;d<Ts.length;d++)if(y=Ts[d],M=y.interleaved,M!==null){y.interleaved=null;var T=M.next,N=y.pending;if(N!==null){var V=N.next;N.next=T,M.next=V}y.pending=M}Ts=null}return u}function yT(u,d){do{var y=In;try{if(Cy(),Tp.current=Ip,Ap){for(var M=yn.memoizedState;M!==null;){var T=M.queue;T!==null&&(T.pending=null),M=M.next}Ap=!1}if(wc=0,qn=li=yn=null,vh=!1,yh=0,ux.current=null,y===null||y.return===null){Bn=1,Th=d,In=null;break}e:{var N=u,V=y.return,Y=y,ce=d;if(d=ti,Y.flags|=32768,ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var Ee=ce,We=Y,mt=We.tag;if(!(We.mode&1)&&(mt===0||mt===11||mt===15)){var nt=We.alternate;nt?(We.updateQueue=nt.updateQueue,We.memoizedState=nt.memoizedState,We.lanes=nt.lanes):(We.updateQueue=null,We.memoizedState=null)}var qt=Bb(V);if(qt!==null){qt.flags&=-257,zb(qt,V,Y,N,d),qt.mode&1&&Fb(N,Ee,d),d=qt,ce=Ee;var Je=d.updateQueue;if(Je===null){var hi=new Set;hi.add(ce),d.updateQueue=hi}else Je.add(ce);break e}else{if(!(d&1)){Fb(N,Ee,d),xx();break e}ce=Error(o(426))}}else if(on&&Y.mode&1){var Fr=Bb(V);if(Fr!==null){!(Fr.flags&65536)&&(Fr.flags|=256),zb(Fr,V,Y,N,d),Fy(ce);break e}}N=ce,Bn!==4&&(Bn=2),Ah===null?Ah=[N]:Ah.push(N),ce=Ky(ce,Y),Y=V;do{switch(Y.tag){case 3:Y.flags|=65536,d&=-d,Y.lanes|=d;var re=Ub(Y,ce,d);rb(Y,re);break e;case 1:N=ce;var Z=Y.type,le=Y.stateNode;if(!(Y.flags&128)&&(typeof Z.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(zo===null||!zo.has(le)))){Y.flags|=65536,d&=-d,Y.lanes|=d;var Oe=Ob(Y,N,d);rb(Y,Oe);break e}}Y=Y.return}while(Y!==null)}ST(y)}catch(Qe){d=Qe,In===y&&y!==null&&(In=y=y.return);continue}break}while(!0)}function xT(){var u=Xp.current;return Xp.current=Ip,u===null?Ip:u}function xx(){(Bn===0||Bn===3||Bn===2)&&(Bn=4),Nn===null||!(Ec&268435455)&&!(Yp&268435455)||jo(Nn,ti)}function em(u,d){var y=bt;bt|=2;var M=xT();Nn===u&&ti===d||$a(u,d);do try{bO();break}catch(T){yT(u,T)}while(!0);if(Cy(),bt=y,Xp.current=M,In!==null)throw Error(o(261));return Nn=null,ti=0,Bn}function bO(){for(;In!==null;)_T(In)}function TO(){for(;In!==null&&!QU();)_T(In)}function _T(u){var d=ET(u.alternate,u,hr);u.memoizedProps=u.pendingProps,d===null?ST(u):In=d,ux.current=null}function ST(u){var d=u;do{var y=d.alternate;if(u=d.return,d.flags&32768){if(y=yO(y,d),y!==null){y.flags&=32767,In=y;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Bn=6,In=null;return}}else if(y=mO(y,d,hr),y!==null){In=y;return}if(d=d.sibling,d!==null){In=d;return}In=d=u}while(d!==null);Bn===0&&(Bn=5)}function Qa(u,d){var y=Bt,M=Tn.transition;try{Tn.transition=null,Bt=1,AO(u,d,y)}finally{Tn.transition=M,Bt=y}return null}function AO(u,d,y){do Ja();while(Vo!==null);if(bt&6)throw Error(o(327));var M=u.finishedWork,T=u.finishedLanes;if(M===null)return null;if(u.finishedWork=null,u.finishedLanes=0,M===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var N=M.lanes|M.childLanes;if($U(u,N),u===Nn&&(In=Nn=null,ti=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||Kp||(Kp=!0,bT(by,function(){return Ja(),null})),N=(M.flags&15990)!==0,M.subtreeFlags&15990||N){N=Tn.transition,Tn.transition=null;var V=Bt;Bt=1;var Y=bt;bt|=4,ux.current=null,_O(u,M),SO(u,M),W(u.containerInfo),u.current=M,wO(M),JU(),bt=Y,Bt=V,Tn.transition=N}else u.current=M;if(Kp&&(Kp=!1,Vo=u,Zp=T),N=u.pendingLanes,N===0&&(zo=null),nO(M.stateNode),Hi(u,Yn()),d!==null)for(y=u.onRecoverableError,M=0;M<d.length;M++)y(d[M]);if(qp)throw qp=!1,u=px,px=null,u;return Zp&1&&u.tag!==0&&Ja(),N=u.pendingLanes,N&1?u===mx?Ch++:(Ch=0,mx=u):Ch=0,bs(),null}function Ja(){if(Vo!==null){var u=JE(Zp),d=Tn.transition,y=Bt;try{if(Tn.transition=null,Bt=16>u?16:u,Vo===null)var M=!1;else{if(u=Vo,Vo=null,Zp=0,bt&6)throw Error(o(331));var T=bt;for(bt|=4,Ie=u.current;Ie!==null;){var N=Ie,V=N.child;if(Ie.flags&16){var Y=N.deletions;if(Y!==null){for(var ce=0;ce<Y.length;ce++){var Ee=Y[ce];for(Ie=Ee;Ie!==null;){var We=Ie;switch(We.tag){case 0:case 11:case 15:Za(8,We,N)}var mt=We.child;if(mt!==null)mt.return=We,Ie=mt;else for(;Ie!==null;){We=Ie;var nt=We.sibling,qt=We.return;if(sT(We),We===Ee){Ie=null;break}if(nt!==null){nt.return=qt,Ie=nt;break}Ie=qt}}}var Je=N.alternate;if(Je!==null){var hi=Je.child;if(hi!==null){Je.child=null;do{var Fr=hi.sibling;hi.sibling=null,hi=Fr}while(hi!==null)}}Ie=N}}if(N.subtreeFlags&2064&&V!==null)V.return=N,Ie=V;else e:for(;Ie!==null;){if(N=Ie,N.flags&2048)switch(N.tag){case 0:case 11:case 15:Za(9,N,N.return)}var re=N.sibling;if(re!==null){re.return=N.return,Ie=re;break e}Ie=N.return}}var Z=u.current;for(Ie=Z;Ie!==null;){V=Ie;var le=V.child;if(V.subtreeFlags&2064&&le!==null)le.return=V,Ie=le;else e:for(V=Z;Ie!==null;){if(Y=Ie,Y.flags&2048)try{switch(Y.tag){case 0:case 11:case 15:Eh(9,Y)}}catch(Qe){ji(Y,Y.return,Qe)}if(Y===V){Ie=null;break e}var Oe=Y.sibling;if(Oe!==null){Oe.return=Y.return,Ie=Oe;break e}Ie=Y.return}}if(bt=T,bs(),Ms&&typeof Ms.onPostCommitFiberRoot=="function")try{Ms.onPostCommitFiberRoot(pp,u)}catch{}M=!0}return M}finally{Bt=y,Tn.transition=d}}return!1}function wT(u,d,y){d=Ky(y,d),d=Ub(u,d,1),Bo(u,d),d=Ci(),u=Jp(u,1),u!==null&&(hh(u,1,d),Hi(u,d))}function ji(u,d,y){if(u.tag===3)wT(u,u,y);else for(;d!==null;){if(d.tag===3){wT(d,u,y);break}else if(d.tag===1){var M=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(zo===null||!zo.has(M))){u=Ky(y,u),u=Ob(d,u,1),Bo(d,u),u=Ci(),d=Jp(d,1),d!==null&&(hh(d,1,u),Hi(d,u));break}}d=d.return}}function CO(u,d,y){var M=u.pingCache;M!==null&&M.delete(d),d=Ci(),u.pingedLanes|=u.suspendedLanes&y,Nn===u&&(ti&y)===y&&(Bn===4||Bn===3&&(ti&130023424)===ti&&500>Yn()-dx?$a(u,0):hx|=y),Hi(u,d)}function MT(u,d){d===0&&(u.mode&1?(d=dp,dp<<=1,!(dp&130023424)&&(dp=4194304)):d=1);var y=Ci();u=Jp(u,d),u!==null&&(hh(u,d,y),Hi(u,y))}function PO(u){var d=u.memoizedState,y=0;d!==null&&(y=d.retryLane),MT(u,y)}function RO(u,d){var y=0;switch(u.tag){case 13:var M=u.stateNode,T=u.memoizedState;T!==null&&(y=T.retryLane);break;case 19:M=u.stateNode;break;default:throw Error(o(314))}M!==null&&M.delete(d),MT(u,y)}var ET;ET=function(u,d,y){if(u!==null)if(u.memoizedProps!==d.pendingProps||rn.current)ur=!0;else{if(!(u.lanes&y)&&!(d.flags&128))return ur=!1,vO(u,d,y);ur=!!(u.flags&131072)}else ur=!1,on&&d.flags&1048576&&ub(d,Mp,d.index);switch(d.lanes=0,d.tag){case 2:var M=d.type;u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),u=d.pendingProps;var T=Wn(d,ke.current);mc(d,y),T=Gy(null,d,M,u,T,y);var N=Wy();return d.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,bn(M)?(N=!0,Ti(d)):N=!1,d.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Ny(d),T.updater=Sp,d.stateNode=T,T._reactInternals=d,Ly(d,M,u,y),d=Qy(null,d,M,!0,N,y)):(d.tag=0,on&&N&&Dy(d),Ai(null,d,T,y),d=d.child),d;case 16:M=d.elementType;e:{switch(u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),u=d.pendingProps,T=M._init,M=T(M._payload),d.type=M,T=d.tag=IO(M),u=Jr(M,u),T){case 0:d=$y(null,d,M,u,y);break e;case 1:d=qb(null,d,M,u,y);break e;case 11:d=jb(null,d,M,u,y);break e;case 14:d=Gb(null,d,M,Jr(M.type,u),y);break e}throw Error(o(306,M,""))}return d;case 0:return M=d.type,T=d.pendingProps,T=d.elementType===M?T:Jr(M,T),$y(u,d,M,T,y);case 1:return M=d.type,T=d.pendingProps,T=d.elementType===M?T:Jr(M,T),qb(u,d,M,T,y);case 3:e:{if(Kb(d),u===null)throw Error(o(387));M=d.pendingProps,N=d.memoizedState,T=N.element,ib(u,d),_p(d,M,null,y);var V=d.memoizedState;if(M=V.element,xe&&N.isDehydrated)if(N={element:M,isDehydrated:!1,cache:V.cache,transitions:V.transitions},d.updateQueue.baseState=N,d.memoizedState=N,d.flags&256){T=Error(o(423)),d=Zb(u,d,M,y,T);break e}else if(M!==T){T=Error(o(424)),d=Zb(u,d,M,y,T);break e}else for(xe&&(cr=op(d.stateNode.containerInfo),lr=d,on=!0,es=null,dh=!1),y=gb(d,null,M,y),d.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(yc(),M===T){d=eo(u,d,y);break e}Ai(u,d,M,y)}d=d.child}return d;case 5:return vb(d),u===null&&Oy(d),M=d.type,T=d.pendingProps,N=u!==null?u.memoizedProps:null,V=T.children,pe(M,T)?V=null:N!==null&&pe(M,N)&&(d.flags|=32),Yb(u,d),Ai(u,d,V,y),d.child;case 6:return u===null&&Oy(d),null;case 13:return $b(u,d,y);case 4:return By(d,d.stateNode.containerInfo),M=d.pendingProps,u===null?d.child=xc(d,null,M,y):Ai(u,d,M,y),d.child;case 11:return M=d.type,T=d.pendingProps,T=d.elementType===M?T:Jr(M,T),jb(u,d,M,T,y);case 7:return Ai(u,d,d.pendingProps,y),d.child;case 8:return Ai(u,d,d.pendingProps.children,y),d.child;case 12:return Ai(u,d,d.pendingProps.children,y),d.child;case 10:e:{if(M=d.type._context,T=d.pendingProps,N=d.memoizedProps,V=T.value,nb(d,M,V),N!==null)if(Es(N.value,V)){if(N.children===T.children&&!rn.current){d=eo(u,d,y);break e}}else for(N=d.child,N!==null&&(N.return=d);N!==null;){var Y=N.dependencies;if(Y!==null){V=N.child;for(var ce=Y.firstContext;ce!==null;){if(ce.context===M){if(N.tag===1){ce=Zs(-1,y&-y),ce.tag=2;var Ee=N.updateQueue;if(Ee!==null){Ee=Ee.shared;var We=Ee.pending;We===null?ce.next=ce:(ce.next=We.next,We.next=ce),Ee.pending=ce}}N.lanes|=y,ce=N.alternate,ce!==null&&(ce.lanes|=y),Ry(N.return,y,d),Y.lanes|=y;break}ce=ce.next}}else if(N.tag===10)V=N.type===d.type?null:N.child;else if(N.tag===18){if(V=N.return,V===null)throw Error(o(341));V.lanes|=y,Y=V.alternate,Y!==null&&(Y.lanes|=y),Ry(V,y,d),V=N.sibling}else V=N.child;if(V!==null)V.return=N;else for(V=N;V!==null;){if(V===d){V=null;break}if(N=V.sibling,N!==null){N.return=V.return,V=N;break}V=V.return}N=V}Ai(u,d,T.children,y),d=d.child}return d;case 9:return T=d.type,M=d.pendingProps.children,mc(d,y),T=Nr(T),M=M(T),d.flags|=1,Ai(u,d,M,y),d.child;case 14:return M=d.type,T=Jr(M,d.pendingProps),T=Jr(M.type,T),Gb(u,d,M,T,y);case 15:return Wb(u,d,d.type,d.pendingProps,y);case 17:return M=d.type,T=d.pendingProps,T=d.elementType===M?T:Jr(M,T),u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,bn(M)?(u=!0,Ti(d)):u=!1,mc(d,y),lb(d,M,T),Ly(d,M,T,y),Qy(null,d,M,!0,u,y);case 19:return tT(u,d,y);case 22:return Xb(u,d,y)}throw Error(o(156,d.tag))};function bT(u,d){return My(u,d)}function NO(u,d,y,M){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(u,d,y,M){return new NO(u,d,y,M)}function _x(u){return u=u.prototype,!(!u||!u.isReactComponent)}function IO(u){if(typeof u=="function")return _x(u)?1:0;if(u!=null){if(u=u.$$typeof,u===x)return 11;if(u===S)return 14}return 2}function Go(u,d){var y=u.alternate;return y===null?(y=Or(u.tag,d,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=d,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&14680064,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,d=u.dependencies,y.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y}function tm(u,d,y,M,T,N){var V=2;if(M=u,typeof u=="function")_x(u)&&(V=1);else if(typeof u=="string")V=5;else e:switch(u){case h:return el(y.children,T,N,d);case f:V=8,T|=8;break;case p:return u=Or(12,y,d,T|2),u.elementType=p,u.lanes=N,u;case _:return u=Or(13,y,d,T),u.elementType=_,u.lanes=N,u;case g:return u=Or(19,y,d,T),u.elementType=g,u.lanes=N,u;case b:return nm(y,T,N,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:V=10;break e;case v:V=9;break e;case x:V=11;break e;case S:V=14;break e;case w:V=16,M=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return d=Or(V,y,d,T),d.elementType=u,d.type=M,d.lanes=N,d}function el(u,d,y,M){return u=Or(7,u,M,d),u.lanes=y,u}function nm(u,d,y,M){return u=Or(22,u,M,d),u.elementType=b,u.lanes=y,u.stateNode={},u}function Sx(u,d,y){return u=Or(6,u,null,d),u.lanes=y,u}function wx(u,d,y){return d=Or(4,u.children!==null?u.children:[],u.key,d),d.lanes=y,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function LO(u,d,y,M,T){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=at,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sy(0),this.expirationTimes=Sy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sy(0),this.identifierPrefix=M,this.onRecoverableError=T,xe&&(this.mutableSourceEagerHydrationData=null)}function TT(u,d,y,M,T,N,V,Y,ce){return u=new LO(u,d,y,Y,ce),d===1?(d=1,N===!0&&(d|=8)):d=0,N=Or(3,null,null,d),u.current=N,N.stateNode=u,N.memoizedState={element:M,isDehydrated:y,cache:null,transitions:null},Ny(N),u}function AT(u){if(!u)return Et;u=u._reactInternals;e:{if(R(u)!==u||u.tag!==1)throw Error(o(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(bn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(u.tag===1){var y=u.type;if(bn(y))return Xt(u,y,d)}return d}function CT(u){var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=j(d),u===null?null:u.stateNode}function PT(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<d?y:d}}function Mx(u,d){PT(u,d),(u=u.alternate)&&PT(u,d)}function DO(u){return u=j(u),u===null?null:u.stateNode}function kO(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var d=Ci();Ur(u,134217728,d),Mx(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var d=Ci(),y=Ho(u);Ur(u,y,d),Mx(u,y)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var y=uh(d.pendingLanes);y!==0&&(wy(d,y|1),Hi(d,Yn()),!(bt&6)&&(bc(),bs()))}break;case 13:var M=Ci();vT(function(){return Ur(u,1,M)}),Mx(u,1)}},t.batchedUpdates=function(u,d){var y=bt;bt|=1;try{return u(d)}finally{bt=y,bt===0&&(bc(),mp&&bs())}},t.createComponentSelector=function(u){return{$$typeof:Vp,value:u}},t.createContainer=function(u,d,y,M,T,N,V){return TT(u,d,!1,null,y,M,T,N,V)},t.createHasPseudoClassSelector=function(u){return{$$typeof:Hp,value:u}},t.createHydrationContainer=function(u,d,y,M,T,N,V,Y,ce){return u=TT(y,M,!0,u,T,N,V,Y,ce),u.context=AT(null),y=u.current,M=Ci(),T=Ho(y),N=Zs(M,T),N.callback=d??null,Bo(y,N),u.current.lanes=T,hh(u,T,M),Hi(u,M),u},t.createPortal=function(u,d,y){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:M==null?null:""+M,children:u,containerInfo:d,implementation:y}},t.createRoleSelector=function(u){return{$$typeof:jp,value:u}},t.createTestNameSelector=function(u){return{$$typeof:Gp,value:u}},t.createTextSelector=function(u){return{$$typeof:Wp,value:u}},t.deferredUpdates=function(u){var d=Bt,y=Tn.transition;try{return Tn.transition=null,Bt=16,u()}finally{Bt=d,Tn.transition=y}},t.discreteUpdates=function(u,d,y,M,T){var N=Bt,V=Tn.transition;try{return Tn.transition=null,Bt=1,u(d,y,M,T)}finally{Bt=N,Tn.transition=V,bt===0&&bc()}},t.findAllNodes=cx,t.findBoundingRects=function(u,d){if(!Ue)throw Error(o(363));d=cx(u,d),u=[];for(var y=0;y<d.length;y++)u.push(k(d[y]));for(d=u.length-1;0<d;d--){y=u[d];for(var M=y.x,T=M+y.width,N=y.y,V=N+y.height,Y=d-1;0<=Y;Y--)if(d!==Y){var ce=u[Y],Ee=ce.x,We=Ee+ce.width,mt=ce.y,nt=mt+ce.height;if(M>=Ee&&N>=mt&&T<=We&&V<=nt){u.splice(d,1);break}else if(M!==Ee||y.width!==ce.width||nt<N||mt>V){if(!(N!==mt||y.height!==ce.height||We<M||Ee>T)){Ee>M&&(ce.width+=Ee-M,ce.x=M),We<T&&(ce.width=T-Ee),u.splice(d,1);break}}else{mt>N&&(ce.height+=mt-N,ce.y=N),nt<V&&(ce.height=V-mt),u.splice(d,1);break}}}return u},t.findHostInstance=CT,t.findHostInstanceWithNoPortals=function(u){return u=U(u),u=u!==null?J(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return CT(u)},t.flushControlled=function(u){var d=bt;bt|=1;var y=Tn.transition,M=Bt;try{Tn.transition=null,Bt=1,u()}finally{Bt=M,Tn.transition=y,bt=d,bt===0&&(bc(),bs())}},t.flushPassiveEffects=Ja,t.flushSync=vT,t.focusWithin=function(u,d){if(!Ue)throw Error(o(363));for(u=ox(u),d=pT(u,d),d=Array.from(d),u=0;u<d.length;){var y=d[u++];if(!he(y)){if(y.tag===5&&fe(y.stateNode))return!0;for(y=y.child;y!==null;)d.push(y),y=y.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Bt},t.getFindAllNodesFailureDescription=function(u,d){if(!Ue)throw Error(o(363));var y=0,M=[];u=[ox(u),0];for(var T=0;T<u.length;){var N=u[T++],V=u[T++],Y=d[V];if((N.tag!==5||!he(N))&&(ax(N,Y)&&(M.push(lx(Y)),V++,V>y&&(y=V)),V<d.length))for(N=N.child;N!==null;)u.push(N,V),N=N.sibling}if(y<d.length){for(u=[];y<d.length;y++)u.push(lx(d[y]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return Q(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:DO,findFiberByHostInstance:u.findFiberByHostInstance||kO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)u=!0;else{try{pp=d.inject(u),Ms=d}catch{}u=!!d.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,d,y,M){if(!Ue)throw Error(o(363));u=cx(u,d);var T=Ke(u,y,M).disconnect;return{disconnect:function(){T()}}},t.registerMutableSourceForHydration=function(u,d){var y=d._getVersion;y=y(d._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[d,y]:u.mutableSourceEagerHydrationData.push(d,y)},t.runWithPriority=function(u,d){var y=Bt;try{return Bt=u,d()}finally{Bt=y}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,d,y,M){var T=d.current,N=Ci(),V=Ho(T);return y=AT(y),d.context===null?d.context=y:d.pendingContext=y,d=Zs(N,V),d.payload={element:u},M=M===void 0?null:M,M!==null&&(d.callback=M),Bo(T,d),u=Ur(T,V,N),u!==null&&xp(u,T,V),V},t};NU.exports=BK;var zK=NU.exports;const VK=RR(zK);var IU={exports:{}},LU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,G){var W=D.length;D.push(G);e:for(;0<W;){var ee=W-1>>>1,de=D[ee];if(0<r(de,G))D[ee]=G,D[W]=de,W=ee;else break e}}function t(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var G=D[0],W=D.pop();if(W!==G){D[0]=W;e:for(var ee=0,de=D.length,Le=de>>>1;ee<Le;){var ie=2*(ee+1)-1,pe=D[ie],be=ie+1,_e=D[be];if(0>r(pe,W))be<de&&0>r(_e,pe)?(D[ee]=_e,D[be]=W,ee=be):(D[ee]=pe,D[ie]=W,ee=ie);else if(be<de&&0>r(_e,W))D[ee]=_e,D[be]=W,ee=be;else break e}}return G}function r(D,G){var W=D.sortIndex-G.sortIndex;return W!==0?W:D.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,m=!1,v=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var G=t(c);G!==null;){if(G.callback===null)i(c);else if(G.startTime<=D)i(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(c)}}function b(D){if(x=!1,w(D),!v)if(t(l)!==null)v=!0,Q(A);else{var G=t(c);G!==null&&te(b,G.startTime-D)}}function A(D,G){v=!1,x&&(x=!1,g(L),L=-1),m=!0;var W=p;try{for(w(G),f=t(l);f!==null&&(!(f.expirationTime>G)||D&&!U());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,p=f.priorityLevel;var de=ee(f.expirationTime<=G);G=n.unstable_now(),typeof de=="function"?f.callback=de:f===t(l)&&i(l),w(G)}else i(l);f=t(l)}if(f!==null)var Le=!0;else{var ie=t(c);ie!==null&&te(b,ie.startTime-G),Le=!1}return Le}finally{f=null,p=W,m=!1}}var P=!1,I=null,L=-1,R=5,C=-1;function U(){return!(n.unstable_now()-C<R)}function j(){if(I!==null){var D=n.unstable_now();C=D;var G=!0;try{G=I(!0,D)}finally{G?X():(P=!1,I=null)}}else P=!1}var X;if(typeof S=="function")X=function(){S(j)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,se=J.port2;J.port1.onmessage=j,X=function(){se.postMessage(null)}}else X=function(){_(j,0)};function Q(D){I=D,P||(P=!0,X())}function te(D,G){L=_(function(){D(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,Q(A))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var W=p;p=G;try{return D()}finally{p=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,G){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var W=p;p=D;try{return G()}finally{p=W}},n.unstable_scheduleCallback=function(D,G,W){var ee=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ee+W:ee):W=ee,D){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=W+de,D={id:h++,callback:G,priorityLevel:D,startTime:W,expirationTime:de,sortIndex:-1},W>ee?(D.sortIndex=W,e(c,D),t(l)===null&&D===t(c)&&(x?(g(L),L=-1):x=!0,te(b,W-ee))):(D.sortIndex=de,e(l,D),v||m||(v=!0,Q(A))),D},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(D){var G=p;return function(){var W=p;p=G;try{return D.apply(this,arguments)}finally{p=W}}}})(LU);IU.exports=LU;var dR=IU.exports;const $E={},HK=n=>void Object.assign($E,n);function jK(n,e){function t(h,{args:f=[],attach:p,...m},v){let x=`${h[0].toUpperCase()}${h.slice(1)}`,_;if(h==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;_=qc(g,{type:h,root:v,attach:p,primitive:!0})}else{const g=$E[x];if(!g)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");_=qc(new g(...f),{type:h,root:v,attach:p,memoizedProps:{args:f}})}return _.__r3f.attach===void 0&&(_.isBufferGeometry?_.__r3f.attach="geometry":_.isMaterial&&(_.__r3f.attach="material")),x!=="inject"&&h1(_,m),_}function i(h,f){let p=!1;if(f){var m,v;(m=f.__r3f)!=null&&m.attach?u1(h,f,f.__r3f.attach):f.isObject3D&&h.isObject3D&&(h.add(f),p=!0),p||(v=h.__r3f)==null||v.objects.push(f),f.__r3f||qc(f,{}),f.__r3f.parent=h,cw(f),Kc(f)}}function r(h,f,p){let m=!1;if(f){var v,x;if((v=f.__r3f)!=null&&v.attach)u1(h,f,f.__r3f.attach);else if(f.isObject3D&&h.isObject3D){f.parent=h,f.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:f});const _=h.children.filter(S=>S!==f),g=_.indexOf(p);h.children=[..._.slice(0,g),f,..._.slice(g)],m=!0}m||(x=h.__r3f)==null||x.objects.push(f),f.__r3f||qc(f,{}),f.__r3f.parent=h,cw(f),Kc(f)}}function s(h,f,p=!1){h&&[...h].forEach(m=>o(f,m,p))}function o(h,f,p){if(f){var m,v,x;if(f.__r3f&&(f.__r3f.parent=null),(m=h.__r3f)!=null&&m.objects&&(h.__r3f.objects=h.__r3f.objects.filter(b=>b!==f)),(v=f.__r3f)!=null&&v.attach)vR(h,f,f.__r3f.attach);else if(f.isObject3D&&h.isObject3D){var _;h.remove(f),(_=f.__r3f)!=null&&_.root&&ZK(Fg(f),f)}const S=(x=f.__r3f)==null?void 0:x.primitive,w=!S&&(p===void 0?f.dispose!==null:p);if(!S){var g;s((g=f.__r3f)==null?void 0:g.objects,f,w),s(f.children,f,w)}if(delete f.__r3f,w&&f.dispose&&f.type!=="Scene"){const b=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?dR.unstable_scheduleCallback(dR.unstable_IdlePriority,b):b()}Kc(h)}}function a(h,f,p,m){var v;const x=(v=h.__r3f)==null?void 0:v.parent;if(!x)return;const _=t(f,p,h.__r3f.root);if(h.children){for(const g of h.children)g.__r3f&&i(_,g);h.children=h.children.filter(g=>!g.__r3f)}h.__r3f.objects.forEach(g=>i(_,g)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(x,h),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),i(x,_),_.raycast&&_.__r3f.eventCount&&Fg(_).getState().internal.interaction.push(_),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=_,g.ref&&(typeof g.ref=="function"?g.ref(_):g.ref.current=_))})}const l=()=>{};return{reconciler:VK({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,f)=>{if(!f)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,i(p,f))},removeChildFromContainer:(h,f)=>{f&&o(h.getState().scene,f)},insertInContainerBefore:(h,f,p)=>{if(!f||!p)return;const m=h.getState().scene;m.__r3f&&r(m,f,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var f;return!!((f=h==null?void 0:h.__r3f)!=null?f:{}).handlers},prepareUpdate(h,f,p,m){var v;if(((v=h==null?void 0:h.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==h)return[!0];{const{args:_=[],children:g,...S}=m,{args:w=[],children:b,...A}=p;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((I,L)=>I!==w[L]))return[!0];const P=zU(h,S,A,!0);return P.changes.length?[!1,P]:null}},commitUpdate(h,[f,p],m,v,x,_){f?a(h,m,x,_):h1(h,p)},commitMount(h,f,p,m){var v;const x=(v=h.__r3f)!=null?v:{};h.raycast&&x.handlers&&x.eventCount&&Fg(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>qc(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var f;const{attach:p,parent:m}=(f=h.__r3f)!=null?f:{};p&&m&&vR(m,h,p),h.isObject3D&&(h.visible=!1),Kc(h)},unhideInstance(h,f){var p;const{attach:m,parent:v}=(p=h.__r3f)!=null?p:{};m&&v&&u1(v,h,m),(h.isObject3D&&f.visible==null||f.visible)&&(h.visible=!0),Kc(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():_u.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Jt.fun(performance.now)?performance.now:Jt.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Jt.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Jt.fun(clearTimeout)?clearTimeout:void 0}),applyProps:h1}}var fR,pR;const c1=n=>"colorSpace"in n||"outputColorSpace"in n,DU=()=>{var n;return(n=$E.ColorManagement)!=null?n:null},kU=n=>n&&n.isOrthographicCamera,GK=n=>n&&n.hasOwnProperty("current"),np=typeof window<"u"&&((fR=window.document)!=null&&fR.createElement||((pR=window.navigator)==null?void 0:pR.product)==="ReactNative")?F.useLayoutEffect:F.useEffect;function UU(n){const e=F.useRef(n);return np(()=>void(e.current=n),[n]),e}function WK({set:n}){return np(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class OU extends F.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}OU.getDerivedStateFromError=()=>({error:!0});const FU="__default",mR=new Map,XK=n=>n&&!!n.memoized&&!!n.changes;function BU(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const $h=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Fg(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Jt={obj:n=>n===Object(n)&&!Jt.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Jt.str(n)||Jt.num(n)||Jt.boo(n))return n===e;const s=Jt.obj(n);if(s&&i==="reference")return n===e;const o=Jt.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!Jt.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(Jt.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function YK(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function qc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function lw(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const gR=/-\d+$/;function u1(n,e,t){if(Jt.str(t)){if(gR.test(t)){const s=t.replace(gR,""),{target:o,key:a}=lw(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=lw(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function vR(n,e,t){var i,r;if(Jt.str(t)){const{target:s,key:o}=lw(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function zU(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){const h=n.__r3f,f=Object.entries(r),p=[];if(c){const v=Object.keys(l);for(let x=0;x<v.length;x++)r.hasOwnProperty(v[x])||f.unshift([v[x],FU+"remove"])}f.forEach(([v,x])=>{var _;if((_=n.__r3f)!=null&&_.primitive&&v==="object"||Jt.equ(x,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return p.push([v,x,!0,[]]);let g=[];v.includes("-")&&(g=v.split("-")),p.push([v,x,!1,g]);for(const S in r){const w=r[S];S.startsWith(`${v}-`)&&p.push([S,w,!1,S.split("-")])}});const m={...r};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(m.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(m.attach=h.memoizedProps.attach),{memoized:m,changes:p}}function h1(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=XK(e)?e:zU(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let p=0;p<a.length;p++){let[m,v,x,_]=a[p];if(c1(n)){const b="srgb",A="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?b:A):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?b:A)}let g=n,S=g[m];if(_.length&&(S=_.reduce((w,b)=>w[b],n),!(S&&S.set))){const[w,...b]=_.reverse();g=b.reverse().reduce((A,P)=>A[P],n),m=w}if(v===FU+"remove")if(g.constructor){let w=mR.get(g.constructor);w||(w=new g.constructor,mR.set(g.constructor,w)),v=w[m]}else v=0;if(x&&i)v?i.handlers[m]=v:delete i.handlers[m],i.eventCount=Object.keys(i.handlers).length;else if(S&&S.set&&(S.copy||S instanceof Gl)){if(Array.isArray(v))S.fromArray?S.fromArray(v):S.set(...v);else if(S.copy&&v&&v.constructor&&S.constructor===v.constructor)S.copy(v);else if(v!==void 0){var c;const w=(c=S)==null?void 0:c.isColor;!w&&S.setScalar?S.setScalar(v):S instanceof Gl&&v instanceof Gl?S.mask=v.mask:S.set(v),!DU()&&s&&!s.linear&&w&&S.convertSRGBToLinear()}}else{var h;if(g[m]=v,(h=g[m])!=null&&h.isTexture&&g[m].format===Si&&g[m].type===ps&&s){const w=g[m];c1(w)&&c1(s.gl)?w.colorSpace=s.gl.outputColorSpace:w.encoding=s.gl.outputEncoding}}Kc(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const p=Fg(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),i.eventCount&&p.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&cw(n),n}function Kc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function cw(n){n.onUpdate==null||n.onUpdate(n)}function qK(n,e){n.manual||(kU(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function gg(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function KK(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return _u.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return _u.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return _u.ContinuousEventPriority;default:return _u.DefaultEventPriority}}function VU(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function ZK(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{VU(t.capturedMap,e,i,r)})}function $K(n){function e(l){const{internal:c}=n.getState(),h=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(h*h+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(h=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+h]}))}function i(l,c){const h=n.getState(),f=new Set,p=[],m=c?c(h.internal.interaction):h.internal.interaction;for(let g=0;g<m.length;g++){const S=$h(m[g]);S&&(S.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function v(g){const S=$h(g);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var w;S.events.compute==null||S.events.compute(l,S,(w=S.previousRoot)==null?void 0:w.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(g,!0):[]}let x=m.flatMap(v).sort((g,S)=>{const w=$h(g.object),b=$h(S.object);return!w||!b?g.distance-S.distance:b.events.priority-w.events.priority||g.distance-S.distance}).filter(g=>{const S=gg(g);return f.has(S)?!1:(f.add(S),!0)});h.events.filter&&(x=h.events.filter(x,h));for(const g of x){let S=g.object;for(;S;){var _;(_=S.__r3f)!=null&&_.eventCount&&p.push({...g,eventObject:S}),S=S.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let g of h.internal.capturedMap.get(l.pointerId).values())f.has(gg(g.intersection))||p.push(g.intersection);return p}function r(l,c,h,f){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const x=$h(v.object)||p,{raycaster:_,pointer:g,camera:S,internal:w}=x,b=new z(g.x,g.y,0).unproject(S),A=C=>{var U,j;return(U=(j=w.capturedMap.get(C))==null?void 0:j.has(v.eventObject))!=null?U:!1},P=C=>{const U={intersection:v,target:c.target};w.capturedMap.has(C)?w.capturedMap.get(C).set(v.eventObject,U):w.capturedMap.set(C,new Map([[v.eventObject,U]])),c.target.setPointerCapture(C)},I=C=>{const U=w.capturedMap.get(C);U&&VU(w.capturedMap,v.eventObject,U,C)};let L={};for(let C in c){let U=c[C];typeof U!="function"&&(L[C]=U)}let R={...v,...L,pointer:g,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:b,ray:_.ray,camera:S,stopPropagation(){const C="pointerId"in c&&w.capturedMap.get(c.pointerId);if((!C||C.has(v.eventObject))&&(R.stopped=m.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(U=>U.eventObject===v.eventObject))){const U=l.slice(0,l.indexOf(v));s([...U,v])}},target:{hasPointerCapture:A,setPointerCapture:P,releasePointerCapture:I},currentTarget:{hasPointerCapture:A,setPointerCapture:P,releasePointerCapture:I},nativeEvent:c};if(f(R),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const h of c.hovered.values())if(!l.length||!l.find(f=>f.object===h.object&&f.index===h.index&&f.instanceId===h.instanceId)){const p=h.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(gg(h)),p!=null&&p.eventCount){const v={...h,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let h=0;h<c.length;h++){const f=c[h].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:h}=n.getState();"pointerId"in c&&h.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(c.pointerId)&&(h.capturedMap.delete(c.pointerId),s([]))})}}return function(h){const{onPointerMissed:f,internal:p}=n.getState();p.lastEvent.current=h;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=i(h,m?t:void 0),g=v?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=_.map(w=>w.eventObject)),v&&!_.length&&g<=2&&(o(h,p.interaction),f&&f(h)),m&&s(_);function S(w){const b=w.eventObject,A=b.__r3f,P=A==null?void 0:A.handlers;if(A!=null&&A.eventCount)if(m){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const I=gg(w),L=p.hovered.get(I);L?L.stopped&&w.stopPropagation():(p.hovered.set(I,w),P.onPointerOver==null||P.onPointerOver(w),P.onPointerEnter==null||P.onPointerEnter(w))}P.onPointerMove==null||P.onPointerMove(w)}else{const I=P[l];I?(!v||p.initialHits.includes(b))&&(o(h,p.interaction.filter(L=>!p.initialHits.includes(L))),I(w)):v&&p.initialHits.includes(b)&&o(h,p.interaction.filter(L=>!p.initialHits.includes(L)))}}r(_,h,g,S)}}return{handlePointer:a}}const HU=n=>!!(n!=null&&n.render),jU=F.createContext(null),QK=(n,e)=>{const t=UK((a,l)=>{const c=new z,h=new z,f=new z;function p(g=l().camera,S=h,w=l().size){const{width:b,height:A,top:P,left:I}=w,L=b/A;S.isVector3?f.copy(S):f.set(...S);const R=g.getWorldPosition(c).distanceTo(f);if(kU(g))return{width:b/g.zoom,height:A/g.zoom,top:P,left:I,factor:1,distance:R,aspect:L};{const C=g.fov*Math.PI/180,U=2*Math.tan(C/2)*R,j=U*(b/A);return{width:j,height:U,top:P,left:I,factor:b/j,distance:R,aspect:L}}}let m;const v=g=>a(S=>({performance:{...S.performance,current:g}})),x=new ve;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,S)=>e(g,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new XE,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(S=>({...S,events:{...S.events,...g}})),setSize:(g,S,w,b,A)=>{const P=l().camera,I={width:g,height:S,top:b||0,left:A||0,updateStyle:w};a(L=>({size:I,viewport:{...L.viewport,...p(P,h,I)}}))},setDpr:g=>a(S=>{const w=BU(g);return{viewport:{...S.viewport,dpr:w,initialDpr:S.viewport.initialDpr||w}}}),setFrameloop:(g="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,g!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:F.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,S,w)=>{const b=l().internal;return b.priority=b.priority+(S>0?1:0),b.subscribers.push({ref:g,priority:S,store:w}),b.subscribers=b.subscribers.sort((A,P)=>A.priority-P.priority),()=>{const A=l().internal;A!=null&&A.subscribers&&(A.priority=A.priority-(S>0?1:0),A.subscribers=A.subscribers.filter(P=>P.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:h,set:f}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var p;r=l,s=c.dpr,qK(a,l),h.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let vg,JK=new Set,eZ=new Set,tZ=new Set;function d1(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Qh(n,e){switch(n){case"before":return d1(JK,e);case"after":return d1(eZ,e);case"tail":return d1(tZ,e)}}let f1,p1;function m1(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),f1=e.internal.subscribers,vg=0;vg<f1.length;vg++)p1=f1[vg],p1.ref.current(p1.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function nZ(n){let e=!1,t=!1,i,r,s;function o(c){r=requestAnimationFrame(o),e=!0,i=0,Qh("before",c),t=!0;for(const f of n.values()){var h;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((h=s.gl.xr)!=null&&h.isPresenting)&&(i+=m1(c,s))}if(t=!1,Qh("after",c),i===0)return Qh("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,h=1){var f;if(!c)return n.forEach(p=>a(p.store.getState(),h));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(h>1?c.internal.frames=Math.min(60,c.internal.frames+h):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,h=!0,f,p){if(h&&Qh("before",c),f)m1(c,f,p);else for(const m of n.values())m1(c,m.store.getState());h&&Qh("after",c)}return{loop:o,invalidate:a,advance:l}}function iZ(){const n=F.useContext(jU);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function vy(n,e=0){const t=iZ(),i=t.getState().internal.subscribe,r=UU(n);return np(()=>i(r,e,t),[e,i,t]),null}const $u=new Map,{invalidate:yR,advance:xR}=nZ($u),{reconciler:uv,applyProps:Xc}=jK($u,KK),Yc={objects:"shallow",strict:!1},rZ=(n,e)=>{const t=typeof n=="function"?n(e):n;return HU(t)?t:new Uk({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function sZ(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function oZ(n){const e=$u.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||QK(yR,xR),o=t||uv.createContainer(s,_u.ConcurrentRoot,null,!1,null,"",r,null);e||$u.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(h={}){let{gl:f,size:p,scene:m,events:v,onCreated:x,shadows:_=!1,linear:g=!1,flat:S=!1,legacy:w=!1,orthographic:b=!1,frameloop:A="always",dpr:P=[1,2],performance:I,raycaster:L,camera:R,onPointerMissed:C}=h,U=s.getState(),j=U.gl;U.gl||U.set({gl:j=rZ(f,n)});let X=U.raycaster;X||U.set({raycaster:X=new CU});const{params:J,...se}=L||{};if(Jt.equ(se,X,Yc)||Xc(X,{...se}),Jt.equ(J,X.params,Yc)||Xc(X,{params:{...X.params,...J}}),!U.camera||U.camera===c&&!Jt.equ(c,R,Yc)){c=R;const W=R instanceof Yf,ee=W?R:b?new Zf(0,0,0,0,.1,1e3):new Qn(75,0,.1,1e3);W||(ee.position.z=5,R&&(Xc(ee,R),("aspect"in R||"left"in R||"right"in R||"bottom"in R||"top"in R)&&(ee.manual=!0,ee.updateProjectionMatrix())),!U.camera&&!(R!=null&&R.rotation)&&ee.lookAt(0,0,0)),U.set({camera:ee}),X.camera=ee}if(!U.scene){let W;m!=null&&m.isScene?W=m:(W=new CE,m&&Xc(W,m)),U.set({scene:qc(W)})}if(!U.xr){var Q;const W=(Le,ie)=>{const pe=s.getState();pe.frameloop!=="never"&&xR(Le,!0,pe,ie)},ee=()=>{const Le=s.getState();Le.gl.xr.enabled=Le.gl.xr.isPresenting,Le.gl.xr.setAnimationLoop(Le.gl.xr.isPresenting?W:null),Le.gl.xr.isPresenting||yR(Le)},de={connect(){const Le=s.getState().gl;Le.xr.addEventListener("sessionstart",ee),Le.xr.addEventListener("sessionend",ee)},disconnect(){const Le=s.getState().gl;Le.xr.removeEventListener("sessionstart",ee),Le.xr.removeEventListener("sessionend",ee)}};typeof((Q=j.xr)==null?void 0:Q.addEventListener)=="function"&&de.connect(),U.set({xr:de})}if(j.shadowMap){const W=j.shadowMap.enabled,ee=j.shadowMap.type;if(j.shadowMap.enabled=!!_,Jt.boo(_))j.shadowMap.type=Ad;else if(Jt.str(_)){var te;const de={basic:ID,percentage:zv,soft:Ad,variance:as};j.shadowMap.type=(te=de[_])!=null?te:Ad}else Jt.obj(_)&&Object.assign(j.shadowMap,_);(W!==j.shadowMap.enabled||ee!==j.shadowMap.type)&&(j.shadowMap.needsUpdate=!0)}const D=DU();D&&("enabled"in D?D.enabled=!w:"legacyMode"in D&&(D.legacyMode=w)),l||Xc(j,{outputEncoding:g?3e3:3001,toneMapping:S?js:aE}),U.legacy!==w&&U.set(()=>({legacy:w})),U.linear!==g&&U.set(()=>({linear:g})),U.flat!==S&&U.set(()=>({flat:S})),f&&!Jt.fun(f)&&!HU(f)&&!Jt.equ(f,j,Yc)&&Xc(j,f),v&&!U.events.handlers&&U.set({events:v(s)});const G=sZ(n,p);return Jt.equ(G,U.size,Yc)||U.setSize(G.width,G.height,G.updateStyle,G.top,G.left),P&&U.viewport.dpr!==BU(P)&&U.setDpr(P),U.frameloop!==A&&U.setFrameloop(A),U.onPointerMissed||U.set({onPointerMissed:C}),I&&!Jt.equ(I,U.performance,Yc)&&U.set(W=>({performance:{...W.performance,...I}})),a=x,l=!0,this},render(h){return l||this.configure(),uv.updateContainer(E.jsx(aZ,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){GU(n)}}}function aZ({store:n,children:e,onCreated:t,rootElement:i}){return np(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),E.jsx(jU.Provider,{value:n,children:e})}function GU(n,e){const t=$u.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),uv.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),YK(r),$u.delete(n)}catch{}},500)})}}uv.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:F.version});const g1={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function lZ(n){const{handlePointer:e}=$K(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(g1).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=g1[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=g1[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function _R(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function cZ({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=F.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=F.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,h=F.useRef(!1);F.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[f,p,m]=F.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:S,top:w,width:b,height:A,bottom:P,right:I,x:L,y:R}=a.current.element.getBoundingClientRect(),C={left:S,top:w,width:b,height:A,bottom:P,right:I,x:L,y:R};a.current.element instanceof HTMLElement&&i&&(C.height=a.current.element.offsetHeight,C.width=a.current.element.offsetWidth),Object.freeze(C),h.current&&!fZ(a.current.lastBounds,C)&&o(a.current.lastBounds=C)};return[g,c?_R(g,c):g,l?_R(g,l):g]},[o,i,l,c]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function x(){a.current.element&&(a.current.resizeObserver=new r(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const _=g=>{!g||g===a.current.element||(v(),a.current.element=g,a.current.scrollContainers=WU(g),x())};return hZ(m,!!e),uZ(p),F.useEffect(()=>{v(),x()},[e,m,p]),F.useEffect(()=>v,[]),[_,s,f]}function uZ(n){F.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function hZ(n,e){F.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function WU(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...WU(n.parentElement)]}const dZ=["x","y","top","bottom","left","right","width","height"],fZ=(n,e)=>dZ.every(t=>n[t]===e[t]);var pZ=Object.defineProperty,mZ=Object.defineProperties,gZ=Object.getOwnPropertyDescriptors,SR=Object.getOwnPropertySymbols,vZ=Object.prototype.hasOwnProperty,yZ=Object.prototype.propertyIsEnumerable,wR=(n,e,t)=>e in n?pZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,MR=(n,e)=>{for(var t in e||(e={}))vZ.call(e,t)&&wR(n,t,e[t]);if(SR)for(var t of SR(e))yZ.call(e,t)&&wR(n,t,e[t]);return n},xZ=(n,e)=>mZ(n,gZ(e)),ER,bR;typeof window<"u"&&((ER=window.document)!=null&&ER.createElement||((bR=window.navigator)==null?void 0:bR.product)==="ReactNative")?F.useLayoutEffect:F.useEffect;function XU(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=XU(i,e,t);if(r)return r;i=i.sibling}}function YU(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const TR=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=TR;return}return TR.apply(this,arguments)};const QE=YU(F.createContext(null));class qU extends F.Component{render(){return F.createElement(QE.Provider,{value:this._reactInternals},this.props.children)}}function _Z(){const n=F.useContext(QE);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=F.useId();return F.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=XU(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function SZ(){const n=_Z(),[e]=F.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==QE&&!e.has(r)&&e.set(r,F.useContext(YU(r)))}t=t.return}return e}function wZ(){const n=SZ();return F.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>F.createElement(e,null,F.createElement(t.Provider,xZ(MR({},i),{value:n.get(t)}))),e=>F.createElement(qU,MR({},e))),[n])}const MZ=F.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=lZ,eventSource:a,eventPrefix:l,shadows:c,linear:h,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:x,performance:_,raycaster:g,camera:S,scene:w,onPointerMissed:b,onCreated:A,...P},I){F.useMemo(()=>HK(LK),[]);const L=wZ(),[R,C]=cZ({scroll:!0,debounce:{scroll:50,resize:0},...i}),U=F.useRef(null),j=F.useRef(null);F.useImperativeHandle(I,()=>U.current);const X=UU(b),[J,se]=F.useState(!1),[Q,te]=F.useState(!1);if(J)throw J;if(Q)throw Q;const D=F.useRef(null);np(()=>{const W=U.current;C.width>0&&C.height>0&&W&&(D.current||(D.current=oZ(W)),D.current.configure({gl:s,events:o,shadows:c,linear:h,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:x,performance:_,raycaster:g,camera:S,scene:w,size:C,onPointerMissed:(...ee)=>X.current==null?void 0:X.current(...ee),onCreated:ee=>{ee.events.connect==null||ee.events.connect(a?GK(a)?a.current:a:j.current),l&&ee.setEvents({compute:(de,Le)=>{const ie=de[l+"X"],pe=de[l+"Y"];Le.pointer.set(ie/Le.size.width*2-1,-(pe/Le.size.height)*2+1),Le.raycaster.setFromCamera(Le.pointer,Le.camera)}}),A==null||A(ee)}}),D.current.render(E.jsx(L,{children:E.jsx(OU,{set:te,children:E.jsx(F.Suspense,{fallback:E.jsx(WK,{set:se}),children:e??null})})})))}),F.useEffect(()=>{const W=U.current;if(W)return()=>GU(W)},[]);const G=a?"none":"auto";return E.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:G,...r},...P,children:E.jsx("div",{ref:R,style:{width:"100%",height:"100%"},children:E.jsx("canvas",{ref:U,style:{display:"block"},children:t})})})}),EZ=F.forwardRef(function(e,t){return E.jsx(qU,{children:E.jsx(MZ,{...e,ref:t})})});function uw(){return uw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},uw.apply(null,arguments)}var bZ=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class TZ extends BE{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${bZ}
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const AZ=F.forwardRef(({speed:n=1,...e},t)=>{const[i]=F.useState(()=>new TZ);return vy(r=>i&&(i.time=r.clock.elapsedTime*n)),F.createElement("primitive",uw({object:i,ref:t,attach:"material"},e))}),CZ=F.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],autoInvalidate:o=!1,...a},l)=>{const c=F.useRef(null);F.useImperativeHandle(l,()=>c.current,[]);const h=F.useRef(Math.random()*1e4);return vy(f=>{var p,m;if(!e||t===0)return;o&&f.invalidate();const v=h.current+f.clock.elapsedTime;c.current.rotation.x=Math.cos(v/4*t)/8*i,c.current.rotation.y=Math.sin(v/4*t)/8*i,c.current.rotation.z=Math.sin(v/4*t)/20*i;let x=Math.sin(v/4*t)/10;x=xk.mapLinear(x,-.1,.1,(p=s==null?void 0:s[0])!==null&&p!==void 0?p:-.1,(m=s==null?void 0:s[1])!==null&&m!==void 0?m:.1),c.current.position.y=x*r,c.current.updateMatrix()}),F.createElement("group",a,F.createElement("group",{ref:c,matrixAutoUpdate:!1},n))}),v1=({position:n,color:e,size:t=1,speed:i=1})=>{const r=F.useRef();return vy(s=>{r.current&&(r.current.rotation.x=s.clock.elapsedTime*.2*i,r.current.rotation.y=s.clock.elapsedTime*.3*i)}),E.jsx(CZ,{speed:2,rotationIntensity:.5,floatIntensity:1,children:E.jsxs("mesh",{ref:r,position:n,children:[E.jsx("icosahedronGeometry",{args:[t,4]}),E.jsx(AZ,{color:e,transparent:!0,opacity:.6,distort:.4,speed:2,roughness:.2,metalness:.8})]})})},PZ=()=>{const n=F.useRef();return vy(e=>{n.current&&(n.current.rotation.y=Math.sin(e.clock.elapsedTime*.5)*.3,n.current.position.y=Math.sin(e.clock.elapsedTime)*.1)}),E.jsxs("group",{ref:n,scale:.8,children:[E.jsxs("mesh",{position:[0,.5,.8],children:[E.jsx("boxGeometry",{args:[1.2,1,1]}),E.jsx("meshStandardMaterial",{color:"#1e9ba8",metalness:.7,roughness:.3})]}),E.jsxs("mesh",{position:[0,.6,-.5],children:[E.jsx("boxGeometry",{args:[1.1,1.2,2]}),E.jsx("meshStandardMaterial",{color:"#333",metalness:.5,roughness:.5})]}),[[-.5,0,.8],[.5,0,.8],[-.5,0,-.8],[.5,0,-.8]].map((e,t)=>E.jsxs("mesh",{position:e,rotation:[0,0,Math.PI/2],children:[E.jsx("cylinderGeometry",{args:[.25,.25,.2,16]}),E.jsx("meshStandardMaterial",{color:"#111",roughness:.9})]},t))]})},RZ=()=>E.jsxs(E.Fragment,{children:[E.jsx("ambientLight",{intensity:.4}),E.jsx("pointLight",{position:[10,10,10],intensity:1,color:"#1e9ba8"}),E.jsx("pointLight",{position:[-10,-10,-10],intensity:.5,color:"#fff"}),E.jsx(PZ,{}),E.jsx(v1,{position:[-3,1,-2],color:"#1e9ba8",size:.5,speed:.8}),E.jsx(v1,{position:[3,-1,-2],color:"#1e9ba8",size:.3,speed:1.2}),E.jsx(v1,{position:[2,2,-3],color:"#2dbbc9",size:.4,speed:1})]}),NZ=()=>{const{settings:n}=vs(),e=(n.site_name||"SINOTRUK H NI").toUpperCase();n.site_description;const t=[{label:"Sn Phm Chnh Hng, Original Parts",icon:"verified_user",desc:"Nhp khu trc tip"},{label:"Bo Hnh Uy Tn",icon:"handyman",desc:"i mi 100% nu li do nh sn xut"},{label:"Gi Cnh Tranh",icon:"savings",desc:"Cam kt gi tt nht th trng"}];return E.jsxs("section",{className:"relative pt-28 pb-16 md:pt-32 md:pb-20 overflow-hidden bg-background",children:[E.jsx("div",{className:"absolute inset-0 z-0 opacity-40 hidden lg:block",children:E.jsx(EZ,{camera:{position:[0,0,5],fov:45},dpr:[1,1.5],children:E.jsx(F.Suspense,{fallback:null,children:E.jsx(RZ,{})})})}),E.jsx("div",{className:"absolute inset-0 z-[1] opacity-20 bg-cover bg-center",style:{backgroundImage:`url("${WS.about.background}")`}}),E.jsx("div",{className:"absolute inset-0 z-[2] bg-gradient-to-b from-background via-transparent to-background"}),E.jsx("div",{className:"absolute inset-0 z-[2] bg-gradient-to-r from-background via-transparent to-background"}),E.jsx("div",{className:"relative z-10 container mx-auto px-4 md:px-10 lg:px-20",children:E.jsxs("div",{className:"grid lg:grid-cols-2 gap-10 lg:gap-16 items-center",children:[E.jsxs(Ct.div,{initial:{x:-50,opacity:0},whileInView:{x:0,opacity:1},viewport:{once:!0},transition:{duration:.8},className:"space-y-8",children:[E.jsxs("div",{children:[E.jsx("span",{className:"text-primary font-bold text-sm tracking-[0.3em] uppercase mb-4 block",children:"V Chng Ti"}),E.jsxs("h2",{className:"text-slate-800 text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold leading-tight tracking-tight",children:["Tin Phong ",E.jsx("br",{}),E.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-sky-400",children:"Cng Ngh"})]})]}),E.jsxs("p",{className:"text-slate-500 text-lg leading-relaxed",children:["Vi hn ",E.jsx("span",{className:"text-primary font-bold",children:"15 nm"})," hnh thnh v pht trin,",E.jsxs("span",{className:"text-primary font-bold",children:[" ",e]})," t ho l n v cung cp ph tng chnh hng cc dng xe ti hng nng hng u.Chng ti cam kt mang n sn phm cht lng cao, gi cnh tranh v dch v hu mi chuyn nghip nht."]}),E.jsxs("div",{className:"flex flex-wrap gap-4",children:[E.jsxs("div",{className:"flex items-center gap-3 px-5 py-3 bg-gray-100 border border-gray-300 rounded-xl shadow-sm",children:[E.jsx("span",{className:"text-primary text-3xl font-bold",children:"3000+"}),E.jsxs("span",{className:"text-slate-500 text-sm",children:["Khch hng",E.jsx("br",{}),"tin tng"]})]}),E.jsxs("div",{className:"flex items-center gap-3 px-5 py-3 bg-gray-100 border border-gray-300 rounded-xl shadow-sm",children:[E.jsx("span",{className:"text-primary text-3xl font-bold",children:"50K+"}),E.jsxs("span",{className:"text-slate-500 text-sm",children:["Ph tng",E.jsx("br",{})," bn"]})]}),E.jsxs("div",{className:"flex items-center gap-3 px-5 py-3 bg-gray-100 border border-gray-300 rounded-xl shadow-sm",children:[E.jsx("span",{className:"text-primary text-3xl font-bold",children:"63"}),E.jsxs("span",{className:"text-slate-500 text-sm",children:["Tnh thnh",E.jsx("br",{}),"ph sng"]})]})]})]}),E.jsx(Ct.div,{initial:{x:50,opacity:0},whileInView:{x:0,opacity:1},viewport:{once:!0},transition:{duration:.8,delay:.2},className:"space-y-5",children:t.map((i,r)=>E.jsxs(Ct.div,{whileHover:{x:8,scale:1.02},className:"group flex items-center gap-4 sm:gap-5 px-4 py-3 sm:p-5 bg-gray-100 border border-gray-300 rounded-2xl hover:border-primary/30 transition-all cursor-pointer shadow-sm",children:[E.jsx("div",{className:"w-11 h-11 sm:w-14 sm:h-14 flex-shrink-0 rounded-xl bg-primary/10 flex items-center justify-center border border-primary/30 text-primary group-hover:bg-primary group-hover:text-white transition-all",children:E.jsx("span",{className:"material-symbols-outlined text-xl sm:text-2xl",children:i.icon})}),E.jsxs("div",{className:"min-w-0",children:[E.jsx("h4",{className:"text-slate-800 font-bold text-sm sm:text-lg leading-snug group-hover:text-primary transition-colors",children:i.label}),E.jsx("p",{className:"text-slate-400 text-[11px] sm:text-sm leading-snug mt-0.5",children:i.desc})]}),E.jsx("span",{className:"material-symbols-outlined text-slate-400 group-hover:text-primary ml-auto flex-shrink-0 text-xl sm:text-2xl transition-colors",children:"arrow_forward"})]},r))})]})}),E.jsx("div",{className:"absolute top-1/2 left-0 -translate-y-1/2 w-96 h-96 bg-primary/10 rounded-full blur-[150px] pointer-events-none"}),E.jsx("div",{className:"absolute bottom-0 right-0 w-64 h-64 bg-primary/5 rounded-full blur-[100px] pointer-events-none"})]})},IZ=[{title:"Cabin & Thn v",desc:"Gng, n, knh chn gi, thn v...",icon:"directions_car",slug:"cabin-than-vo"},{title:"ng c",desc:"B hi, kim phun, trc c, bc bin balie...",icon:"engineering",slug:"dong-co"},{title:"Hp s",desc:"Bnh rng, ng tc, chuyn tng, vng bi...",icon:"precision_manufacturing",slug:"hop-so"},{title:"H thng cu",desc:"Visai, vnh chu, cu tng thnh...",icon:"hub",slug:"he-thong-cau"},{title:"Ly hp",desc:"L cn, bn p, bnh ...",icon:"settings",slug:"ly-hop"},{title:"H thng ging treo",desc:"Nhp, ging cu, ba-lng-x...",icon:"tune",slug:"he-thong-giang-treo"},{title:"H thng truyn ng",desc:"Trc cc ng, bi quang treo...",icon:"settings_input_component",slug:"he-thong-truyen-dong"},{title:"H thng li",desc:"Tr lc li, thc li, bm li, du thy lc...",icon:"explore",slug:"he-thong-lai"},{title:"H thng ht x",desc:"ng x, turbo, van EGR...",icon:"air",slug:"he-thong-hut-xa"},{title:"H thng lm mt",desc:"Kt nc, kt gi, bm nc, qut gi...",icon:"ac_unit",slug:"he-thong-lam-mat"},{title:"H thng in",desc:"My pht, c , cm bin...",icon:"electric_bolt",slug:"he-thong-dien"},{title:"H thng nhin liu",desc:"Bm du, bu lc, ng dn...",icon:"local_gas_station",slug:"he-thong-nhien-lieu"},{title:"H thng moay ",desc:"Moay , bi moay , pht moay ...",icon:"donut_large",slug:"he-thong-moay-o"},{title:"H thng phanh",desc:"M phanh, a phanh, bu phanh lc k...",icon:"car_crash",slug:"he-thong-phanh"}],LZ={cabin:"directions_car","ng c":"engineering","hp s":"precision_manufacturing",cu:"hub","ly hp":"settings","ging treo":"tune","truyn ng":"settings_input_component",li:"explore","ht x":"air","lm mt":"ac_unit",in:"electric_bolt","nhin liu":"local_gas_station",moay:"donut_large",phanh:"car_crash"},DZ=n=>{const e=n.toLowerCase();for(const[t,i]of Object.entries(LZ))if(e.includes(t))return i;return"category"},kZ=()=>{const[n,e]=F.useState(IZ);return F.useEffect(()=>{(async()=>{try{const{data:i,error:r}=await qi.from("categories").select("id, name, slug, code").eq("is_vehicle_name",!1).eq("is_visible",!0).order("name");if(!r&&i&&i.length>0){const s=i.map(o=>({title:o.name,desc:"",icon:DZ(o.name),slug:o.slug||o.id.toString()}));e(s)}}catch(i){console.error("Error loading categories:",i)}})()},[]),E.jsx("section",{className:"pt-0 sm:pt-3 md:pt-10 pb-14 bg-gray-100",children:E.jsxs("div",{className:"container mx-auto px-4 md:px-10 lg:px-20",children:[E.jsxs("div",{className:"text-center mb-10 space-y-3",children:[E.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-800 tracking-tight",children:"Danh Mc Ph Tng"}),E.jsx("div",{className:"h-1.5 w-24 bg-gradient-to-r from-gray-400 to-primary mx-auto rounded-full shadow-lg shadow-primary/30"}),E.jsx("p",{className:"text-slate-500 max-w-2xl mx-auto",children:"Vui lng chn danh mc ph tng ph hp vi nhu cu ca bn."})]}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4",children:n.map((t,i)=>E.jsx(jt,{to:`/products/${t.slug}`,className:"group cursor-pointer",children:E.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm hover:shadow-lg hover:border-primary/30 transition-all duration-300 h-full",children:[E.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-primary mb-2.5 group-hover:bg-primary group-hover:text-white transition-all",children:E.jsx("span",{className:"material-symbols-outlined text-2xl",children:t.icon})}),E.jsx("h4",{className:"text-base font-bold text-slate-800 mb-1 group-hover:text-primary transition-colors",children:t.title}),t.desc&&E.jsx("p",{className:"text-slate-500 text-xs leading-snug",children:t.desc})]})},i))})]})})},AR="/images/default-truck.svg",UZ=()=>{const[n,e]=F.useState([]),[t,i]=F.useState([]),[r,s]=F.useState("all"),[o,a]=F.useState(!0),[l,c]=F.useState(0),h=6;F.useEffect(()=>{(async()=>{try{const{data:S,error:w}=await qi.from("categories").select("*").eq("is_visible",!0).eq("is_vehicle_name",!0).order("name");if(!w&&S){e(S);const b=[...new Set(S.map(A=>A.code).filter(Boolean))];i(b)}}catch(S){console.error("Error loading vehicles:",S)}finally{a(!1)}})()},[]);const f=r==="all"?n:n.filter(g=>g.code===r),p=Math.ceil(f.length/h),m=l*h,v=f.slice(m,m+h);F.useEffect(()=>{c(0)},[r]);const x=()=>{c(g=>Math.max(0,g-1))},_=()=>{c(g=>Math.min(p-1,g+1))};return t.length>0&&t.join(", "),o?E.jsx("section",{className:"py-12 bg-gray-50",children:E.jsx("div",{className:"container mx-auto px-4 md:px-10 lg:px-20",children:E.jsx("div",{className:"flex justify-center",children:E.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})})})}):n.length===0?null:E.jsx("section",{className:"bg-background relative z-20 mt-8 pb-4",children:E.jsxs("div",{className:"container mx-auto px-4 md:px-10 lg:px-20",children:[E.jsxs("div",{className:"relative",children:[l>0&&E.jsx("button",{onClick:x,className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 z-10 w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-primary hover:text-white transition-colors border border-slate-200",children:E.jsx("span",{className:"material-symbols-outlined",children:"chevron_left"})}),E.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-1 justify-items-start",children:[v.map((g,S)=>E.jsx(Ct.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:S*.05},children:E.jsxs(jt,{to:`/products?category=${g.slug||g.id}`,target:"_blank",rel:"noopener noreferrer",className:"group block text-center",children:[E.jsx("div",{className:"aspect-square relative mb-2 bg-white rounded-xl p-1 border border-slate-100 hover:border-primary/30 hover:shadow-lg transition-all duration-300 max-w-[150px] mx-auto",children:E.jsx("img",{src:g.thumbnail||AR,alt:g.name,className:"w-full h-full object-contain transition-transform duration-300 group-hover:scale-105",onError:w=>{w.target.dataset.errorHandled?w.target.style.display="none":(w.target.dataset.errorHandled="true",w.target.src=AR)}})}),E.jsx("h3",{className:"text-sm font-bold text-slate-700 group-hover:text-primary transition-colors uppercase leading-tight line-clamp-2",children:g.name}),g.code&&E.jsx("p",{className:"text-xs text-slate-400 mt-0.5 uppercase",children:g.code})]})},g.id)),v.length===h&&[...Array(h-v.length)].map((g,S)=>E.jsx("div",{className:"hidden lg:block opacity-0"},`empty-${S}`))]}),l<p-1&&E.jsx("button",{onClick:_,className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 z-10 w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-primary hover:text-white transition-colors border border-slate-200",children:E.jsx("span",{className:"material-symbols-outlined",children:"chevron_right"})})]}),p>1&&E.jsx("div",{className:"flex justify-center gap-2 mt-6",children:[...Array(p)].map((g,S)=>E.jsx("button",{onClick:()=>c(S),className:`w-2 h-2 rounded-full transition-all ${l===S?"bg-primary w-6":"bg-slate-300 hover:bg-slate-400"}`},S))})]})})},OZ=()=>E.jsxs("div",{className:"bg-background",children:[E.jsx(g6,{}),E.jsx("div",{className:"hidden md:block",children:E.jsx(UZ,{})}),E.jsx(x6,{}),E.jsx("div",{className:"hidden md:block",children:E.jsx(y6,{})}),E.jsx(E6,{}),E.jsx(NZ,{}),E.jsx(kZ,{})]}),CR=30,FZ=()=>{const[n]=p4(),e=n.get("category"),{settings:t}=vs(),i=t.contact_phone||"0382890990",[r,s]=F.useState(""),[o,a]=F.useState(e||"all"),[l,c]=F.useState([]),[h,f]=F.useState([]),[p,m]=F.useState(!0),[v,x]=F.useState(!1),[_,g]=F.useState(!1),[S,w]=F.useState(!0),[b,A]=F.useState(null),[P,I]=F.useState("");F.useEffect(()=>{if(e){const C=h.find(j=>j.slug===e),U=h.find(j=>String(j.id)===e);a(C?C.slug||String(C.id):U?U.slug||String(U.id):e),g(!0)}else a("all")},[e,h]),F.useEffect(()=>{(async()=>{const U=await l6();f(U)})()},[]);const L=F.useCallback(async(C=!1)=>{C?(m(!0),c([]),A(null),w(!0)):x(!0);try{const U={};o!=="all"&&(U.category=o),r&&(U.search=r),P&&(U.manufacturer_code=P);const j=C?CR:CR*2,X=await a6(j,!1,U);c(C?X||[]:X||[]),w((X||[]).length>=j),X&&X.length>0&&A(X[X.length-1].id)}catch(U){console.error("Error:",U),c([]),w(!1)}finally{m(!1),x(!1)}},[o,r,P,h]);F.useEffect(()=>{L(!0)},[o,r,P]);const R=()=>{!v&&S&&L(!1)};return E.jsxs("div",{className:"min-h-screen bg-background",children:[E.jsxs("div",{className:"relative py-10 md:py-14 overflow-hidden",children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-white to-sky-50"}),E.jsx("div",{className:"absolute inset-0 flex items-center justify-center px-4",children:E.jsxs(Ct.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:"text-center",children:[E.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-slate-800 tracking-tighter mb-2",children:["SN ",E.jsx("span",{className:"text-primary",children:"PHM"})]}),E.jsx("p",{className:"text-slate-500 text-sm md:text-base max-w-xl mx-auto",children:"Tm kim v lc ph tng chnh hng theo nhu cu ca bn"})]})})]}),E.jsxs("div",{className:"container mx-auto px-4 md:px-10 lg:px-20 pb-20",children:[E.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-4 mb-6 md:mb-10",children:[E.jsx("div",{className:"flex-grow relative",children:E.jsx("input",{type:"text",placeholder:"Tm kim theo tn hoc m danh im...",value:r,onChange:C=>s(C.target.value),className:"w-full pl-4 pr-4 py-4 bg-white border border-slate-200 rounded-2xl text-slate-800 placeholder-slate-400 focus:outline-none focus:border-primary transition-all shadow-sm"})}),E.jsxs("button",{className:`flex items-center gap-2 px-6 py-4 rounded-2xl font-bold transition-all ${_?"bg-primary text-white":"bg-white border border-slate-200 text-slate-700 hover:border-primary shadow-sm"}`,onClick:()=>g(!_),children:[E.jsx("span",{className:"material-symbols-outlined",children:"tune"}),"Lc"]})]}),_&&E.jsxs(Ct.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},className:"mb-6 md:mb-10 p-5 md:p-6 bg-white border border-slate-200 rounded-2xl shadow-sm space-y-5 md:space-y-6",children:[E.jsxs("div",{children:[E.jsxs("h4",{className:"text-slate-800 font-bold mb-3 uppercase tracking-wider text-sm flex items-center gap-2",children:[E.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"category"}),"B PHN"]}),E.jsxs("div",{className:"flex flex-wrap gap-2",children:[E.jsx("button",{className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${o==="all"?"bg-primary text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200 hover:text-slate-800"}`,onClick:()=>a("all"),children:"TT C"}),h.filter(C=>!C.is_vehicle_name).map(C=>E.jsx("button",{className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${o===(C.slug||String(C.id))?"bg-primary text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200 hover:text-slate-800"}`,onClick:()=>a(C.slug||String(C.id)),children:C.name},C.id))]})]}),E.jsxs("div",{children:[E.jsxs("h4",{className:"text-slate-800 font-bold mb-3 uppercase tracking-wider text-sm flex items-center gap-2",children:[E.jsx("span",{className:"material-symbols-outlined text-blue-500 text-lg",children:"local_shipping"}),"HNG XE"]}),E.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.filter(C=>C.is_vehicle_name).map(C=>E.jsx("button",{className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${o===(C.slug||String(C.id))?"bg-blue-500 text-white":"bg-blue-50 text-blue-600 hover:bg-blue-100 hover:text-blue-800 border border-blue-200"}`,onClick:()=>a(C.slug||String(C.id)),children:C.name},C.id)),h.filter(C=>C.is_vehicle_name).length===0&&E.jsx("p",{className:"text-slate-400 text-sm",children:"Cha c hng xe"})]})]}),E.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[E.jsxs("h4",{className:"text-slate-800 font-bold uppercase tracking-wider text-sm flex items-center gap-2 shrink-0",children:[E.jsx("span",{className:"material-symbols-outlined text-amber-500 text-lg",children:"barcode"}),"M NH SN XUT"]}),E.jsx("input",{type:"text",placeholder:"V d: VG1034080020, WG9525820140...",value:P,onChange:C=>I(C.target.value),className:"flex-1 min-w-0 max-w-md px-3 py-2 text-sm bg-slate-50 border border-slate-200 rounded-xl text-slate-800 placeholder-slate-400 focus:outline-none focus:border-primary transition-all"})]})]}),p?E.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 md:gap-8",children:[1,2,3,4,5,6].map(C=>E.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl overflow-hidden animate-pulse",children:[E.jsx("div",{className:"aspect-square bg-slate-200"}),E.jsxs("div",{className:"p-6 space-y-4",children:[E.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4"}),E.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2"}),E.jsx("div",{className:"h-10 bg-slate-200 rounded"})]})]},C))}):l.length>0?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 md:gap-8",children:l.map((C,U)=>E.jsxs(Ct.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:Math.min(U*.05,.3)},viewport:{once:!0},whileHover:{y:-5},className:"group bg-white border border-slate-200 rounded-3xl overflow-hidden hover:border-primary/50 transition-all duration-300 shadow-sm hover:shadow-lg flex flex-col h-full",children:[E.jsx(jt,{to:`/product/${C.slug||C.id}`,children:E.jsxs("div",{className:"aspect-square relative overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200",children:[C.image?E.jsx("img",{src:o6(C.image),alt:C.name,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",onError:j=>{j.target.style.display="none"}}):E.jsx("div",{className:"w-full h-full flex items-center justify-center",children:E.jsx("span",{className:"material-symbols-outlined text-8xl text-gray-300",children:"settings"})}),C.manufacturer_code&&E.jsx("div",{className:"absolute top-4 left-4 bg-primary text-white text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-wider shadow-lg",children:C.manufacturer_code}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white to-transparent opacity-60"})]})}),E.jsxs("div",{className:"p-3 flex flex-col flex-1",children:[E.jsx(jt,{to:`/product/${C.slug||C.id}`,children:E.jsx("h3",{className:"text-slate-800 font-bold text-base group-hover:text-primary transition-colors line-clamp-2 min-h-[2.8rem]",children:C.name})}),E.jsx("p",{className:"text-slate-400 text-xs line-clamp-1 mt-0.5",children:C.description||"Ph tng chnh hng"}),E.jsxs("div",{className:"flex gap-2 mt-auto pt-3",children:[E.jsx(jt,{to:`/product/${C.slug||C.id}`,className:"flex-1 py-2 bg-white border border-slate-200 text-slate-700 font-medium text-sm rounded-xl hover:border-primary hover:text-primary transition-all flex items-center justify-center",children:"Chi Tit"}),E.jsx("a",{href:`tel:${i}`,className:"flex-1 py-2 bg-[#c41e1e] text-white font-medium text-sm rounded-xl hover:bg-[#a01818] transition-all flex items-center justify-center",children:"t Hng"})]})]})]},C.id))}),S&&E.jsx("div",{className:"mt-12 text-center",children:E.jsx("button",{onClick:R,disabled:v,className:"px-8 py-4 bg-white border border-slate-200 rounded-2xl text-slate-700 font-bold hover:border-primary hover:text-primary transition-all shadow-sm disabled:opacity-50 flex items-center gap-2 mx-auto",children:v?E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"animate-spin material-symbols-outlined",children:"refresh"}),"ang ti..."]}):E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"material-symbols-outlined",children:"expand_more"}),"Xem thm sn phm"]})})})]}):E.jsxs("div",{className:"text-center py-20",children:[E.jsx("span",{className:"material-symbols-outlined text-6xl text-slate-300 mb-4",children:"search_off"}),E.jsx("p",{className:"text-slate-500 text-lg",children:"Khng tm thy sn phm no ph hp"})]})]})]})},BZ=()=>{const{slug:n}=$3(),e=lM(),[t,i]=F.useState(null),[r,s]=F.useState(null),[o,a]=F.useState([]),[l,c]=F.useState([]),[h,f]=F.useState(!0),[p,m]=F.useState([]),[v,x]=F.useState(0),{settings:_}=vs(),g=_.contact_phone||"0382890990";F.useEffect(()=>{if(p.length<=1)return;const b=setInterval(()=>{x(A=>(A+1)%p.length)},7e3);return()=>clearInterval(b)},[p.length]);const S=F.useCallback(()=>{x(b=>(b+1)%p.length)},[p.length]),w=F.useCallback(()=>{x(b=>(b-1+p.length)%p.length)},[p.length]);return F.useEffect(()=>{(async()=>{try{let A=null,P=null;const I=parseInt(n);if(isNaN(I)){const R=await qi.from("products").select("*").eq("slug",n).maybeSingle();A=R.data,P=R.error}else{const R=await qi.from("products").select("*").eq("id",I).single();A=R.data,P=R.error}if((!A||P)&&isNaN(parseInt(n))){const R=await qi.from("products").select("*").ilike("name",`%${n.replace(/-/g," ")}%`).limit(1).maybeSingle();A=R.data,P=R.error}if(P||!A){f(!1);return}i(A);const L=await M6(A.id);if(L.length>0?m(L):A.image&&m([mf(A.image)]),A.category_id){const{data:R}=await qi.from("categories").select("*").eq("id",A.category_id).single();s(R);const{data:C}=await qi.from("products").select("*").eq("category_id",A.category_id).eq("show_on_homepage",!0).neq("id",A.id).limit(5),U=(C||[]).filter(j=>j.id!==A.id&&j.slug!==A.slug&&j.manufacturer_code!==A.manufacturer_code);c(U)}if(A.vehicle_ids&&A.vehicle_ids.length>0){const{data:R}=await qi.from("categories").select("*").in("id",A.vehicle_ids).eq("is_vehicle_name",!0);a(R||[])}}catch(A){console.error("Error loading product:",A),e("/products")}finally{f(!1)}})()},[n,e]),h?E.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:E.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-primary border-t-transparent rounded-full"})}):t?E.jsxs("div",{className:"min-h-screen bg-background",children:[E.jsx("div",{className:"bg-gray-50 border-b border-gray-200",children:E.jsx("div",{className:"container mx-auto px-4 md:px-10 lg:px-20 py-4",children:E.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[E.jsx(jt,{to:"/",className:"hover:text-primary transition-colors",children:"Trang ch"}),E.jsx("span",{className:"material-symbols-outlined text-xs",children:"chevron_right"}),E.jsx(jt,{to:"/products",className:"hover:text-primary transition-colors",children:"Sn phm"}),E.jsx("span",{className:"material-symbols-outlined text-xs",children:"chevron_right"}),E.jsx("span",{className:"text-slate-800 font-medium",children:t.name})]})})}),E.jsxs("div",{className:"container mx-auto px-4 md:px-10 lg:px-20 py-12",children:[E.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[E.jsxs(Ct.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},className:"relative",children:[E.jsxs("div",{className:"w-full max-w-[600px] h-[400px] sm:h-[500px] rounded-3xl overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 border border-gray-200 shadow-lg relative",children:[E.jsx(u0,{mode:"wait",children:p.length>0?E.jsx(Ct.img,{src:p[v],alt:t.name,className:"w-full h-full object-contain bg-white",initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},onError:b=>{b.target.style.display="none"},draggable:!1},v):E.jsx("div",{className:"w-full h-full flex items-center justify-center",children:E.jsx("span",{className:"material-symbols-outlined text-9xl text-gray-300",children:"settings"})})}),p.length>1&&E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:w,className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/90 hover:bg-white rounded-full shadow-lg flex items-center justify-center transition-colors",children:E.jsx("span",{className:"material-symbols-outlined",children:"chevron_left"})}),E.jsx("button",{onClick:S,className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/90 hover:bg-white rounded-full shadow-lg flex items-center justify-center transition-colors",children:E.jsx("span",{className:"material-symbols-outlined",children:"chevron_right"})}),E.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:p.map((b,A)=>E.jsx("button",{onClick:()=>x(A),className:`w-2.5 h-2.5 rounded-full transition-colors ${A===v?"bg-primary":"bg-white/70"}`},A))})]})]}),p.length>1&&E.jsx("div",{className:"flex gap-3 mt-4 overflow-x-auto pb-2 w-full max-w-[600px]",children:p.map((b,A)=>E.jsx("button",{onClick:()=>x(A),className:`flex-shrink-0 w-20 h-20 rounded-xl overflow-hidden border-2 transition-colors ${A===v?"border-primary":"border-gray-200"}`,children:E.jsx("img",{src:b,alt:`${t.name} ${A+1}`,className:"w-full h-full object-cover",draggable:!1})},A))}),t.manufacturer_code&&E.jsx("div",{className:"absolute top-6 left-6 bg-primary text-white text-xs font-bold px-4 py-2 rounded-full uppercase tracking-wider shadow-lg",children:t.manufacturer_code})]}),E.jsxs(Ct.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},className:"space-y-8",children:[E.jsxs("div",{className:"flex flex-wrap gap-2",children:[r&&E.jsx("span",{className:"inline-block px-4 py-1 bg-primary/10 text-primary text-sm font-medium rounded-full",children:r.name}),o.map(b=>E.jsx("span",{className:"inline-block px-4 py-1 bg-blue-50 text-blue-600 text-sm font-medium rounded-full border border-blue-200",children:b.name},b.id))]}),E.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-800 leading-tight",children:t.name}),t.manufacturer_code&&E.jsx("div",{className:"flex flex-wrap gap-4 text-sm",children:E.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[E.jsx("span",{className:"font-medium",children:"M NSX:"}),E.jsx("span",{className:"font-mono bg-slate-100 px-2 py-1 rounded",children:t.manufacturer_code})]})}),t.description&&E.jsx("p",{className:"text-slate-500 text-lg leading-relaxed",children:t.description}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[E.jsxs("a",{href:`tel:${g}`,className:"flex-1 py-3 px-6 bg-[#c41e1e] text-white font-semibold rounded-lg hover:bg-[#a01818] transition-colors flex items-center justify-center gap-2 shadow-md text-sm",children:[E.jsx("span",{className:"material-symbols-outlined text-lg",children:"call"}),"t Hng Ngay"]}),E.jsxs("a",{href:"https://zalo.me/0382890990",target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-3 px-6 bg-[#0068ff] text-white font-semibold rounded-lg hover:bg-[#0056d6] transition-colors flex items-center justify-center gap-2 text-sm",children:[E.jsx("span",{className:"material-symbols-outlined text-lg",children:"chat"}),"Chat Zalo"]})]}),E.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{icon:"verified",label:"Chnh hng, Original Parts"},{icon:"local_shipping",label:"Giao ton quc"},{icon:"shield",label:"Bo hnh uy tn"},{icon:"support_agent",label:"H tr 24/7"}].map((b,A)=>E.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[E.jsx("span",{className:"material-symbols-outlined text-primary",children:b.icon}),E.jsx("span",{className:"text-sm text-slate-700 font-medium",children:b.label})]},A))})]})]}),l.length>0&&E.jsxs("div",{className:"mt-16",children:[E.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Sn Phm Lin Quan"}),E.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:l.map(b=>E.jsxs(jt,{to:`/product/${b.slug||b.id}`,className:"group bg-white border border-slate-200 rounded-xl overflow-hidden hover:border-primary/50 transition-all shadow-sm hover:shadow-md",children:[E.jsxs("div",{className:"aspect-video relative overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200",children:[b.image?E.jsx("img",{src:mf(b.image),alt:b.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onError:A=>{A.target.style.display="none"},draggable:!1}):E.jsx("div",{className:"w-full h-full flex items-center justify-center",children:E.jsx("span",{className:"material-symbols-outlined text-6xl text-gray-300",children:"settings"})}),b.manufacturer_code&&E.jsx("div",{className:"absolute top-4 left-4 bg-primary text-white text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-wider shadow-lg",children:b.manufacturer_code})]}),E.jsx("div",{className:"p-3",children:E.jsx("h3",{className:"text-slate-800 font-bold text-xs group-hover:text-primary transition-colors line-clamp-2",children:b.name})})]},b.id))})]})]})]}):E.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"text-6xl mb-4",children:""}),E.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Khng tm thy sn phm"}),E.jsxs("p",{className:"text-slate-600 mb-4",children:['Sn phm vi slug "',n,'" khng tn ti.']}),E.jsx(jt,{to:"/products",className:"inline-block px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:"Quay li danh sch sn phm"})]})})},zZ=()=>{const{category:n}=$3(),[e,t]=F.useState(null),[i,r]=F.useState([]),[s,o]=F.useState(!0);if(F.useEffect(()=>{(async()=>{o(!0);try{const h=parseInt(n);console.log(" Loading category:",n,"isNumber:",!isNaN(h));let f=qi.from("categories").select("*"),p=null,m=null;if(isNaN(h)){const g=await qi.from("categories").select("*").eq("slug",n).maybeSingle();p=g.data,m=g.error}else{const g=await qi.from("categories").select("*").eq("id",h).single();p=g.data,m=g.error}if(console.log(" Slug lookup result:",p,"Error:",m),m&&isNaN(h)){console.log(" Slug not found, trying name match:",n.replace(/-/g," "));const{data:g,error:S}=await qi.from("categories").select("*").ilike("name",`%${n.replace(/-/g," ")}%`).single();console.log(" Name lookup result:",g,"Error:",S),p=g,m=S}if(m||!p){console.log(" Category not found"),t({name:"Danh mc",description:""}),r([]),o(!1);return}console.log(" Category found:",p),t(p);let v=qi.from("products").select("*").order("name").limit(50);p.is_vehicle_name?v=v.contains("vehicle_ids",[p.id]):v=v.eq("category_id",p.id);const{data:x,error:_}=await v;_||r(x||[])}catch(h){console.error("Error loading category:",h),t({name:"Danh mc",description:""}),r([])}finally{o(!1)}})()},[n]),s)return E.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:E.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-primary border-t-transparent rounded-full"})});const a=(e==null?void 0:e.name)||"Danh mc",l=(e==null?void 0:e.description)||`Ph tng chnh hng cho ${a}`;return E.jsxs("div",{className:"min-h-screen bg-background",children:[E.jsxs("div",{className:"relative py-10 md:py-14 overflow-hidden",children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-white to-sky-50"}),E.jsx("div",{className:"absolute inset-0 flex items-center justify-center px-4",children:E.jsxs(Ct.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:"text-center",children:[E.jsxs(jt,{to:"/products",className:"inline-flex items-center gap-2 text-slate-500 hover:text-primary mb-4 transition-colors",children:[E.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_back"}),"Quay li sn phm"]}),E.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-slate-800 tracking-tighter mb-2",children:[a.split(" ")[0]," ",E.jsx("span",{className:"text-primary",children:a.split(" ").slice(1).join(" ")})]}),E.jsx("p",{className:"text-slate-500 text-sm md:text-base max-w-xl mx-auto",children:l})]})})]}),E.jsx("div",{className:"container mx-auto px-4 md:px-10 lg:px-20 pb-20",children:i.length>0?E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6",children:i.map((c,h)=>E.jsx(Ct.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{delay:Math.min(h*.05,.3)},viewport:{once:!0},children:E.jsxs(jt,{to:`/product/${c.slug||c.id}`,target:"_blank",rel:"noopener noreferrer",className:"group relative bg-white border border-slate-200 rounded-3xl overflow-hidden hover:border-primary/40 transition-colors duration-300 shadow-sm hover:shadow-lg flex flex-col h-full will-change-transform",children:[E.jsxs("div",{className:"aspect-square overflow-hidden relative bg-gradient-to-br from-gray-100 to-gray-200",children:[c.image?E.jsx("img",{src:mf(c.image),alt:c.name,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onError:f=>{f.target.style.display="none"}}):E.jsx("div",{className:"w-full h-full flex items-center justify-center",children:E.jsx("span",{className:"material-symbols-outlined text-7xl text-gray-300",children:"settings"})}),c.manufacturer_code&&E.jsx("div",{className:"absolute top-4 left-4 bg-[#1e9ba8] text-white text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded",children:c.manufacturer_code}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white to-transparent opacity-50"})]}),E.jsxs("div",{className:"p-3 flex flex-col flex-1",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("h3",{className:"text-slate-800 font-bold text-base group-hover:text-primary transition-colors line-clamp-2 min-h-[2.8rem]",children:c.name}),E.jsx("p",{className:"text-slate-400 text-xs line-clamp-1 mt-0.5",children:c.description||"Ph tng chnh hng"})]}),E.jsxs("div",{className:"flex gap-2 mt-auto pt-3",children:[E.jsx("div",{className:"flex-1 py-2 bg-white border border-slate-200 text-slate-700 font-medium text-sm rounded-xl hover:border-primary hover:text-primary transition-all flex items-center justify-center",children:"Chi Tit"}),E.jsx("a",{href:"tel:0382890990",onClick:f=>f.stopPropagation(),className:"flex-1 py-2 bg-[#c41e1e] text-white font-medium text-sm rounded-xl hover:bg-[#a01818] transition-all flex items-center justify-center",children:"t Hng"})]})]})]})},c.id))}):E.jsxs("div",{className:"text-center py-20",children:[E.jsx("span",{className:"material-symbols-outlined text-6xl text-slate-300 mb-4",children:"inventory_2"}),E.jsx("p",{className:"text-slate-500 text-lg",children:"ang cp nht sn phm cho danh mc ny"}),E.jsxs(jt,{to:"/products",className:"inline-flex items-center gap-2 mt-6 text-primary font-bold hover:underline",children:[E.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"}),"Xem tt c sn phm"]})]})})]})},VZ=()=>{const[n,e]=F.useState([]),{settings:t}=vs(),i=t.contact_phone||"0382.890.990",r=t.address||"Thn 1, X Li Yn, Hoi c, H Ni (cch cu vt An Khnh 300m)",s=t.contact_email||"hnsinotruk@gmail.com",o=t.site_name&&t.site_name.toUpperCase()||"CNG TY C PHN SINOTRUK H NI";return F.useEffect(()=>{(async()=>{try{const{data:l,error:c}=await qi.from("categories").select("*").eq("is_visible",!0).eq("is_vehicle_name",!0).order("name");!c&&l&&e(l)}catch(l){console.error("Error loading categories:",l)}})()},[]),E.jsxs("div",{className:"min-h-screen bg-background",children:[E.jsxs("div",{className:"relative py-10 md:py-14 overflow-hidden",children:[E.jsx("div",{className:"absolute inset-0 z-0 bg-gradient-to-br from-primary/10 via-white to-sky-50"}),E.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center",children:E.jsxs(Ct.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:"text-center px-4",children:[E.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-slate-800 tracking-tighter mb-2",children:["GII ",E.jsx("span",{className:"text-primary",children:"THIU"})]}),E.jsx("p",{className:"text-slate-500 text-sm md:text-base max-w-xl mx-auto",children:"i tc tin cy trong lnh vc ph tng xe ti"})]})})]}),E.jsxs("div",{className:"container mx-auto px-4 md:px-10 lg:px-20 pb-10 space-y-6 md:space-y-8 lg:space-y-10 relative z-20",children:[E.jsx(Ct.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0},className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{value:"15+",label:"Nm kinh nghim"},{value:"3000+",label:"Khch hng tin tng"},{value:"50K+",label:"Ph tng  bn"},{value:"63",label:"Tnh thnh ph sng"}].map((a,l)=>E.jsxs("div",{className:"bg-white/90 backdrop-blur-xl border border-slate-200 rounded-2xl p-6 text-center shadow-sm",children:[E.jsx("div",{className:"text-primary text-4xl md:text-5xl font-bold",children:a.value}),E.jsx("div",{className:"text-slate-500 text-sm mt-2",children:a.label})]},l))}),E.jsxs(Ct.section,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0},className:"bg-white border border-slate-200 rounded-3xl p-8 md:p-12 shadow-sm",children:[E.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-800 mb-6 text-center",children:o}),E.jsxs("div",{className:"text-slate-500 space-y-4 leading-relaxed",children:[E.jsxs("p",{children:[o," xin gi li cho trn trng cng li chc sc kho, ti ton th Qu Khch Hng  quan tm v s dng cc sn phm m Cng ty chng ti phn phi trn th trng trong sut thi gian qua."]}),E.jsxs("p",{children:[o," l cng ty chuyn nhp khu v phn phi ph tng cho xe ti hng nng, xe chuyn dng, xe my cng trnh do Trung Quc sn xut: HOWO/SINOTRUK, CHENGLONG. Chng ti chuyn cung cp ph tng  bo hnh, thay th cho xe ca hng Sinotruk vi cc chng loi HOWO A7, 420, 375, 380 , Xe trn b tng/ Xe ben Howo 336-371 v cc chng loi s mi r mooc CIMC."]}),E.jsx("p",{children:"Vi s hiu bit su sc v cc chng loi xe ti nng do Trung Quc sn xut, phong cch phc v chuyn nghip v gi c cnh tranh cng ch  bo hnh cho sn phm, chng ti mong rng s tr thnh i tc tin cy ca Qu khch hng trn ton quc."})]})]}),n.length>0&&E.jsx(Ct.section,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0},className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2 sm:gap-3",children:n.map((a,l)=>E.jsx(Ct.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:l*.05},children:E.jsxs(jt,{to:`/products?vehicle=${a.id}`,target:"_blank",rel:"noopener noreferrer",className:"group block text-center",children:[E.jsx("div",{className:"aspect-square relative mb-2 bg-white rounded-lg p-1.5 border border-slate-100 hover:border-primary/30 hover:shadow-lg transition-all duration-300",children:E.jsx("img",{src:a.thumbnail||"/images/default-truck.svg",alt:a.name,className:"w-full h-full object-contain transition-transform duration-300 group-hover:scale-105",onError:c=>{c.target.dataset.errorHandled?c.target.style.display="none":(c.target.dataset.errorHandled="true",c.target.src="/images/default-truck.svg")}})}),E.jsx("h3",{className:"text-xs sm:text-sm font-bold text-slate-700 group-hover:text-primary transition-colors uppercase leading-tight line-clamp-2",children:a.name}),a.code&&E.jsx("p",{className:"text-[10px] sm:text-xs text-slate-400 mt-0.5 uppercase",children:a.code})]})},a.id))}),E.jsxs(Ct.section,{id:"warranty",initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0},className:"bg-white border border-slate-200 rounded-3xl p-8 md:p-12 shadow-sm",children:[E.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[E.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-2xl flex items-center justify-center text-primary border border-primary/30",children:E.jsx("span",{className:"material-symbols-outlined text-3xl",children:"verified_user"})}),E.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-800",children:"CHNH SCH BO HNH"})]}),E.jsxs("div",{className:"text-slate-500 space-y-6 leading-relaxed",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-slate-800 font-bold text-lg mb-3",children:"1. iu kin bo hnh"}),E.jsxs("ul",{className:"space-y-2 pl-6",children:[E.jsxs("li",{className:"flex items-start gap-3",children:[E.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"}),"Sn phm phi c mua ti cng ty"]}),E.jsxs("li",{className:"flex items-start gap-3",children:[E.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"}),"Sn phm phi cn nguyn tem bo hnh"]}),E.jsxs("li",{className:"flex items-start gap-3",children:[E.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"}),"Sn phm phi trong thi hn bo hnh t ngy mua"]}),E.jsxs("li",{className:"flex items-start gap-3",children:[E.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"}),"Sn phm c li k thut do nh cung cp (khng bo hnh li do ngi dng)"]})]})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-slate-800 font-bold text-lg mb-3",children:"2. Chnh sch i tr"}),E.jsx("p",{children:"Chng ti nhn i tr ngay lp tc nu ph tng xe ti do cng ty cung cp khng ng m sn phm, cht lng hoc m t so vi n hng ca khch hng."}),E.jsxs("p",{className:"mt-3",children:[E.jsx("span",{className:"text-primary font-bold",children:"Thi gian i tr:"})," Trong vng 03 ngy k t ngy khch hng nhn hng, vi iu kin hng ha cn nguyn vn, cha s dng."]})]})]})]}),E.jsxs(Ct.section,{id:"supply",initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0},className:"bg-white border border-slate-200 rounded-3xl p-8 md:p-12 shadow-sm",children:[E.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[E.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-2xl flex items-center justify-center text-primary border border-primary/30",children:E.jsx("span",{className:"material-symbols-outlined text-3xl",children:"inventory_2"})}),E.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-800",children:"CHNH SCH CUNG CP"})]}),E.jsxs("div",{className:"text-slate-500 space-y-6 leading-relaxed",children:[E.jsx("p",{children:"Sn phm chng ti bn thng qua h thng trc tuyn, trc tip qua knh phn phi v cung cp ton lnh th Vit Nam.  nm r thng tin, quy ch bn hng xin vui lng lin h theo:"}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-slate-800 font-bold text-lg mb-3",children:"Thng tin lin lc:"}),E.jsx("p",{className:"font-bold text-slate-700 uppercase",children:o}),E.jsxs("ul",{className:"mt-2 space-y-1 pl-0 list-none",children:[E.jsxs("li",{children:["a ch: ",r]}),E.jsxs("li",{children:["in thoi: ",i]}),E.jsxs("li",{children:["Email: ",s]})]})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-slate-800 font-bold text-lg mb-3",children:"1. Thi gian ch x l:"}),E.jsx("p",{children:"Chng ti s thng tin li cho Qu khch hng trong vng 24 gi sau khi nhn c n t hng ca Qu khch. Thi gian lm vic ca chng ti c bt u tt c cc ngy lm vic trong tun t 08h00  17h00. Khng bao gm cc bui ti hoc ngy ngh cui tun."})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-slate-800 font-bold text-lg mb-3",children:"2. Thi gian t hng:"}),E.jsx("p",{children:"Thi gian t hng thng thng t 10-15 ngy ngay sau khi k hp ng. Trong trng hp c bit (c th cm bin hay v l do no ...iu ny bt kh khng) th thi gian t hng c th ko di ti a 30 ngy sau khi k hp ng. Trong trng hp ny chng ti s lin lc vi bn qua in thoi, Email hoc Fax  ly  kin ca khch tip tc hay hy b n hng."})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-slate-800 font-bold text-lg mb-3",children:"3. iu kin giao hng:"}),E.jsx("p",{children:"Qu khch c th la chn hnh thc vn chuyn ng b thng qua h thng tu ha, xe ti, xe m hoc cng ty vn chuyn Bc Nam. Chng ti khng chu trch nhim trong trng hp hng giao tr khi Qu khch  la chn mt trong cc hnh thc trn v l do bt kh khng ca cc hng vn chuyn."})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-slate-800 font-bold text-lg mb-3",children:"4. Hy n hng:"}),E.jsx("p",{children:"Qu khch hng c thi gian 1-2 ngy lm vic (khng bao gm cc ngy ngh l hoc cui tun)  hy b n hng (tr li hng) sau khi nhn c hng trong trng hp hng khng ng theo yu cu, hng sai v mt k thut, hng li. Nu qu ngy trn chng ti s khng ng  cho Qu khch tr li hng. Trng hp Qu khch s khng tr li hng nu hng c t theo yu cu k thut ring."})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-slate-800 font-bold text-lg mb-3",children:"5. Gi tr li hng:"}),E.jsx("p",{children:"Chng ti s khng chu trch nhim hon tin cho Qu khch hng nu khng nhn c hng tr li. Chng ti chu mi chi ph tr hng, nhng ch p dng vi sn phm khng t tiu chun k thut. Chng ti c quyn t chi mi trng hp tr hng nu hng khng do chng ti cung cp, b h hng,  thay th hoc thay i."})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-slate-800 font-bold text-lg mb-3",children:"6. Hon li tin:"}),E.jsx("p",{children:"Chng ti s x l hon tin nhanh chng, trong vng 1-2 ngy lm vic (khng bao gm ngy ngh l hoc cui tun) sau khi nhn c n hy v hng tr li t Qu khch. Thi gian x l hon tin chm nht l 7 ngy. Chng ti c quyn t chi hon tin theo iu khon ca cng ty."})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-slate-800 font-bold text-lg mb-3",children:"7. Khiu ni, t tng:"}),E.jsxs("p",{children:["Nu Qu khch c khiu ni v hng ha hoc dch v, vui lng gi ng dy nng qun l bn hng: ",E.jsx("span",{className:"font-bold text-slate-700",children:i}),"."]})]})]})]}),E.jsxs(Ct.section,{id:"payment",initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0},className:"bg-white border border-slate-200 rounded-3xl p-8 md:p-12 shadow-sm",children:[E.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[E.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-2xl flex items-center justify-center text-primary border border-primary/30",children:E.jsx("span",{className:"material-symbols-outlined text-3xl",children:"payments"})}),E.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-800",children:"PHNG THC THANH TON"})]}),E.jsxs("div",{className:"text-slate-500 leading-relaxed",children:[E.jsx("p",{className:"mb-4",children:"Chng ti chp nhn cc hnh thc thanh ton sau:"}),E.jsx("div",{className:"grid sm:grid-cols-3 gap-4",children:[{icon:"local_atm",label:"Tin mt (COD)"},{icon:"account_balance",label:"Chuyn khon"},{icon:"wallet",label:"V in t"}].map((a,l)=>E.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-2xl border border-slate-200 hover:border-primary/30 transition-colors",children:[E.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:a.icon}),E.jsx("span",{className:"text-slate-700 font-medium",children:a.label})]},l))})]})]})]})]})},HZ=()=>{const[n,e]=F.useState({name:"",phone:"",email:"",message:""}),[t,i]=F.useState(!1),[r,s]=F.useState(!1),{settings:o}=vs(),a=o.contact_phone||"0382890990",l=o.address||"Thn 1, X Li Yn, Hoi c, H Ni",c=o.contact_email||"hnsinotruk@gmail.com",f=(o.site_name||"SINOTRUK H Ni").toUpperCase(),p=m=>{m.preventDefault(),i(!0),setTimeout(()=>{i(!1),s(!0),e({name:"",phone:"",email:"",message:""}),setTimeout(()=>s(!1),3e3)},1e3)};return E.jsxs("div",{className:"min-h-screen bg-background",children:[E.jsxs("div",{className:"relative py-10 md:py-14 overflow-hidden",children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-white to-sky-50"}),E.jsx("div",{className:"absolute inset-0 flex items-center justify-center px-4",children:E.jsxs(Ct.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:"text-center",children:[E.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-slate-800 tracking-tighter mb-2",children:["LIN ",E.jsx("span",{className:"text-primary",children:"H"}),E.jsx("span",{className:"block text-sm sm:text-base md:text-lg text-slate-600 mt-1",children:f})]}),E.jsx("p",{className:"text-slate-500 text-sm md:text-base max-w-xl mx-auto",children:"Chng ti lun sn sng h tr bn 24/7"})]})})]}),E.jsxs("div",{className:"container mx-auto px-4 md:px-10 lg:px-20 pb-20",children:[E.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[E.jsx("div",{className:"space-y-8",children:E.jsx(Ct.div,{initial:{x:-30,opacity:0},whileInView:{x:0,opacity:1},viewport:{once:!0},className:"space-y-6",children:[{icon:"location_on",title:"a ch",content:l},{icon:"call",title:"Hotline 24/7",content:o.contact_phone||"0382.890.990",href:`tel:${a}`},{icon:"mail",title:"Email",content:c,href:`mailto:${c}`},{icon:"schedule",title:"Gi lm vic",content:"Th 2 - Ch nht: 7:00 - 21:00"}].map((m,v)=>E.jsxs("div",{className:"flex items-start gap-4 p-4 md:p-6 bg-white border border-slate-200 rounded-xl md:rounded-2xl hover:border-primary/50 transition-all shadow-sm",children:[E.jsx("div",{className:"w-11 h-11 md:w-14 md:h-14 bg-primary/10 rounded-xl md:rounded-2xl flex items-center justify-center text-primary border border-primary/30 flex-shrink-0",children:E.jsx("span",{className:"material-symbols-outlined text-xl md:text-2xl",children:m.icon})}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-slate-800 font-bold text-base md:text-lg mb-1",children:m.title}),m.href?E.jsx("a",{href:m.href,className:"text-slate-500 hover:text-primary transition-colors text-sm md:text-base",children:m.content}):E.jsx("p",{className:"text-slate-500 text-sm md:text-base",children:m.content}),m.sub&&E.jsx("p",{className:"text-slate-400 text-sm mt-1",children:m.sub})]})]},v))})}),E.jsxs(Ct.div,{initial:{x:30,opacity:0},whileInView:{x:0,opacity:1},viewport:{once:!0},className:"bg-white border border-slate-200 rounded-3xl p-8 md:p-10 shadow-sm",children:[E.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:"Gi tin nhn cho chng ti"}),r&&E.jsxs("div",{className:"mb-6 p-4 bg-green-500/10 border border-green-500/30 rounded-xl flex items-center gap-3 text-green-400",children:[E.jsx("span",{className:"material-symbols-outlined",children:"check_circle"}),"Cm n bn! Chng ti s phn hi sm nht."]}),E.jsxs("form",{className:"space-y-6",onSubmit:p,children:[E.jsxs("div",{children:[E.jsx("label",{className:"text-slate-500 text-sm font-medium mb-2 block",children:"H v tn *"}),E.jsx("input",{type:"text",required:!0,value:n.name,onChange:m=>e({...n,name:m.target.value}),className:"w-full px-5 py-4 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 focus:outline-none focus:border-primary transition-all",placeholder:"Nhp h v tn"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-slate-500 text-sm font-medium mb-2 block",children:"S in thoi *"}),E.jsx("input",{type:"tel",required:!0,value:n.phone,onChange:m=>e({...n,phone:m.target.value}),className:"w-full px-5 py-4 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 focus:outline-none focus:border-primary transition-all",placeholder:"Nhp s in thoi"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-slate-500 text-sm font-medium mb-2 block",children:"Email"}),E.jsx("input",{type:"email",value:n.email,onChange:m=>e({...n,email:m.target.value}),className:"w-full px-5 py-4 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 focus:outline-none focus:border-primary transition-all",placeholder:"Nhp email (khng bt buc)"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-slate-500 text-sm font-medium mb-2 block",children:"Tin nhn *"}),E.jsx("textarea",{rows:"4",required:!0,value:n.message,onChange:m=>e({...n,message:m.target.value}),className:"w-full px-5 py-4 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 focus:outline-none focus:border-primary transition-all resize-none",placeholder:"Nhp ni dung tin nhn"})]}),E.jsx("button",{type:"submit",disabled:t,className:"w-full py-4 bg-primary hover:brightness-110 disabled:opacity-50 text-white font-bold rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-primary/20",children:t?E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"material-symbols-outlined animate-spin",children:"progress_activity"}),"ang gi..."]}):E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"material-symbols-outlined",children:"send"}),"Gi tin nhn"]})})]})]})]}),E.jsx(Ct.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0},className:"mt-12 rounded-3xl overflow-hidden border border-slate-200 shadow-sm",children:E.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d17715.665864277737!2d105.7075459798745!3d21.022281109497083!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x313455b2b079440f%3A0xcbaa30aea515ad31!2zQ8O0bmcgVHkgU2lub3RydWsgSMOgIE7hu5lp!5e0!3m2!1svi!2s!4v1770136668771!5m2!1svi!2s",width:"100%",height:"300",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:f,className:"grayscale-[50%] hover:grayscale-0 transition-all duration-500"})})]})]})},jZ=n=>{if(!n||!n.blocks)return null;const e=t=>typeof t=="string"?t:typeof t=="object"&&t!==null&&(t.content||t.text)||"";return n.blocks.map((t,i)=>{var r;switch(t.type){case"header":return E.jsx("div",{className:"text-2xl font-bold text-slate-800 mt-6 mb-3",dangerouslySetInnerHTML:{__html:t.data.text}},i);case"paragraph":return E.jsx("p",{className:"text-slate-600 leading-relaxed mb-4",dangerouslySetInnerHTML:{__html:t.data.text}},i);case"list":const s=t.data.style==="ordered"?"ol":"ul";return E.jsx(s,{className:`${t.data.style==="ordered"?"list-decimal":"list-disc"} list-inside text-slate-600 mb-4 space-y-1 pl-4`,children:t.data.items.map((o,a)=>E.jsx("li",{dangerouslySetInnerHTML:{__html:e(o)}},a))},i);case"checklist":return E.jsx("div",{className:"mb-4 space-y-2",children:t.data.items.map((o,a)=>E.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[E.jsx("span",{className:`material-symbols-outlined text-lg ${o.checked?"text-green-500":"text-slate-300"}`,children:o.checked?"check_box":"check_box_outline_blank"}),E.jsx("span",{dangerouslySetInnerHTML:{__html:o.text||""}})]},a))},i);case"image":return E.jsxs("figure",{className:"my-6",children:[E.jsx("img",{src:((r=t.data.file)==null?void 0:r.url)||t.data.url,alt:t.data.caption||"",className:"w-full rounded-xl shadow-lg"}),t.data.caption&&E.jsx("figcaption",{className:"text-center text-sm text-slate-500 mt-2",children:t.data.caption})]},i);default:return null}})},GZ=10,WZ=()=>{const[n,e]=F.useState([]),[t,i]=F.useState(!0),[r,s]=F.useState(null),[o,a]=F.useState(""),[l,c]=F.useState(1),[h,f]=F.useState({total:0,hasNext:!1,hasPrev:!1,totalPages:0}),[p,m]=F.useState(!1),[v,x]=F.useState("");F.useEffect(()=>{const w=setTimeout(()=>{x(o)},300);return()=>clearTimeout(w)},[o]);const _=F.useCallback(async(w=1,b="",A=!1)=>{try{A?m(!0):i(!0);const P=await w6({page:w,limit:GZ,search:b.trim(),is_published:!0});e(P.data||[]),f(P.pagination||{}),c(w)}catch(P){console.error("Error loading articles:",P),e([]),f({})}finally{i(!1),m(!1)}},[]);F.useEffect(()=>{_(1,v)},[_,v]),F.useEffect(()=>{v!==o&&v!==""&&c(1)},[v,o]);const g=w=>{w>=1&&w<=h.totalPages&&_(w,v)},S=w=>{a(w.target.value),w.target.value.trim()!==v&&m(!0)};return E.jsxs("div",{className:"min-h-screen bg-background",children:[E.jsxs("div",{className:"relative py-10 md:py-14 overflow-hidden",children:[E.jsx("div",{className:"absolute inset-0 z-0 bg-gradient-to-br from-primary/10 via-white to-sky-50"}),E.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center px-4",children:E.jsxs(Ct.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:"text-center",children:[E.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-slate-800 tracking-tighter mb-2",children:["BI",E.jsx("span",{className:"text-primary",children:" VIT"})]}),E.jsx("p",{className:"text-slate-500 text-sm md:text-base max-w-xl mx-auto",children:"Bi vit k thut v hng dn s dng ph tng xe ti"})]})})]}),E.jsxs("div",{className:"container mx-auto px-4 md:px-10 lg:px-20 py-4 md:py-8",children:[!r&&E.jsx("div",{className:"mb-8 flex justify-end",children:E.jsxs("div",{className:"relative w-full md:w-[480px]",children:[E.jsx("input",{type:"text",placeholder:"Tm kim bi vit...",value:o,onChange:S,className:"w-full pl-12 pr-12 py-3 bg-white border border-slate-200 rounded-xl text-slate-800 placeholder-slate-400 focus:outline-none focus:border-primary transition-all shadow-sm"}),E.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",children:"search"}),p&&E.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:E.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-primary border-t-transparent rounded-full"})})]})}),t?E.jsx("div",{className:"flex justify-center py-20",children:E.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-primary border-t-transparent rounded-full"})}):n.length===0?E.jsxs("div",{className:"text-center py-20",children:[E.jsx("span",{className:"material-symbols-outlined text-8xl text-slate-300 mb-6",children:"article"}),E.jsx("h2",{className:"text-2xl font-bold text-slate-600 mb-2",children:"Cha c bi vit no"}),E.jsx("p",{className:"text-slate-400 max-w-md mx-auto",children:"Cc bi vit hng dn k thut v thng tin v ph tng xe ti s c cp nht ti y."})]}):r?E.jsxs("div",{children:[E.jsxs("button",{onClick:()=>s(null),className:"flex items-center gap-2 text-slate-500 hover:text-primary transition-colors mb-8",children:[E.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"}),"Quay li danh sch"]}),E.jsxs("article",{className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-8 md:p-12 lg:p-16",children:[E.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-8 pb-8 border-b border-slate-200",children:[r.thumbnail&&E.jsx("div",{className:"md:w-48 flex-shrink-0",children:E.jsx("img",{src:r.thumbnail,alt:r.title,className:"w-full aspect-video object-cover rounded-xl shadow-md"})}),E.jsxs("div",{className:"flex-1",children:[E.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-800 mb-4",children:r.title}),E.jsx("div",{className:"flex items-center gap-4 text-sm text-slate-400",children:E.jsxs("span",{className:"flex items-center gap-1",children:[E.jsx("span",{className:"material-symbols-outlined text-sm",children:"calendar_today"}),new Date(r.created_at).toLocaleDateString("vi-VN")]})})]})]}),E.jsx("div",{className:"prose prose-slate max-w-none",children:jZ(r.content)})]})]}):E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"space-y-3",children:n.map((w,b)=>{var A,P,I,L;return E.jsx(Ct.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b*.05},className:"bg-white rounded-xl border border-slate-200 overflow-hidden hover:shadow-lg hover:border-primary/30 transition-all group cursor-pointer",onClick:()=>s(w),children:E.jsxs("div",{className:"flex flex-col md:flex-row gap-3 p-3",children:[E.jsx("div",{className:"md:w-40 md:flex-shrink-0",children:E.jsx("div",{className:"aspect-video w-full rounded-lg overflow-hidden bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center",children:w.thumbnail?E.jsx("img",{src:w.thumbnail,alt:w.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):E.jsx("span",{className:"material-symbols-outlined text-3xl text-slate-300 group-hover:text-primary/50 transition-colors",children:"article"})})}),E.jsxs("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[E.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-400 mb-1.5",children:[E.jsx("span",{className:"material-symbols-outlined text-xs",children:"calendar_today"}),E.jsx("span",{children:new Date(w.created_at).toLocaleDateString("vi-VN")})]}),E.jsx("h2",{className:"text-base md:text-lg font-bold text-slate-800 mb-1.5 group-hover:text-primary transition-colors line-clamp-2",children:w.title}),((A=w.content)==null?void 0:A.blocks)&&E.jsx("p",{className:"text-xs text-slate-600 line-clamp-2 mb-2",children:((L=(I=(P=w.content.blocks.find(R=>R.type==="paragraph"))==null?void 0:P.data)==null?void 0:I.text)==null?void 0:L.replace(/<[^>]*>/g,""))||""}),E.jsxs("div",{className:"flex items-center gap-1 text-primary text-xs font-semibold group-hover:gap-1.5 transition-all",children:[E.jsx("span",{children:"c thm"}),E.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_forward"})]})]})]})},w.id)})}),h.totalPages>1&&E.jsxs("div",{className:"flex flex-col items-center gap-4 mt-8",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs("button",{onClick:()=>g(l-1),disabled:!h.hasPrev,className:"px-4 py-2 bg-white border border-slate-200 text-slate-600 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-1",children:[E.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_left"}),"Trc"]}),E.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,h.totalPages)},(w,b)=>{let A;return h.totalPages<=5||l<=3?A=b+1:l>=h.totalPages-2?A=h.totalPages-4+b:A=l-2+b,E.jsx("button",{onClick:()=>g(A),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${l===A?"bg-primary text-white":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:A},A)})}),E.jsxs("button",{onClick:()=>g(l+1),disabled:!h.hasNext,className:"px-4 py-2 bg-white border border-slate-200 text-slate-600 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-1",children:["Sau",E.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"})]})]}),E.jsxs("div",{className:"text-center text-sm text-slate-500",children:["Trang ",l," / ",h.totalPages,"  Tng cng ",h.total," bi vit"]})]}),h.totalPages<=1&&h.total>0&&E.jsxs("div",{className:"text-center mt-6 text-sm text-slate-500",children:["Tng cng ",h.total," bi vit"]}),v&&h.total===0&&!t&&E.jsxs("div",{className:"text-center py-16",children:[E.jsx("span",{className:"material-symbols-outlined text-6xl text-slate-300 mb-4 block",children:"search_off"}),E.jsx("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"Khng tm thy bi vit"}),E.jsxs("p",{className:"text-slate-400",children:['Khng c bi vit no khp vi t kha "',E.jsx("strong",{children:v}),'"']})]})]}),E.jsxs("div",{className:"mt-6 text-center p-4 md:p-5 bg-gradient-to-r from-primary to-sky-600 rounded-2xl shadow-lg",children:[E.jsx("span",{className:"material-symbols-outlined text-4xl text-white/80 mb-2 block",children:"support_agent"}),E.jsx("h3",{className:"text-white text-lg font-bold mb-0.5",children:"Cn tra m ph tng?"}),E.jsx("p",{className:"text-white/80 text-sm mb-3",children:"Lin h hotline  c h tr tra cu v bo gi nhanh nht"}),E.jsxs("a",{href:"tel:0382890990",className:"inline-flex items-center gap-1.5 px-5 py-2.5 bg-white text-primary font-bold rounded-lg hover:bg-slate-100 transition-colors shadow-lg text-sm",children:[E.jsx("span",{className:"material-symbols-outlined text-lg",children:"call"}),"0382.890.990"]})]})]})]})},PR=80,XZ=()=>{const[n,e]=F.useState([]),[t,i]=F.useState(!0),[r,s]=F.useState(null),[o,a]=F.useState(1),[l,c]=F.useState(0),{settings:h}=vs(),f=h.site_name||"SINOTRUK H Ni";F.useEffect(()=>{(async()=>{i(!0);try{const b=await(await fetch(`/api/gallery-images?page=${o}&limit=${PR}`)).json();b.data?(e(b.data),c(b.count||0)):Array.isArray(b)&&(e(b),c(b.length))}catch(S){console.error("Error loading images:",S)}finally{i(!1)}})()},[o]);const p=Math.ceil(l/PR),m=()=>{const g=n.findIndex(S=>S.id===(r==null?void 0:r.id));g>0&&s(n[g-1])},v=()=>{const g=n.findIndex(S=>S.id===(r==null?void 0:r.id));g<n.length-1&&s(n[g+1])};F.useEffect(()=>{if(!r)return;const g=S=>{S.key==="Escape"?s(null):S.key==="ArrowLeft"?m():S.key==="ArrowRight"&&v()};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[r,n]);const x=g=>g?g.startsWith("http")?g:`/api/image?path=${encodeURIComponent(g)}`:"",_=F.useCallback((g,S,w)=>{g.preventDefault();const b=document.getElementById("gallery-image-menu");b&&b.remove();const A=S.includes("?")?`${S}&watermark=true`:`${S}?watermark=true`,P=document.createElement("div");if(P.id="gallery-image-menu",P.style.cssText=`
      position: fixed;
      top: ${g.clientY}px;
      left: ${g.clientX}px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      padding: 8px 0;
      z-index: 99999;
      min-width: 200px;
      font-family: system-ui, -apple-system, sans-serif;
      animation: menuFadeIn 0.15s ease-out;
    `,!document.getElementById("gallery-image-menu-styles")){const C=document.createElement("style");C.id="gallery-image-menu-styles",C.textContent=`
        @keyframes menuFadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
        #gallery-image-menu button {
          width: 100%;
          padding: 10px 16px;
          text-align: left;
          background: none;
          border: none;
          cursor: pointer;
          font-size: 14px;
          color: #374151;
          display: flex;
          align-items: center;
          gap: 10px;
          transition: background 0.1s;
        }
        #gallery-image-menu button:hover {
          background: #f3f4f6;
        }
        #gallery-image-menu button .icon {
          font-size: 18px;
          color: #6b7280;
        }
      `,document.head.appendChild(C)}const I=document.createElement("button");I.innerHTML=`
      <span class="material-symbols-outlined icon">download</span>
      <span>Ti nh xung</span>
    `,I.onclick=()=>{const C=document.createElement("a");C.href=A,C.download=`${w||"image"}_watermarked.jpg`,C.style.display="none",document.body.appendChild(C),C.click(),document.body.removeChild(C),P.remove()};const L=document.createElement("button");L.innerHTML=`
      <span class="material-symbols-outlined icon">link</span>
      <span>Sao chp link</span>
    `,L.onclick=()=>{navigator.clipboard.writeText(window.location.href),P.remove()},P.appendChild(I),P.appendChild(L),document.body.appendChild(P);const R=C=>{P.contains(C.target)||(P.remove(),document.removeEventListener("click",R))};setTimeout(()=>document.addEventListener("click",R),0)},[]);return E.jsxs("div",{className:"min-h-screen bg-background",children:[E.jsxs("div",{className:"relative py-10 md:py-14 overflow-hidden",children:[E.jsx("div",{className:"absolute inset-0 z-0 bg-gradient-to-br from-primary/10 via-white to-sky-50"}),E.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center px-4",children:E.jsxs(Ct.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:"text-center",children:[E.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-slate-800 tracking-tighter mb-2",children:["TH VIN ",E.jsx("span",{className:"text-primary",children:"NH"})]}),E.jsxs("p",{className:"text-slate-500 text-sm md:text-base max-w-xl mx-auto",children:["Hnh nh sn phm ph tng chnh hng ca ",f]})]})})]}),E.jsx("div",{className:"container mx-auto px-4 md:px-10 lg:px-20 py-4 md:py-8",children:t?E.jsx("div",{className:"flex justify-center items-center py-12",children:E.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):n.length>0?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-2 md:gap-3",children:n.map((g,S)=>E.jsx(Ct.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Math.min(S*.02,.5)},className:"group relative rounded-xl overflow-hidden bg-white shadow-md cursor-pointer",onClick:()=>s(g),onContextMenu:w=>_(w,x(g.image_path),g.title),children:E.jsx("div",{className:"aspect-square",children:E.jsx("img",{src:x(g.image_path),alt:g.title||"Gallery image",loading:"lazy",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"})})},g.id))}),p>1&&E.jsxs("div",{className:"flex justify-center gap-2 mt-8",children:[E.jsx("button",{onClick:()=>a(g=>Math.max(1,g-1)),disabled:o===1,className:"px-4 py-2 bg-white border border-slate-200 rounded-lg text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:E.jsx("span",{className:"material-symbols-outlined",children:"chevron_left"})}),E.jsxs("span",{className:"px-4 py-2 bg-white border border-slate-200 rounded-lg text-slate-600 font-medium",children:[o," / ",p]}),E.jsx("button",{onClick:()=>a(g=>Math.min(p,g+1)),disabled:o===p,className:"px-4 py-2 bg-white border border-slate-200 rounded-lg text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:E.jsx("span",{className:"material-symbols-outlined",children:"chevron_right"})})]})]}):E.jsxs("div",{className:"text-center py-16",children:[E.jsx("span",{className:"material-symbols-outlined text-6xl text-slate-300 mb-4",children:"photo_library"}),E.jsx("p",{className:"text-slate-500 text-lg",children:"Cha c hnh nh"}),E.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Vui lng thm nh trong trang qun tr"})]})}),r&&E.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4 md:p-8 lg:p-16",onClick:()=>s(null),children:E.jsxs(Ct.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"relative max-w-5xl w-full h-full flex flex-col justify-center",onClick:g=>g.stopPropagation(),children:[E.jsxs("div",{className:"absolute -top-4 md:-top-12 left-0 right-0 flex justify-between items-center",children:[E.jsxs("div",{className:"text-white/70 text-sm md:text-base font-medium",children:[n.findIndex(g=>g.id===r.id)+1," / ",n.length]}),E.jsx("button",{onClick:()=>s(null),className:"text-white/70 hover:text-white transition-colors",children:E.jsx("span",{className:"material-symbols-outlined text-2xl md:text-3xl",children:"close"})})]}),n.findIndex(g=>g.id===r.id)>0&&E.jsx("button",{onClick:m,className:"absolute left-2 md:-left-16 top-1/2 -translate-y-1/2 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white p-2 md:p-3 rounded-full transition-all duration-300 hover:scale-110 z-10","aria-label":"Previous image",children:E.jsx("span",{className:"material-symbols-outlined text-2xl md:text-3xl",children:"chevron_left"})}),n.findIndex(g=>g.id===r.id)<n.length-1&&E.jsx("button",{onClick:v,className:"absolute right-2 md:-right-16 top-1/2 -translate-y-1/2 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white p-2 md:p-3 rounded-full transition-all duration-300 hover:scale-110 z-10","aria-label":"Next image",children:E.jsx("span",{className:"material-symbols-outlined text-2xl md:text-3xl",children:"chevron_right"})}),E.jsx("div",{className:"relative max-h-[70vh] md:max-h-[80vh] flex items-center justify-center",children:E.jsx("img",{src:x(r.image_path),alt:r.title||"Gallery image",className:"max-w-full max-h-[70vh] md:max-h-[80vh] w-auto h-auto object-contain rounded-lg md:rounded-xl shadow-2xl",onContextMenu:g=>_(g,x(r.image_path),r.title)})})]})})]})};function YZ(){return E.jsxs(u4,{children:[E.jsx(p6,{}),E.jsx(m6,{}),E.jsx(u6,{children:E.jsx(f6,{children:E.jsxs(n4,{children:[E.jsx(ao,{path:"/",element:E.jsx(OZ,{})}),E.jsx(ao,{path:"/products",element:E.jsx(FZ,{})}),E.jsx(ao,{path:"/product/:slug",element:E.jsx(BZ,{})}),E.jsx(ao,{path:"/products/:category",element:E.jsx(zZ,{})}),E.jsx(ao,{path:"/about",element:E.jsx(VZ,{})}),E.jsx(ao,{path:"/contact",element:E.jsx(HZ,{})}),E.jsx(ao,{path:"/catalog",element:E.jsx(WZ,{})}),E.jsx(ao,{path:"/image-library",element:E.jsx(XZ,{})})]})})})]})}y1.createRoot(document.getElementById("root")).render(E.jsx(VR.StrictMode,{children:E.jsx(YZ,{})}));
